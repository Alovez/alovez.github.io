"use strict";var BaklavaJS=(()=>{var is=Object.defineProperty;var gc=Object.getOwnPropertyDescriptor;var yc=Object.getOwnPropertyNames;var _c=Object.prototype.hasOwnProperty;var Dn=(e,t)=>{for(var n in t)is(e,n,{get:t[n],enumerable:!0})},bc=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of yc(t))!_c.call(e,s)&&s!==n&&is(e,s,{get:()=>t[s],enumerable:!(o=gc(t,s))||o.enumerable});return e};var Ec=e=>bc(is({},"__esModule",{value:!0}),e);var im={};Dn(im,{Core:()=>us,Engine:()=>ps,InterfaceTypes:()=>vs,RendererVue:()=>jr,createBaklava:()=>rm});var us={};Dn(us,{AbstractNode:()=>cn,Connection:()=>an,DummyConnection:()=>Ft,DynamicNode:()=>fo,Editor:()=>Sn,GRAPH_NODE_TYPE_PREFIX:()=>jt,Graph:()=>We,GraphTemplate:()=>pt,Node:()=>Ut,NodeInterface:()=>xe,createGraphNodeType:()=>ls,defineDynamicNode:()=>Cc,defineNode:()=>uo,getGraphNodeTypeString:()=>nt});var co,wc=new Uint8Array(16);function as(){if(!co&&(co=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!co))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return co(wc)}var Ne=[];for(let e=0;e<256;++e)Ne.push((e+256).toString(16).slice(1));function zr(e,t=0){return(Ne[e[t+0]]+Ne[e[t+1]]+Ne[e[t+2]]+Ne[e[t+3]]+"-"+Ne[e[t+4]]+Ne[e[t+5]]+"-"+Ne[e[t+6]]+Ne[e[t+7]]+"-"+Ne[e[t+8]]+Ne[e[t+9]]+"-"+Ne[e[t+10]]+Ne[e[t+11]]+Ne[e[t+12]]+Ne[e[t+13]]+Ne[e[t+14]]+Ne[e[t+15]]).toLowerCase()}var Nc=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),cs={randomUUID:Nc};function Oc(e,t,n){if(cs.randomUUID&&!t&&!e)return cs.randomUUID();e=e||{};let o=e.random||(e.rng||as)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){n=n||0;for(let s=0;s<16;++s)t[n+s]=o[s];return t}return zr(o)}var $e=Oc;var Be=class{constructor(){this.listenerMap=new Map,this._listeners=[],this.proxyMap=new Map,this.proxies=[]}get listeners(){return this._listeners.concat(this.proxies.flatMap(t=>t()))}subscribe(t,n){this.listenerMap.has(t)&&(console.warn(`Already subscribed. Unsubscribing for you.
Please check that you don't accidentally use the same token twice to register two different handlers for the same event/hook.`),this.unsubscribe(t)),this.listenerMap.set(t,n),this._listeners.push(n)}unsubscribe(t){if(this.listenerMap.has(t)){let n=this.listenerMap.get(t);this.listenerMap.delete(t);let o=this._listeners.indexOf(n);o>=0&&this._listeners.splice(o,1)}}registerProxy(t,n){this.proxyMap.has(t)&&(console.warn(`Already subscribed. Unsubscribing for you.
Please check that you don't accidentally use the same token twice to register two different proxies for the same event/hook.`),this.unregisterProxy(t)),this.proxyMap.set(t,n),this.proxies.push(n)}unregisterProxy(t){if(!this.proxyMap.has(t))return;let n=this.proxyMap.get(t);this.proxyMap.delete(t);let o=this.proxies.indexOf(n);o>=0&&this.proxies.splice(o,1)}};var Z=class extends Be{constructor(t){super(),this.entity=t}emit(t){this.listeners.forEach(n=>n(t,this.entity))}},fe=class extends Be{constructor(t){super(),this.entity=t}emit(t){let n=!1,o=()=>[n=!0];for(let s of Array.from(this.listeners.values()))if(s(t,o,this.entity),n)return{prevented:!0};return{prevented:!1}}};var In=class extends Be{execute(t,n){let o=t;for(let s of this.listeners)o=s(o,n);return o}},pe=class extends In{constructor(t){super(),this.entity=t}execute(t){return super.execute(t,this.entity)}},lo=class extends Be{constructor(t){super(),this.entity=t}execute(t){let n=[];for(let o of this.listeners)n.push(o(t,this.entity));return n}};function Ke(){let e=Symbol(),t=new Map,n=new Set,o=(c,l)=>{l instanceof Be&&l.registerProxy(e,()=>{var u,d;return(d=(u=t.get(c))===null||u===void 0?void 0:u.listeners)!==null&&d!==void 0?d:[]})},s=c=>{let l=new Be;t.set(c,l),n.forEach(u=>o(c,u[c]))},r=c=>{n.add(c);for(let l of t.keys())o(l,c[l])},i=c=>{for(let l of t.keys())c[l]instanceof Be&&c[l].unregisterProxy(e);n.delete(c)},a=()=>{n.forEach(c=>i(c)),t.clear()};return new Proxy({},{get(c,l){return l==="addTarget"?r:l==="removeTarget"?i:l==="destroy"?a:typeof l!="string"||l.startsWith("_")?c[l]:(t.has(l)||s(l),t.get(l))}})}var an=class{constructor(t,n){if(this.destructed=!1,this.events={destruct:new Z(this)},!t||!n)throw new Error("Cannot initialize connection with null/undefined for 'from' or 'to' values");this.id=$e(),this.from=t,this.to=n,this.from.connectionCount++,this.to.connectionCount++}destruct(){this.events.destruct.emit(),this.from.connectionCount--,this.to.connectionCount--,this.destructed=!0}},Ft=class{constructor(t,n){if(!t||!n)throw new Error("Cannot initialize connection with null/undefined for 'from' or 'to' values");this.id=$e(),this.from=t,this.to=n}};function $n(e,t){return Object.fromEntries(Object.entries(e).map(([n,o])=>[n,t(o)]))}var cn=class{constructor(){this.id=$e(),this.events={loaded:new Z(this),beforeAddInput:new fe(this),addInput:new Z(this),beforeRemoveInput:new fe(this),removeInput:new Z(this),beforeAddOutput:new fe(this),addOutput:new Z(this),beforeRemoveOutput:new fe(this),removeOutput:new Z(this),update:new Z(this)},this.hooks={beforeLoad:new pe(this),afterSave:new pe(this)}}get graph(){return this.graphInstance}addInput(t,n){return this.addInterface("input",t,n)}addOutput(t,n){return this.addInterface("output",t,n)}removeInput(t){return this.removeInterface("input",t)}removeOutput(t){return this.removeInterface("output",t)}registerGraph(t){this.graphInstance=t}load(t){this.hooks.beforeLoad.execute(t),this.id=t.id,this.title=t.title,Object.entries(t.inputs).forEach(([n,o])=>{this.inputs[n]&&(this.inputs[n].load(o),this.inputs[n].nodeId=this.id)}),Object.entries(t.outputs).forEach(([n,o])=>{this.outputs[n]&&(this.outputs[n].load(o),this.outputs[n].nodeId=this.id)}),this.events.loaded.emit(this)}save(){let t=$n(this.inputs,s=>s.save()),n=$n(this.outputs,s=>s.save()),o={type:this.type,id:this.id,title:this.title,inputs:t,outputs:n};return this.hooks.afterSave.execute(o)}onPlaced(){}onDestroy(){}initializeIo(){Object.entries(this.inputs).forEach(([t,n])=>this.initializeIntf("input",t,n)),Object.entries(this.outputs).forEach(([t,n])=>this.initializeIntf("output",t,n))}initializeIntf(t,n,o){o.isInput=t==="input",o.nodeId=this.id,o.events.setValue.subscribe(this,()=>this.events.update.emit({type:t,name:n,intf:o}))}addInterface(t,n,o){let s=t==="input"?this.events.beforeAddInput:this.events.beforeAddOutput,r=t==="input"?this.events.addInput:this.events.addOutput,i=t==="input"?this.inputs:this.outputs;return s.emit(o).prevented?!1:(i[n]=o,this.initializeIntf(t,n,o),r.emit(o),!0)}removeInterface(t,n){let o=t==="input"?this.events.beforeRemoveInput:this.events.beforeRemoveOutput,s=t==="input"?this.events.removeInput:this.events.removeOutput,r=t==="input"?this.inputs[n]:this.outputs[n];if(!r||o.emit(r).prevented)return!1;if(r.connectionCount>0)if(this.graphInstance)this.graphInstance.connections.filter(a=>a.from===r||a.to===r).forEach(a=>{this.graphInstance.removeConnection(a)});else throw new Error("Interface is connected, but no graph instance is specified. Unable to delete interface");return r.events.setValue.unsubscribe(this),t==="input"?delete this.inputs[n]:delete this.outputs[n],s.emit(r),!0}},Ut=class extends cn{load(t){super.load(t)}save(){return super.save()}};function uo(e){return class extends Ut{constructor(){var t,n;super(),this.type=e.type,this.title=(t=e.title)!==null&&t!==void 0?t:e.type,this.inputs={},this.outputs={},this.calculate=e.calculate?(o,s)=>e.calculate.call(this,o,s):void 0,this.executeFactory("input",e.inputs),this.executeFactory("output",e.outputs),(n=e.onCreate)===null||n===void 0||n.call(this)}onPlaced(){var t;(t=e.onPlaced)===null||t===void 0||t.call(this)}onDestroy(){var t;(t=e.onDestroy)===null||t===void 0||t.call(this)}executeFactory(t,n){Object.keys(n||{}).forEach(o=>{let s=n[o]();t==="input"?this.addInput(o,s):this.addOutput(o,s)})}}}var fo=class extends Ut{};function Cc(e){return class extends fo{constructor(){var t,n,o,s;super(),this.type=e.type,this.title=(t=e.title)!==null&&t!==void 0?t:e.type,this.inputs={},this.outputs={},this.preventUpdate=!1,this.staticInputKeys=Object.keys((n=e.inputs)!==null&&n!==void 0?n:{}),this.staticOutputKeys=Object.keys((o=e.outputs)!==null&&o!==void 0?o:{}),this.executeFactory("input",e.inputs),this.executeFactory("output",e.outputs),e.calculate&&(this.calculate=(r,i)=>{var a;return(a=e.calculate)===null||a===void 0?void 0:a.call(this,r,i)}),(s=e.onCreate)===null||s===void 0||s.call(this)}onPlaced(){var t;this.events.update.subscribe(this,n=>{n&&(n.type==="input"&&this.staticInputKeys.includes(n.name)||n.type==="output"&&this.staticOutputKeys.includes(n.name))&&this.onUpdate()}),this.onUpdate(),(t=e.onPlaced)===null||t===void 0||t.call(this)}onDestroy(){var t;(t=e.onDestroy)===null||t===void 0||t.call(this)}load(t){this.preventUpdate=!0,this.hooks.beforeLoad.execute(t),this.id=t.id,this.title=t.title;for(let n of this.staticInputKeys)this.inputs[n].load(t.inputs[n]),this.inputs[n].nodeId=this.id;for(let n of this.staticOutputKeys)this.outputs[n].load(t.outputs[n]),this.outputs[n].nodeId=this.id;this.preventUpdate=!1,this.onUpdate(),this.preventUpdate=!0;for(let n of Object.keys(t.inputs))this.staticInputKeys.includes(n)||(this.inputs[n].load(t.inputs[n]),this.inputs[n].nodeId=this.id);for(let n of Object.keys(t.outputs))this.staticOutputKeys.includes(n)||(this.outputs[n].load(t.outputs[n]),this.outputs[n].nodeId=this.id);this.preventUpdate=!1,this.events.loaded.emit(this)}onUpdate(){var t,n,o,s;if(this.preventUpdate)return;this.graph&&this.graph.activeTransactions++;let r=this.getStaticValues(this.staticInputKeys,this.inputs),i=this.getStaticValues(this.staticOutputKeys,this.outputs),a=e.onUpdate.call(this,r,i);this.updateInterfaces("input",(t=a.inputs)!==null&&t!==void 0?t:{},(n=a.forceUpdateInputs)!==null&&n!==void 0?n:[]),this.updateInterfaces("output",(o=a.outputs)!==null&&o!==void 0?o:{},(s=a.forceUpdateOutputs)!==null&&s!==void 0?s:[]),this.graph&&this.graph.activeTransactions--}getStaticValues(t,n){let o={};for(let s of t)o[s]=n[s].value;return o}updateInterfaces(t,n,o){let s=t==="input"?this.staticInputKeys:this.staticOutputKeys,r=t==="input"?this.inputs:this.outputs;for(let i of Object.keys(r))s.includes(i)||n[i]&&!o.includes(i)||(t==="input"?this.removeInput(i):this.removeOutput(i));for(let i of Object.keys(n)){if(r[i])continue;let a=n[i]();t==="input"?this.addInput(i,a):this.addOutput(i,a)}}executeFactory(t,n){Object.keys(n||{}).forEach(o=>{let s=n[o]();t==="input"?this.addInput(o,s):this.addOutput(o,s)})}}}var We=class{get nodes(){return this._nodes}get connections(){return this._connections}get loading(){return this._loading}get destroying(){return this._destroying}constructor(t,n){this.id=$e(),this.inputs=[],this.outputs=[],this.activeTransactions=0,this._nodes=[],this._connections=[],this._loading=!1,this._destroying=!1,this.events={beforeAddNode:new fe(this),addNode:new Z(this),beforeRemoveNode:new fe(this),removeNode:new Z(this),beforeAddConnection:new fe(this),addConnection:new Z(this),checkConnection:new fe(this),beforeRemoveConnection:new fe(this),removeConnection:new Z(this)},this.hooks={save:new pe(this),load:new pe(this),checkConnection:new lo(this)},this.nodeEvents=Ke(),this.nodeHooks=Ke(),this.connectionEvents=Ke(),this.editor=t,this.template=n,t.registerGraph(this)}addNode(t){if(!this.events.beforeAddNode.emit(t).prevented)return this.nodeEvents.addTarget(t.events),this.nodeHooks.addTarget(t.hooks),t.registerGraph(this),this._nodes.push(t),t=this.nodes.find(n=>n.id===t.id),t.onPlaced(),this.events.addNode.emit(t),t}removeNode(t){if(this.nodes.includes(t)){if(this.events.beforeRemoveNode.emit(t).prevented)return;let n=[...Object.values(t.inputs),...Object.values(t.outputs)];this.connections.filter(o=>n.includes(o.from)||n.includes(o.to)).forEach(o=>this.removeConnection(o)),this._nodes.splice(this.nodes.indexOf(t),1),this.events.removeNode.emit(t),t.onDestroy(),this.nodeEvents.removeTarget(t.events),this.nodeHooks.removeTarget(t.hooks)}}addConnection(t,n){let o=this.checkConnection(t,n);if(!o.connectionAllowed||this.events.beforeAddConnection.emit({from:t,to:n}).prevented)return;for(let r of o.connectionsInDanger){let i=this.connections.find(a=>a.id===r.id);i&&this.removeConnection(i)}let s=new an(o.dummyConnection.from,o.dummyConnection.to);return this.internalAddConnection(s),s}removeConnection(t){if(this.connections.includes(t)){if(this.events.beforeRemoveConnection.emit(t).prevented)return;t.destruct(),this._connections.splice(this.connections.indexOf(t),1),this.events.removeConnection.emit(t),this.connectionEvents.removeTarget(t.events)}}checkConnection(t,n){if(!t||!n)return{connectionAllowed:!1};let o=this.findNodeById(t.nodeId),s=this.findNodeById(n.nodeId);if(o&&s&&o===s)return{connectionAllowed:!1};if(t.isInput&&!n.isInput){let a=t;t=n,n=a}if(t.isInput||!n.isInput)return{connectionAllowed:!1};if(this.connections.some(a=>a.from===t&&a.to===n))return{connectionAllowed:!1};if(this.events.checkConnection.emit({from:t,to:n}).prevented)return{connectionAllowed:!1};let r=this.hooks.checkConnection.execute({from:t,to:n});if(r.some(a=>!a.connectionAllowed))return{connectionAllowed:!1};let i=Array.from(new Set(r.flatMap(a=>a.connectionsInDanger)));return{connectionAllowed:!0,dummyConnection:new Ft(t,n),connectionsInDanger:i}}findNodeInterface(t){for(let n of this.nodes){for(let o in n.inputs){let s=n.inputs[o];if(s.id===t)return s}for(let o in n.outputs){let s=n.outputs[o];if(s.id===t)return s}}}findNodeById(t){return this.nodes.find(n=>n.id===t)}load(t){try{this._loading=!0;let n=[];for(let o=this.connections.length-1;o>=0;o--)this.removeConnection(this.connections[o]);for(let o=this.nodes.length-1;o>=0;o--)this.removeNode(this.nodes[o]);this.id=t.id,this.inputs=t.inputs,this.outputs=t.outputs;for(let o of t.nodes){let s=this.editor.nodeTypes.get(o.type);if(!s){n.push(`Node type ${o.type} is not registered`);continue}let r=new s.type;this.addNode(r),r.load(o)}for(let o of t.connections){let s=this.findNodeInterface(o.from),r=this.findNodeInterface(o.to);if(s)if(r){let i=new an(s,r);i.id=o.id,this.internalAddConnection(i)}else{n.push(`Could not find interface with id ${o.to}`);continue}else{n.push(`Could not find interface with id ${o.from}`);continue}}return this.hooks.load.execute(t),n}finally{this._loading=!1}}save(){let t={id:this.id,nodes:this.nodes.map(n=>n.save()),connections:this.connections.map(n=>({id:n.id,from:n.from.id,to:n.to.id})),inputs:this.inputs,outputs:this.outputs};return this.hooks.save.execute(t)}destroy(){this._destroying=!0;for(let t of this.nodes)this.removeNode(t);this.editor.unregisterGraph(this)}internalAddConnection(t){this.connectionEvents.addTarget(t.events),this._connections.push(t),this.events.addConnection.emit(t)}};var xe=class{set connectionCount(t){this._connectionCount=t,this.events.setConnectionCount.emit(t)}get connectionCount(){return this._connectionCount}set value(t){this.events.beforeSetValue.emit(t).prevented||(this._value=t,this.events.setValue.emit(t))}get value(){return this._value}constructor(t,n){this.id=$e(),this.nodeId="",this.port=!0,this.hidden=!1,this.events={setConnectionCount:new Z(this),beforeSetValue:new fe(this),setValue:new Z(this),updated:new Z(this)},this.hooks={load:new pe(this),save:new pe(this)},this._connectionCount=0,this.name=t,this._value=n}load(t){this.id=t.id,this.templateId=t.templateId,this.value=t.value,this.hooks.load.execute(t)}save(){let t={id:this.id,templateId:this.templateId,value:this.value};return this.hooks.save.execute(t)}setComponent(t){return this.component=t,this}setPort(t){return this.port=t,this}setHidden(t){return this.hidden=t,this}use(t,...n){return t(this,...n),this}};var jt="__baklava_GraphNode-";function nt(e){return jt+e.id}function ls(e){return class extends cn{constructor(){super(...arguments),this.type=nt(e),this._title="GraphNode",this.inputs={},this.outputs={},this.template=e,this.calculate=async(n,o)=>{if(!this.subgraph)throw new Error(`GraphNode ${this.id}: calculate called without subgraph being initialized`);if(typeof o.engine=="object"&&o.engine&&typeof o.engine.runGraph=="function"){let s=new Map;for(let c of this.subgraph.nodes)Object.values(c.inputs).forEach(l=>{l.connectionCount===0&&s.set(l.id,l.value)});Object.entries(n).forEach(([c,l])=>{let u=this.subgraph.inputs.find(d=>d.id===c);s.set(u.nodeInterfaceId,l)});let r=await o.engine.runGraph(this.subgraph,s,o.globalValues),i=new Map;r.forEach((c,l)=>{let u=this.subgraph.nodes.find(d=>d.id===l);c.forEach((d,h)=>{i.set(u.outputs[h].id,d)})});let a={};return this.subgraph.outputs.forEach(c=>{a[c.id]=i.get(c.nodeInterfaceId)}),a._calculationResults=r,a}}}get title(){return this._title}set title(n){this.template.name=n}load(n){if(!this.subgraph)throw new Error("Cannot load a graph node without a graph");if(!this.template)throw new Error("Unable to load graph node without graph template");this.subgraph.load(n.graphState),super.load(n)}save(){if(!this.subgraph)throw new Error("Cannot save a graph node without a graph");return{...super.save(),graphState:this.subgraph.save()}}onPlaced(){this.template.events.updated.subscribe(this,()=>this.initialize()),this.template.events.nameChanged.subscribe(this,n=>{this._title=n}),this.initialize()}onDestroy(){var n;this.template.events.updated.unsubscribe(this),this.template.events.nameChanged.unsubscribe(this),(n=this.subgraph)===null||n===void 0||n.destroy()}initialize(){this.subgraph&&this.subgraph.destroy(),this.subgraph=this.template.createGraph(),this._title=this.template.name,this.updateInterfaces(),this.events.update.emit(null)}updateInterfaces(){if(!this.subgraph)throw new Error("Trying to update interfaces without graph instance");for(let n of this.subgraph.inputs)n.id in this.inputs?this.inputs[n.id].name=n.name:this.addInput(n.id,new xe(n.name,void 0));for(let n of Object.keys(this.inputs))this.subgraph.inputs.some(o=>o.id===n)||this.removeInput(n);for(let n of this.subgraph.outputs)n.id in this.outputs?this.outputs[n.id].name=n.name:this.addOutput(n.id,new xe(n.name,void 0));for(let n of Object.keys(this.outputs))this.subgraph.outputs.some(o=>o.id===n)||this.removeOutput(n);this.addOutput("_calculationResults",new xe("_calculationResults",void 0).setHidden(!0))}}}var pt=class{static fromGraph(t,n){return new pt(t.save(),n)}get name(){return this._name}set name(t){this._name=t,this.events.nameChanged.emit(t);let n=this.editor.nodeTypes.get(nt(this));n&&(n.title=t)}constructor(t,n){this.id=$e(),this._name="Subgraph",this.events={nameChanged:new Z(this),updated:new Z(this)},this.hooks={beforeLoad:new pe(this),afterSave:new pe(this)},this.editor=n,t.id&&(this.id=t.id),t.name&&(this._name=t.name),this.update(t)}update(t){this.nodes=t.nodes,this.connections=t.connections,this.inputs=t.inputs,this.outputs=t.outputs,this.events.updated.emit()}save(){return{id:this.id,name:this.name,nodes:this.nodes,connections:this.connections,inputs:this.inputs,outputs:this.outputs}}createGraph(t){let n=new Map,o=d=>{let h=$e();return n.set(d,h),h},s=d=>{let h=n.get(d);if(!h)throw new Error(`Unable to create graph from template: Could not map old id ${d} to new id`);return h},r=d=>$n(d,h=>({id:o(h.id),templateId:h.id,value:h.value})),i=this.nodes.map(d=>({...d,id:o(d.id),inputs:r(d.inputs),outputs:r(d.outputs)})),a=this.connections.map(d=>({id:o(d.id),from:s(d.from),to:s(d.to)})),c=this.inputs.map(d=>({id:d.id,name:d.name,nodeInterfaceId:s(d.nodeInterfaceId)})),l=this.outputs.map(d=>({id:d.id,name:d.name,nodeInterfaceId:s(d.nodeInterfaceId)})),u={id:$e(),nodes:i,connections:a,inputs:c,outputs:l};return t||(t=new We(this.editor)),t.load(u),t.template=this,t}};var Sn=class{constructor(){this.events={loaded:new Z(this),beforeRegisterNodeType:new fe(this),registerNodeType:new Z(this),beforeUnregisterNodeType:new fe(this),unregisterNodeType:new Z(this),beforeAddGraphTemplate:new fe(this),addGraphTemplate:new Z(this),beforeRemoveGraphTemplate:new fe(this),removeGraphTemplate:new Z(this),registerGraph:new Z(this),unregisterGraph:new Z(this)},this.hooks={save:new pe(this),load:new pe(this)},this.graphTemplateEvents=Ke(),this.graphTemplateHooks=Ke(),this.graphEvents=Ke(),this.graphHooks=Ke(),this.nodeEvents=Ke(),this.nodeHooks=Ke(),this.connectionEvents=Ke(),this._graphs=new Set,this._nodeTypes=new Map,this._graph=new We(this),this._graphTemplates=[],this._loading=!1}get nodeTypes(){return this._nodeTypes}get graph(){return this._graph}get graphTemplates(){return this._graphTemplates}get graphs(){return this._graphs}get loading(){return this._loading}registerNodeType(t,n){var o,s;if(this.events.beforeRegisterNodeType.emit({type:t,options:n}).prevented)return;let r=new t;this._nodeTypes.set(r.type,{type:t,category:(o=n==null?void 0:n.category)!==null&&o!==void 0?o:"default",title:(s=n==null?void 0:n.title)!==null&&s!==void 0?s:r.title}),this.events.registerNodeType.emit({type:t,options:n})}unregisterNodeType(t){let n=typeof t=="string"?t:new t().type;if(this.nodeTypes.has(n)){if(this.events.beforeUnregisterNodeType.emit(n).prevented)return;this._nodeTypes.delete(n),this.events.unregisterNodeType.emit(n)}}addGraphTemplate(t){if(this.events.beforeAddGraphTemplate.emit(t).prevented)return;this._graphTemplates.push(t),this.graphTemplateEvents.addTarget(t.events),this.graphTemplateHooks.addTarget(t.hooks);let n=ls(t);this.registerNodeType(n,{category:"Subgraphs",title:t.name}),this.events.addGraphTemplate.emit(t)}removeGraphTemplate(t){if(this.graphTemplates.includes(t)){if(this.events.beforeRemoveGraphTemplate.emit(t).prevented)return;let n=nt(t);for(let o of[this.graph,...this.graphs.values()]){let s=o.nodes.filter(r=>r.type===n);for(let r of s)o.removeNode(r)}this.unregisterNodeType(n),this._graphTemplates.splice(this._graphTemplates.indexOf(t),1),this.graphTemplateEvents.removeTarget(t.events),this.graphTemplateHooks.removeTarget(t.hooks),this.events.removeGraphTemplate.emit(t)}}registerGraph(t){this.graphEvents.addTarget(t.events),this.graphHooks.addTarget(t.hooks),this.nodeEvents.addTarget(t.nodeEvents),this.nodeHooks.addTarget(t.nodeHooks),this.connectionEvents.addTarget(t.connectionEvents),this.events.registerGraph.emit(t),this._graphs.add(t)}unregisterGraph(t){this.graphEvents.removeTarget(t.events),this.graphHooks.removeTarget(t.hooks),this.nodeEvents.removeTarget(t.nodeEvents),this.nodeHooks.removeTarget(t.nodeHooks),this.connectionEvents.removeTarget(t.connectionEvents),this.events.unregisterGraph.emit(t),this._graphs.delete(t)}load(t){try{this._loading=!0,t=this.hooks.load.execute(t),t.graphTemplates.forEach(o=>{let s=new pt(o,this);this.addGraphTemplate(s)});let n=this._graph.load(t.graph);return this.events.loaded.emit(),n.forEach(o=>console.warn(o)),n}finally{this._loading=!1}}save(){let t={graph:this.graph.save(),graphTemplates:this.graphTemplates.map(n=>n.save())};return this.hooks.save.execute(t)}};var ps={};Dn(ps,{BaseEngine:()=>Mn,CycleError:()=>Vn,DependencyEngine:()=>fs,EngineStatus:()=>De,allowMultipleConnections:()=>Tc,applyResult:()=>xc,containsCycle:()=>ds,sortTopologically:()=>po});function xc(e,t){let n=new Map;t.graphs.forEach(o=>{o.nodes.forEach(s=>n.set(s.id,s))}),e.forEach((o,s)=>{let r=n.get(s);r&&o.forEach((i,a)=>{let c=r.outputs[a];c&&(c.value=i)})})}var Vn=class extends Error{constructor(){super("Cycle detected")}};function kc(e){return typeof e=="string"}function po(e,t){let n=new Map,o=new Map,s=new Map,r,i;if(e instanceof We)r=e.nodes,i=e.connections;else{if(!t)throw new Error("Invalid argument value: expected array of connections");r=e,i=t}r.forEach(l=>{Object.values(l.inputs).forEach(u=>n.set(u.id,l.id)),Object.values(l.outputs).forEach(u=>n.set(u.id,l.id))}),r.forEach(l=>{let u=i.filter(h=>h.from&&n.get(h.from.id)===l.id),d=new Set(u.map(h=>n.get(h.to.id)).filter(kc));o.set(l.id,d),s.set(l,u)});let a=r.slice();i.forEach(l=>{let u=a.findIndex(d=>n.get(l.to.id)===d.id);u>=0&&a.splice(u,1)});let c=[];for(;a.length>0;){let l=a.pop();c.push(l);let u=o.get(l.id);for(;u.size>0;){let d=u.values().next().value;if(u.delete(d),Array.from(o.values()).every(h=>!h.has(d))){let h=r.find(m=>m.id===d);a.push(h)}}}if(Array.from(o.values()).some(l=>l.size>0))throw new Vn;return{calculationOrder:c,connectionsFromNode:s,interfaceIdToNodeId:n}}function ds(e,t){try{return po(e,t),!1}catch(n){if(n instanceof Vn)return!0;throw n}}var De;(function(e){e.Running="Running",e.Idle="Idle",e.Paused="Paused",e.Stopped="Stopped"})(De||(De={}));var Mn=class{get status(){return this.isRunning?De.Running:this.internalStatus}constructor(t){this.editor=t,this.events={beforeRun:new fe(this),afterRun:new Z(this),statusChange:new Z(this)},this.hooks={gatherCalculationData:new pe(this),transferData:new In},this.recalculateOrder=!0,this.internalStatus=De.Stopped,this.isRunning=!1,this.editor.nodeEvents.update.subscribe(this,(n,o)=>{o.graph&&!o.graph.loading&&o.graph.activeTransactions===0&&this.internalOnChange(o,n!=null?n:void 0)}),this.editor.graphEvents.addNode.subscribe(this,(n,o)=>{this.recalculateOrder=!0,!o.loading&&o.activeTransactions===0&&this.internalOnChange()}),this.editor.graphEvents.removeNode.subscribe(this,(n,o)=>{this.recalculateOrder=!0,!o.loading&&o.activeTransactions===0&&this.internalOnChange()}),this.editor.graphEvents.addConnection.subscribe(this,(n,o)=>{this.recalculateOrder=!0,!o.loading&&o.activeTransactions===0&&this.internalOnChange()}),this.editor.graphEvents.removeConnection.subscribe(this,(n,o)=>{this.recalculateOrder=!0,!o.loading&&o.activeTransactions===0&&this.internalOnChange()}),this.editor.graphHooks.checkConnection.subscribe(this,n=>this.checkConnection(n.from,n.to))}start(){this.internalStatus===De.Stopped&&(this.internalStatus=De.Idle,this.events.statusChange.emit(this.status))}pause(){this.internalStatus===De.Idle&&(this.internalStatus=De.Paused,this.events.statusChange.emit(this.status))}resume(){this.internalStatus===De.Paused&&(this.internalStatus=De.Idle,this.events.statusChange.emit(this.status))}stop(){(this.internalStatus===De.Idle||this.internalStatus===De.Paused)&&(this.internalStatus=De.Stopped,this.events.statusChange.emit(this.status))}async runOnce(t,...n){if(this.events.beforeRun.emit(t).prevented)return null;try{this.isRunning=!0,this.events.statusChange.emit(this.status),this.recalculateOrder&&this.calculateOrder();let o=await this.execute(t,...n);return this.events.afterRun.emit(o),o}finally{this.isRunning=!1,this.events.statusChange.emit(this.status)}}checkConnection(t,n){if(t.templateId){let r=this.findInterfaceByTemplateId(this.editor.graph.nodes,t.templateId);if(!r)return{connectionAllowed:!0,connectionsInDanger:[]};t=r}if(n.templateId){let r=this.findInterfaceByTemplateId(this.editor.graph.nodes,n.templateId);if(!r)return{connectionAllowed:!0,connectionsInDanger:[]};n=r}let o=new Ft(t,n),s=this.editor.graph.connections.slice();return n.allowMultipleConnections||(s=s.filter(r=>r.to!==n)),s.push(o),ds(this.editor.graph.nodes,s)?{connectionAllowed:!1,connectionsInDanger:[]}:{connectionAllowed:!0,connectionsInDanger:n.allowMultipleConnections?[]:this.editor.graph.connections.filter(r=>r.to===n)}}calculateOrder(){this.recalculateOrder=!0}async calculateWithoutData(...t){let n=this.hooks.gatherCalculationData.execute(void 0);return await this.runOnce(n,...t)}validateNodeCalculationOutput(t,n){if(typeof n!="object")throw new Error(`Invalid calculation return value from node ${t.id} (type ${t.type})`);Object.keys(t.outputs).forEach(o=>{if(!(o in n))throw new Error(`Calculation return value from node ${t.id} (type ${t.type}) is missing key "${o}"`)})}internalOnChange(t,n){this.internalStatus===De.Idle&&this.onChange(this.recalculateOrder,t,n)}findInterfaceByTemplateId(t,n){for(let o of t)for(let s of[...Object.values(o.inputs),...Object.values(o.outputs)])if(s.templateId===n)return s;return null}};var Tc=e=>{e.allowMultipleConnections=!0},fs=class extends Mn{constructor(t){super(t),this.order=new Map}start(){super.start(),this.recalculateOrder=!0,this.calculateWithoutData()}async runGraph(t,n,o){this.order.has(t.id)||this.order.set(t.id,po(t));let{calculationOrder:s,connectionsFromNode:r}=this.order.get(t.id),i=new Map;for(let a of s){if(!a.calculate)continue;let c={};Object.entries(a.inputs).forEach(([u,d])=>{if(!n.has(d.id))throw new Error(`Could not find value for interface ${d.id}
This is likely a Baklava internal issue. Please report it on GitHub.`);c[u]=n.get(d.id)});let l=await a.calculate(c,{globalValues:o,engine:this});this.validateNodeCalculationOutput(a,l),i.set(a.id,new Map(Object.entries(l))),r.has(a)&&r.get(a).forEach(u=>{var d;let h=(d=Object.entries(a.outputs).find(([,v])=>v.id===u.from.id))===null||d===void 0?void 0:d[0];if(!h)throw new Error(`Could not find key for interface ${u.from.id}
This is likely a Baklava internal issue. Please report it on GitHub.`);let m=this.hooks.transferData.execute(l[h],u);u.to.allowMultipleConnections?n.has(u.to.id)?n.get(u.to.id).push(m):n.set(u.to.id,[m]):n.set(u.to.id,m)})}return i}async execute(t){this.recalculateOrder&&(this.order.clear(),this.recalculateOrder=!1);let n=new Map;for(let o of this.editor.graph.nodes)Object.values(o.inputs).forEach(s=>{s.connectionCount===0&&n.set(s.id,s.value)});return await this.runGraph(this.editor.graph,n,t)}onChange(t){this.recalculateOrder=t||this.recalculateOrder,this.calculateWithoutData()}};var vs={};Dn(vs,{BaklavaInterfaceTypes:()=>ms,NodeInterfaceType:()=>hs,setType:()=>Dc});var hs=class{constructor(t){this.name=t,this.conversions=[]}addConversion(t,n=o=>o){return this.conversions.push({targetType:t.name,transformationFunction:n}),this}},Dc=(e,t)=>{e.type=t.name},ms=class{constructor(t,n){this.types=new Map,this.editor=t,this.editor.graphEvents.checkConnection.subscribe(this,({from:o,to:s},r)=>{let i=o.type,a=s.type;if(!(!i||!a)&&!this.canConvert(i,a))return r()}),n?.engine&&n.engine.hooks.transferData.subscribe(this,(o,s)=>{let r=s.from.type,i=s.to.type;return!r||!i?o:this.convert(r,i,o)}),n?.viewPlugin&&n.viewPlugin.hooks.renderInterface.subscribe(this,({intf:o,el:s})=>(o.type&&s.setAttribute("data-interface-type",o.type),{intf:o,el:s}))}addTypes(...t){return t.forEach(n=>{this.types.set(n.name,n)}),this}getConversion(t,n){var o,s;return(s=(o=this.types.get(t))===null||o===void 0?void 0:o.conversions.find(r=>r.targetType===n))!==null&&s!==void 0?s:null}canConvert(t,n){return t===n||this.types.has(t)&&this.types.get(t).conversions.some(o=>o.targetType===n)}convert(t,n,o){if(t===n)return o;{let s=this.getConversion(t,n);if(s)return s.transformationFunction(o);throw Error(`Can not convert from "${t}" to "${n}"`)}}};var jr={};Dn(jr,{ButtonInterface:()=>_r,ButtonInterfaceComponent:()=>nc,CheckboxInterface:()=>br,CheckboxInterfaceComponent:()=>oc,Commands:()=>Lp,Components:()=>sm,EditorComponent:()=>Fr,IntegerInterface:()=>Er,IntegerInterfaceComponent:()=>sc,NumberInterface:()=>wr,NumberInterfaceComponent:()=>rc,SelectInterface:()=>Nr,SelectInterfaceComponent:()=>ic,SliderInterface:()=>Or,SliderInterfaceComponent:()=>ac,TextInputInterface:()=>oo,TextInputInterfaceComponent:()=>cc,TextInterface:()=>Cr,providePlugin:()=>qa,useBaklava:()=>Ur,useCommandHandler:()=>hc,useDragMove:()=>Tr,useGraph:()=>Ye,useTransform:()=>Ga,useViewModel:()=>et});function ln(e,t){let n=Object.create(null),o=e.split(",");for(let s=0;s<o.length;s++)n[o[s]]=!0;return t?s=>!!n[s.toLowerCase()]:s=>!!n[s]}function Fe(e){if(L(e)){let t={};for(let n=0;n<e.length;n++){let o=e[n],s=de(o)?Vc(o):Fe(o);if(s)for(let r in s)t[r]=s[r]}return t}else{if(de(e))return e;if(se(e))return e}}var Ic=/;(?![^(]*\))/g,$c=/:([^]+)/,Sc=/\/\*.*?\*\//gs;function Vc(e){let t={};return e.replace(Sc,"").split(Ic).forEach(n=>{if(n){let o=n.split($c);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function _e(e){let t="";if(de(e))t=e;else if(L(e))for(let n=0;n<e.length;n++){let o=_e(e[n]);o&&(t+=o+" ")}else if(se(e))for(let n in e)e[n]&&(t+=n+" ");return t.trim()}var Gr="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Yr=ln(Gr),Av=ln(Gr+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected");function gs(e){return!!e||e===""}var ge=e=>de(e)?e:e==null?"":L(e)||se(e)&&(e.toString===Qr||!K(e.toString))?JSON.stringify(e,Xr,2):String(e),Xr=(e,t)=>t&&t.__v_isRef?Xr(e,t.value):Nt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[o,s])=>(n[`${o} =>`]=s,n),{})}:mo(t)?{[`Set(${t.size})`]:[...t.values()]}:se(t)&&!L(t)&&!bs(t)?String(t):t,ae={},Ht=[],Se=()=>{},Jr=()=>!1,Mc=/^on[^a-z]/,un=e=>Mc.test(e),Pn=e=>e.startsWith("onUpdate:"),he=Object.assign,ho=(e,t)=>{let n=e.indexOf(t);n>-1&&e.splice(n,1)},Pc=Object.prototype.hasOwnProperty,Q=(e,t)=>Pc.call(e,t),L=Array.isArray,Nt=e=>go(e)==="[object Map]",mo=e=>go(e)==="[object Set]";var K=e=>typeof e=="function",de=e=>typeof e=="string",vo=e=>typeof e=="symbol",se=e=>e!==null&&typeof e=="object",ys=e=>se(e)&&K(e.then)&&K(e.catch),Qr=Object.prototype.toString,go=e=>Qr.call(e),_s=e=>go(e).slice(8,-1),bs=e=>go(e)==="[object Object]",yo=e=>de(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,An=ln(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted");var _o=e=>{let t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Ac=/-(\w)/g,Ve=_o(e=>e.replace(Ac,(t,n)=>n?n.toUpperCase():"")),Rc=/\B([A-Z])/g,ht=_o(e=>e.replace(Rc,"-$1").toLowerCase()),Lt=_o(e=>e.charAt(0).toUpperCase()+e.slice(1)),Rn=_o(e=>e?`on${Lt(e)}`:""),Bt=(e,t)=>!Object.is(e,t),dn=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},fn=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Ot=e=>{let t=parseFloat(e);return isNaN(t)?e:t},qr,bo=()=>qr||(qr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});var Ue,Un=class{constructor(t=!1){this.detached=t,this.active=!0,this.effects=[],this.cleanups=[],this.parent=Ue,!t&&Ue&&(this.index=(Ue.scopes||(Ue.scopes=[])).push(this)-1)}run(t){if(this.active){let n=Ue;try{return Ue=this,t()}finally{Ue=n}}}on(){Ue=this}off(){Ue=this.parent}stop(t){if(this.active){let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.scopes)for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){let s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this.active=!1}}};function Fc(e,t=Ue){t&&t.active&&t.effects.push(e)}function Ds(){return Ue}function Is(e){Ue&&Ue.cleanups.push(e)}var $s=e=>{let t=new Set(e);return t.w=0,t.n=0,t},ii=e=>(e.w&kt)>0,ai=e=>(e.n&kt)>0,Uc=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=kt},jc=e=>{let{deps:t}=e;if(t.length){let n=0;for(let o=0;o<t.length;o++){let s=t[o];ii(s)&&!ai(s)?s.delete(e):t[n++]=s,s.w&=~kt,s.n&=~kt}t.length=n}},Es=new WeakMap,Fn=0,kt=1,ws=30,Qe,Kt=Symbol(""),Ns=Symbol(""),Wt=class{constructor(t,n=null,o){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Fc(this,o)}run(){if(!this.active)return this.fn();let t=Qe,n=xt;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Qe,Qe=this,xt=!0,kt=1<<++Fn,Fn<=ws?Uc(this):Zr(this),this.fn()}finally{Fn<=ws&&jc(this),kt=1<<--Fn,Qe=this.parent,xt=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Qe===this?this.deferStop=!0:this.active&&(Zr(this),this.onStop&&this.onStop(),this.active=!1)}};function Zr(e){let{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}var xt=!0,ci=[];function Dt(){ci.push(xt),xt=!1}function It(){let e=ci.pop();xt=e===void 0?!0:e}function Me(e,t,n){if(xt&&Qe){let o=Es.get(e);o||Es.set(e,o=new Map);let s=o.get(n);s||o.set(n,s=$s()),li(s,void 0)}}function li(e,t){let n=!1;Fn<=ws?ai(e)||(e.n|=kt,n=!ii(e)):n=!e.has(Qe),n&&(e.add(Qe),Qe.deps.push(e))}function ot(e,t,n,o,s,r){let i=Es.get(e);if(!i)return;let a=[];if(t==="clear")a=[...i.values()];else if(n==="length"&&L(e)){let l=Ot(o);i.forEach((u,d)=>{(d==="length"||d>=l)&&a.push(u)})}else switch(n!==void 0&&a.push(i.get(n)),t){case"add":L(e)?yo(n)&&a.push(i.get("length")):(a.push(i.get(Kt)),Nt(e)&&a.push(i.get(Ns)));break;case"delete":L(e)||(a.push(i.get(Kt)),Nt(e)&&a.push(i.get(Ns)));break;case"set":Nt(e)&&a.push(i.get(Kt));break}let c=void 0;if(a.length===1)a[0]&&Os(a[0]);else{let l=[];for(let u of a)u&&l.push(...u);Os($s(l))}}function Os(e,t){let n=L(e)?e:[...e];for(let o of n)o.computed&&ei(o,t);for(let o of n)o.computed||ei(o,t)}function ei(e,t){(e!==Qe||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}var Hc=ln("__proto__,__v_isRef,__isVue"),ui=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(vo)),Lc=xo(),Bc=xo(!1,!0),Kc=xo(!0),Wc=xo(!0,!0),ti=zc();function zc(){let e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){let o=Y(this);for(let r=0,i=this.length;r<i;r++)Me(o,"get",r+"");let s=o[t](...n);return s===-1||s===!1?o[t](...n.map(Y)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Dt();let o=Y(this)[t].apply(this,n);return It(),o}}),e}function xo(e=!1,t=!1){return function(o,s,r){if(s==="__v_isReactive")return!e;if(s==="__v_isReadonly")return e;if(s==="__v_isShallow")return t;if(s==="__v_raw"&&r===(e?t?gi:vi:t?mi:hi).get(o))return o;let i=L(o);if(!e&&i&&Q(ti,s))return Reflect.get(ti,s,r);let a=Reflect.get(o,s,r);return(vo(s)?ui.has(s):Hc(s))||(e||Me(o,"get",s),t)?a:me(a)?i&&yo(s)?a:a.value:se(a)?e?Ms(a):Pe(a):a}}var qc=di(),Gc=di(!0);function di(e=!1){return function(n,o,s,r){let i=n[o];if(Tt(i)&&me(i)&&!me(s))return!1;if(!e&&(!pn(s)&&!Tt(s)&&(i=Y(i),s=Y(s)),!L(n)&&me(i)&&!me(s)))return i.value=s,!0;let a=L(n)&&yo(o)?Number(o)<n.length:Q(n,o),c=Reflect.set(n,o,s,r);return n===Y(r)&&(a?Bt(s,i)&&ot(n,"set",o,s,i):ot(n,"add",o,s)),c}}function Yc(e,t){let n=Q(e,t),o=e[t],s=Reflect.deleteProperty(e,t);return s&&n&&ot(e,"delete",t,void 0,o),s}function Xc(e,t){let n=Reflect.has(e,t);return(!vo(t)||!ui.has(t))&&Me(e,"has",t),n}function Jc(e){return Me(e,"iterate",L(e)?"length":Kt),Reflect.ownKeys(e)}var fi={get:Lc,set:qc,deleteProperty:Yc,has:Xc,ownKeys:Jc},pi={get:Kc,set(e,t){return!0},deleteProperty(e,t){return!0}},Qc=he({},fi,{get:Bc,set:Gc}),Zc=he({},pi,{get:Wc}),Ss=e=>e,ko=e=>Reflect.getPrototypeOf(e);function Eo(e,t,n=!1,o=!1){e=e.__v_raw;let s=Y(e),r=Y(t);n||(t!==r&&Me(s,"get",t),Me(s,"get",r));let{has:i}=ko(s),a=o?Ss:n?As:jn;if(i.call(s,t))return a(e.get(t));if(i.call(s,r))return a(e.get(r));e!==s&&e.get(t)}function wo(e,t=!1){let n=this.__v_raw,o=Y(n),s=Y(e);return t||(e!==s&&Me(o,"has",e),Me(o,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function No(e,t=!1){return e=e.__v_raw,!t&&Me(Y(e),"iterate",Kt),Reflect.get(e,"size",e)}function ni(e){e=Y(e);let t=Y(this);return ko(t).has.call(t,e)||(t.add(e),ot(t,"add",e,e)),this}function oi(e,t){t=Y(t);let n=Y(this),{has:o,get:s}=ko(n),r=o.call(n,e);r||(e=Y(e),r=o.call(n,e));let i=s.call(n,e);return n.set(e,t),r?Bt(t,i)&&ot(n,"set",e,t,i):ot(n,"add",e,t),this}function si(e){let t=Y(this),{has:n,get:o}=ko(t),s=n.call(t,e);s||(e=Y(e),s=n.call(t,e));let r=o?o.call(t,e):void 0,i=t.delete(e);return s&&ot(t,"delete",e,void 0,r),i}function ri(){let e=Y(this),t=e.size!==0,n=void 0,o=e.clear();return t&&ot(e,"clear",void 0,void 0,n),o}function Oo(e,t){return function(o,s){let r=this,i=r.__v_raw,a=Y(i),c=t?Ss:e?As:jn;return!e&&Me(a,"iterate",Kt),i.forEach((l,u)=>o.call(s,c(l),c(u),r))}}function Co(e,t,n){return function(...o){let s=this.__v_raw,r=Y(s),i=Nt(r),a=e==="entries"||e===Symbol.iterator&&i,c=e==="keys"&&i,l=s[e](...o),u=n?Ss:t?As:jn;return!t&&Me(r,"iterate",c?Ns:Kt),{next(){let{value:d,done:h}=l.next();return h?{value:d,done:h}:{value:a?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function Ct(e){return function(...t){return e==="delete"?!1:this}}function el(){let e={get(r){return Eo(this,r)},get size(){return No(this)},has:wo,add:ni,set:oi,delete:si,clear:ri,forEach:Oo(!1,!1)},t={get(r){return Eo(this,r,!1,!0)},get size(){return No(this)},has:wo,add:ni,set:oi,delete:si,clear:ri,forEach:Oo(!1,!0)},n={get(r){return Eo(this,r,!0)},get size(){return No(this,!0)},has(r){return wo.call(this,r,!0)},add:Ct("add"),set:Ct("set"),delete:Ct("delete"),clear:Ct("clear"),forEach:Oo(!0,!1)},o={get(r){return Eo(this,r,!0,!0)},get size(){return No(this,!0)},has(r){return wo.call(this,r,!0)},add:Ct("add"),set:Ct("set"),delete:Ct("delete"),clear:Ct("clear"),forEach:Oo(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{e[r]=Co(r,!1,!1),n[r]=Co(r,!0,!1),t[r]=Co(r,!1,!0),o[r]=Co(r,!0,!0)}),[e,n,t,o]}var[tl,nl,ol,sl]=el();function To(e,t){let n=t?e?sl:ol:e?nl:tl;return(o,s,r)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?o:Reflect.get(Q(n,s)&&s in o?n:o,s,r)}var rl={get:To(!1,!1)},il={get:To(!1,!0)},al={get:To(!0,!1)},cl={get:To(!0,!0)};var hi=new WeakMap,mi=new WeakMap,vi=new WeakMap,gi=new WeakMap;function ll(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ul(e){return e.__v_skip||!Object.isExtensible(e)?0:ll(_s(e))}function Pe(e){return Tt(e)?e:Do(e,!1,fi,rl,hi)}function Vs(e){return Do(e,!1,Qc,il,mi)}function Ms(e){return Do(e,!0,pi,al,vi)}function Ps(e){return Do(e,!0,Zc,cl,gi)}function Do(e,t,n,o,s){if(!se(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;let r=s.get(e);if(r)return r;let i=ul(e);if(i===0)return e;let a=new Proxy(e,i===2?o:n);return s.set(e,a),a}function $t(e){return Tt(e)?$t(e.__v_raw):!!(e&&e.__v_isReactive)}function Tt(e){return!!(e&&e.__v_isReadonly)}function pn(e){return!!(e&&e.__v_isShallow)}function Io(e){return $t(e)||Tt(e)}function Y(e){let t=e&&e.__v_raw;return t?Y(t):e}function je(e){return fn(e,"__v_skip",!0),e}var jn=e=>se(e)?Pe(e):e,As=e=>se(e)?Ms(e):e;function Rs(e){xt&&Qe&&(e=Y(e),li(e.dep||(e.dep=$s())))}function Fs(e,t){e=Y(e),e.dep&&Os(e.dep)}function me(e){return!!(e&&e.__v_isRef===!0)}function B(e){return dl(e,!1)}function dl(e,t){return me(e)?e:new Cs(e,t)}var Cs=class{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Y(t),this._value=n?t:jn(t)}get value(){return Rs(this),this._value}set value(t){let n=this.__v_isShallow||pn(t)||Tt(t);t=n?t:Y(t),Bt(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:jn(t),Fs(this,t))}};function mt(e){return me(e)?e.value:e}var fl={get:(e,t,n)=>mt(Reflect.get(e,t,n)),set:(e,t,n,o)=>{let s=e[t];return me(s)&&!me(n)?(s.value=n,!0):Reflect.set(e,t,n,o)}};function $o(e){return $t(e)?e:new Proxy(e,fl)}var xs=class{constructor(t){this.dep=void 0,this.__v_isRef=!0;let{get:n,set:o}=t(()=>Rs(this),()=>Fs(this));this._get=n,this._set=o}get value(){return this._get()}set value(t){this._set(t)}};function Us(e){return new xs(e)}function js(e){let t=L(e)?new Array(e.length):{};for(let n in e)t[n]=vt(e,n);return t}var ks=class{constructor(t,n,o){this._object=t,this._key=n,this._defaultValue=o,this.__v_isRef=!0}get value(){let t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}};function vt(e,t,n){let o=e[t];return me(o)?o:new ks(e,t,n)}var yi,Ts=class{constructor(t,n,o,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[yi]=!1,this._dirty=!0,this.effect=new Wt(t,()=>{this._dirty||(this._dirty=!0,Fs(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=o}get value(){let t=Y(this);return Rs(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}};yi="__v_isReadonly";function _i(e,t,n=!1){let o,s,r=K(e);return r?(o=e,s=Se):(o=e.get,s=e.set),new Ts(o,s,r||!s,n)}var pl;pl="__v_isReadonly";var Ln=[];function Pi(e,...t){}function hl(){let e=Ln[Ln.length-1];if(!e)return[];let t=[];for(;e;){let n=t[0];n&&n.vnode===e?n.recurseCount++:t.push({vnode:e,recurseCount:0});let o=e.component&&e.component.parent;e=o&&o.vnode}return t}function ml(e){let t=[];return e.forEach((n,o)=>{t.push(...o===0?[]:[`
`],...vl(n))}),t}function vl({vnode:e,recurseCount:t}){let n=t>0?`... (${t} recursive calls)`:"",o=e.component?e.component.parent==null:!1,s=` at <${pa(e.component,e.type,o)}`,r=">"+n;return e.props?[s,...gl(e.props),r]:[s+r]}function gl(e){let t=[],n=Object.keys(e);return n.slice(0,3).forEach(o=>{t.push(...Ai(o,e[o]))}),n.length>3&&t.push(" ..."),t}function Ai(e,t,n){return de(t)?(t=JSON.stringify(t),n?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?n?t:[`${e}=${t}`]:me(t)?(t=Ai(e,Y(t.value),!0),n?t:[`${e}=Ref<`,t,">"]):K(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=Y(t),n?t:[`${e}=`,t])}function yt(e,t,n,o){let s;try{s=o?e(...o):e()}catch(r){Ro(r,t,n)}return s}function He(e,t,n,o){if(K(e)){let r=yt(e,t,n,o);return r&&ys(r)&&r.catch(i=>{Ro(i,t,n)}),r}let s=[];for(let r=0;r<e.length;r++)s.push(He(e[r],t,n,o));return s}function Ro(e,t,n,o=!0){let s=t?t.vnode:null;if(t){let r=t.parent,i=t.proxy,a=n;for(;r;){let l=r.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](e,i,a)===!1)return}r=r.parent}let c=t.appContext.config.errorHandler;if(c){yt(c,null,10,[e,i,a]);return}}yl(e,n,s,o)}function yl(e,t,n,o=!0){console.error(e)}var zn=!1,Ks=!1,ke=[],it=0,hn=[],gt=null,Yt=0,Ri=Promise.resolve(),Js=null;function _n(e){let t=Js||Ri;return e?t.then(this?e.bind(this):e):t}function _l(e){let t=it+1,n=ke.length;for(;t<n;){let o=t+n>>>1;qn(ke[o])<e?t=o+1:n=o}return t}function Qs(e){(!ke.length||!ke.includes(e,zn&&e.allowRecurse?it+1:it))&&(e.id==null?ke.push(e):ke.splice(_l(e.id),0,e),Fi())}function Fi(){!zn&&!Ks&&(Ks=!0,Js=Ri.then(ji))}function bl(e){let t=ke.indexOf(e);t>it&&ke.splice(t,1)}function El(e){L(e)?hn.push(...e):(!gt||!gt.includes(e,e.allowRecurse?Yt+1:Yt))&&hn.push(e),Fi()}function bi(e,t=zn?it+1:0){for(;t<ke.length;t++){let n=ke[t];n&&n.pre&&(ke.splice(t,1),t--,n())}}function Ui(e){if(hn.length){let t=[...new Set(hn)];if(hn.length=0,gt){gt.push(...t);return}for(gt=t,gt.sort((n,o)=>qn(n)-qn(o)),Yt=0;Yt<gt.length;Yt++)gt[Yt]();gt=null,Yt=0}}var qn=e=>e.id==null?1/0:e.id,wl=(e,t)=>{let n=qn(e)-qn(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function ji(e){Ks=!1,zn=!0,ke.sort(wl);let t=Se;try{for(it=0;it<ke.length;it++){let n=ke[it];n&&n.active!==!1&&yt(n,null,14)}}finally{it=0,ke.length=0,Ui(e),zn=!1,Js=null,(ke.length||hn.length)&&ji(e)}}var at,Hn=[],Ws=!1;function Fo(e,...t){at?at.emit(e,...t):Ws||Hn.push({event:e,args:t})}function Hi(e,t){var n,o;at=e,at?(at.enabled=!0,Hn.forEach(({event:s,args:r})=>at.emit(s,...r)),Hn=[]):typeof window<"u"&&window.HTMLElement&&!(!((o=(n=window.navigator)===null||n===void 0?void 0:n.userAgent)===null||o===void 0)&&o.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(r=>{Hi(r,t)}),setTimeout(()=>{at||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Ws=!0,Hn=[])},3e3)):(Ws=!0,Hn=[])}function Nl(e,t){Fo("app:init",e,t,{Fragment:te,Text:Xn,Comment:Le,Static:mn})}function Ol(e){Fo("app:unmount",e)}var Cl=Zs("component:added"),Li=Zs("component:updated"),xl=Zs("component:removed"),kl=e=>{at&&typeof at.cleanupBuffer=="function"&&!at.cleanupBuffer(e)&&xl(e)};function Zs(e){return t=>{Fo(e,t.appContext.app,t.uid,t.parent?t.parent.uid:void 0,t)}}function Tl(e,t,n){Fo("component:emit",e.appContext.app,e,t,n)}function Dl(e,t,...n){if(e.isUnmounted)return;let o=e.vnode.props||ae,s=n,r=t.startsWith("update:"),i=r&&t.slice(7);if(i&&i in o){let u=`${i==="modelValue"?"model":i}Modifiers`,{number:d,trim:h}=o[u]||ae;h&&(s=n.map(m=>de(m)?m.trim():m)),d&&(s=n.map(Ot))}__VUE_PROD_DEVTOOLS__&&Tl(e,t,s);let a,c=o[a=Rn(t)]||o[a=Rn(Ve(t))];!c&&r&&(c=o[a=Rn(ht(t))]),c&&He(c,e,6,s);let l=o[a+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,He(l,e,6,s)}}function Bi(e,t,n=!1){let o=t.emitsCache,s=o.get(e);if(s!==void 0)return s;let r=e.emits,i={},a=!1;if(__VUE_OPTIONS_API__&&!K(e)){let c=l=>{let u=Bi(l,t,!0);u&&(a=!0,he(i,u))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!r&&!a?(se(e)&&o.set(e,null),null):(L(r)?r.forEach(c=>i[c]=null):he(i,r),se(e)&&o.set(e,i),i)}function Uo(e,t){return!e||!un(t)?!1:(t=t.slice(2).replace(/Once$/,""),Q(e,t[0].toLowerCase()+t.slice(1))||Q(e,ht(t))||Q(e,t))}var Oe=null,Ki=null;function Mo(e){let t=Oe;return Oe=e,Ki=e&&e.type.__scopeId||null,t}function bn(e,t=Oe,n){if(!t||e._n)return e;let o=(...s)=>{o._d&&Ii(-1);let r=Mo(t),i;try{i=e(...s)}finally{Mo(r),o._d&&Ii(1)}return __VUE_PROD_DEVTOOLS__&&Li(t),i};return o._n=!0,o._c=!0,o._d=!0,o}function Hs(e){let{type:t,vnode:n,proxy:o,withProxy:s,props:r,propsOptions:[i],slots:a,attrs:c,emit:l,render:u,renderCache:d,data:h,setupState:m,ctx:v,inheritAttrs:y}=e,D,P,w=Mo(e);try{if(n.shapeFlag&4){let j=s||o;D=rt(u.call(j,j,d,r,m,h,v)),P=c}else{let j=t;D=rt(j.length>1?j(r,{attrs:c,slots:a,emit:l}):j(r,null)),P=t.props?c:Il(c)}}catch(j){Wn.length=0,Ro(j,e,1),D=J(Le)}let V=D,S;if(P&&y!==!1){let j=Object.keys(P),{shapeFlag:G}=V;j.length&&G&7&&(i&&j.some(Pn)&&(P=$l(P,i)),V=Vt(V,P))}return n.dirs&&(V=Vt(V),V.dirs=V.dirs?V.dirs.concat(n.dirs):n.dirs),n.transition&&(V.transition=n.transition),D=V,Mo(w),D}var Il=e=>{let t;for(let n in e)(n==="class"||n==="style"||un(n))&&((t||(t={}))[n]=e[n]);return t},$l=(e,t)=>{let n={};for(let o in e)(!Pn(o)||!(o.slice(9)in t))&&(n[o]=e[o]);return n};function Sl(e,t,n){let{props:o,children:s,component:r}=e,{props:i,children:a,patchFlag:c}=t,l=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return o?Ei(o,i,l):!!i;if(c&8){let u=t.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(i[h]!==o[h]&&!Uo(l,h))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:o===i?!1:o?i?Ei(o,i,l):!0:!!i;return!1}function Ei(e,t,n){let o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let s=0;s<o.length;s++){let r=o[s];if(t[r]!==e[r]&&!Uo(n,r))return!0}return!1}function Vl({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}var Ml=e=>e.__isSuspense;function Pl(e,t){t&&t.pendingBranch?L(e)?t.effects.push(...e):t.effects.push(e):El(e)}function jo(e,t){if(Ee){let n=Ee.provides,o=Ee.parent&&Ee.parent.provides;o===n&&(n=Ee.provides=Object.create(o)),n[e]=t}}function Qt(e,t,n=!1){let o=Ee||Oe;if(o){let s=o.parent==null?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&K(t)?t.call(o.proxy):t}}var So={};function ct(e,t,n){return Wi(e,t,n)}function Wi(e,t,{immediate:n,deep:o,flush:s,onTrack:r,onTrigger:i}=ae){let a=S=>{Pi("Invalid watch source: ",S,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},c=Ee,l,u=!1,d=!1;if(me(e)?(l=()=>e.value,u=pn(e)):$t(e)?(l=()=>e,o=!0):L(e)?(d=!0,u=e.some(S=>$t(S)||pn(S)),l=()=>e.map(S=>{if(me(S))return S.value;if($t(S))return Jt(S);if(K(S))return yt(S,c,2)})):K(e)?t?l=()=>yt(e,c,2):l=()=>{if(!(c&&c.isUnmounted))return h&&h(),He(e,c,3,[m])}:l=Se,t&&o){let S=l;l=()=>Jt(S())}let h,m=S=>{h=w.onStop=()=>{yt(S,c,4)}},v;if(Yn)if(m=Se,t?n&&He(t,c,3,[l(),d?[]:void 0,m]):l(),s==="sync"){let S=Cu();v=S.__watcherHandles||(S.__watcherHandles=[])}else return Se;let y=d?new Array(e.length).fill(So):So,D=()=>{if(w.active)if(t){let S=w.run();(o||u||(d?S.some((j,G)=>Bt(j,y[G])):Bt(S,y)))&&(h&&h(),He(t,c,3,[S,y===So?void 0:d&&y[0]===So?[]:y,m]),y=S)}else w.run()};D.allowRecurse=!!t;let P;s==="sync"?P=D:s==="post"?P=()=>Ae(D,c&&c.suspense):(D.pre=!0,c&&(D.id=c.uid),P=()=>Qs(D));let w=new Wt(l,P);t?n?D():y=w.run():s==="post"?Ae(w.run.bind(w),c&&c.suspense):w.run();let V=()=>{w.stop(),c&&c.scope&&ho(c.scope.effects,w)};return v&&v.push(V),V}function Al(e,t,n){let o=this.proxy,s=de(e)?e.includes(".")?zi(o,e):()=>o[e]:e.bind(o,o),r;K(t)?r=t:(r=t.handler,n=t);let i=Ee;yn(this);let a=Wi(s,r.bind(o),n);return i?yn(i):Zt(),a}function zi(e,t){let n=t.split(".");return()=>{let o=e;for(let s=0;s<n.length&&o;s++)o=o[n[s]];return o}}function Jt(e,t){if(!se(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),me(e))Jt(e.value,t);else if(L(e))for(let n=0;n<e.length;n++)Jt(e[n],t);else if(mo(e)||Nt(e))e.forEach(n=>{Jt(n,t)});else if(bs(e))for(let n in e)Jt(e[n],t);return e}function er(){let e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Mt(()=>{e.isMounted=!0}),Ko(()=>{e.isUnmounting=!0}),e}var ze=[Function,Array],Rl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ze,onEnter:ze,onAfterEnter:ze,onEnterCancelled:ze,onBeforeLeave:ze,onLeave:ze,onAfterLeave:ze,onLeaveCancelled:ze,onBeforeAppear:ze,onAppear:ze,onAfterAppear:ze,onAppearCancelled:ze},setup(e,{slots:t}){let n=cr(),o=er(),s;return()=>{let r=t.default&&Ho(t.default(),!0);if(!r||!r.length)return;let i=r[0];if(r.length>1){let y=!1;for(let D of r)if(D.type!==Le){i=D,y=!0;break}}let a=Y(e),{mode:c}=a;if(o.isLeaving)return Ls(i);let l=wi(i);if(!l)return Ls(i);let u=vn(l,a,o,n);gn(l,u);let d=n.subTree,h=d&&wi(d),m=!1,{getTransitionKey:v}=l.type;if(v){let y=v();s===void 0?s=y:y!==s&&(s=y,m=!0)}if(h&&h.type!==Le&&(!Xt(l,h)||m)){let y=vn(h,a,o,n);if(gn(h,y),c==="out-in")return o.isLeaving=!0,y.afterLeave=()=>{o.isLeaving=!1,n.update.active!==!1&&n.update()},Ls(i);c==="in-out"&&l.type!==Le&&(y.delayLeave=(D,P,w)=>{let V=qi(o,h);V[String(h.key)]=h,D._leaveCb=()=>{P(),D._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=w})}return i}}},tr=Rl;function qi(e,t){let{leavingVNodes:n}=e,o=n.get(t.type);return o||(o=Object.create(null),n.set(t.type,o)),o}function vn(e,t,n,o){let{appear:s,mode:r,persisted:i=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:l,onEnterCancelled:u,onBeforeLeave:d,onLeave:h,onAfterLeave:m,onLeaveCancelled:v,onBeforeAppear:y,onAppear:D,onAfterAppear:P,onAppearCancelled:w}=t,V=String(e.key),S=qi(n,e),j=(N,F)=>{N&&He(N,o,9,F)},G=(N,F)=>{let W=F[1];j(N,F),L(N)?N.every(re=>re.length<=1)&&W():N.length<=1&&W()},x={mode:r,persisted:i,beforeEnter(N){let F=a;if(!n.isMounted)if(s)F=y||a;else return;N._leaveCb&&N._leaveCb(!0);let W=S[V];W&&Xt(e,W)&&W.el._leaveCb&&W.el._leaveCb(),j(F,[N])},enter(N){let F=c,W=l,re=u;if(!n.isMounted)if(s)F=D||c,W=P||l,re=w||u;else return;let M=!1,ee=N._enterCb=Te=>{M||(M=!0,Te?j(re,[N]):j(W,[N]),x.delayedLeave&&x.delayedLeave(),N._enterCb=void 0)};F?G(F,[N,ee]):ee()},leave(N,F){let W=String(e.key);if(N._enterCb&&N._enterCb(!0),n.isUnmounting)return F();j(d,[N]);let re=!1,M=N._leaveCb=ee=>{re||(re=!0,F(),ee?j(v,[N]):j(m,[N]),N._leaveCb=void 0,S[W]===e&&delete S[W])};S[W]=e,h?G(h,[N,M]):M()},clone(N){return vn(N,t,n,o)}};return x}function Ls(e){if(Lo(e))return e=Vt(e),e.children=null,e}function wi(e){return Lo(e)?e.children?e.children[0]:void 0:e}function gn(e,t){e.shapeFlag&6&&e.component?gn(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Ho(e,t=!1,n){let o=[],s=0;for(let r=0;r<e.length;r++){let i=e[r],a=n==null?i.key:String(n)+String(i.key!=null?i.key:r);i.type===te?(i.patchFlag&128&&s++,o=o.concat(Ho(i.children,t,a))):(t||i.type!==Le)&&o.push(a!=null?Vt(i,{key:a}):i)}if(s>1)for(let r=0;r<o.length;r++)o[r].patchFlag=-2;return o}function ue(e){return K(e)?{setup:e,name:e.name}:e}var Bn=e=>!!e.type.__asyncLoader;var Lo=e=>e.type.__isKeepAlive;function Fl(e,t){Gi(e,"a",t)}function Ul(e,t){Gi(e,"da",t)}function Gi(e,t,n=Ee){let o=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Bo(t,o,n),n){let s=n.parent;for(;s&&s.parent;)Lo(s.parent.vnode)&&jl(o,t,n,s),s=s.parent}}function jl(e,t,n,o){let s=Bo(t,e,o,!0);nr(()=>{ho(o[t],s)},n)}function Bo(e,t,n=Ee,o=!1){if(n){let s=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...i)=>{if(n.isUnmounted)return;Dt(),yn(n);let a=He(t,n,e,i);return Zt(),It(),a});return o?s.unshift(r):s.push(r),r}}var _t=e=>(t,n=Ee)=>(!Yn||e==="sp")&&Bo(e,(...o)=>t(...o),n),Hl=_t("bm"),Mt=_t("m"),Ll=_t("bu"),En=_t("u"),Ko=_t("bum"),nr=_t("um"),Bl=_t("sp"),Kl=_t("rtg"),Wl=_t("rtc");function zl(e,t=Ee){Bo("ec",e,t)}function Pt(e,t){let n=Oe;if(n===null)return e;let o=qo(n)||n.proxy,s=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[i,a,c,l=ae]=t[r];i&&(K(i)&&(i={mounted:i,updated:i}),i.deep&&Jt(a),s.push({dir:i,instance:o,value:a,oldValue:void 0,arg:c,modifiers:l}))}return e}function zt(e,t,n,o){let s=e.dirs,r=t&&t.dirs;for(let i=0;i<s.length;i++){let a=s[i];r&&(a.oldValue=r[i].value);let c=a.dir[o];c&&(Dt(),He(c,n,8,[e.el,a,e,t]),It())}}var or="components";function be(e,t){return Xi(or,e,!0,t)||e}var Yi=Symbol();function Wo(e){return de(e)?Xi(or,e,!1)||e:e||Yi}function Xi(e,t,n=!0,o=!1){let s=Oe||Ee;if(s){let r=s.type;if(e===or){let a=fa(r,!1);if(a&&(a===t||a===Ve(t)||a===Lt(Ve(t))))return r}let i=Ni(s[e]||r[e],t)||Ni(s.appContext[e],t);return!i&&o?r:i}}function Ni(e,t){return e&&(e[t]||e[Ve(t)]||e[Lt(Ve(t))])}function qe(e,t,n,o){let s,r=n&&n[o];if(L(e)||de(e)){s=new Array(e.length);for(let i=0,a=e.length;i<a;i++)s[i]=t(e[i],i,void 0,r&&r[i])}else if(typeof e=="number"){s=new Array(e);for(let i=0;i<e;i++)s[i]=t(i+1,i,void 0,r&&r[i])}else if(se(e))if(e[Symbol.iterator])s=Array.from(e,(i,a)=>t(i,a,void 0,r&&r[a]));else{let i=Object.keys(e);s=new Array(i.length);for(let a=0,c=i.length;a<c;a++){let l=i[a];s[a]=t(e[l],l,a,r&&r[a])}}else s=[];return n&&(n[o]=s),s}function bt(e,t,n={},o,s){if(Oe.isCE||Oe.parent&&Bn(Oe.parent)&&Oe.parent.isCE)return t!=="default"&&(n.name=t),J("slot",n,o&&o());let r=e[t];r&&r._c&&(r._d=!1),k();let i=r&&Ji(r(n)),a=we(te,{key:n.key||i&&i.key||`_${t}`},i||(o?o():[]),i&&e._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function Ji(e){return e.some(t=>Ao(t)?!(t.type===Le||t.type===te&&!Ji(t.children)):!0)?e:null}var zs=e=>e?ua(e)?qo(e)||e.proxy:zs(e.parent):null,Kn=he(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>zs(e.parent),$root:e=>zs(e.root),$emit:e=>e.emit,$options:e=>__VUE_OPTIONS_API__?sr(e):e.type,$forceUpdate:e=>e.f||(e.f=()=>Qs(e.update)),$nextTick:e=>e.n||(e.n=_n.bind(e.proxy)),$watch:e=>__VUE_OPTIONS_API__?Al.bind(e):Se});var Bs=(e,t)=>e!==ae&&!e.__isScriptSetup&&Q(e,t),ql={get({_:e},t){let{ctx:n,setupState:o,data:s,props:r,accessCache:i,type:a,appContext:c}=e,l;if(t[0]!=="$"){let m=i[t];if(m!==void 0)switch(m){case 1:return o[t];case 2:return s[t];case 4:return n[t];case 3:return r[t]}else{if(Bs(o,t))return i[t]=1,o[t];if(s!==ae&&Q(s,t))return i[t]=2,s[t];if((l=e.propsOptions[0])&&Q(l,t))return i[t]=3,r[t];if(n!==ae&&Q(n,t))return i[t]=4,n[t];(!__VUE_OPTIONS_API__||qs)&&(i[t]=0)}}let u=Kn[t],d,h;if(u)return t==="$attrs"&&Me(e,"get",t),u(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(n!==ae&&Q(n,t))return i[t]=4,n[t];if(h=c.config.globalProperties,Q(h,t))return h[t]},set({_:e},t,n){let{data:o,setupState:s,ctx:r}=e;return Bs(s,t)?(s[t]=n,!0):o!==ae&&Q(o,t)?(o[t]=n,!0):Q(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:o,appContext:s,propsOptions:r}},i){let a;return!!n[i]||e!==ae&&Q(e,i)||Bs(t,i)||(a=r[0])&&Q(a,i)||Q(o,i)||Q(Kn,i)||Q(s.config.globalProperties,i)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Q(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};var qs=!0;function Gl(e){let t=sr(e),n=e.proxy,o=e.ctx;qs=!1,t.beforeCreate&&Oi(t.beforeCreate,e,"bc");let{data:s,computed:r,methods:i,watch:a,provide:c,inject:l,created:u,beforeMount:d,mounted:h,beforeUpdate:m,updated:v,activated:y,deactivated:D,beforeDestroy:P,beforeUnmount:w,destroyed:V,unmounted:S,render:j,renderTracked:G,renderTriggered:x,errorCaptured:N,serverPrefetch:F,expose:W,inheritAttrs:re,components:M,directives:ee,filters:Te}=t;if(l&&Yl(l,o,null,e.appContext.config.unwrapInjectedRef),i)for(let ce in i){let ie=i[ce];K(ie)&&(o[ce]=ie.bind(n))}if(s){let ce=s.call(n,n);se(ce)&&(e.data=Pe(ce))}if(qs=!0,r)for(let ce in r){let ie=r[ce],dt=K(ie)?ie.bind(n,n):K(ie.get)?ie.get.bind(n,n):Se,os=!K(ie)&&K(ie.set)?ie.set.bind(n):Se,kn=q({get:dt,set:os});Object.defineProperty(o,ce,{enumerable:!0,configurable:!0,get:()=>kn.value,set:on=>kn.value=on})}if(a)for(let ce in a)Qi(a[ce],o,n,ce);if(c){let ce=K(c)?c.call(n):c;Reflect.ownKeys(ce).forEach(ie=>{jo(ie,ce[ie])})}u&&Oi(u,e,"c");function ve(ce,ie){L(ie)?ie.forEach(dt=>ce(dt.bind(n))):ie&&ce(ie.bind(n))}if(ve(Hl,d),ve(Mt,h),ve(Ll,m),ve(En,v),ve(Fl,y),ve(Ul,D),ve(zl,N),ve(Wl,G),ve(Kl,x),ve(Ko,w),ve(nr,S),ve(Bl,F),L(W))if(W.length){let ce=e.exposed||(e.exposed={});W.forEach(ie=>{Object.defineProperty(ce,ie,{get:()=>n[ie],set:dt=>n[ie]=dt})})}else e.exposed||(e.exposed={});j&&e.render===Se&&(e.render=j),re!=null&&(e.inheritAttrs=re),M&&(e.components=M),ee&&(e.directives=ee)}function Yl(e,t,n=Se,o=!1){L(e)&&(e=Gs(e));for(let s in e){let r=e[s],i;se(r)?"default"in r?i=Qt(r.from||s,r.default,!0):i=Qt(r.from||s):i=Qt(r),me(i)&&o?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[s]=i}}function Oi(e,t,n){He(L(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,n)}function Qi(e,t,n,o){let s=o.includes(".")?zi(n,o):()=>n[o];if(de(e)){let r=t[e];K(r)&&ct(s,r)}else if(K(e))ct(s,e.bind(n));else if(se(e))if(L(e))e.forEach(r=>Qi(r,t,n,o));else{let r=K(e.handler)?e.handler.bind(n):t[e.handler];K(r)&&ct(s,r,e)}}function sr(e){let t=e.type,{mixins:n,extends:o}=t,{mixins:s,optionsCache:r,config:{optionMergeStrategies:i}}=e.appContext,a=r.get(t),c;return a?c=a:!s.length&&!n&&!o?c=t:(c={},s.length&&s.forEach(l=>Po(c,l,i,!0)),Po(c,t,i)),se(t)&&r.set(t,c),c}function Po(e,t,n,o=!1){let{mixins:s,extends:r}=t;r&&Po(e,r,n,!0),s&&s.forEach(i=>Po(e,i,n,!0));for(let i in t)if(!(o&&i==="expose")){let a=Xl[i]||n&&n[i];e[i]=a?a(e[i],t[i]):t[i]}return e}var Xl={data:Ci,props:Gt,emits:Gt,methods:Gt,computed:Gt,beforeCreate:Ie,created:Ie,beforeMount:Ie,mounted:Ie,beforeUpdate:Ie,updated:Ie,beforeDestroy:Ie,beforeUnmount:Ie,destroyed:Ie,unmounted:Ie,activated:Ie,deactivated:Ie,errorCaptured:Ie,serverPrefetch:Ie,components:Gt,directives:Gt,watch:Ql,provide:Ci,inject:Jl};function Ci(e,t){return t?e?function(){return he(K(e)?e.call(this,this):e,K(t)?t.call(this,this):t)}:t:e}function Jl(e,t){return Gt(Gs(e),Gs(t))}function Gs(e){if(L(e)){let t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Ie(e,t){return e?[...new Set([].concat(e,t))]:t}function Gt(e,t){return e?he(he(Object.create(null),e),t):t}function Ql(e,t){if(!e)return t;if(!t)return e;let n=he(Object.create(null),e);for(let o in t)n[o]=Ie(e[o],t[o]);return n}function Zl(e,t,n,o=!1){let s={},r={};fn(r,zo,1),e.propsDefaults=Object.create(null),Zi(e,t,s,r);for(let i in e.propsOptions[0])i in s||(s[i]=void 0);n?e.props=o?s:Vs(s):e.type.props?e.props=s:e.props=r,e.attrs=r}function eu(e,t,n,o){let{props:s,attrs:r,vnode:{patchFlag:i}}=e,a=Y(s),[c]=e.propsOptions,l=!1;if((o||i>0)&&!(i&16)){if(i&8){let u=e.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(Uo(e.emitsOptions,h))continue;let m=t[h];if(c)if(Q(r,h))m!==r[h]&&(r[h]=m,l=!0);else{let v=Ve(h);s[v]=Ys(c,a,v,m,e,!1)}else m!==r[h]&&(r[h]=m,l=!0)}}}else{Zi(e,t,s,r)&&(l=!0);let u;for(let d in a)(!t||!Q(t,d)&&((u=ht(d))===d||!Q(t,u)))&&(c?n&&(n[d]!==void 0||n[u]!==void 0)&&(s[d]=Ys(c,a,d,void 0,e,!0)):delete s[d]);if(r!==a)for(let d in r)(!t||!Q(t,d))&&(delete r[d],l=!0)}l&&ot(e,"set","$attrs")}function Zi(e,t,n,o){let[s,r]=e.propsOptions,i=!1,a;if(t)for(let c in t){if(An(c))continue;let l=t[c],u;s&&Q(s,u=Ve(c))?!r||!r.includes(u)?n[u]=l:(a||(a={}))[u]=l:Uo(e.emitsOptions,c)||(!(c in o)||l!==o[c])&&(o[c]=l,i=!0)}if(r){let c=Y(n),l=a||ae;for(let u=0;u<r.length;u++){let d=r[u];n[d]=Ys(s,c,d,l[d],e,!Q(l,d))}}return i}function Ys(e,t,n,o,s,r){let i=e[n];if(i!=null){let a=Q(i,"default");if(a&&o===void 0){let c=i.default;if(i.type!==Function&&K(c)){let{propsDefaults:l}=s;n in l?o=l[n]:(yn(s),o=l[n]=c.call(null,t),Zt())}else o=c}i[0]&&(r&&!a?o=!1:i[1]&&(o===""||o===ht(n))&&(o=!0))}return o}function ea(e,t,n=!1){let o=t.propsCache,s=o.get(e);if(s)return s;let r=e.props,i={},a=[],c=!1;if(__VUE_OPTIONS_API__&&!K(e)){let u=d=>{c=!0;let[h,m]=ea(d,t,!0);he(i,h),m&&a.push(...m)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!r&&!c)return se(e)&&o.set(e,Ht),Ht;if(L(r))for(let u=0;u<r.length;u++){let d=Ve(r[u]);xi(d)&&(i[d]=ae)}else if(r)for(let u in r){let d=Ve(u);if(xi(d)){let h=r[u],m=i[d]=L(h)||K(h)?{type:h}:Object.assign({},h);if(m){let v=Di(Boolean,m.type),y=Di(String,m.type);m[0]=v>-1,m[1]=y<0||v<y,(v>-1||Q(m,"default"))&&a.push(d)}}}let l=[i,a];return se(e)&&o.set(e,l),l}function xi(e){return e[0]!=="$"}function ki(e){let t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function Ti(e,t){return ki(e)===ki(t)}function Di(e,t){return L(t)?t.findIndex(n=>Ti(n,e)):K(t)&&Ti(t,e)?0:-1}var ta=e=>e[0]==="_"||e==="$stable",rr=e=>L(e)?e.map(rt):[rt(e)],tu=(e,t,n)=>{if(t._n)return t;let o=bn((...s)=>rr(t(...s)),n);return o._c=!1,o},na=(e,t,n)=>{let o=e._ctx;for(let s in e){if(ta(s))continue;let r=e[s];if(K(r))t[s]=tu(s,r,o);else if(r!=null){let i=rr(r);t[s]=()=>i}}},oa=(e,t)=>{let n=rr(t);e.slots.default=()=>n},nu=(e,t)=>{if(e.vnode.shapeFlag&32){let n=t._;n?(e.slots=Y(t),fn(t,"_",n)):na(t,e.slots={})}else e.slots={},t&&oa(e,t);fn(e.slots,zo,1)},ou=(e,t,n)=>{let{vnode:o,slots:s}=e,r=!0,i=ae;if(o.shapeFlag&32){let a=t._;a?n&&a===1?r=!1:(he(s,t),!n&&a===1&&delete s._):(r=!t.$stable,na(t,s)),i=t}else t&&(oa(e,t),i={default:1});if(r)for(let a in s)!ta(a)&&!(a in i)&&delete s[a]};function sa(){return{app:null,config:{isNativeTag:Jr,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}var su=0;function ru(e,t){return function(o,s=null){K(o)||(o=Object.assign({},o)),s!=null&&!se(s)&&(s=null);let r=sa(),i=new Set,a=!1,c=r.app={_uid:su++,_component:o,_props:s,_container:null,_context:r,_instance:null,version:Mi,get config(){return r.config},set config(l){},use(l,...u){return i.has(l)||(l&&K(l.install)?(i.add(l),l.install(c,...u)):K(l)&&(i.add(l),l(c,...u))),c},mixin(l){return __VUE_OPTIONS_API__&&(r.mixins.includes(l)||r.mixins.push(l)),c},component(l,u){return u?(r.components[l]=u,c):r.components[l]},directive(l,u){return u?(r.directives[l]=u,c):r.directives[l]},mount(l,u,d){if(!a){let h=J(o,s);return h.appContext=r,u&&t?t(h,l):e(h,l,d),a=!0,c._container=l,l.__vue_app__=c,__VUE_PROD_DEVTOOLS__&&(c._instance=h.component,Nl(c,Mi)),qo(h.component)||h.component.proxy}},unmount(){a&&(e(null,c._container),__VUE_PROD_DEVTOOLS__&&(c._instance=null,Ol(c)),delete c._container.__vue_app__)},provide(l,u){return r.provides[l]=u,c}};return c}}function Xs(e,t,n,o,s=!1){if(L(e)){e.forEach((h,m)=>Xs(h,t&&(L(t)?t[m]:t),n,o,s));return}if(Bn(o)&&!s)return;let r=o.shapeFlag&4?qo(o.component)||o.component.proxy:o.el,i=s?null:r,{i:a,r:c}=e,l=t&&t.r,u=a.refs===ae?a.refs={}:a.refs,d=a.setupState;if(l!=null&&l!==c&&(de(l)?(u[l]=null,Q(d,l)&&(d[l]=null)):me(l)&&(l.value=null)),K(c))yt(c,a,12,[i,u]);else{let h=de(c),m=me(c);if(h||m){let v=()=>{if(e.f){let y=h?Q(d,c)?d[c]:u[c]:c.value;s?L(y)&&ho(y,r):L(y)?y.includes(r)||y.push(r):h?(u[c]=[r],Q(d,c)&&(d[c]=u[c])):(c.value=[r],e.k&&(u[e.k]=c.value))}else h?(u[c]=i,Q(d,c)&&(d[c]=i)):m&&(c.value=i,e.k&&(u[e.k]=i))};i?(v.id=-1,Ae(v,n)):v()}}}function iu(){let e=[];typeof __VUE_OPTIONS_API__!="boolean"&&(bo().__VUE_OPTIONS_API__=!0),typeof __VUE_PROD_DEVTOOLS__!="boolean"&&(bo().__VUE_PROD_DEVTOOLS__=!1)}var Ae=Pl;function ra(e){return au(e)}function au(e,t){iu();let n=bo();n.__VUE__=!0,__VUE_PROD_DEVTOOLS__&&Hi(n.__VUE_DEVTOOLS_GLOBAL_HOOK__,n);let{insert:o,remove:s,patchProp:r,createElement:i,createText:a,createComment:c,setText:l,setElementText:u,parentNode:d,nextSibling:h,setScopeId:m=Se,insertStaticContent:v}=e,y=(f,p,g,_=null,b=null,C=null,I=!1,O=null,T=!!p.dynamicChildren)=>{if(f===p)return;f&&!Xt(f,p)&&(_=ao(f),wt(f,b,C,!0),f=null),p.patchFlag===-2&&(T=!1,p.dynamicChildren=null);let{type:E,ref:U,shapeFlag:R}=p;switch(E){case Xn:D(f,p,g,_);break;case Le:P(f,p,g,_);break;case mn:f==null&&w(p,g,_,I);break;case te:ee(f,p,g,_,b,C,I,O,T);break;default:R&1?G(f,p,g,_,b,C,I,O,T):R&6?Te(f,p,g,_,b,C,I,O,T):(R&64||R&128)&&E.process(f,p,g,_,b,C,I,O,T,sn)}U!=null&&b&&Xs(U,f&&f.ref,C,p||f,!p)},D=(f,p,g,_)=>{if(f==null)o(p.el=a(p.children),g,_);else{let b=p.el=f.el;p.children!==f.children&&l(b,p.children)}},P=(f,p,g,_)=>{f==null?o(p.el=c(p.children||""),g,_):p.el=f.el},w=(f,p,g,_)=>{[f.el,f.anchor]=v(f.children,p,g,_,f.el,f.anchor)},V=(f,p,g,_)=>{if(p.children!==f.children){let b=h(f.anchor);j(f),[p.el,p.anchor]=v(p.children,g,b,_)}else p.el=f.el,p.anchor=f.anchor},S=({el:f,anchor:p},g,_)=>{let b;for(;f&&f!==p;)b=h(f),o(f,g,_),f=b;o(p,g,_)},j=({el:f,anchor:p})=>{let g;for(;f&&f!==p;)g=h(f),s(f),f=g;s(p)},G=(f,p,g,_,b,C,I,O,T)=>{I=I||p.type==="svg",f==null?x(p,g,_,b,C,I,O,T):W(f,p,b,C,I,O,T)},x=(f,p,g,_,b,C,I,O)=>{let T,E,{type:U,props:R,shapeFlag:H,transition:z,dirs:X}=f;if(T=f.el=i(f.type,C,R&&R.is,R),H&8?u(T,f.children):H&16&&F(f.children,T,null,_,b,C&&U!=="foreignObject",I,O),X&&zt(f,null,_,"created"),R){for(let oe in R)oe!=="value"&&!An(oe)&&r(T,oe,null,R[oe],C,f.children,_,b,ft);"value"in R&&r(T,"value",null,R.value),(E=R.onVnodeBeforeMount)&&st(E,_,f)}N(T,f,f.scopeId,I,_),__VUE_PROD_DEVTOOLS__&&(Object.defineProperty(T,"__vnode",{value:f,enumerable:!1}),Object.defineProperty(T,"__vueParentComponent",{value:_,enumerable:!1})),X&&zt(f,null,_,"beforeMount");let le=(!b||b&&!b.pendingBranch)&&z&&!z.persisted;le&&z.beforeEnter(T),o(T,p,g),((E=R&&R.onVnodeMounted)||le||X)&&Ae(()=>{E&&st(E,_,f),le&&z.enter(T),X&&zt(f,null,_,"mounted")},b)},N=(f,p,g,_,b)=>{if(g&&m(f,g),_)for(let C=0;C<_.length;C++)m(f,_[C]);if(b){let C=b.subTree;if(p===C){let I=b.vnode;N(f,I,I.scopeId,I.slotScopeIds,b.parent)}}},F=(f,p,g,_,b,C,I,O,T=0)=>{for(let E=T;E<f.length;E++){let U=f[E]=O?St(f[E]):rt(f[E]);y(null,U,p,g,_,b,C,I,O)}},W=(f,p,g,_,b,C,I)=>{let O=p.el=f.el,{patchFlag:T,dynamicChildren:E,dirs:U}=p;T|=f.patchFlag&16;let R=f.props||ae,H=p.props||ae,z;g&&qt(g,!1),(z=H.onVnodeBeforeUpdate)&&st(z,g,p,f),U&&zt(p,f,g,"beforeUpdate"),g&&qt(g,!0);let X=b&&p.type!=="foreignObject";if(E?re(f.dynamicChildren,E,O,g,_,X,C):I||dt(f,p,O,null,g,_,X,C,!1),T>0){if(T&16)M(O,p,R,H,g,_,b);else if(T&2&&R.class!==H.class&&r(O,"class",null,H.class,b),T&4&&r(O,"style",R.style,H.style,b),T&8){let le=p.dynamicProps;for(let oe=0;oe<le.length;oe++){let ye=le[oe],Je=R[ye],rn=H[ye];(rn!==Je||ye==="value")&&r(O,ye,Je,rn,b,f.children,g,_,ft)}}T&1&&f.children!==p.children&&u(O,p.children)}else!I&&E==null&&M(O,p,R,H,g,_,b);((z=H.onVnodeUpdated)||U)&&Ae(()=>{z&&st(z,g,p,f),U&&zt(p,f,g,"updated")},_)},re=(f,p,g,_,b,C,I)=>{for(let O=0;O<p.length;O++){let T=f[O],E=p[O],U=T.el&&(T.type===te||!Xt(T,E)||T.shapeFlag&70)?d(T.el):g;y(T,E,U,null,_,b,C,I,!0)}},M=(f,p,g,_,b,C,I)=>{if(g!==_){if(g!==ae)for(let O in g)!An(O)&&!(O in _)&&r(f,O,g[O],null,I,p.children,b,C,ft);for(let O in _){if(An(O))continue;let T=_[O],E=g[O];T!==E&&O!=="value"&&r(f,O,E,T,I,p.children,b,C,ft)}"value"in _&&r(f,"value",g.value,_.value)}},ee=(f,p,g,_,b,C,I,O,T)=>{let E=p.el=f?f.el:a(""),U=p.anchor=f?f.anchor:a(""),{patchFlag:R,dynamicChildren:H,slotScopeIds:z}=p;z&&(O=O?O.concat(z):z),f==null?(o(E,g,_),o(U,g,_),F(p.children,g,U,b,C,I,O,T)):R>0&&R&64&&H&&f.dynamicChildren?(re(f.dynamicChildren,H,g,b,C,I,O),(p.key!=null||b&&p===b.subTree)&&ia(f,p,!0)):dt(f,p,g,U,b,C,I,O,T)},Te=(f,p,g,_,b,C,I,O,T)=>{p.slotScopeIds=O,f==null?p.shapeFlag&512?b.ctx.activate(p,g,_,I,T):Xe(p,g,_,b,C,I,T):ve(f,p,T)},Xe=(f,p,g,_,b,C,I)=>{let O=f.component=vu(f,_,b);if(Lo(f)&&(O.ctx.renderer=sn),gu(O),O.asyncDep){if(b&&b.registerDep(O,ce),!f.el){let T=O.subTree=J(Le);P(null,T,p,g)}return}ce(O,f,p,g,b,C,I)},ve=(f,p,g)=>{let _=p.component=f.component;if(Sl(f,p,g))if(_.asyncDep&&!_.asyncResolved){ie(_,p,g);return}else _.next=p,bl(_.update),_.update();else p.el=f.el,_.vnode=p},ce=(f,p,g,_,b,C,I)=>{let O=()=>{if(f.isMounted){let{next:U,bu:R,u:H,parent:z,vnode:X}=f,le=U,oe;qt(f,!1),U?(U.el=X.el,ie(f,U,I)):U=X,R&&dn(R),(oe=U.props&&U.props.onVnodeBeforeUpdate)&&st(oe,z,U,X),qt(f,!0);let ye=Hs(f),Je=f.subTree;f.subTree=ye,y(Je,ye,d(Je.el),ao(Je),f,b,C),U.el=ye.el,le===null&&Vl(f,ye.el),H&&Ae(H,b),(oe=U.props&&U.props.onVnodeUpdated)&&Ae(()=>st(oe,z,U,X),b),__VUE_PROD_DEVTOOLS__&&Li(f)}else{let U,{el:R,props:H}=p,{bm:z,m:X,parent:le}=f,oe=Bn(p);if(qt(f,!1),z&&dn(z),!oe&&(U=H&&H.onVnodeBeforeMount)&&st(U,le,p),qt(f,!0),R&&rs){let ye=()=>{f.subTree=Hs(f),rs(R,f.subTree,f,b,null)};oe?p.type.__asyncLoader().then(()=>!f.isUnmounted&&ye()):ye()}else{let ye=f.subTree=Hs(f);y(null,ye,g,_,f,b,C),p.el=ye.el}if(X&&Ae(X,b),!oe&&(U=H&&H.onVnodeMounted)){let ye=p;Ae(()=>st(U,le,ye),b)}(p.shapeFlag&256||le&&Bn(le.vnode)&&le.vnode.shapeFlag&256)&&f.a&&Ae(f.a,b),f.isMounted=!0,__VUE_PROD_DEVTOOLS__&&Cl(f),p=g=_=null}},T=f.effect=new Wt(O,()=>Qs(E),f.scope),E=f.update=()=>T.run();E.id=f.uid,qt(f,!0),E()},ie=(f,p,g)=>{p.component=f;let _=f.vnode.props;f.vnode=p,f.next=null,eu(f,p.props,_,g),ou(f,p.children,g),Dt(),bi(),It()},dt=(f,p,g,_,b,C,I,O,T=!1)=>{let E=f&&f.children,U=f?f.shapeFlag:0,R=p.children,{patchFlag:H,shapeFlag:z}=p;if(H>0){if(H&128){kn(E,R,g,_,b,C,I,O,T);return}else if(H&256){os(E,R,g,_,b,C,I,O,T);return}}z&8?(U&16&&ft(E,b,C),R!==E&&u(g,R)):U&16?z&16?kn(E,R,g,_,b,C,I,O,T):ft(E,b,C,!0):(U&8&&u(g,""),z&16&&F(R,g,_,b,C,I,O,T))},os=(f,p,g,_,b,C,I,O,T)=>{f=f||Ht,p=p||Ht;let E=f.length,U=p.length,R=Math.min(E,U),H;for(H=0;H<R;H++){let z=p[H]=T?St(p[H]):rt(p[H]);y(f[H],z,g,null,b,C,I,O,T)}E>U?ft(f,b,C,!0,!1,R):F(p,g,_,b,C,I,O,T,R)},kn=(f,p,g,_,b,C,I,O,T)=>{let E=0,U=p.length,R=f.length-1,H=U-1;for(;E<=R&&E<=H;){let z=f[E],X=p[E]=T?St(p[E]):rt(p[E]);if(Xt(z,X))y(z,X,g,null,b,C,I,O,T);else break;E++}for(;E<=R&&E<=H;){let z=f[R],X=p[H]=T?St(p[H]):rt(p[H]);if(Xt(z,X))y(z,X,g,null,b,C,I,O,T);else break;R--,H--}if(E>R){if(E<=H){let z=H+1,X=z<U?p[z].el:_;for(;E<=H;)y(null,p[E]=T?St(p[E]):rt(p[E]),g,X,b,C,I,O,T),E++}}else if(E>H)for(;E<=R;)wt(f[E],b,C,!0),E++;else{let z=E,X=E,le=new Map;for(E=X;E<=H;E++){let Re=p[E]=T?St(p[E]):rt(p[E]);Re.key!=null&&le.set(Re.key,E)}let oe,ye=0,Je=H-X+1,rn=!1,Br=0,Tn=new Array(Je);for(E=0;E<Je;E++)Tn[E]=0;for(E=z;E<=R;E++){let Re=f[E];if(ye>=Je){wt(Re,b,C,!0);continue}let tt;if(Re.key!=null)tt=le.get(Re.key);else for(oe=X;oe<=H;oe++)if(Tn[oe-X]===0&&Xt(Re,p[oe])){tt=oe;break}tt===void 0?wt(Re,b,C,!0):(Tn[tt-X]=E+1,tt>=Br?Br=tt:rn=!0,y(Re,p[tt],g,null,b,C,I,O,T),ye++)}let Kr=rn?cu(Tn):Ht;for(oe=Kr.length-1,E=Je-1;E>=0;E--){let Re=X+E,tt=p[Re],Wr=Re+1<U?p[Re+1].el:_;Tn[E]===0?y(null,tt,g,Wr,b,C,I,O,T):rn&&(oe<0||E!==Kr[oe]?on(tt,g,Wr,2):oe--)}}},on=(f,p,g,_,b=null)=>{let{el:C,type:I,transition:O,children:T,shapeFlag:E}=f;if(E&6){on(f.component.subTree,p,g,_);return}if(E&128){f.suspense.move(p,g,_);return}if(E&64){I.move(f,p,g,sn);return}if(I===te){o(C,p,g);for(let R=0;R<T.length;R++)on(T[R],p,g,_);o(f.anchor,p,g);return}if(I===mn){S(f,p,g);return}if(_!==2&&E&1&&O)if(_===0)O.beforeEnter(C),o(C,p,g),Ae(()=>O.enter(C),b);else{let{leave:R,delayLeave:H,afterLeave:z}=O,X=()=>o(C,p,g),le=()=>{R(C,()=>{X(),z&&z()})};H?H(C,X,le):le()}else o(C,p,g)},wt=(f,p,g,_=!1,b=!1)=>{let{type:C,props:I,ref:O,children:T,dynamicChildren:E,shapeFlag:U,patchFlag:R,dirs:H}=f;if(O!=null&&Xs(O,null,g,f,!0),U&256){p.ctx.deactivate(f);return}let z=U&1&&H,X=!Bn(f),le;if(X&&(le=I&&I.onVnodeBeforeUnmount)&&st(le,p,f),U&6)vc(f.component,g,_);else{if(U&128){f.suspense.unmount(g,_);return}z&&zt(f,null,p,"beforeUnmount"),U&64?f.type.remove(f,p,g,b,sn,_):E&&(C!==te||R>0&&R&64)?ft(E,p,g,!1,!0):(C===te&&R&384||!b&&U&16)&&ft(T,p,g),_&&Hr(f)}(X&&(le=I&&I.onVnodeUnmounted)||z)&&Ae(()=>{le&&st(le,p,f),z&&zt(f,null,p,"unmounted")},g)},Hr=f=>{let{type:p,el:g,anchor:_,transition:b}=f;if(p===te){mc(g,_);return}if(p===mn){j(f);return}let C=()=>{s(g),b&&!b.persisted&&b.afterLeave&&b.afterLeave()};if(f.shapeFlag&1&&b&&!b.persisted){let{leave:I,delayLeave:O}=b,T=()=>I(g,C);O?O(f.el,C,T):T()}else C()},mc=(f,p)=>{let g;for(;f!==p;)g=h(f),s(f),f=g;s(p)},vc=(f,p,g)=>{let{bum:_,scope:b,update:C,subTree:I,um:O}=f;_&&dn(_),b.stop(),C&&(C.active=!1,wt(I,f,p,g)),O&&Ae(O,p),Ae(()=>{f.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&f.asyncDep&&!f.asyncResolved&&f.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve()),__VUE_PROD_DEVTOOLS__&&kl(f)},ft=(f,p,g,_=!1,b=!1,C=0)=>{for(let I=C;I<f.length;I++)wt(f[I],p,g,_,b)},ao=f=>f.shapeFlag&6?ao(f.component.subTree):f.shapeFlag&128?f.suspense.next():h(f.anchor||f.el),Lr=(f,p,g)=>{f==null?p._vnode&&wt(p._vnode,null,null,!0):y(p._vnode||null,f,p,null,null,null,g),bi(),Ui(),p._vnode=f},sn={p:y,um:wt,m:on,r:Hr,mt:Xe,mc:F,pc:dt,pbc:re,n:ao,o:e},ss,rs;return t&&([ss,rs]=t(sn)),{render:Lr,hydrate:ss,createApp:ru(Lr,ss)}}function qt({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function ia(e,t,n=!1){let o=e.children,s=t.children;if(L(o)&&L(s))for(let r=0;r<o.length;r++){let i=o[r],a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=St(s[r]),a.el=i.el),n||ia(i,a)),a.type===Xn&&(a.el=i.el)}}function cu(e){let t=e.slice(),n=[0],o,s,r,i,a,c=e.length;for(o=0;o<c;o++){let l=e[o];if(l!==0){if(s=n[n.length-1],e[s]<l){t[o]=s,n.push(o);continue}for(r=0,i=n.length-1;r<i;)a=r+i>>1,e[n[a]]<l?r=a+1:i=a;l<e[n[r]]&&(r>0&&(t[o]=n[r-1]),n[r]=o)}}for(r=n.length,i=n[r-1];r-- >0;)n[r]=i,i=t[i];return n}var lu=e=>e.__isTeleport;var te=Symbol(void 0),Xn=Symbol(void 0),Le=Symbol(void 0),mn=Symbol(void 0),Wn=[],Ze=null;function k(e=!1){Wn.push(Ze=e?null:[])}function uu(){Wn.pop(),Ze=Wn[Wn.length-1]||null}var Gn=1;function Ii(e){Gn+=e}function aa(e){return e.dynamicChildren=Gn>0?Ze||Ht:null,uu(),Gn>0&&Ze&&Ze.push(e),e}function A(e,t,n,o,s,r){return aa($(e,t,n,o,s,r,!0))}function we(e,t,n,o,s){return aa(J(e,t,n,o,s,!0))}function Ao(e){return e?e.__v_isVNode===!0:!1}function Xt(e,t){return e.type===t.type&&e.key===t.key}var zo="__vInternal",ca=({key:e})=>e??null,Vo=({ref:e,ref_key:t,ref_for:n})=>e!=null?de(e)||me(e)||K(e)?{i:Oe,r:e,k:t,f:!!n}:e:null;function $(e,t=null,n=null,o=0,s=null,r=e===te?0:1,i=!1,a=!1){let c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ca(t),ref:t&&Vo(t),scopeId:Ki,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:o,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Oe};return a?(ar(c,n),r&128&&e.normalize(c)):n&&(c.shapeFlag|=de(n)?8:16),Gn>0&&!i&&Ze&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&Ze.push(c),c}var J=du;function du(e,t=null,n=null,o=0,s=null,r=!1){if((!e||e===Yi)&&(e=Le),Ao(e)){let a=Vt(e,t,!0);return n&&ar(a,n),Gn>0&&!r&&Ze&&(a.shapeFlag&6?Ze[Ze.indexOf(e)]=a:Ze.push(a)),a.patchFlag|=-2,a}if(Nu(e)&&(e=e.__vccOpts),t){t=fu(t);let{class:a,style:c}=t;a&&!de(a)&&(t.class=_e(a)),se(c)&&(Io(c)&&!L(c)&&(c=he({},c)),t.style=Fe(c))}let i=de(e)?1:Ml(e)?128:lu(e)?64:se(e)?4:K(e)?2:0;return $(e,t,n,o,s,i,r,!0)}function fu(e){return e?Io(e)||zo in e?he({},e):e:null}function Vt(e,t,n=!1){let{props:o,ref:s,patchFlag:r,children:i}=e,a=t?pu(o||{},t):o;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&ca(a),ref:t&&t.ref?n&&s?L(s)?s.concat(Vo(t)):[s,Vo(t)]:Vo(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==te?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Vt(e.ssContent),ssFallback:e.ssFallback&&Vt(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx}}function ir(e=" ",t=0){return J(Xn,null,e,t)}function la(e,t){let n=J(mn,null,e);return n.staticCount=t,n}function lt(e="",t=!1){return t?(k(),we(Le,null,e)):J(Le,null,e)}function rt(e){return e==null||typeof e=="boolean"?J(Le):L(e)?J(te,null,e.slice()):typeof e=="object"?St(e):J(Xn,null,String(e))}function St(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Vt(e)}function ar(e,t){let n=0,{shapeFlag:o}=e;if(t==null)t=null;else if(L(t))n=16;else if(typeof t=="object")if(o&65){let s=t.default;s&&(s._c&&(s._d=!1),ar(e,s()),s._c&&(s._d=!0));return}else{n=32;let s=t._;!s&&!(zo in t)?t._ctx=Oe:s===3&&Oe&&(Oe.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else K(t)?(t={default:t,_ctx:Oe},n=32):(t=String(t),o&64?(n=16,t=[ir(t)]):n=8);e.children=t,e.shapeFlag|=n}function pu(...e){let t={};for(let n=0;n<e.length;n++){let o=e[n];for(let s in o)if(s==="class")t.class!==o.class&&(t.class=_e([t.class,o.class]));else if(s==="style")t.style=Fe([t.style,o.style]);else if(un(s)){let r=t[s],i=o[s];i&&r!==i&&!(L(r)&&r.includes(i))&&(t[s]=r?[].concat(r,i):i)}else s!==""&&(t[s]=o[s])}return t}function st(e,t,n,o=null){He(e,t,7,[n,o])}var hu=sa(),mu=0;function vu(e,t,n){let o=e.type,s=(t?t.appContext:e.appContext)||hu,r={uid:mu++,vnode:e,type:o,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Un(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ea(o,s),emitsOptions:Bi(o,s),emit:null,emitted:null,propsDefaults:ae,inheritAttrs:o.inheritAttrs,ctx:ae,data:ae,props:ae,attrs:ae,slots:ae,refs:ae,setupState:ae,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Dl.bind(null,r),e.ce&&e.ce(r),r}var Ee=null,cr=()=>Ee||Oe,yn=e=>{Ee=e,e.scope.on()},Zt=()=>{Ee&&Ee.scope.off(),Ee=null};function ua(e){return e.vnode.shapeFlag&4}var Yn=!1;function gu(e,t=!1){Yn=t;let{props:n,children:o}=e.vnode,s=ua(e);Zl(e,n,s,t),nu(e,o);let r=s?yu(e,t):void 0;return Yn=!1,r}function yu(e,t){var n;let o=e.type;e.accessCache=Object.create(null),e.proxy=je(new Proxy(e.ctx,ql));let{setup:s}=o;if(s){let r=e.setupContext=s.length>1?bu(e):null;yn(e),Dt();let i=yt(s,e,0,[e.props,r]);if(It(),Zt(),ys(i)){if(i.then(Zt,Zt),t)return i.then(a=>{$i(e,a,t)}).catch(a=>{Ro(a,e,0)});e.asyncDep=i}else $i(e,i,t)}else da(e,t)}function $i(e,t,n){K(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:se(t)&&(__VUE_PROD_DEVTOOLS__&&(e.devtoolsRawSetupState=t),e.setupState=$o(t)),da(e,n)}var Si,Vi;function da(e,t,n){let o=e.type;if(!e.render){if(!t&&Si&&!o.render){let s=o.template||sr(e).template;if(s){let{isCustomElement:r,compilerOptions:i}=e.appContext.config,{delimiters:a,compilerOptions:c}=o,l=he(he({isCustomElement:r,delimiters:a},i),c);o.render=Si(s,l)}}e.render=o.render||Se,Vi&&Vi(e)}__VUE_OPTIONS_API__&&(yn(e),Dt(),Gl(e),It(),Zt())}function _u(e){return new Proxy(e.attrs,{get(t,n){return Me(e,"get","$attrs"),t[n]}})}function bu(e){let t=o=>{e.exposed=o||{}},n;return{get attrs(){return n||(n=_u(e))},slots:e.slots,emit:e.emit,expose:t}}function qo(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy($o(je(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Kn)return Kn[n](e)},has(t,n){return n in t||n in Kn}}))}var Eu=/(?:^|[-_])(\w)/g,wu=e=>e.replace(Eu,t=>t.toUpperCase()).replace(/[-_]/g,"");function fa(e,t=!0){return K(e)?e.displayName||e.name:e.name||t&&e.__name}function pa(e,t,n=!1){let o=fa(t);if(!o&&t.__file){let s=t.__file.match(/([^/\\]+)\.\w+$/);s&&(o=s[1])}if(!o&&e&&e.parent){let s=r=>{for(let i in r)if(r[i]===t)return i};o=s(e.components||e.parent.type.components)||s(e.appContext.components)}return o?wu(o):n?"App":"Anonymous"}function Nu(e){return K(e)&&"__vccOpts"in e}var q=(e,t)=>_i(e,t,Yn);function Go(e,t,n){let o=arguments.length;return o===2?se(t)&&!L(t)?Ao(t)?J(e,null,[t]):J(e,t):J(e,null,t):(o>3?n=Array.prototype.slice.call(arguments,2):o===3&&Ao(n)&&(n=[n]),J(e,t,n))}var Ou=Symbol(""),Cu=()=>{{let e=Qt(Ou);return e}};var Mi="3.2.45";var xu="http://www.w3.org/2000/svg",tn=typeof document<"u"?document:null,ha=tn&&tn.createElement("template"),ku={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{let t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{let s=t?tn.createElementNS(xu,e):tn.createElement(e,n?{is:n}:void 0);return e==="select"&&o&&o.multiple!=null&&s.setAttribute("multiple",o.multiple),s},createText:e=>tn.createTextNode(e),createComment:e=>tn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>tn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,o,s,r){let i=n?n.previousSibling:t.lastChild;if(s&&(s===r||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===r||!(s=s.nextSibling)););else{ha.innerHTML=o?`<svg>${e}</svg>`:e;let a=ha.content;if(o){let c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}t.insertBefore(a,n)}return[i?i.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function Tu(e,t,n){let o=e._vtc;o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function Du(e,t,n){let o=e.style,s=de(n);if(n&&!s){for(let r in n)fr(o,r,n[r]);if(t&&!de(t))for(let r in t)n[r]==null&&fr(o,r,"")}else{let r=o.display;s?t!==n&&(o.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(o.display=r)}}var ma=/\s*!important$/;function fr(e,t,n){if(L(n))n.forEach(o=>fr(e,t,o));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{let o=Iu(e,t);ma.test(n)?e.setProperty(ht(o),n.replace(ma,""),"important"):e[o]=n}}var va=["Webkit","Moz","ms"],lr={};function Iu(e,t){let n=lr[t];if(n)return n;let o=Ve(t);if(o!=="filter"&&o in e)return lr[t]=o;o=Lt(o);for(let s=0;s<va.length;s++){let r=va[s]+o;if(r in e)return lr[t]=r}return t}var ga="http://www.w3.org/1999/xlink";function $u(e,t,n,o,s){if(o&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(ga,t.slice(6,t.length)):e.setAttributeNS(ga,t,n);else{let r=Yr(t);n==null||r&&!gs(n)?e.removeAttribute(t):e.setAttribute(t,r?"":n)}}function Su(e,t,n,o,s,r,i){if(t==="innerHTML"||t==="textContent"){o&&i(o,s,r),e[t]=n??"";return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;let c=n??"";(e.value!==c||e.tagName==="OPTION")&&(e.value=c),n==null&&e.removeAttribute(t);return}let a=!1;if(n===""||n==null){let c=typeof e[t];c==="boolean"?n=gs(n):n==null&&c==="string"?(n="",a=!0):c==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(t)}function wn(e,t,n,o){e.addEventListener(t,n,o)}function Vu(e,t,n,o){e.removeEventListener(t,n,o)}function Mu(e,t,n,o,s=null){let r=e._vei||(e._vei={}),i=r[t];if(o&&i)i.value=o;else{let[a,c]=Pu(t);if(o){let l=r[t]=Fu(o,s);wn(e,a,l,c)}else i&&(Vu(e,a,i,c),r[t]=void 0)}}var ya=/(?:Once|Passive|Capture)$/;function Pu(e){let t;if(ya.test(e)){t={};let o;for(;o=e.match(ya);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ht(e.slice(2)),t]}var ur=0,Au=Promise.resolve(),Ru=()=>ur||(Au.then(()=>ur=0),ur=Date.now());function Fu(e,t){let n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;He(Uu(o,n.value),t,5,[o])};return n.value=e,n.attached=Ru(),n}function Uu(e,t){if(L(t)){let n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(o=>s=>!s._stopped&&o&&o(s))}else return t}var _a=/^on[a-z]/,ju=(e,t,n,o,s=!1,r,i,a,c)=>{t==="class"?Tu(e,o,s):t==="style"?Du(e,n,o):un(t)?Pn(t)||Mu(e,t,n,o,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Hu(e,t,o,s))?Su(e,t,o,r,i,a,c):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),$u(e,t,o,s))};function Hu(e,t,n,o){return o?!!(t==="innerHTML"||t==="textContent"||t in e&&_a.test(t)&&K(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||_a.test(t)&&de(n)?!1:t in e}var At="transition",Jn="animation",Nn=(e,{slots:t})=>Go(tr,Da(e),t);Nn.displayName="Transition";var Ta={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Lu=Nn.props=he({},tr.props,Ta),en=(e,t=[])=>{L(e)?e.forEach(n=>n(...t)):e&&e(...t)},ba=e=>e?L(e)?e.some(t=>t.length>1):e.length>1:!1;function Da(e){let t={};for(let M in e)M in Ta||(t[M]=e[M]);if(e.css===!1)return t;let{name:n="v",type:o,duration:s,enterFromClass:r=`${n}-enter-from`,enterActiveClass:i=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=r,appearActiveClass:l=i,appearToClass:u=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=e,v=Bu(s),y=v&&v[0],D=v&&v[1],{onBeforeEnter:P,onEnter:w,onEnterCancelled:V,onLeave:S,onLeaveCancelled:j,onBeforeAppear:G=P,onAppear:x=w,onAppearCancelled:N=V}=t,F=(M,ee,Te)=>{Rt(M,ee?u:a),Rt(M,ee?l:i),Te&&Te()},W=(M,ee)=>{M._isLeaving=!1,Rt(M,d),Rt(M,m),Rt(M,h),ee&&ee()},re=M=>(ee,Te)=>{let Xe=M?x:w,ve=()=>F(ee,M,Te);en(Xe,[ee,ve]),Ea(()=>{Rt(ee,M?c:r),Et(ee,M?u:a),ba(Xe)||wa(ee,o,y,ve)})};return he(t,{onBeforeEnter(M){en(P,[M]),Et(M,r),Et(M,i)},onBeforeAppear(M){en(G,[M]),Et(M,c),Et(M,l)},onEnter:re(!1),onAppear:re(!0),onLeave(M,ee){M._isLeaving=!0;let Te=()=>W(M,ee);Et(M,d),$a(),Et(M,h),Ea(()=>{M._isLeaving&&(Rt(M,d),Et(M,m),ba(S)||wa(M,o,D,Te))}),en(S,[M,Te])},onEnterCancelled(M){F(M,!1),en(V,[M])},onAppearCancelled(M){F(M,!0),en(N,[M])},onLeaveCancelled(M){W(M),en(j,[M])}})}function Bu(e){if(e==null)return null;if(se(e))return[dr(e.enter),dr(e.leave)];{let t=dr(e);return[t,t]}}function dr(e){return Ot(e)}function Et(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function Rt(e,t){t.split(/\s+/).forEach(o=>o&&e.classList.remove(o));let{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function Ea(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}var Ku=0;function wa(e,t,n,o){let s=e._endId=++Ku,r=()=>{s===e._endId&&o()};if(n)return setTimeout(r,n);let{type:i,timeout:a,propCount:c}=Ia(e,t);if(!i)return o();let l=i+"end",u=0,d=()=>{e.removeEventListener(l,h),r()},h=m=>{m.target===e&&++u>=c&&d()};setTimeout(()=>{u<c&&d()},a+1),e.addEventListener(l,h)}function Ia(e,t){let n=window.getComputedStyle(e),o=v=>(n[v]||"").split(", "),s=o(`${At}Delay`),r=o(`${At}Duration`),i=Na(s,r),a=o(`${Jn}Delay`),c=o(`${Jn}Duration`),l=Na(a,c),u=null,d=0,h=0;t===At?i>0&&(u=At,d=i,h=r.length):t===Jn?l>0&&(u=Jn,d=l,h=c.length):(d=Math.max(i,l),u=d>0?i>l?At:Jn:null,h=u?u===At?r.length:c.length:0);let m=u===At&&/\b(transform|all)(,|$)/.test(o(`${At}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:m}}function Na(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,o)=>Oa(n)+Oa(e[o])))}function Oa(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function $a(){return document.body.offsetHeight}var Sa=new WeakMap,Va=new WeakMap,Wu={name:"TransitionGroup",props:he({},Lu,{tag:String,moveClass:String}),setup(e,{slots:t}){let n=cr(),o=er(),s,r;return En(()=>{if(!s.length)return;let i=e.moveClass||`${e.name||"v"}-move`;if(!Yu(s[0].el,n.vnode.el,i))return;s.forEach(zu),s.forEach(qu);let a=s.filter(Gu);$a(),a.forEach(c=>{let l=c.el,u=l.style;Et(l,i),u.transform=u.webkitTransform=u.transitionDuration="";let d=l._moveCb=h=>{h&&h.target!==l||(!h||/transform$/.test(h.propertyName))&&(l.removeEventListener("transitionend",d),l._moveCb=null,Rt(l,i))};l.addEventListener("transitionend",d)})}),()=>{let i=Y(e),a=Da(i),c=i.tag||te;s=r,r=t.default?Ho(t.default()):[];for(let l=0;l<r.length;l++){let u=r[l];u.key!=null&&gn(u,vn(u,a,o,n))}if(s)for(let l=0;l<s.length;l++){let u=s[l];gn(u,vn(u,a,o,n)),Sa.set(u,u.el.getBoundingClientRect())}return J(c,null,r)}}},Ma=Wu;function zu(e){let t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function qu(e){Va.set(e,e.el.getBoundingClientRect())}function Gu(e){let t=Sa.get(e),n=Va.get(e),o=t.left-n.left,s=t.top-n.top;if(o||s){let r=e.el.style;return r.transform=r.webkitTransform=`translate(${o}px,${s}px)`,r.transitionDuration="0s",e}}function Yu(e,t,n){let o=e.cloneNode();e._vtc&&e._vtc.forEach(i=>{i.split(/\s+/).forEach(a=>a&&o.classList.remove(a))}),n.split(/\s+/).forEach(i=>i&&o.classList.add(i)),o.style.display="none";let s=t.nodeType===1?t:t.parentNode;s.appendChild(o);let{hasTransform:r}=Ia(o);return s.removeChild(o),r}var Ca=e=>{let t=e.props["onUpdate:modelValue"]||!1;return L(t)?n=>dn(t,n):t};function Xu(e){e.target.composing=!0}function xa(e){let t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}var On={created(e,{modifiers:{lazy:t,trim:n,number:o}},s){e._assign=Ca(s);let r=o||s.props&&s.props.type==="number";wn(e,t?"change":"input",i=>{if(i.target.composing)return;let a=e.value;n&&(a=a.trim()),r&&(a=Ot(a)),e._assign(a)}),n&&wn(e,"change",()=>{e.value=e.value.trim()}),t||(wn(e,"compositionstart",Xu),wn(e,"compositionend",xa),wn(e,"change",xa))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:o,number:s}},r){if(e._assign=Ca(r),e.composing||document.activeElement===e&&e.type!=="range"&&(n||o&&e.value.trim()===t||(s||e.type==="number")&&Ot(e.value)===t))return;let i=t??"";e.value!==i&&(e.value=i)}};var Ju=["ctrl","shift","alt","meta"],Qu={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Ju.some(n=>e[`${n}Key`]&&!t.includes(n))},ut=(e,t)=>(n,...o)=>{for(let s=0;s<t.length;s++){let r=Qu[t[s]];if(r&&r(n,t))return}return e(n,...o)},Zu={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Zn=(e,t)=>n=>{if(!("key"in n))return;let o=ht(n.key);if(t.some(s=>s===o||Zu[s]===o))return e(n)},pr={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Qn(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:o}){!t!=!n&&(o?t?(o.beforeEnter(e),Qn(e,!0),o.enter(e)):o.leave(e,()=>{Qn(e,!1)}):Qn(e,t))},beforeUnmount(e,{value:t}){Qn(e,t)}};function Qn(e,t){e.style.display=t?e._vod:"none"}var ed=he({patchProp:ju},ku),ka;function td(){return ka||(ka=ra(ed))}var Pa=(...e)=>{let t=td().createApp(...e),{mount:n}=t;return t.mount=o=>{let s=nd(o);if(!s)return;let r=t._component;!K(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.innerHTML="";let i=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),i},t};function nd(e){return de(e)?document.querySelector(e):e}var hr=null;function qa(e){hr=e}function et(){if(!hr)throw new Error("providePlugin() must be called before usePlugin()");return{viewModel:hr}}function Ye(){let{viewModel:e}=et();return{graph:vt(e.value,"displayedGraph"),switchGraph:e.value.switchGraph}}function Tr(e){let{graph:t}=Ye(),n=B(null),o=B(null);return{dragging:q(()=>!!n.value),onPointerDown:c=>{n.value={x:c.pageX,y:c.pageY},o.value={x:e.value.x,y:e.value.y}},onPointerMove:c=>{if(n.value){let l=c.pageX-n.value.x,u=c.pageY-n.value.y;e.value.x=o.value.x+l/t.value.scaling,e.value.y=o.value.y+u/t.value.scaling}},onPointerUp:()=>{n.value=null,o.value=null}}}function Ga(){let{graph:e}=Ye();return{transform:(n,o)=>{let s=n/e.value.scaling-e.value.panning.x,r=o/e.value.scaling-e.value.panning.y;return[s,r]}}}function od(){let{graph:e}=Ye(),t=[],n=-1,o={x:0,y:0},s=q(()=>e.value.panning),r=Tr(s),i=q(()=>({"transform-origin":"0 0",transform:`scale(${e.value.scaling}) translate(${e.value.panning.x}px, ${e.value.panning.y}px)`})),a=(m,v,y)=>{let D=[m/e.value.scaling-e.value.panning.x,v/e.value.scaling-e.value.panning.y],P=[m/y-e.value.panning.x,v/y-e.value.panning.y],w=[P[0]-D[0],P[1]-D[1]];e.value.panning.x+=w[0],e.value.panning.y+=w[1],e.value.scaling=y},c=m=>{m.preventDefault();let v=m.deltaY;m.deltaMode===1&&(v*=32);let y=e.value.scaling*(1-v/3e3);a(m.offsetX,m.offsetY,y)},l=()=>({ax:t[0].clientX,ay:t[0].clientY,bx:t[1].clientX,by:t[1].clientY});return{styles:i,...r,onPointerDown:m=>{if(t.push(m),r.onPointerDown(m),t.length===2){let{ax:v,ay:y,bx:D,by:P}=l();o={x:v+(D-v)/2,y:y+(P-y)/2}}},onPointerMove:m=>{for(let v=0;v<t.length;v++)if(m.pointerId==t[v].pointerId){t[v]=m;break}if(t.length==2){let{ax:v,ay:y,bx:D,by:P}=l(),w=v-D,V=y-P,S=Math.sqrt(w*w+V*V);if(n>0){let j=e.value.scaling*(1+(S-n)/500);a(o.x,o.y,j)}n=S}else r.onPointerMove(m)},onPointerUp:m=>{t=t.filter(v=>v.pointerId!==m.pointerId),n=-1,r.onPointerUp()},onMouseWheel:c}}var Ge=(e=>(e[e.NONE=0]="NONE",e[e.ALLOWED=1]="ALLOWED",e[e.FORBIDDEN=2]="FORBIDDEN",e))(Ge||{});function sd(){let{graph:e}=Ye(),t=B(null),n=B(null),o=a=>{t.value&&(t.value.mx=a.offsetX/e.value.scaling-e.value.panning.x,t.value.my=a.offsetY/e.value.scaling-e.value.panning.y)},s=()=>{if(n.value){let a=e.value.connections.find(c=>c.to===n.value);n.value.isInput&&a?(t.value={status:Ge.NONE,from:a.from},e.value.removeConnection(a)):t.value={status:Ge.NONE,from:n.value},t.value.mx=void 0,t.value.my=void 0}},r=()=>{t.value&&n.value&&e.value.addConnection(t.value.from,t.value.to),t.value=null};return jo("hoveredOver",a=>{if(n.value=a??null,a&&t.value){t.value.to=a;let c=e.value.checkConnection(t.value.from,t.value.to);if(t.value.status=c.connectionAllowed?Ge.ALLOWED:Ge.FORBIDDEN,c.connectionAllowed){let l=c.connectionsInDanger.map(u=>u.id);e.value.connections.forEach(u=>{l.includes(u.id)&&(u.isInDanger=!0)})}}else!a&&t.value&&(t.value.to=void 0,t.value.status=Ge.NONE,e.value.connections.forEach(c=>{c.isInDanger=!1}))}),{temporaryConnection:t,onMouseMove:o,onMouseDown:s,onMouseUp:r}}var rd=ue({setup(){let{viewModel:e}=et(),{graph:t}=Ye();return{styles:q(()=>{let o=e.value.settings.background,s=t.value.panning.x*t.value.scaling,r=t.value.panning.y*t.value.scaling,i=t.value.scaling*o.gridSize,a=i/o.gridDivision,c=`${i}px ${i}px, ${i}px ${i}px`,l=t.value.scaling>o.subGridVisibleThreshold?`, ${a}px ${a}px, ${a}px ${a}px`:"";return{backgroundPosition:`left ${s}px top ${r}px`,backgroundSize:`${c} ${l}`}})}}}),ne=(e,t)=>{let n=e.__vccOpts||e;for(let[o,s]of t)n[o]=s;return n};function id(e,t,n,o,s,r){return k(),A("div",{class:"background",style:Fe(e.styles)},null,4)}var ad=ne(rd,[["render",id]]),Aa,io=typeof window<"u",cd=e=>typeof e=="string",ld=()=>{};io&&((Aa=window?.navigator)!=null&&Aa.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function ud(e){return typeof e=="function"?e():mt(e)}function dd(e){return e}function fd(e,t,n=!1){return t.reduce((o,s)=>(s in e&&(!n||e[s]!==void 0)&&(o[s]=e[s]),o),{})}function pd(e){return Ds()?(Is(e),!0):!1}var hd=Object.defineProperty,md=Object.defineProperties,vd=Object.getOwnPropertyDescriptors,Ra=Object.getOwnPropertySymbols,gd=Object.prototype.hasOwnProperty,yd=Object.prototype.propertyIsEnumerable,Fa=(e,t,n)=>t in e?hd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_d=(e,t)=>{for(var n in t||(t={}))gd.call(t,n)&&Fa(e,n,t[n]);if(Ra)for(var n of Ra(t))yd.call(t,n)&&Fa(e,n,t[n]);return e},bd=(e,t)=>md(e,vd(t));function Ed(e){if(!me(e))return js(e);let t=Array.isArray(e.value)?new Array(e.value.length):{};for(let n in e.value)t[n]=Us(()=>({get(){return e.value[n]},set(o){if(Array.isArray(e.value)){let s=[...e.value];s[n]=o,e.value=s}else{let s=bd(_d({},e.value),{[n]:o});Object.setPrototypeOf(s,e.value),e.value=s}}}));return t}function eo(e){var t;let n=ud(e);return(t=n?.$el)!=null?t:n}var Dr=io?window:void 0;io&&window.document;io&&window.navigator;io&&window.location;function nn(...e){let t,n,o,s;if(cd(e[0])||Array.isArray(e[0])?([n,o,s]=e,t=Dr):[t,n,o,s]=e,!t)return ld;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);let r=[],i=()=>{r.forEach(u=>u()),r.length=0},a=(u,d,h)=>(u.addEventListener(d,h,s),()=>u.removeEventListener(d,h,s)),c=ct(()=>eo(t),u=>{i(),u&&r.push(...n.flatMap(d=>o.map(h=>a(u,d,h))))},{immediate:!0,flush:"post"}),l=()=>{c(),i()};return pd(l),l}function mr(e,t,n={}){let{window:o=Dr,ignore:s=[],capture:r=!0,detectIframe:i=!1}=n;if(!o)return;let a=!0,c,l=m=>s.some(v=>{if(typeof v=="string")return Array.from(o.document.querySelectorAll(v)).some(y=>y===m.target||m.composedPath().includes(y));{let y=eo(v);return y&&(m.target===y||m.composedPath().includes(y))}}),u=m=>{o.clearTimeout(c);let v=eo(e);if(!(!v||v===m.target||m.composedPath().includes(v))){if(m.detail===0&&(a=!l(m)),!a){a=!0;return}t(m)}},d=[nn(o,"click",u,{passive:!0,capture:r}),nn(o,"pointerdown",m=>{let v=eo(e);v&&(a=!m.composedPath().includes(v)&&!l(m))},{passive:!0}),nn(o,"pointerup",m=>{if(m.button===0){let v=m.composedPath();m.composedPath=()=>v,c=o.setTimeout(()=>u(m),50)}},{passive:!0}),i&&nn(o,"blur",m=>{var v;let y=eo(e);((v=o.document.activeElement)==null?void 0:v.tagName)==="IFRAME"&&!y?.contains(o.document.activeElement)&&t(m)})].filter(Boolean);return()=>d.forEach(m=>m())}var vr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},gr="__vueuse_ssr_handlers__";vr[gr]=vr[gr]||{};vr[gr];var wd=Object.defineProperty,Nd=Object.defineProperties,Od=Object.getOwnPropertyDescriptors,Ua=Object.getOwnPropertySymbols,Cd=Object.prototype.hasOwnProperty,xd=Object.prototype.propertyIsEnumerable,ja=(e,t,n)=>t in e?wd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kd=(e,t)=>{for(var n in t||(t={}))Cd.call(t,n)&&ja(e,n,t[n]);if(Ua)for(var n of Ua(t))xd.call(t,n)&&ja(e,n,t[n]);return e},Td=(e,t)=>Nd(e,Od(t)),Ya={x:0,y:0,pointerId:0,pressure:0,tiltX:0,tiltY:0,width:0,height:0,twist:0,pointerType:null},Dd=Object.keys(Ya);function Id(e={}){let{target:t=Dr}=e,n=B(!1),o=B(e.initialValue||{});Object.assign(o.value,Ya,o.value);let s=r=>{n.value=!0,!(e.pointerTypes&&!e.pointerTypes.includes(r.pointerType))&&(o.value=fd(r,Dd,!1))};return t&&(nn(t,"pointerdown",s,{passive:!0}),nn(t,"pointermove",s,{passive:!0}),nn(t,"pointerleave",()=>n.value=!1,{passive:!0})),Td(kd({},Ed(o)),{isInside:n})}var Ha;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(Ha||(Ha={}));var $d=Object.defineProperty,La=Object.getOwnPropertySymbols,Sd=Object.prototype.hasOwnProperty,Vd=Object.prototype.propertyIsEnumerable,Ba=(e,t,n)=>t in e?$d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Md=(e,t)=>{for(var n in t||(t={}))Sd.call(t,n)&&Ba(e,n,t[n]);if(La)for(var n of La(t))Vd.call(t,n)&&Ba(e,n,t[n]);return e},Pd={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};Md({linear:dd},Pd);var Ad=ue({props:{modelValue:{type:Boolean,default:!1},items:{type:Array,required:!0},x:{type:Number,default:0},y:{type:Number,default:0},isNested:{type:Boolean,default:!1},isFlipped:{type:Object,default:()=>({x:!1,y:!1})},flippable:{type:Boolean,default:!1}},emits:["click","update:modelValue"],setup(e,{emit:t}){let n=null,o=B(null),s=B(-1),r=B(0),i=B({x:!1,y:!1}),a=q(()=>e.flippable&&(i.value.x||e.isFlipped.x)),c=q(()=>e.flippable&&(i.value.y||e.isFlipped.y)),l=q(()=>{let D={};return e.isNested||(D.top=(c.value?e.y-r.value:e.y)+"px",D.left=e.x+"px"),D}),u=q(()=>({"--flipped-x":a.value,"--flipped-y":c.value,"--nested":e.isNested})),d=q(()=>e.items.map(D=>({...D,hover:!1})));return ct([()=>e.y,()=>e.items],()=>{var D,P,w,V;r.value=e.items.length*30;let S=((P=(D=o.value)==null?void 0:D.parentElement)==null?void 0:P.offsetWidth)??0,j=((V=(w=o.value)==null?void 0:w.parentElement)==null?void 0:V.offsetHeight)??0;i.value.x=!e.isNested&&e.x>S*.75,i.value.y=!e.isNested&&e.y+r.value>j-20}),mr(o,()=>{e.modelValue&&t("update:modelValue",!1)}),{el:o,activeMenu:s,flippedX:a,flippedY:c,styles:l,classes:u,itemsWithHoverProperty:d,onClick:D=>{!D.submenu&&D.value&&(t("click",D.value),t("update:modelValue",!1))},onChildClick:D=>{t("click",D),s.value=-1,e.isNested||t("update:modelValue",!1)},onClickOutside:mr,onMouseEnter:(D,P)=>{e.items[P].submenu&&(s.value=P,n!==null&&(clearTimeout(n),n=null))},onMouseLeave:(D,P)=>{e.items[P].submenu&&(n=window.setTimeout(()=>{s.value=-1,n=null},200))}}}}),Rd=["onMouseenter","onMouseleave","onClick"],Fd={class:"flex-fill"},Ud={key:0,class:"__submenu-icon",style:{"line-height":"1em"}},jd=$("svg",{width:"13",height:"13",viewBox:"-60 120 250 250"},[$("path",{d:"M160.875 279.5625 L70.875 369.5625 L70.875 189.5625 L160.875 279.5625 Z",stroke:"none",fill:"white"})],-1),Hd=[jd];function Ld(e,t,n,o,s,r){let i=be("context-menu",!0);return k(),we(Nn,{name:"slide-fade"},{default:bn(()=>[Pt($("div",{ref:"el",class:_e(["baklava-context-menu",e.classes]),style:Fe(e.styles)},[(k(!0),A(te,null,qe(e.itemsWithHoverProperty,(a,c)=>(k(),A(te,null,[a.isDivider?(k(),A("div",{key:`d-${c}`,class:"divider"})):(k(),A("div",{key:`i-${c}`,class:_e(["item",{submenu:!!a.submenu,"--disabled":!!a.disabled}]),onMouseenter:l=>e.onMouseEnter(l,c),onMouseleave:l=>e.onMouseLeave(l,c),onClick:ut(l=>e.onClick(a),["stop","prevent"])},[$("div",Fd,ge(a.label),1),a.submenu?(k(),A("div",Ud,Hd)):lt("",!0),a.submenu?(k(),we(i,{key:1,value:e.activeMenu===c,items:a.submenu,"is-nested":!0,"is-flipped":{x:e.flippedX,y:e.flippedY},flippable:e.flippable,onClick:e.onChildClick},null,8,["value","items","is-flipped","flippable","onClick"])):lt("",!0)],42,Rd))],64))),256))],6),[[pr,e.modelValue]])]),_:1})}var Ir=ne(Ad,[["render",Ld]]),Bd={},Kd={xmlns:"http://www.w3.org/2000/svg",class:"baklava-icon",width:"16",height:"16",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},Wd=$("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1),zd=$("circle",{cx:"12",cy:"12",r:"1"},null,-1),qd=$("circle",{cx:"12",cy:"19",r:"1"},null,-1),Gd=$("circle",{cx:"12",cy:"5",r:"1"},null,-1),Yd=[Wd,zd,qd,Gd];function Xd(e,t){return k(),A("svg",Kd,Yd)}var Xa=ne(Bd,[["render",Xd]]),Jd=ue({props:{node:{type:Object,required:!0},intf:{type:Object,required:!0}},setup(e){let{viewModel:t}=et(),n=Qt("hoveredOver"),o=B(null),s=q(()=>e.intf.connectionCount>0),r=q(()=>({"--input":e.intf.isInput,"--output":!e.intf.isInput,"--connected":s.value})),i=q(()=>e.intf.component&&e.intf.connectionCount===0&&(e.intf.isInput||!e.intf.port)),a=()=>{n(e.intf)},c=()=>{n(void 0)},l=()=>{o.value&&t.value.hooks.renderInterface.execute({intf:e.intf,el:o.value})},u=()=>{let d=t.value.displayedGraph.sidebar;d.nodeId=e.node.id,d.optionName=e.intf.name,d.visible=!0};return Mt(l),En(l),{el:o,isConnected:s,classes:r,showComponent:i,startHover:a,endHover:c,openSidebar:u}}}),Qd=["id"],Zd={key:2,class:"align-middle"};function ef(e,t,n,o,s,r){return k(),A("div",{id:e.intf.id,ref:"el",class:_e(["baklava-node-interface",e.classes])},[e.intf.port?(k(),A("div",{key:0,class:"__port",onPointerover:t[0]||(t[0]=(...i)=>e.startHover&&e.startHover(...i)),onPointerout:t[1]||(t[1]=(...i)=>e.endHover&&e.endHover(...i))},null,32)):lt("",!0),e.showComponent?(k(),we(Wo(e.intf.component),{key:1,modelValue:e.intf.value,"onUpdate:modelValue":t[2]||(t[2]=i=>e.intf.value=i),node:e.node,intf:e.intf,onOpenSidebar:e.openSidebar},null,40,["modelValue","node","intf","onOpenSidebar"])):(k(),A("span",Zd,ge(e.intf.name),1))],10,Qd)}var yr=ne(Jd,[["render",ef]]),tf=["id","data-node-type"],nf=["onPointerdown"],of={class:"__title-label"},sf={class:"__menu"},rf=["onKeydown"],af={class:"__content"},cf={class:"__outputs"},lf={class:"__inputs"},Ja=ue({__name:"Node",props:{node:null,selected:{type:Boolean,default:!1}},emits:["select"],setup(e,{emit:t}){let n=e,{viewModel:o}=et(),{graph:s,switchGraph:r}=Ye(),i=Tr(vt(n.node,"position")),a=B(null),c=B(!1),l=B(""),u=B(null),d=B(!1),h=q(()=>{let N=[{value:"rename",label:"Rename"},{value:"delete",label:"Delete"}];return n.node.type.startsWith(jt)&&N.push({value:"editSubgraph",label:"Edit Subgraph"}),N}),m=q(()=>({"--selected":n.selected,"--dragging":i.dragging.value,"--two-column":!!n.node.twoColumn})),v=q(()=>{var N,F;return{top:`${((N=n.node.position)==null?void 0:N.y)??0}px`,left:`${((F=n.node.position)==null?void 0:F.x)??0}px`,width:`${n.node.width??200}px`}}),y=q(()=>Object.values(n.node.inputs).filter(N=>!N.hidden)),D=q(()=>Object.values(n.node.outputs).filter(N=>!N.hidden)),P=()=>{t("select")},w=N=>{i.onPointerDown(N),document.addEventListener("pointermove",i.onPointerMove),document.addEventListener("pointerup",V),P()},V=()=>{i.onPointerUp(),document.removeEventListener("pointermove",i.onPointerMove),document.removeEventListener("pointerup",V)},S=()=>{d.value=!0},j=async N=>{var F;switch(N){case"delete":s.value.removeNode(n.node);break;case"rename":l.value=n.node.title,c.value=!0,await _n(),(F=u.value)==null||F.focus();break;case"editSubgraph":r(n.node.template);break}},G=()=>{n.node.title=l.value,c.value=!1},x=()=>{a.value&&o.value.hooks.renderNode.execute({node:n.node,el:a.value})};return Mt(x),En(x),(N,F)=>(k(),A("div",{id:e.node.id,ref_key:"el",ref:a,class:_e(["baklava-node",mt(m)]),style:Fe(mt(v)),"data-node-type":e.node.type,onPointerdown:P},[$("div",{class:"__title",onPointerdown:ut(w,["self","stop"])},[c.value?Pt((k(),A("input",{key:1,ref_key:"renameInputEl",ref:u,"onUpdate:modelValue":F[1]||(F[1]=W=>l.value=W),type:"text",class:"baklava-input",placeholder:"Node Name",onBlur:G,onKeydown:Zn(G,["enter"])},null,40,rf)),[[On,l.value]]):(k(),A(te,{key:0},[$("div",of,ge(e.node.title),1),$("div",sf,[J(Xa,{class:"--clickable",onClick:S}),J(Ir,{modelValue:d.value,"onUpdate:modelValue":F[0]||(F[0]=W=>d.value=W),x:0,y:0,items:mt(h),onClick:j},null,8,["modelValue","items"])])],64))],40,nf),$("div",af,[$("div",cf,[(k(!0),A(te,null,qe(mt(D),W=>(k(),we(yr,{key:W.id,node:e.node,intf:W},null,8,["node","intf"]))),128))]),$("div",lf,[(k(!0),A(te,null,qe(mt(y),W=>(k(),we(yr,{key:W.id,node:e.node,intf:W},null,8,["node","intf"]))),128))])])],46,tf))}}),uf=ue({props:{x1:{type:Number,required:!0},y1:{type:Number,required:!0},x2:{type:Number,required:!0},y2:{type:Number,required:!0},state:{type:Number,default:Ge.NONE},isTemporary:{type:Boolean,default:!1}},setup(e){let{viewModel:t}=et(),{graph:n}=Ye(),o=(i,a)=>{let c=(i+n.value.panning.x)*n.value.scaling,l=(a+n.value.panning.y)*n.value.scaling;return[c,l]},s=q(()=>{let[i,a]=o(e.x1,e.y1),[c,l]=o(e.x2,e.y2);if(t.value.settings.useStraightConnections)return`M ${i} ${a} L ${c} ${l}`;{let u=.3*Math.abs(i-c);return`M ${i} ${a} C ${i+u} ${a}, ${c-u} ${l}, ${c} ${l}`}}),r=q(()=>({"--temporary":e.isTemporary,"--allowed":e.state===Ge.ALLOWED,"--forbidden":e.state===Ge.FORBIDDEN}));return{d:s,classes:r}}}),df=["d"];function ff(e,t,n,o,s,r){return k(),A("path",{class:_e(["baklava-connection",e.classes]),d:e.d},null,10,df)}var $r=ne(uf,[["render",ff]]);function pf(e){return document.getElementById(e.id)}function Cn(e){let t=document.getElementById(e.id),n=t?.getElementsByClassName("__port");return{node:t?.closest(".baklava-node")??null,interface:t,port:n&&n.length>0?n[0]:null}}var hf=ue({components:{"connection-view":$r},props:{connection:{type:Object,required:!0}},setup(e){let{graph:t}=Ye(),n,o=B({x1:0,y1:0,x2:0,y2:0}),s=q(()=>e.connection.isInDanger?Ge.FORBIDDEN:Ge.NONE),r=q(()=>{var l;return(l=t.value.findNodeById(e.connection.from.nodeId))==null?void 0:l.position}),i=q(()=>{var l;return(l=t.value.findNodeById(e.connection.to.nodeId))==null?void 0:l.position}),a=l=>l.node&&l.interface&&l.port?[l.node.offsetLeft+l.interface.offsetLeft+l.port.offsetLeft+l.port.clientWidth/2,l.node.offsetTop+l.interface.offsetTop+l.port.offsetTop+l.port.clientHeight/2]:[0,0],c=()=>{let l=Cn(e.connection.from),u=Cn(e.connection.to);l.node&&u.node&&(n||(n=new ResizeObserver(()=>{c()}),n.observe(l.node),n.observe(u.node)));let[d,h]=a(l),[m,v]=a(u);o.value={x1:d,y1:h,x2:m,y2:v}};return Mt(async()=>{await _n(),c()}),Ko(()=>{n&&n.disconnect()}),ct([r,i],()=>c(),{deep:!0}),{d:o,state:s}}});function mf(e,t,n,o,s,r){let i=be("connection-view");return k(),we(i,{x1:e.d.x1,y1:e.d.y1,x2:e.d.x2,y2:e.d.y2,state:e.state},null,8,["x1","y1","x2","y2","state"])}var Qa=ne(hf,[["render",mf]]);function Xo(e){return e.node&&e.interface&&e.port?[e.node.offsetLeft+e.interface.offsetLeft+e.port.offsetLeft+e.port.clientWidth/2,e.node.offsetTop+e.interface.offsetTop+e.port.offsetTop+e.port.clientHeight/2]:[0,0]}var vf=ue({components:{"connection-view":$r},props:{connection:{type:Object,required:!0}},setup(e){let t=q(()=>e.connection?e.connection.status:Ge.NONE);return{d:q(()=>{if(!e.connection)return{input:[0,0],output:[0,0]};let o=Xo(Cn(e.connection.from)),s=e.connection.to?Xo(Cn(e.connection.to)):[e.connection.mx||o[0],e.connection.my||o[1]];return e.connection.from.isInput?{input:s,output:o}:{input:o,output:s}}),status:t}}});function gf(e,t,n,o,s,r){let i=be("connection-view");return k(),we(i,{x1:e.d.input[0],y1:e.d.input[1],x2:e.d.output[0],y2:e.d.output[1],state:e.status,"is-temporary":""},null,8,["x1","y1","x2","y2","state"])}var Za=ne(vf,[["render",gf]]),yf=ue({setup(){let{graph:e}=Ye(),t=B(null),n=B(300),o=q(()=>{let l=e.value.sidebar.nodeId;return e.value.nodes.find(u=>u.id===l)}),s=q(()=>({width:`${n.value}px`})),r=q(()=>o.value?[...Object.values(o.value.inputs),...Object.values(o.value.outputs)].filter(u=>u.displayInSidebar&&u.component):[]),i=()=>{e.value.sidebar.visible=!1},a=()=>{window.addEventListener("mousemove",c),window.addEventListener("mouseup",()=>{window.removeEventListener("mousemove",c)},{once:!0})},c=l=>{var u,d;let h=((d=(u=t.value)==null?void 0:u.parentElement)==null?void 0:d.getBoundingClientRect().width)??500;n.value-=l.movementX,n.value<300?n.value=300:n.value>.9*h&&(n.value=.9*h)};return{el:t,graph:e,node:o,styles:s,displayedInterfaces:r,startResize:a,close:i}}}),_f={class:"__header"},bf={class:"__node-name"};function Ef(e,t,n,o,s,r){return k(),A("div",{ref:"el",class:_e(["baklava-sidebar",{"--open":e.graph.sidebar.visible}]),style:Fe(e.styles)},[$("div",{class:"__resizer",onMousedown:t[0]||(t[0]=(...i)=>e.startResize&&e.startResize(...i))},null,32),$("div",_f,[$("button",{tabindex:"-1",class:"__close",onClick:t[1]||(t[1]=(...i)=>e.close&&e.close(...i))}," \xD7 "),$("div",bf,[$("b",null,ge(e.node?e.node.title:""),1)])]),(k(!0),A(te,null,qe(e.displayedInterfaces,i=>(k(),A("div",{key:i.id,class:"__interface"},[(k(),we(Wo(i.component),{modelValue:i.value,"onUpdate:modelValue":a=>i.value=a,node:e.node,intf:i},null,8,["modelValue","onUpdate:modelValue","node","intf"]))]))),128))],6)}var ec=ne(yf,[["render",Ef]]),wf=ue({setup(){let{viewModel:e}=et(),{graph:t}=Ye(),n=B(null),o=B(!1),s,r=!1,i={x1:0,y1:0,x2:0,y2:0},a=()=>{var w,V;if(!s)return;let S=new Map,j=new Map;for(let N of t.value.nodes){let F=pf(N),W=F?.clientWidth??0,re=F?.clientHeight??0,M=((w=N.position)==null?void 0:w.x)??0,ee=((V=N.position)==null?void 0:V.y)??0;S.set(N,{x1:M,y1:ee,x2:M+W,y2:ee+re}),j.set(N,F)}let G={x1:Number.MAX_SAFE_INTEGER,y1:Number.MAX_SAFE_INTEGER,x2:Number.MIN_SAFE_INTEGER,y2:Number.MIN_SAFE_INTEGER};for(let N of S.values())N.x1<G.x1&&(G.x1=N.x1),N.y1<G.y1&&(G.y1=N.y1),N.x2>G.x2&&(G.x2=N.x2),N.y2>G.y2&&(G.y2=N.y2);let x=50;G.x1-=x,G.y1-=x,G.x2+=x,G.y2+=x,i=G,s.clearRect(0,0,s.canvas.width,s.canvas.height),s.strokeStyle="white";for(let N of t.value.connections){let[F,W]=Xo(Cn(N.from)),[re,M]=Xo(Cn(N.to)),[ee,Te]=c(F,W),[Xe,ve]=c(re,M);if(s.beginPath(),s.moveTo(ee,Te),e.value.settings.useStraightConnections)s.lineTo(Xe,ve);else{let ce=.3*Math.abs(ee-Xe);s.bezierCurveTo(ee+ce,Te,Xe-ce,ve,Xe,ve)}s.stroke()}s.strokeStyle="lightgray";for(let[N,F]of S.entries()){let[W,re]=c(F.x1,F.y1),[M,ee]=c(F.x2,F.y2);s.fillStyle=u(j.get(N)),s.beginPath(),s.rect(W,re,M-W,ee-re),s.fill(),s.stroke()}if(o.value){let N=h(),[F,W]=c(N.x1,N.y1),[re,M]=c(N.x2,N.y2);s.fillStyle="rgba(255, 255, 255, 0.2)",s.fillRect(F,W,re-F,M-W)}},c=(w,V)=>[(w-i.x1)/(i.x2-i.x1)*s.canvas.clientWidth,(V-i.y1)/(i.y2-i.y1)*s.canvas.clientHeight],l=(w,V)=>[w*(i.x2-i.x1)/s.canvas.clientWidth+i.x1,V*(i.y2-i.y1)/s.canvas.clientHeight+i.y1],u=w=>{if(w){let V=w.querySelector(".__content");if(V){let j=d(V);if(j)return j}let S=d(w);if(S)return S}return"gray"},d=w=>{let V=getComputedStyle(w).backgroundColor;if(V&&V!=="rgba(0, 0, 0, 0)")return V},h=()=>{let w=n.value.parentElement.offsetWidth,V=n.value.parentElement.offsetHeight,S=w/t.value.scaling-t.value.panning.x,j=V/t.value.scaling-t.value.panning.y;return{x1:-t.value.panning.x,y1:-t.value.panning.y,x2:S,y2:j}},m=w=>{w.button===0&&(r=!0,v(w))},v=w=>{if(r){let[V,S]=l(w.offsetX,w.offsetY),j=h(),G=(j.x1-j.x2)/2,x=(j.y1-j.y2)/2;t.value.panning.x=-(V+G),t.value.panning.y=-(S+x)}},y=()=>{r=!1},D=()=>{o.value=!0},P=()=>{o.value=!1,y()};return Mt(()=>{s=n.value.getContext("2d"),s.imageSmoothingQuality="high",a()}),{canvas:n,showViewBounds:o,mousedown:m,mousemove:v,mouseup:y,mouseenter:D,mouseleave:P}}});function Nf(e,t,n,o,s,r){return k(),A("canvas",{ref:"canvas",class:"baklava-minimap",onMouseenter:t[0]||(t[0]=(...i)=>e.mouseenter&&e.mouseenter(...i)),onMouseleave:t[1]||(t[1]=(...i)=>e.mouseleave&&e.mouseleave(...i)),onMousedown:t[2]||(t[2]=ut((...i)=>e.mousedown&&e.mousedown(...i),["self"])),onMousemove:t[3]||(t[3]=ut((...i)=>e.mousemove&&e.mousemove(...i),["self"])),onMouseup:t[4]||(t[4]=(...i)=>e.mouseup&&e.mouseup(...i))},null,544)}var tc=ne(wf,[["render",Nf]]),Of=ue({components:{ContextMenu:Ir,VerticalDots:Xa},props:{type:{type:String,required:!0},title:{type:String,required:!0}},setup(e){let{viewModel:t}=et(),{switchGraph:n}=Ye(),o=B(!1),s=q(()=>e.type.startsWith(jt));return{showContextMenu:o,hasContextMenu:s,contextMenuItems:[{label:"Edit Subgraph",value:"editSubgraph"},{label:"Delete Subgraph",value:"deleteSubgraph"}],openContextMenu:()=>{o.value=!0},onContextMenuClick:c=>{let l=e.type.substring(jt.length),u=t.value.editor.graphTemplates.find(d=>d.id===l);if(u)switch(c){case"editSubgraph":n(u);break;case"deleteSubgraph":t.value.editor.removeGraphTemplate(u);break}}}}}),Cf=["data-node-type"],xf={class:"__title"},kf={class:"__title-label"},Tf={key:0,class:"__menu"};function Df(e,t,n,o,s,r){let i=be("vertical-dots"),a=be("context-menu");return k(),A("div",{class:"baklava-node --palette","data-node-type":e.type},[$("div",xf,[$("div",kf,ge(e.title),1),e.hasContextMenu?(k(),A("div",Tf,[J(i,{class:"--clickable",onPointerdown:t[0]||(t[0]=ut(()=>{},["stop","prevent"])),onClick:ut(e.openContextMenu,["stop","prevent"])},null,8,["onClick"]),J(a,{modelValue:e.showContextMenu,"onUpdate:modelValue":t[1]||(t[1]=c=>e.showContextMenu=c),x:-100,y:0,items:e.contextMenuItems,onClick:e.onContextMenuClick,onPointerdown:t[2]||(t[2]=ut(()=>{},["stop","prevent"]))},null,8,["modelValue","items","onClick"])])):lt("",!0)])],8,Cf)}var If=ne(Of,[["render",Df]]),Yo,$f=new Uint8Array(16);function Sf(){if(!Yo&&(Yo=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Yo))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Yo($f)}var Ce=[];for(let e=0;e<256;++e)Ce.push((e+256).toString(16).slice(1));function Vf(e,t=0){return(Ce[e[t+0]]+Ce[e[t+1]]+Ce[e[t+2]]+Ce[e[t+3]]+"-"+Ce[e[t+4]]+Ce[e[t+5]]+"-"+Ce[e[t+6]]+Ce[e[t+7]]+"-"+Ce[e[t+8]]+Ce[e[t+9]]+"-"+Ce[e[t+10]]+Ce[e[t+11]]+Ce[e[t+12]]+Ce[e[t+13]]+Ce[e[t+14]]+Ce[e[t+15]]).toLowerCase()}var Mf=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ka={randomUUID:Mf};function to(e,t,n){if(Ka.randomUUID&&!t&&!e)return Ka.randomUUID();e=e||{};let o=e.random||(e.rng||Sf)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){n=n||0;for(let s=0;s<16;++s)t[n+s]=o[s];return t}return Vf(o)}var Pf=ue({props:{intf:{type:Object,required:!0}},setup(e){return{onClick:()=>{e.intf.callback&&e.intf.callback()}}}}),Af=["title"];function Rf(e,t,n,o,s,r){return k(),A("button",{class:"baklava-button --block",title:e.intf.name,onClick:t[0]||(t[0]=(...i)=>e.onClick&&e.onClick(...i))},ge(e.intf.name),9,Af)}var nc=ne(Pf,[["render",Rf]]),_r=class extends xe{constructor(t,n){super(t,void 0),this.component=je(nc),this.callback=n,this.setPort(!1)}},Ff=ue({props:{intf:{type:Object,required:!0}}}),Uf=["title"],jf=$("div",{class:"__checkmark-container"},[$("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},[$("path",{class:"__checkmark",d:"M 6 5 L 6 10 L 16 10",transform:"rotate(-45 10 10)"})])],-1),Hf={class:"__label"};function Lf(e,t,n,o,s,r){return k(),A("div",{class:_e(["baklava-checkbox",{"--checked":e.intf.value}]),title:e.intf.name,onClick:t[0]||(t[0]=i=>e.intf.value=!e.intf.value)},[jf,$("div",Hf,ge(e.intf.name),1)],10,Uf)}var oc=ne(Ff,[["render",Lf]]),br=class extends xe{constructor(){super(...arguments),this.component=je(oc)}},Wa=9;function Bf(e){return"validate"in e}var no=class extends xe{constructor(t,n,o,s){super(t,n),this.min=o,this.max=s}validate(t){return(!this.min||t>=this.min)&&(!this.max||t<=this.max)}},Sr=(e,t=3)=>{let n=B(null),o=B(!1),s=B(!1),r=B("0"),i=q(()=>{let d=e.value.value.toFixed(t);return d.length>Wa?e.value.value.toExponential(Wa-5):d}),a=d=>Number.isNaN(d)?!1:Bf(e.value)?e.value.validate(d):!0,c=d=>{a(d)&&(e.value.value=d)};return ct(r,()=>{s.value=!1}),{editMode:o,invalid:s,tempValue:r,inputEl:n,stringRepresentation:i,validate:a,setValue:c,enterEditMode:async()=>{r.value=e.value.value.toFixed(t),o.value=!0,await _n(),n.value&&n.value.focus()},leaveEditMode:()=>{let d=parseFloat(r.value);a(d)?(c(d),o.value=!1):s.value=!0}}},Kf={},Wf={xmlns:"http://www.w3.org/2000/svg",class:"baklava-icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},zf=$("polyline",{points:"6 9 12 15 18 9"},null,-1),qf=[zf];function Gf(e,t){return k(),A("svg",Wf,qf)}var Vr=ne(Kf,[["render",Gf]]),Yf=ue({components:{"i-arrow":Vr},props:{intf:{type:Object,required:!0}},setup(e){let t=Sr(vt(e,"intf"),0);return{...t,increment:()=>{t.setValue(e.intf.value+1)},decrement:()=>{t.setValue(e.intf.value-1)}}}}),Xf={class:"baklava-num-input"},Jf=["title"],Qf={class:"__value"},Zf={key:1,class:"__content"};function ep(e,t,n,o,s,r){let i=be("i-arrow");return k(),A("div",Xf,[$("div",{class:"__button --dec",onClick:t[0]||(t[0]=(...a)=>e.decrement&&e.decrement(...a))},[J(i)]),e.editMode?(k(),A("div",Zf,[Pt($("input",{ref:"inputEl","onUpdate:modelValue":t[2]||(t[2]=a=>e.tempValue=a),type:"number",class:_e(["baklava-input",{"--invalid":e.invalid}]),style:{"text-align":"right"},onBlur:t[3]||(t[3]=(...a)=>e.leaveEditMode&&e.leaveEditMode(...a)),onKeydown:t[4]||(t[4]=Zn((...a)=>e.leaveEditMode&&e.leaveEditMode(...a),["enter"]))},null,34),[[On,e.tempValue]])])):(k(),A("div",{key:0,class:"__content",onClick:t[1]||(t[1]=(...a)=>e.enterEditMode&&e.enterEditMode(...a))},[$("div",{class:"__label",title:e.intf.name},ge(e.intf.name),9,Jf),$("div",Qf,ge(e.stringRepresentation),1)])),$("div",{class:"__button --inc",onClick:t[5]||(t[5]=(...a)=>e.increment&&e.increment(...a))},[J(i)])])}var sc=ne(Yf,[["render",ep]]),Er=class extends no{constructor(){super(...arguments),this.component=je(sc)}validate(t){return Number.isInteger(t)&&super.validate(t)}},tp=ue({components:{"i-arrow":Vr},props:{intf:{type:Object,required:!0}},setup(e){let t=Sr(vt(e,"intf"));return{...t,increment:()=>{t.setValue(e.intf.value+.1)},decrement:()=>{t.setValue(e.intf.value-.1)}}}}),np={class:"baklava-num-input"},op=["title"],sp={class:"__value"},rp={key:1,class:"__content"};function ip(e,t,n,o,s,r){let i=be("i-arrow");return k(),A("div",np,[$("div",{class:"__button --dec",onClick:t[0]||(t[0]=(...a)=>e.decrement&&e.decrement(...a))},[J(i)]),e.editMode?(k(),A("div",rp,[Pt($("input",{ref:"inputEl","onUpdate:modelValue":t[2]||(t[2]=a=>e.tempValue=a),type:"number",class:_e(["baklava-input",{"--invalid":e.invalid}]),style:{"text-align":"right"},onBlur:t[3]||(t[3]=(...a)=>e.leaveEditMode&&e.leaveEditMode(...a)),onKeydown:t[4]||(t[4]=Zn((...a)=>e.leaveEditMode&&e.leaveEditMode(...a),["enter"]))},null,34),[[On,e.tempValue]])])):(k(),A("div",{key:0,class:"__content",onClick:t[1]||(t[1]=(...a)=>e.enterEditMode&&e.enterEditMode(...a))},[$("div",{class:"__label",title:e.intf.name},ge(e.intf.name),9,op),$("div",sp,ge(e.stringRepresentation),1)])),$("div",{class:"__button --inc",onClick:t[5]||(t[5]=(...a)=>e.increment&&e.increment(...a))},[J(i)])])}var rc=ne(tp,[["render",ip]]),wr=class extends no{constructor(){super(...arguments),this.component=je(rc)}},ap=ue({components:{"i-arrow":Vr},props:{intf:{type:Object,required:!0}},setup(e){let t=B(null),n=B(!1),o=q(()=>e.intf.items.find(i=>typeof i=="string"?i===e.intf.value:i.value===e.intf.value)),s=q(()=>o.value?typeof o.value=="string"?o.value:o.value.text:""),r=i=>{e.intf.value=typeof i=="string"?i:i.value};return mr(t,()=>{n.value=!1}),{el:t,open:n,selectedItem:o,selectedText:s,setSelected:r}}}),cp=["title"],lp={class:"__selected"},up={class:"__text"},dp={class:"__icon"},fp={class:"__dropdown"},pp={class:"item --header"},hp=["onClick"];function mp(e,t,n,o,s,r){let i=be("i-arrow");return k(),A("div",{ref:"el",class:_e(["baklava-select",{"--open":e.open}]),title:e.intf.name,onClick:t[0]||(t[0]=a=>e.open=!e.open)},[$("div",lp,[$("div",up,ge(e.selectedText),1),$("div",dp,[J(i)])]),J(Nn,{name:"slide-fade"},{default:bn(()=>[Pt($("div",fp,[$("div",pp,ge(e.intf.name),1),(k(!0),A(te,null,qe(e.intf.items,(a,c)=>(k(),A("div",{key:c,class:_e(["item",{"--active":a===e.selectedItem}]),onClick:l=>e.setSelected(a)},ge(typeof a=="string"?a:a.text),11,hp))),128))],512),[[pr,e.open]])]),_:1})],10,cp)}var ic=ne(ap,[["render",mp]]),Nr=class extends xe{constructor(t,n,o){super(t,n),this.component=je(ic),this.items=o}},vp=ue({props:{intf:{type:Object,required:!0}},setup(e){let t=B(null),n=Sr(vt(e,"intf")),o=B(!1),s=B(!1),r=q(()=>Math.min(100,Math.max(0,e.intf.value*100/(e.intf.max-e.intf.min))));return{...n,el:t,percentage:r,mousedown:()=>{n.editMode.value||(s.value=!0)},mouseup:()=>{n.editMode.value||(o.value||n.enterEditMode(),s.value=!1,o.value=!1)},mousemove:u=>{if(n.editMode.value)return;let d=Math.max(e.intf.min,Math.min(e.intf.max,(e.intf.max-e.intf.min)*(u.offsetX/t.value.clientWidth)+e.intf.min));s.value&&(n.setValue(d),o.value=!0)},mouseleave:u=>{n.editMode.value||(s.value&&(u.offsetX>=t.value.clientWidth?n.setValue(e.intf.max):u.offsetX<=0&&n.setValue(e.intf.min)),s.value=!1,o.value=!1)}}}}),gp={key:0,class:"__content"},yp={class:"__label"},_p={class:"__value"},bp={key:1,class:"__content"};function Ep(e,t,n,o,s,r){return k(),A("div",{ref:"el",class:_e(["baklava-slider",{"baklava-ignore-mouse":!e.editMode}]),onPointerdown:t[3]||(t[3]=(...i)=>e.mousedown&&e.mousedown(...i)),onPointerup:t[4]||(t[4]=(...i)=>e.mouseup&&e.mouseup(...i)),onPointermove:t[5]||(t[5]=(...i)=>e.mousemove&&e.mousemove(...i)),onPointerleave:t[6]||(t[6]=(...i)=>e.mouseleave&&e.mouseleave(...i))},[$("div",{class:"__slider",style:Fe({width:e.percentage+"%"})},null,4),e.editMode?(k(),A("div",bp,[Pt($("input",{ref:"inputEl","onUpdate:modelValue":t[0]||(t[0]=i=>e.tempValue=i),type:"number",class:_e(["baklava-input",{"--invalid":e.invalid}]),style:{"text-align":"right"},onBlur:t[1]||(t[1]=(...i)=>e.leaveEditMode&&e.leaveEditMode(...i)),onKeydown:t[2]||(t[2]=Zn((...i)=>e.leaveEditMode&&e.leaveEditMode(...i),["enter"]))},null,34),[[On,e.tempValue]])])):(k(),A("div",gp,[$("div",yp,ge(e.intf.name),1),$("div",_p,ge(e.stringRepresentation),1)]))],34)}var ac=ne(vp,[["render",Ep]]),Or=class extends no{constructor(t,n,o,s){super(t,n,o,s),this.component=je(ac),this.min=o,this.max=s}},wp=ue({props:{intf:{type:Object,required:!0}}});function Np(e,t,n,o,s,r){return k(),A("div",null,ge(e.intf.value),1)}var Op=ne(wp,[["render",Np]]),Cr=class extends xe{constructor(t,n){super(t,n),this.component=je(Op),this.setPort(!1)}},Cp=ue({props:{intf:{type:Object,required:!0},modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){return{v:q({get:()=>e.modelValue,set:o=>{t("update:modelValue",o)}})}}}),xp=["placeholder","title"];function kp(e,t,n,o,s,r){return k(),A("div",null,[Pt($("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>e.v=i),type:"text",class:"baklava-input",placeholder:e.intf.name,title:e.intf.name},null,8,xp),[[On,e.v]])])}var cc=ne(Cp,[["render",kp]]),oo=class extends xe{constructor(){super(...arguments),this.component=je(cc)}},so="__baklava_SubgraphInputNode",ro="__baklava_SubgraphOutputNode",lc=uo({type:so,title:"Subgraph Input",inputs:{name:()=>new oo("Name","Input").setPort(!1)},outputs:{placeholder:()=>new xe("Connection",void 0)},onCreate(){this.graphInterfaceId=to()}}),uc=uo({type:ro,title:"Subgraph Output",inputs:{name:()=>new oo("Name","Output").setPort(!1),placeholder:()=>new xe("Connection",void 0)},onCreate(){this.graphInterfaceId=to()}});function dc(e,t,n){if(!t.template)return!1;if(nt(t.template)===n)return!0;let o=e.graphTemplates.find(r=>nt(r)===n);return o?o.nodes.filter(r=>r.type.startsWith(jt)).some(r=>dc(e,t,r.type)):!1}var Tp=ue({components:{PaletteEntry:If},setup(){let{viewModel:e}=et(),{x:t,y:n}=Id(),{transform:o}=Ga(),s=Qt("editorEl"),r=B(null),i=q(()=>{let l=Array.from(e.value.editor.nodeTypes.entries()),u=new Set(l.map(([,h])=>h.category)),d=[];for(let h of u.values()){let m=l.filter(([,v])=>v.category===h);e.value.displayedGraph.template?m=m.filter(([v])=>!dc(e.value.editor,e.value.displayedGraph,v)):m=m.filter(([v])=>![so,ro].includes(v)),m.length>0&&d.push({name:h,nodeTypes:Object.fromEntries(m)})}return d.sort((h,m)=>h.name==="default"?-1:m.name==="default"||h.name>m.name?1:-1),d}),a=q(()=>{if(!r.value||!s?.value)return{};let{left:l,top:u}=s.value.getBoundingClientRect();return{top:`${n.value-u}px`,left:`${t.value-l}px`}});return{draggedNode:r,categories:i,draggedNodeStyles:a,onDragStart:(l,u)=>{r.value={type:l,nodeInformation:u};let d=()=>{let h=Pe(new u.type);e.value.displayedGraph.addNode(h);let m=s.value.getBoundingClientRect(),[v,y]=o(t.value-m.left,n.value-m.top);h.position.x=v,h.position.y=y,r.value=null,document.removeEventListener("pointerup",d)};document.addEventListener("pointerup",d)},mouseX:t,mouseY:n}}}),Dp={class:"baklava-node-palette"},Ip={key:0};function $p(e,t,n,o,s,r){let i=be("PaletteEntry");return k(),A(te,null,[$("div",Dp,[(k(!0),A(te,null,qe(e.categories,a=>(k(),A("section",{key:a.name},[a.name!=="default"?(k(),A("h1",Ip,ge(a.name),1)):lt("",!0),(k(!0),A(te,null,qe(a.nodeTypes,(c,l)=>(k(),we(i,{key:l,type:l,title:c.title,onPointerdown:u=>e.onDragStart(l,c)},null,8,["type","title","onPointerdown"]))),128))]))),128))]),J(Nn,{name:"fade"},{default:bn(()=>[e.draggedNode?(k(),A("div",{key:0,class:"baklava-dragged-node",style:Fe(e.draggedNodeStyles)},[J(i,{type:e.draggedNode.type,title:e.draggedNode.nodeInformation.title},null,8,["type","title"])],4)):lt("",!0)]),_:1})],64)}var Sp=ne(Tp,[["render",$p]]),xn="SAVE_SUBGRAPH";function Vp(e,t){let n=()=>{let o=e.value;if(!o.template)throw new Error("Graph template property not set");let s=[],r=[],i=o.nodes.filter(d=>d.type===so);for(let d of i){let h=o.connections.filter(m=>m.from===d.outputs.placeholder);h.forEach(m=>{r.push({id:d.graphInterfaceId,name:d.inputs.name.value,nodeInterfaceId:m.to.id})}),s.push(...h)}let a=[],c=o.nodes.filter(d=>d.type===ro);for(let d of c){let h=o.connections.filter(m=>m.to===d.inputs.placeholder);h.forEach(m=>{a.push({id:d.graphInterfaceId,name:d.inputs.name.value,nodeInterfaceId:m.from.id})}),s.push(...h)}let l=o.connections.filter(d=>!s.includes(d)),u=o.nodes.filter(d=>d.type!==so&&d.type!==ro);o.template.update({inputs:r,outputs:a,connections:l.map(d=>({id:d.id,from:d.from.id,to:d.to.id})),nodes:u.map(d=>d.save())}),o.template.panning=o.panning,o.template.scaling=o.scaling};t.registerCommand(xn,{canExecute:()=>{var o;return e.value!==((o=e.value.editor)==null?void 0:o.graph)},execute:n})}var Mr="CREATE_SUBGRAPH",za=[so,ro];function Mp(e,t,n){let o=()=>e.value.selectedNodes.filter(r=>!za.includes(r.type)).length>0,s=()=>{let r=e.value,i=e.value.editor;if(r.selectedNodes.length===0)return;let a=r.selectedNodes.filter(x=>!za.includes(x.type)),c=a.flatMap(x=>Object.values(x.inputs)),l=a.flatMap(x=>Object.values(x.outputs)),u=r.connections.filter(x=>!l.includes(x.from)&&c.includes(x.to)),d=r.connections.filter(x=>l.includes(x.from)&&!c.includes(x.to)),h=r.connections.filter(x=>l.includes(x.from)&&c.includes(x.to)),m=u.map(x=>x.to),v=d.map(x=>x.from),y=new Map,D=[];for(let x of m){let N=to();y.set(x.id,N),D.push({id:N,nodeInterfaceId:x.id,name:x.name})}let P=[];for(let x of v){let N=to();y.set(x.id,N),P.push({id:N,nodeInterfaceId:x.id,name:x.name})}let w=Pe(new pt({connections:h.map(x=>({id:x.id,from:x.from.id,to:x.to.id})),inputs:D,outputs:P,nodes:a.map(x=>x.save())},i));i.addGraphTemplate(w);let V=i.nodeTypes.get(nt(w));if(!V)throw new Error("Unable to create subgraph: Could not find corresponding graph node type");let S=Pe(new V.type);r.addNode(S);let j=Math.round(a.map(x=>x.position.x).reduce((x,N)=>x+N,0)/a.length),G=Math.round(a.map(x=>x.position.y).reduce((x,N)=>x+N,0)/a.length);S.position.x=j,S.position.y=G,u.forEach(x=>{r.removeConnection(x),r.addConnection(x.from,S.inputs[y.get(x.to.id)])}),d.forEach(x=>{r.removeConnection(x),r.addConnection(S.outputs[y.get(x.from.id)],x.to)}),a.forEach(x=>r.removeNode(x)),t.canExecuteCommand(xn)&&t.executeCommand(xn),n(w),e.value.panning={...r.panning},e.value.scaling=r.scaling};t.registerCommand(Mr,{canExecute:o,execute:s})}var xr="DELETE_NODES";function Pp(e,t){t.registerCommand(xr,{canExecute:()=>e.value.selectedNodes.length>0,execute(){e.value.selectedNodes.forEach(n=>e.value.removeNode(n))}}),t.registerHotkey(["Delete"],xr)}var Pr="SWITCH_TO_MAIN_GRAPH";function Ap(e,t,n){t.registerCommand(Pr,{canExecute:()=>e.value!==e.value.editor.graph,execute:()=>{t.executeCommand(xn),n(e.value.editor.graph)}})}function Rp(e,t,n){Pp(e,t),Mp(e,t,n),Vp(e,t),Ap(e,t,n)}var Jo=class{constructor(t,n){this.type=t,t==="addNode"?this.nodeId=n:this.nodeState=n}undo(t){this.type==="addNode"?this.removeNode(t):this.addNode(t)}redo(t){this.type==="addNode"&&this.nodeState?this.addNode(t):this.type==="removeNode"&&this.nodeId&&this.removeNode(t)}addNode(t){let n=t.editor.nodeTypes.get(this.nodeState.type);if(!n)return;let o=new n.type;t.addNode(o),o.load(this.nodeState),this.nodeId=o.id}removeNode(t){let n=t.nodes.find(o=>o.id===this.nodeId);n&&(this.nodeState=n.save(),t.removeNode(n))}},Qo=class{constructor(t,n){if(this.type=t,t==="addConnection")this.connectionId=n;else{let o=n;this.connectionState={id:o.id,from:o.from.id,to:o.to.id}}}undo(t){this.type==="addConnection"?this.removeConnection(t):this.addConnection(t)}redo(t){this.type==="addConnection"&&this.connectionState?this.addConnection(t):this.type==="removeConnection"&&this.connectionId&&this.removeConnection(t)}addConnection(t){let n=t.findNodeInterface(this.connectionState.from),o=t.findNodeInterface(this.connectionState.to);!n||!o||t.addConnection(n,o)}removeConnection(t){let n=t.connections.find(o=>o.id===this.connectionId);n&&(this.connectionState={id:n.id,from:n.from.id,to:n.to.id},t.removeConnection(n))}},kr=class{constructor(t){if(this.type="transaction",t.length===0)throw new Error("Can't create a transaction with no steps");this.steps=t}undo(t){for(let n=this.steps.length-1;n>=0;n--)this.steps[n].undo(t)}redo(t){for(let n=0;n<this.steps.length;n++)this.steps[n].redo(t)}},Zo="UNDO",es="REDO",Ar="START_TRANSACTION",Rr="COMMIT_TRANSACTION";function Fp(e,t){let n=Symbol("HistoryToken"),o=B(200),s=B([]),r=B(!1),i=B(-1),a=B(!1),c=B([]),l=D=>{if(!r.value)if(a.value)c.value.push(D);else for(i.value!==s.value.length-1&&(s.value=s.value.slice(0,i.value+1)),s.value.push(D),i.value++;s.value.length>o.value;)s.value.shift()},u=()=>{a.value=!0},d=()=>{a.value=!1,c.value.length>0&&(l(new kr(c.value)),c.value=[])},h=()=>s.value.length!==0&&i.value!==-1,m=()=>{h()&&(r.value=!0,s.value[i.value--].undo(e.value),r.value=!1)},v=()=>s.value.length!==0&&i.value<s.value.length-1,y=()=>{v()&&(r.value=!0,s.value[++i.value].redo(e.value),r.value=!1)};return ct(e,(D,P)=>{P&&(P.events.addNode.unsubscribe(n),P.events.removeNode.unsubscribe(n),P.events.addConnection.unsubscribe(n),P.events.removeConnection.unsubscribe(n)),D&&(D.events.addNode.subscribe(n,w=>{l(new Jo("addNode",w.id))}),D.events.removeNode.subscribe(n,w=>{l(new Jo("removeNode",w.save()))}),D.events.addConnection.subscribe(n,w=>{l(new Qo("addConnection",w.id))}),D.events.removeConnection.subscribe(n,w=>{l(new Qo("removeConnection",w))}))},{immediate:!0}),t.registerCommand(Zo,{canExecute:h,execute:m}),t.registerCommand(es,{canExecute:v,execute:y}),t.registerCommand(Ar,{canExecute:()=>!a.value,execute:u}),t.registerCommand(Rr,{canExecute:()=>a.value,execute:d}),t.registerHotkey(["Control","z"],Zo),t.registerHotkey(["Control","y"],es),Pe({maxSteps:o})}var ts="COPY",ns="PASTE",fc="CLEAR_CLIPBOARD";function Up(e,t,n){let o=Symbol("ClipboardToken"),s=B(""),r=B(""),i=q(()=>!s.value),a=()=>{s.value="",r.value=""},c=()=>{let d=e.value.selectedNodes.flatMap(m=>[...Object.values(m.inputs),...Object.values(m.outputs)]),h=e.value.connections.filter(m=>d.includes(m.from)||d.includes(m.to)).map(m=>({from:m.from.id,to:m.to.id}));r.value=JSON.stringify(h),s.value=JSON.stringify(e.value.selectedNodes.map(m=>m.save()))},l=(d,h,m)=>{for(let v of d){let y;if((!m||m==="input")&&(y=Object.values(v.inputs).find(D=>D.id===h)),!y&&(!m||m==="output")&&(y=Object.values(v.outputs).find(D=>D.id===h)),y)return y}},u=()=>{if(i.value)return;let d=new Map,h=JSON.parse(s.value),m=JSON.parse(r.value),v=[],y=[],D=e.value;n.executeCommand(Ar);for(let P of h){let w=t.value.nodeTypes.get(P.type);if(!w){console.warn(`Node type ${P.type} not registered`);return}let V=new w.type,S=V.id;v.push(V);let j=G=>{Object.values(G).forEach(x=>{x.hooks.load.subscribe(o,N=>{let F=to();return d.set(N.id,F),x.id=F,x.hooks.load.unsubscribe(o),N})})};j(V.inputs),j(V.outputs),V.hooks.beforeLoad.subscribe(o,G=>{let x=G;return x.position&&(x.position.x+=10,x.position.y+=10),V.hooks.beforeLoad.unsubscribe(o),x}),D.addNode(V),V.load(P),V.id=S,d.set(P.id,S)}for(let P of m){let w=l(v,d.get(P.from),"output"),V=l(v,d.get(P.to),"input");if(!w||!V)continue;let S=D.addConnection(w,V);S&&y.push(S)}return n.executeCommand(Rr),{newNodes:v,newConnections:y}};return n.registerCommand(ts,{canExecute:()=>!0,execute:c}),n.registerHotkey(["Control","c"],ts),n.registerCommand(ns,{canExecute:()=>!i.value,execute:u}),n.registerHotkey(["Control","v"],ns),n.registerCommand(fc,{canExecute:()=>!0,execute:a}),Pe({isEmpty:i})}var pc="OPEN_SIDEBAR";function jp(e,t){t.registerCommand(pc,{execute:n=>{e.value.sidebar.nodeId=n,e.value.sidebar.visible=!0},canExecute:()=>!0})}function Hp(e,t){jp(e,t)}var Lp=Object.freeze(Object.defineProperty({__proto__:null,CREATE_SUBGRAPH_COMMAND:Mr,DELETE_NODES_COMMAND:xr,SAVE_SUBGRAPH_COMMAND:xn,SWITCH_TO_MAIN_GRAPH_COMMAND:Pr,COMMIT_TRANSACTION_COMMAND:Rr,START_TRANSACTION_COMMAND:Ar,UNDO_COMMAND:Zo,REDO_COMMAND:es,CLEAR_CLIPBOARD_COMMAND:fc,COPY_COMMAND:ts,PASTE_COMMAND:ns,OPEN_SIDEBAR_COMMAND:pc},Symbol.toStringTag,{value:"Module"})),Bp={},Kp={xmlns:"http://www.w3.org/2000/svg",class:"baklava-icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},Wp=$("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1),zp=$("path",{d:"M9 13l-4 -4l4 -4m-4 4h11a4 4 0 0 1 0 8h-1"},null,-1),qp=[Wp,zp];function Gp(e,t){return k(),A("svg",Kp,qp)}var Yp=ne(Bp,[["render",Gp]]),Xp={},Jp={xmlns:"http://www.w3.org/2000/svg",class:"baklava-icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},Qp=$("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1),Zp=$("path",{d:"M15 13l4 -4l-4 -4m4 4h-11a4 4 0 0 0 0 8h1"},null,-1),eh=[Qp,Zp];function th(e,t){return k(),A("svg",Jp,eh)}var nh=ne(Xp,[["render",th]]),oh={},sh={xmlns:"http://www.w3.org/2000/svg",class:"baklava-icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},rh=$("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1),ih=$("line",{x1:"5",y1:"12",x2:"19",y2:"12"},null,-1),ah=$("line",{x1:"5",y1:"12",x2:"11",y2:"18"},null,-1),ch=$("line",{x1:"5",y1:"12",x2:"11",y2:"6"},null,-1),lh=[rh,ih,ah,ch];function uh(e,t){return k(),A("svg",sh,lh)}var dh=ne(oh,[["render",uh]]),fh={},ph={xmlns:"http://www.w3.org/2000/svg",class:"baklava-icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},hh=$("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1),mh=$("path",{d:"M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2"},null,-1),vh=$("rect",{x:"9",y:"3",width:"6",height:"4",rx:"2"},null,-1),gh=[hh,mh,vh];function yh(e,t){return k(),A("svg",ph,gh)}var _h=ne(fh,[["render",yh]]),bh={},Eh={xmlns:"http://www.w3.org/2000/svg",class:"baklava-icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},wh=$("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1),Nh=$("rect",{x:"8",y:"8",width:"12",height:"12",rx:"2"},null,-1),Oh=$("path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"},null,-1),Ch=[wh,Nh,Oh];function xh(e,t){return k(),A("svg",Eh,Ch)}var kh=ne(bh,[["render",xh]]),Th={},Dh={xmlns:"http://www.w3.org/2000/svg",class:"baklava-icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},Ih=$("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1),$h=$("path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2"},null,-1),Sh=$("circle",{cx:"12",cy:"14",r:"2"},null,-1),Vh=$("polyline",{points:"14 4 14 8 8 8 8 4"},null,-1),Mh=[Ih,$h,Sh,Vh];function Ph(e,t){return k(),A("svg",Dh,Mh)}var Ah=ne(Th,[["render",Ph]]),Rh={},Fh={xmlns:"http://www.w3.org/2000/svg",class:"baklava-icon",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},Uh=la('<path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 3h4v4h-4z"></path><path d="M3 17h4v4h-4z"></path><path d="M17 17h4v4h-4z"></path><path d="M7 17l5 -4l5 4"></path><line x1="12" y1="7" x2="12" y2="13"></line>',6),jh=[Uh];function Hh(e,t){return k(),A("svg",Fh,jh)}var Lh=ne(Rh,[["render",Hh]]),Bh=ue({props:{command:{type:String,required:!0},title:{type:String,required:!0},icon:{type:Object,required:!1,default:void 0}},setup(){let{viewModel:e}=et();return{viewModel:e}}}),Kh=["disabled","title"];function Wh(e,t,n,o,s,r){return k(),A("button",{class:"baklava-toolbar-entry baklava-toolbar-button",disabled:!e.viewModel.commandHandler.canExecuteCommand(e.command),title:e.title,onClick:t[0]||(t[0]=i=>e.viewModel.commandHandler.executeCommand(e.command))},[e.icon?(k(),we(Wo(e.icon),{key:0})):(k(),A(te,{key:1},[ir(ge(e.title),1)],64))],8,Kh)}var zh=ne(Bh,[["render",Wh]]),qh=ue({components:{ToolbarButton:zh},setup(){let{viewModel:e}=et();return{isSubgraph:q(()=>e.value.displayedGraph!==e.value.editor.graph),commands:[{command:ts,title:"Copy",icon:kh},{command:ns,title:"Paste",icon:_h},{command:Zo,title:"Undo",icon:Yp},{command:es,title:"Redo",icon:nh},{command:Mr,title:"Create Subgraph",icon:Lh}],subgraphCommands:[{command:xn,title:"Save Subgraph",icon:Ah},{command:Pr,title:"Back to Main Graph",icon:dh}]}}}),Gh={class:"baklava-toolbar"};function Yh(e,t,n,o,s,r){let i=be("toolbar-button");return k(),A("div",Gh,[(k(!0),A(te,null,qe(e.commands,a=>(k(),we(i,{key:a.command,command:a.command,title:a.title,icon:a.icon},null,8,["command","title","icon"]))),128)),e.isSubgraph?(k(!0),A(te,{key:0},qe(e.subgraphCommands,a=>(k(),we(i,{key:a.command,command:a.command,title:a.title,icon:a.icon},null,8,["command","title","icon"]))),128)):lt("",!0)])}var Xh=ne(qh,[["render",Yh]]),Jh=ue({components:{Background:ad,Node:Ja,ConnectionWrapper:Qa,TemporaryConnection:Za,Sidebar:ec,Minimap:tc,NodePalette:Sp,Toolbar:Xh},props:{viewModel:{type:Object,required:!0}},setup(e){let t=Symbol("EditorToken"),n=vt(e,"viewModel");qa(n);let o=B(null);jo("editorEl",o);let s=q(()=>e.viewModel.displayedGraph.nodes),r=q(()=>e.viewModel.displayedGraph.connections),i=q(()=>e.viewModel.displayedGraph.selectedNodes),a=od(),c=sd(),l=q(()=>({...a.styles.value})),u=B(0);e.viewModel.editor.hooks.load.subscribe(t,w=>(u.value++,w));let d=w=>{a.onPointerMove(w),c.onMouseMove(w)},h=w=>{w.button===0&&(w.target===o.value&&(P(),a.onPointerDown(w)),c.onMouseDown())},m=w=>{a.onPointerUp(w),c.onMouseUp()},v=w=>{w.key==="Tab"&&w.preventDefault(),e.viewModel.commandHandler.handleKeyDown(w)},y=w=>{e.viewModel.commandHandler.handleKeyUp(w)},D=w=>{e.viewModel.commandHandler.pressedKeys.includes("Control")||P(),e.viewModel.displayedGraph.selectedNodes.push(w)},P=()=>{e.viewModel.displayedGraph.selectedNodes=[]};return{el:o,counter:u,nodes:s,connections:r,selectedNodes:i,nodeContainerStyle:l,onPointerMove:d,onPointerDown:h,onPointerUp:m,keyDown:v,keyUp:y,selectNode:D,temporaryConnection:c.temporaryConnection,mouseWheel:a.onMouseWheel,dragging:a.dragging}}}),Qh={class:"connections-container"};function Zh(e,t,n,o,s,r){let i=be("background"),a=be("toolbar"),c=be("node-palette"),l=be("connection-wrapper"),u=be("temporary-connection"),d=be("node"),h=be("sidebar"),m=be("minimap");return k(),A("div",{ref:"el",tabindex:"-1",class:_e(["baklava-editor",{"baklava-ignore-mouse":!!e.temporaryConnection||e.dragging,"--temporary-connection":!!e.temporaryConnection}]),onPointermove:t[0]||(t[0]=ut((...v)=>e.onPointerMove&&e.onPointerMove(...v),["self"])),onPointerdown:t[1]||(t[1]=(...v)=>e.onPointerDown&&e.onPointerDown(...v)),onPointerup:t[2]||(t[2]=(...v)=>e.onPointerUp&&e.onPointerUp(...v)),onWheel:t[3]||(t[3]=ut((...v)=>e.mouseWheel&&e.mouseWheel(...v),["self"])),onKeydown:t[4]||(t[4]=(...v)=>e.keyDown&&e.keyDown(...v)),onKeyup:t[5]||(t[5]=(...v)=>e.keyUp&&e.keyUp(...v))},[bt(e.$slots,"background",{},()=>[J(i)]),bt(e.$slots,"toolbar",{},()=>[J(a)]),bt(e.$slots,"palette",{},()=>[J(c)]),(k(),A("svg",Qh,[(k(!0),A(te,null,qe(e.connections,v=>(k(),A("g",{key:v.id+e.counter.toString()},[bt(e.$slots,"connection",{connection:v},()=>[J(l,{connection:v},null,8,["connection"])])]))),128)),bt(e.$slots,"temporaryConnection",{temporaryConnection:e.temporaryConnection},()=>[e.temporaryConnection?(k(),we(u,{key:0,connection:e.temporaryConnection},null,8,["connection"])):lt("",!0)])])),$("div",{class:"node-container",style:Fe(e.nodeContainerStyle)},[J(Ma,{name:"fade"},{default:bn(()=>[(k(!0),A(te,null,qe(e.nodes,v=>bt(e.$slots,"node",{node:v,selected:e.selectedNodes.includes(v),onSelect:y=>e.selectNode(v)},()=>[(k(),we(d,{key:v.id+e.counter.toString(),node:v,selected:e.selectedNodes.includes(v),onSelect:y=>e.selectNode(v)},null,8,["node","selected","onSelect"]))])),256))]),_:3})],4),bt(e.$slots,"sidebar",{},()=>[J(h)]),bt(e.$slots,"minimap",{},()=>[e.viewModel.settings.enableMinimap?(k(),we(m,{key:0})):lt("",!0)])],34)}var Fr=ne(Jh,[["render",Zh]]);function em(e){let t=B([]),n=B([]);return{pressedKeys:t,handleKeyDown:i=>{t.value.includes(i.key)||t.value.push(i.key),n.value.forEach(a=>{a.keys.every(c=>t.value.includes(c))&&e(a.commandName)})},handleKeyUp:i=>{let a=t.value.indexOf(i.key);a>=0&&t.value.splice(a,1)},registerHotkey:(i,a)=>{n.value.push({keys:i,commandName:a})}}}var hc=()=>{let e=B(new Map),t=(r,i)=>{if(e.value.has(r))throw new Error(`Command "${r}" already exists`);e.value.set(r,i)},n=(r,i=!1,...a)=>{if(!e.value.has(r)){if(i)throw new Error(`[CommandHandler] Command ${r} not registered`);return}return e.value.get(r).execute(...a)},o=(r,i=!1,...a)=>{if(!e.value.has(r)){if(i)throw new Error(`[CommandHandler] Command ${r} not registered`);return!1}return e.value.get(r).canExecute(a)},s=em(n);return Pe({registerCommand:t,executeCommand:n,canExecuteCommand:o,...s})},tm=e=>!(e instanceof We);function nm(e,t){return{switchGraph:o=>{let s;if(tm(o))s=new We(e.value),o.createGraph(s),s.inputs.forEach(r=>{let i=new lc;i.inputs.name.value=r.name,i.graphInterfaceId=r.id,s.addNode(i);let a=s.findNodeInterface(r.nodeInterfaceId);if(!a){console.warn(`Could not find target interface ${r.nodeInterfaceId} for subgraph input node`);return}s.addConnection(i.outputs.placeholder,a)}),s.outputs.forEach(r=>{let i=new uc;i.inputs.name.value=r.name,i.graphInterfaceId=r.id,s.addNode(i);let a=s.findNodeInterface(r.nodeInterfaceId);if(!a){console.warn(`Could not find target interface ${r.nodeInterfaceId} for subgraph input node`);return}s.addConnection(a,i.inputs.placeholder)});else{if(o!==e.value.graph)throw new Error("Can only switch using 'Graph' instance when it is the root graph. Otherwise a 'GraphTemplate' must be used.");s=o}t.value&&t.value!==e.value.graph&&t.value.destroy(),s.panning=s.panning??o.panning??{x:0,y:0},s.scaling=s.scaling??o.scaling??1,s.selectedNodes=s.selectedNodes??[],s.sidebar=s.sidebar??{visible:!1,nodeId:"",optionName:""},t.value=s}}}function om(e){e.position=e.position??{x:0,y:0},e.disablePointerEvents=!1,e.twoColumn=e.twoColumn??!1,e.width=e.width??200}function Ur(e){let t=B(e??new Sn),n=Symbol("ViewModelToken"),o=B(null),s=Ps(o),{switchGraph:r}=nm(t,o),i=q(()=>s.value&&s.value!==t.value.graph),a=Pe({useStraightConnections:!1,enableMinimap:!1,background:{gridSize:100,gridDivision:5,subGridVisibleThreshold:.6}}),c=hc(),l=Fp(s,c),u=Up(s,t,c),d={renderNode:new pe(null),renderInterface:new pe(null)};return Rp(s,c,r),Hp(s,c),ct(t,(h,m)=>{m&&(m.events.registerGraph.unsubscribe(n),m.graphEvents.beforeAddNode.unsubscribe(n),h.nodeHooks.beforeLoad.unsubscribe(n),h.nodeHooks.afterSave.unsubscribe(n),h.graphTemplateHooks.beforeLoad.unsubscribe(n),h.graphTemplateHooks.afterSave.unsubscribe(n)),h&&(h.nodeHooks.beforeLoad.subscribe(n,(v,y)=>(y.position=v.position??{x:0,y:0},y.width=v.width??200,y.twoColumn=v.twoColumn??!1,v)),h.nodeHooks.afterSave.subscribe(n,(v,y)=>(v.position=y.position,v.width=y.width,v.twoColumn=y.twoColumn,v)),h.graphTemplateHooks.beforeLoad.subscribe(n,(v,y)=>(y.panning=v.panning,y.scaling=v.scaling,v)),h.graphTemplateHooks.afterSave.subscribe(n,(v,y)=>(v.panning=y.panning,v.scaling=y.scaling,v)),h.graphEvents.beforeAddNode.subscribe(n,v=>om(v)),t.value.registerNodeType(lc,{category:"Subgraphs"}),t.value.registerNodeType(uc,{category:"Subgraphs"}),r(h.graph))},{immediate:!0}),Pe({editor:t,displayedGraph:s,isSubgraph:i,settings:a,commandHandler:c,history:l,clipboard:u,hooks:d,switchGraph:r})}var sm=Object.freeze(Object.defineProperty({__proto__:null,Connection:$r,ConnectionWrapper:Qa,TemporaryConnection:Za,Node:Ja,NodeInterface:yr,ContextMenu:Ir,Minimap:tc,Sidebar:ec},Symbol.toStringTag,{value:"Module"}));function rm(e){let t;return Pa({setup(){let n=Ur();return t=n,{viewModel:n}},render(){return Go(Fr,{viewModel:this.viewModel})}}).mount(e),t}return Ec(im);})();
//# sourceMappingURL=bundle.js.map
