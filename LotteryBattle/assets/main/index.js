System.register("chunks:///_virtual/Ambilight.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,a,n,o,s,c,p,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,a=t.assertThisInitialized,n=t.createClass},function(t){o=t.cclegacy,s=t._decorator,c=t.CCInteger,p=t.Sprite,l=t.Component}],execute:function(){var u,h,m,_,f;o._RF.push({},"73c69GH9M9F2Ilsm0fvjTCX","Ambilight",void 0);var y=s.ccclass,g=s.property;t("Ambilight",(u=y("Ambilight"),h=g(c),u((f=e((_=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,r(e,"_max",f,a(e)),e._start=0,e._material=void 0,e}i(e,t);var o=e.prototype;return o.update=function(t){this._material=this.node.getComponent(p).getMaterial(0),this.node.active&&this._material&&this._setShaderTime(t)},o._setShaderTime=function(t){var e=this._start;e>this.max&&(e=0),e+=.015,this._material.setProperty("speed",e),this._start=e},n(e,[{key:"max",get:function(){return this._max},set:function(t){this._max=t}}]),e}(l)).prototype,"_max",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),e(_.prototype,"max",[h],Object.getOwnPropertyDescriptor(_.prototype,"max"),_.prototype),m=_))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimatorBase.ts"],(function(t){var i,n,a,s,e;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,a=t._decorator,s=t.Animation},function(t){e=t.default}],execute:function(){var o;n._RF.push({},"64571Qy/TlCEZI/28RxIG+E","AnimatorAnimation",void 0);var h=a.ccclass,r=(a.property,a.requireComponent),m=a.disallowMultiple,l=a.menu;t("default",h(o=m(o=r(s)(o=l("animator/AnimatorAnimation")(o=function(t){function n(){for(var i,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(i=t.call.apply(t,[this].concat(a))||this)._animation=null,i._animState=null,i._wrapModeMap=new Map,i}i(n,t);var a=n.prototype;return a.start=function(){this.PlayOnStart&&!this._hasInit&&(this._hasInit=!0,this._animation=this.getComponent(s),this._animation.on(s.EventType.FINISHED,this.onAnimFinished,this),this._animation.on(s.EventType.LASTFRAME,this.onAnimFinished,this),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))},a.onInit=function(){this.PlayOnStart||this._hasInit||(this._hasInit=!0,this.initArgs.apply(this,arguments),this._animation=this.getComponent(s),this._animation.on(s.EventType.FINISHED,this.onAnimFinished,this),this._animation.on(s.EventType.LASTFRAME,this.onAnimFinished,this),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))},a.playAnimation=function(t,i){t&&(this._animation.play(t),this._animState=this._animation.getState(t),this._animState&&(this._wrapModeMap.has(this._animState)||this._wrapModeMap.set(this._animState,this._animState.wrapMode),this._animState.wrapMode=i?2:this._wrapModeMap.get(this._animState)))},a.scaleTime=function(t){this._animState&&(this._animState.speed=t)},n}(e))||o)||o)||o)||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimatorController.ts"],(function(t){var a,n,e,i,o,r,s,c,u,l;return{setters:[function(t){a=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,i=t.assertThisInitialized,o=t.createClass},function(t){r=t.cclegacy,s=t._decorator,c=t.JsonAsset,u=t.Component},function(t){l=t.default}],execute:function(){var p,h,m,f,g,_,y,d,A,b;r._RF.push({},"7ff14NOug1NAIB1XgQlC9Gc","AnimatorBase",void 0);var v=s.ccclass,S=s.property,C=s.executionOrder,M=s.menu;t("default",(p=C(-1e3),h=M("animator/AnimatorBase"),m=S({type:c,tooltip:"状态机json文件"}),f=S({tooltip:"是否在start中自动启动状态机"}),g=S({tooltip:"是否在update中自动触发状态机逻辑更新"}),v(_=p(_=h((d=a((y=function(t){function a(){for(var a,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return a=t.call.apply(t,[this].concat(o))||this,e(a,"AssetRawUrl",d,i(a)),e(a,"PlayOnStart",A,i(a)),e(a,"AutoUpdate",b,i(a)),a._hasInit=!1,a._ac=null,a._stateLogicMap=null,a._onStateChangeCall=null,a._animationPlayer=null,a}n(a,t);var r=a.prototype;return r.onFrameEvent=function(t){var a;null==(a=this._animationPlayer)||a.onFrameEventCallback(t,this)},r.getState=function(t){return this._ac.states.get(t)},r.onInit=function(){},r.initArgs=function(){for(var t=this,a=arguments.length,n=new Array(a),e=0;e<a;e++)n[e]=arguments[e];n.forEach((function(a){a&&("function"==typeof a?t._onStateChangeCall=a:"object"==typeof a&&(a instanceof Map?t._stateLogicMap=a:t._animationPlayer=a))}))},r.updateAnimator=function(){var t,a=this._ac.curState.speed;this._ac.curState.multi&&(a*=null!=(t=this._ac.params.getNumber(this._ac.curState.multi))?t:1);if(this.scaleTime(a),this._stateLogicMap){var n=this._stateLogicMap.get(this._ac.curState.name);n&&n.onUpdate()}this._ac.updateAnimator()},r.update=function(){this._hasInit&&this.AutoUpdate&&this.updateAnimator()},r.manualUpdate=function(){this._hasInit&&!this.AutoUpdate&&this.updateAnimator()},r.initJson=function(t){this._ac=new l(this,t)},r.onAnimFinished=function(){var t;this._ac.onAnimationComplete(),null==(t=this._animationPlayer)||t.onFinishedCallback(this)},r.playAnimation=function(t,a){},r.scaleTime=function(t){},r.onStateChange=function(t,a){this.playAnimation(a.motion,a.loop);var n=t?t.name:"";if(this._stateLogicMap){var e=this._stateLogicMap.get(n);e&&e.onExit();var i=this._stateLogicMap.get(a.name);i&&i.onEntry()}this._onStateChangeCall&&this._onStateChangeCall(n,a.name)},r.setBool=function(t,a){this._ac.params.setBool(t,a)},r.getBool=function(t){return 0!==this._ac.params.getBool(t)},r.setNumber=function(t,a){this._ac.params.setNumber(t,a)},r.getNumber=function(t){return this._ac.params.getNumber(t)},r.setTrigger=function(t){this._ac.params.setTrigger(t)},r.resetTrigger=function(t){this._ac.params.resetTrigger(t)},r.autoTrigger=function(t){this._ac.params.autoTrigger(t)},r.play=function(t){this._hasInit&&this._ac.play(t)},o(a,[{key:"curStateName",get:function(){return this._ac.curState.name}},{key:"curStateMotion",get:function(){return this._ac.curState.motion}}]),a}(u)).prototype,"AssetRawUrl",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=a(y.prototype,"PlayOnStart",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),b=a(y.prototype,"AutoUpdate",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_=y))||_)||_)||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorCondition.ts",["cc"],(function(t){var a,r;return{setters:[function(t){a=t.cclegacy,r=t.error}],execute:function(){a._RF.push({},"8ade2h2C/ZA86thhI0NNuqu","AnimatorCondition",void 0);var e=t("ParamType",function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.BOOLEAN=1]="BOOLEAN",t[t.NUMBER=2]="NUMBER",t[t.TRIGGER=3]="TRIGGER",t[t.AUTO_TRIGGER=4]="AUTO_TRIGGER",t}({})),i=t("LogicType",function(t){return t[t.EQUAL=0]="EQUAL",t[t.NOTEQUAL=1]="NOTEQUAL",t[t.GREATER=2]="GREATER",t[t.LESS=3]="LESS",t[t.GREATER_EQUAL=4]="GREATER_EQUAL",t[t.LESS_EQUAL=5]="LESS_EQUAL",t}({}));t("default",function(){function t(t,a){this._ac=void 0,this._param="",this._value=0,this._logic=i.EQUAL,this._ac=a,this._param=t.param,this._value=t.value,this._logic=t.logic}var a=t.prototype;return a.getParamName=function(){return this._param},a.getParamType=function(){return this._ac.params.getParamType(this._param)},a.check=function(){var t=this.getParamType();if(t===e.BOOLEAN)return this._ac.params.getBool(this._param)===this._value;if(t!==e.NUMBER)return t===e.AUTO_TRIGGER?0!==this._ac.params.getAutoTrigger(this._param):t===e.TRIGGER?0!==this._ac.params.getTrigger(this._param):(r("[AnimatorCondition.check] 错误的type: "+t),!1);var a=this._ac.params.getNumber(this._param);switch(this._logic){case i.EQUAL:return a===this._value;case i.NOTEQUAL:return a!==this._value;case i.GREATER:return a>this._value;case i.LESS:return a<this._value;case i.GREATER_EQUAL:return a>=this._value;case i.LESS_EQUAL:return a<=this._value;default:return!1}},t}());a._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimatorParams.ts","./AnimatorState.ts"],(function(t){var e,a,n,s,i;return{setters:[function(t){e=t.createClass},function(t){a=t.cclegacy,n=t.error},function(t){s=t.default},function(t){i=t.default}],execute:function(){a._RF.push({},"01df9SMBjRCyYDE7SgbZxua","AnimatorController",void 0);t("default",function(){function t(t,e){this._jsonData=null,this._animator=null,this._params=null,this._states=null,this._anyState=null,this._curState=null,this._changeCount=0,this.animCompleteState=null,this.animComplete=!1,this._animator=t,this._jsonData=e,this._states=new Map,this._params=new s(e.parameters),this.init(e)}var a=t.prototype;return a.init=function(t){if(t.states.length<=0)n("[AnimatorController.init] 状态机json错误");else{var e=t.defaultState;this._anyState=new i(t.anyState,this);for(var a=0;a<t.states.length;a++){var s=new i(t.states[a],this);this._states.set(s.name,s)}this.changeState(e)}},a.updateState=function(){this._curState.checkAndTrans(),this._curState!==this._anyState&&null!==this._anyState&&this._anyState.checkAndTrans()},a.updateAnimator=function(){this._changeCount=0,this.updateState(),this.animComplete&&this.animCompleteState.loop&&(this.animComplete=!1),this.params.resetAllAutoTrigger()},a.onAnimationComplete=function(){this.animComplete=!0,this.animCompleteState=this._curState},a.play=function(t){this._states.has(t)&&this._curState.name!==t&&(this.animComplete=!1,this.changeState(t))},a.changeState=function(t){if(this._changeCount++,this._changeCount>1e3)n("[AnimatorController.changeState] error: 状态切换递归调用超过1000次，transition设置可能出错!");else if(!this._states.has(t)||null!==this._curState&&this._curState.name===t)n("[AnimatorController.changeState] error state: "+t);else{var e=this._curState;this._curState=this._states.get(t),this._animator.onStateChange(e,this._curState),this.updateState()}},e(t,[{key:"curState",get:function(){return this._curState}},{key:"params",get:function(){return this._params}},{key:"states",get:function(){return this._states}}]),t}());a._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorCustomization.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimatorBase.ts"],(function(t){var i,n,a,e,r,o,s;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator},function(t){s=t.default}],execute:function(){var l,u,c,p,h;r._RF.push({},"fe7aemTdvFBeJlAmC+6XphU","AnimatorCustomization",void 0);var m=o.ccclass,y=o.property,f=o.menu,A=o.disallowMultiple;t("default",(l=f("animator/AnimatorCustomization"),u=y({override:!0,visible:!1}),m(c=A(c=l((h=i((p=function(t){function i(){for(var i,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return i=t.call.apply(t,[this].concat(r))||this,a(i,"PlayOnStart",h,e(i)),i}n(i,t);var r=i.prototype;return r.onInit=function(){this._hasInit||(this._hasInit=!0,this.initArgs.apply(this,arguments),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))},r.playAnimation=function(t,i){this._animationPlayer&&t&&this._animationPlayer.playAnimation(t,i)},r.scaleTime=function(t){this._animationPlayer&&this._animationPlayer.scaleTime(t)},i}(s)).prototype,"PlayOnStart",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=p))||c)||c)||c));r._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorDragonBones.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimatorBase.ts"],(function(t){var n,s,i,e,o;return{setters:[function(t){n=t.inheritsLoose},function(t){s=t.cclegacy,i=t._decorator,e=t.dragonBones},function(t){o=t.default}],execute:function(){var a;s._RF.push({},"dc324J03ptB8b2JV9Ljduzh","AnimatorDragonBones",void 0);var r=i.ccclass,l=(i.property,i.requireComponent),h=i.disallowMultiple;t("default",r(a=h(a=l(e.ArmatureDisplay)(a=function(t){function s(){for(var n,s=arguments.length,i=new Array(s),e=0;e<s;e++)i[e]=arguments[e];return(n=t.call.apply(t,[this].concat(i))||this)._dragonBones=null,n}n(s,t);var i=s.prototype;return i.start=function(){this.PlayOnStart&&!this._hasInit&&(this._hasInit=!0,this._dragonBones=this.getComponent(e.ArmatureDisplay),this._dragonBones.addEventListener("complete",this.onAnimFinished,this),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))},i.onInit=function(){this.PlayOnStart||this._hasInit||(this._hasInit=!0,this.initArgs.apply(this,arguments),this._dragonBones=this.getComponent(e.ArmatureDisplay),this._dragonBones.addEventListener("complete",this.onAnimFinished,this),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))},i.playAnimation=function(t,n){t&&this._dragonBones.playAnimation(t,n?0:-1)},i.scaleTime=function(t){t>0&&(this._dragonBones.timeScale=t)},s}(o))||a)||a)||a);s._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorParams.ts",["cc","./AnimatorCondition.ts"],(function(t){var a,e;return{setters:[function(t){a=t.cclegacy},function(t){e=t.ParamType}],execute:function(){a._RF.push({},"13926xryDRPXJ50lCnLvy4J","AnimatorParams",void 0);t("default",function(){function t(t){var a=this;this._paramMap=new Map,t.forEach((function(t){var e={type:t.type,value:t.init};a._paramMap.set(t.param,e)}))}var a=t.prototype;return a.getParamType=function(t){var a=this._paramMap.get(t);return a?a.type:null},a.setNumber=function(t,a){var r=this._paramMap.get(t);r&&r.type===e.NUMBER&&(r.value=a)},a.setBool=function(t,a){var r=this._paramMap.get(t);r&&r.type===e.BOOLEAN&&(r.value=a?1:0)},a.setTrigger=function(t){var a=this._paramMap.get(t);a&&a.type===e.TRIGGER&&(a.value=1)},a.resetTrigger=function(t){var a=this._paramMap.get(t);a&&a.type===e.TRIGGER&&(a.value=0)},a.autoTrigger=function(t){var a=this._paramMap.get(t);a&&a.type===e.AUTO_TRIGGER&&(a.value=1)},a.resetAutoTrigger=function(t){var a=this._paramMap.get(t);a&&a.type===e.AUTO_TRIGGER&&(a.value=0)},a.resetAllAutoTrigger=function(){this._paramMap.forEach((function(t,a){t.type===e.AUTO_TRIGGER&&(t.value=0)}))},a.getNumber=function(t){var a=this._paramMap.get(t);return a&&a.type===e.NUMBER?a.value:0},a.getBool=function(t){var a=this._paramMap.get(t);return a&&a.type===e.BOOLEAN?a.value:0},a.getTrigger=function(t){var a=this._paramMap.get(t);return a&&a.type===e.TRIGGER?a.value:0},a.getAutoTrigger=function(t){var a=this._paramMap.get(t);return a&&a.type===e.AUTO_TRIGGER?a.value:0},t}());a._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorSkeletal.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimatorAnimation.ts"],(function(t){var i,a,e,n,r,o,s,l,u,c;return{setters:[function(t){i=t.applyDecoratedDescriptor,a=t.inheritsLoose,e=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,s=t.SkeletalAnimation,l=t.CCFloat,u=t.game},function(t){c=t.default}],execute:function(){var p,m,h,_,d,f;r._RF.push({},"8c545jBn4xF7LWXjl506avi","AnimatorSkeletal",void 0);var S=o.ccclass,y=o.property,A=o.requireComponent,v=o.disallowMultiple,M=o.menu;t("AnimatorSkeletal",(p=A(s),m=M("animator/AnimatorSkeletal"),h=y({type:l,tooltip:"动画切换过度时间"}),S(_=v(_=p(_=m((f=i((d=function(t){function i(){for(var i,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return i=t.call.apply(t,[this].concat(r))||this,e(i,"duration",f,n(i)),i.cross_duration=0,i.current_time=0,i}a(i,t);var r=i.prototype;return r.onLoad=function(){this.cross_duration=1e3*this.duration},r.playAnimation=function(t,i){t&&(u.totalTime-this.current_time>this.cross_duration?this._animation.crossFade(t,this.duration):this._animation.play(t),this.current_time=u.totalTime,this._animState=this._animation.getState(t),this._animState&&(this._wrapModeMap.has(this._animState)||this._wrapModeMap.set(this._animState,this._animState.wrapMode),this._animState.wrapMode=i?2:1))},i}(c)).prototype,"duration",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),_=d))||_)||_)||_)||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorSpine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimatorBase.ts"],(function(t){var e,n,i,s,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,s=t.sp},function(t){o=t.default}],execute:function(){var a;n._RF.push({},"7fde8yJEfxMMqzjg+V4UVkT","AnimatorSpine",void 0);var r=i.ccclass,l=(i.property,i.requireComponent),p=i.disallowMultiple;t("default",r(a=p(a=l(s.Skeleton)(a=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this)._spine=null,e._completeListenerMap=new Map,e._secondaryListenerMap=new Map,e}e(n,t);var i=n.prototype;return i.start=function(){this.PlayOnStart&&!this._hasInit&&(this._hasInit=!0,this._spine=this.getComponent(s.Skeleton),this._spine.setEventListener(this.onSpineEvent.bind(this)),this._spine.setCompleteListener(this.onSpineComplete.bind(this)),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))},i.onInit=function(){this.PlayOnStart||this._hasInit||(this._hasInit=!0,this.initArgs.apply(this,arguments),this._spine=this.getComponent(s.Skeleton),this._spine.setEventListener(this.onSpineEvent.bind(this)),this._spine.setCompleteListener(this.onSpineComplete.bind(this)),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))},i.getBone=function(t){return this._spine.findBone(t)},i.onSpineEvent=function(t,e){var n,i=t.animation?e.data.name:"";null==(n=this._animationPlayer)||n.onFrameEventCallback(i,this)},i.onSpineComplete=function(t){0===t.trackIndex&&this.onAnimFinished(),this._completeListenerMap.forEach((function(e,n){e?n.call(e,t):n(t)})),this._secondaryListenerMap.forEach((function(e,n){t.trackIndex===e.TrackIndex&&n.call(e,t)}))},i.playAnimation=function(t,e){t?this._spine.setAnimation(0,t,e):this._spine.clearTrack(0)},i.scaleTime=function(t){t>0&&(this._spine.timeScale=t)},i.addSecondaryListener=function(t,e){this._secondaryListenerMap.set(t,e)},i.addCompleteListener=function(t,e){void 0===e&&(e=null),this._completeListenerMap.has(t)||this._completeListenerMap.set(t,e)},i.removeCompleteListener=function(t){this._completeListenerMap.delete(t)},i.clearCompleteListener=function(){this._completeListenerMap.clear},n}(o))||a)||a)||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorSpineSecondary.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimatorSpine.ts","./AnimatorBase.ts"],(function(t){var i,n,e,s,r,a,o,h,l;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,o=t.sp},function(t){h=t.default},function(t){l=t.default}],execute:function(){var c,p,u,d,m;r._RF.push({},"e47112s9c9Kwo8XQQ4KSW0c","AnimatorSpineSecondary",void 0);var f=a.ccclass,_=a.property,y=a.requireComponent;t("default",(c=y(o.Skeleton),p=_({tooltip:"动画播放的trackIndex，必须大于0"}),f(u=c((m=i((d=function(t){function i(){for(var i,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,e(i,"TrackIndex",m,s(i)),i._main=null,i._spine=null,i}n(i,t);var r=i.prototype;return r.start=function(){this.PlayOnStart&&!this._hasInit&&(this._hasInit=!0,this._spine=this.getComponent(o.Skeleton),this._main=this.getComponent(h),this._main.addSecondaryListener(this.onAnimFinished,this),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))},r.onInit=function(){this.PlayOnStart||this._hasInit||(this._hasInit=!0,this.initArgs.apply(this,arguments),this._spine=this.getComponent(o.Skeleton),this._main=this.getComponent(h),this._main.addSecondaryListener(this.onAnimFinished,this),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))},r.playAnimation=function(t,i){t?this._spine.setAnimation(this.TrackIndex,t,i):this._spine.clearTrack(this.TrackIndex)},i}(l)).prototype,"TrackIndex",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),u=d))||u)||u));r._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimatorTransition.ts"],(function(t){var i,n,e;return{setters:[function(t){i=t.createClass},function(t){n=t.cclegacy},function(t){e=t.default}],execute:function(){n._RF.push({},"bd2d1/E71JL1Jj3HzsYH82H","AnimatorState",void 0);t("default",function(){function t(t,i){this._name="",this._motion="",this._loop=!1,this._speed=1,this._multi="",this._transitions=[],this._ac=null,this._name=t.state,this._motion=t.motion||"",this._loop=t.loop||!1,this._speed=t.speed||1,this._multi=t.multiplier||"",this._ac=i;for(var n=0;n<t.transitions.length;n++){var s=new e(t.transitions[n],i);s.isValid()&&this._transitions.push(s)}}return t.prototype.checkAndTrans=function(){for(var t=0;t<this._transitions.length;t++){var i=this._transitions[t];if(i&&i.check())return void i.doTrans()}},i(t,[{key:"name",get:function(){return this._name}},{key:"motion",get:function(){return this._motion}},{key:"loop",get:function(){return this._loop}},{key:"multi",get:function(){return this._multi}},{key:"speed",get:function(){return this._speed},set:function(t){this._speed=t}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorStateLogic.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"b06fbd3UdNKvooAUeDi9UTc","AnimatorStateLogic",void 0);t("AnimatorStateLogic",function(){function t(){}var n=t.prototype;return n.onEntry=function(){},n.onUpdate=function(){},n.onExit=function(){},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorTransition.ts",["cc","./AnimatorCondition.ts"],(function(t){var i,n,e;return{setters:[function(t){i=t.cclegacy},function(t){n=t.ParamType,e=t.default}],execute:function(){i._RF.push({},"39224xRIkpEG7hvPJlKoGDy","AnimatorTransition",void 0);t("default",function(){function t(t,i){this._toStateName="",this._hasExitTime=!1,this._conditions=[],this._ac=null,this._toStateName=t.toState,this._hasExitTime=t.hasExitTime,this._ac=i;for(var n=0;n<t.conditions.length;n++){var a=new e(t.conditions[n],i);this._conditions.push(a)}}var i=t.prototype;return i.isValid=function(){return this._hasExitTime||this._conditions.length>0},i.check=function(){if(this._toStateName===this._ac.curState.name)return!1;if(this._hasExitTime&&(this._ac.curState!==this._ac.animCompleteState||!this._ac.animComplete))return!1;for(var t=0;t<this._conditions.length;t++)if(!this._conditions[t].check())return!1;return!0},i.doTrans=function(){this._hasExitTime&&(this._ac.animComplete=!1);for(var t=0;t<this._conditions.length;t++){var i=this._conditions[t].getParamType(),e=this._conditions[t].getParamName();i===n.TRIGGER?this._ac.params.resetTrigger(e):i===n.AUTO_TRIGGER&&this._ac.params.resetAutoTrigger(e)}this._ac.changeState(this._toStateName)},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/ArrayUtil.ts",["cc"],(function(r){var n;return{setters:[function(r){n=r.cclegacy}],execute:function(){n._RF.push({},"4613b2zY/dMSaGPBGo6eti3","ArrayUtil",void 0);r("ArrayUtil",function(){function r(){}return r.noRepeated=function(r){for(var n=[r[0]],t=1;t<r.length;t++){for(var o=!1,e=0;e<n.length;e++)if(r[t]==n[e]){o=!0;break}o||n.push(r[t])}return n},r.copy2DArray=function(r){for(var n=[],t=0;t<r.length;t++)n.push(r[t].concat());return n},r.fisherYatesShuffle=function(r){for(var n=r.length;n;){var t=Math.floor(Math.random()*n--),o=r[n];r[n]=r[t],r[t]=o}return r},r.confound=function(r){return r.slice().sort((function(){return Math.random()-.5}))},r.flattening=function(r){for(;r.some((function(r){return Array.isArray(r)}));)r=[].concat.apply([],r);return r},r.removeItem=function(r,n){for(var t=r.concat(),o=0;o<t.length;o++){if(n==t[o]){r.splice(o,1);break}}},r.combineArrays=function(r,n){return[].concat(r,n)},r.getRandomValueInArray=function(r){return r[Math.floor(Math.random()*r.length)]},r.insertionSort=function(r,n){var t=r.length;if(!(t<=1))for(var o,e,a=1;a<t;a++){o=r[a];var c=void 0;for(c=a;c>0&&n(o,e=r[c-1]);c--)r[c]=e;r[c]=o}},r}());n._RF.pop()}}}));

System.register("chunks:///_virtual/AsyncQueue.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(s){var n,i,e,u;return{setters:[function(s){n=s.createClass},function(s){i=s.cclegacy,e=s.warn,u=s.log}],execute:function(){i._RF.push({},"8c48bBN521JzIxhITJunFji","AsyncQueue",void 0),s("AsyncQueue",function(){function s(){this._runningAsyncTask=null,this._queues=[],this._isProcessingTaskUUID=0,this._enable=!0,this.complete=null}var i=s.prototype;return i.push=function(n,i){void 0===i&&(i=null);var e=s._$uuid_count++;return this._queues.push({uuid:e,callbacks:[n],params:i}),e},i.pushMulti=function(n){for(var i=s._$uuid_count++,e=arguments.length,u=new Array(e>1?e-1:0),t=1;t<e;t++)u[t-1]=arguments[t];return this._queues.push({uuid:i,callbacks:u,params:n}),i},i.remove=function(s){var n;if((null==(n=this._runningAsyncTask)?void 0:n.uuid)!==s){for(var i=0;i<this._queues.length;i++)if(this._queues[i].uuid===s){this._queues.splice(i,1);break}}else e("正在执行的任务不可以移除")},i.clear=function(){this._queues=[],this._isProcessingTaskUUID=0,this._runningAsyncTask=null},i.step=function(){this.isProcessing&&this.next(this._isProcessingTaskUUID)},i.play=function(s){var n=this;if(void 0===s&&(s=null),!this.isProcessing&&this._enable){var i=this._queues.shift();if(i){this._runningAsyncTask=i;var e=i.uuid;this._isProcessingTaskUUID=e;var u=i.callbacks;if(1==u.length){u[0]((function(s){void 0===s&&(s=null),n.next(e,s)}),i.params,s)}else for(var t=u.length,r=[],c=function(s){void 0===s&&(s=null),--t,r.push(s||null),0===t&&n.next(e,r)},l=t,a=0;a<l;a++)u[a](c,i.params,s)}else this._isProcessingTaskUUID=0,this._runningAsyncTask=null,this.complete&&this.complete(s)}},i.yieldTime=function(s,n){void 0===n&&(n=null);this.push((function(i,e,u){var t=setTimeout((function(){clearTimeout(t),n&&n(),i(u)}),s)}),{des:"AsyncQueue.yieldTime"})},i.next=function(s,n){void 0===n&&(n=null),this._isProcessingTaskUUID===s?(this._isProcessingTaskUUID=0,this._runningAsyncTask=null,this.play(n)):this._runningAsyncTask&&u(this._runningAsyncTask)},s.excuteTimes=function(s,n){void 0===n&&(n=null);var i=s;return function(){0===--i&&n&&n()}},n(s,[{key:"queues",get:function(){return this._queues}},{key:"enable",get:function(){return this._enable},set:function(s){this._enable!==s&&(this._enable=s,s&&this.size>0&&this.play())}},{key:"size",get:function(){return this._queues.length}},{key:"isProcessing",get:function(){return this._isProcessingTaskUUID>0}},{key:"isStop",get:function(){return!(this._queues.length>0)&&!this.isProcessing}},{key:"runningParams",get:function(){return this._runningAsyncTask?this._runningAsyncTask.params:null}}]),s}())._$uuid_count=1,i._RF.pop()}}}));

System.register("chunks:///_virtual/AudioEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts"],(function(e){var t,o,r,c,n,s,i;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,r=e._decorator,c=e.AudioClip,n=e.error,s=e.AudioSource},function(e){i=e.oops}],execute:function(){var f;o._RF.push({},"e52d2ysY1BEbpcT2Cz0Wwss","AudioEffect",void 0);var u=r.ccclass;r.menu,e("AudioEffect",u("AudioEffect")(f=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))||this).effects=new Map,t}t(o,e);var r=o.prototype;return r.load=function(e,t){var o=this;i.res.load(e,c,(function(r,c){r&&n(r),o.effects.set(e,c),o.playOneShot(c,o.volume),t&&t()}))},r.release=function(){for(var e in this.effects)i.res.release(e);this.effects.clear()},o}(s))||f);o._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./AudioEffect.ts","./AudioMusic.ts"],(function(t){var i,s,e,c,u,o,f;return{setters:[function(t){i=t.inheritsLoose,s=t.createClass},function(t){e=t.cclegacy,c=t.Component},function(t){u=t.oops},function(t){o=t.AudioEffect},function(t){f=t.AudioMusic}],execute:function(){e._RF.push({},"252f0z+vPNL8Y/jsLYmomtw","AudioManager",void 0);var h="game_audio";t("AudioManager",function(t){function e(){for(var i,s=arguments.length,e=new Array(s),c=0;c<s;c++)e[c]=arguments[c];return(i=t.call.apply(t,[this].concat(e))||this).local_data={},i.music=void 0,i.effect=void 0,i._volume_music=1,i._volume_effect=1,i._switch_music=!0,i._switch_effect=!0,i}i(e,t);var c=e.prototype;return c.setMusicComplete=function(t){void 0===t&&(t=null),this.music.onComplete=t},c.playMusic=function(t,i){this._switch_music&&this.music.load(t,i)},c.playerMusicLoop=function(t){this._switch_music&&(this.music.loop=!0,this.music.load(t))},c.playEffect=function(t){this._switch_effect&&this.effect.load(t)},c.resumeAll=function(){this.music&&(this.music.play(),this.effect.play())},c.pauseAll=function(){this.music&&(this.music.pause(),this.effect.pause())},c.stopAll=function(){this.music&&(this.music.stop(),this.effect.stop())},c.save=function(){this.local_data.volume_music=this._volume_music,this.local_data.volume_effect=this._volume_effect,this.local_data.switch_music=this._switch_music,this.local_data.switch_effect=this._switch_effect;var t=JSON.stringify(this.local_data);u.storage.set(h,t)},c.load=function(){this.music=this.getComponent(f)||this.addComponent(f),this.effect=this.getComponent(o)||this.addComponent(o);var t=u.storage.get(h);if(t){try{this.local_data=JSON.parse(t),this._volume_music=this.local_data.volume_music,this._volume_effect=this.local_data.volume_effect,this._switch_music=this.local_data.switch_music,this._switch_effect=this.local_data.switch_effect}catch(t){this.local_data={},this._volume_music=1,this._volume_effect=1,this._switch_music=!0,this._switch_effect=!0}this.music&&(this.music.volume=this._volume_music),this.effect&&(this.effect.volume=this._volume_effect)}},s(e,[{key:"progressMusic",get:function(){return this.music.progress},set:function(t){this.music.progress=t}},{key:"volumeMusic",get:function(){return this._volume_music},set:function(t){this._volume_music=t,this.music.volume=t}},{key:"switchMusic",get:function(){return this._switch_music},set:function(t){this._switch_music=t,0==t&&this.music.stop()}},{key:"volumeEffect",get:function(){return this._volume_effect},set:function(t){this._volume_effect=t,this.effect.volume=t}},{key:"switchEffect",get:function(){return this._switch_effect},set:function(t){this._switch_effect=t,0==t&&this.effect.stop()}}]),e}(c));e._RF.pop()}}}));

System.register("chunks:///_virtual/AudioMusic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts"],(function(t){var i,s,e,r,o,n,u,l;return{setters:[function(t){i=t.inheritsLoose,s=t.createClass},function(t){e=t.cclegacy,r=t._decorator,o=t.AudioClip,n=t.error,u=t.AudioSource},function(t){l=t.oops}],execute:function(){var c;e._RF.push({},"5c1f3kqGetBiIv48/CvuaQv","AudioMusic",void 0);var a=r.ccclass;r.menu,t("AudioMusic",a("AudioMusic")(c=function(t){function e(){for(var i,s=arguments.length,e=new Array(s),r=0;r<s;r++)e[r]=arguments[r];return(i=t.call.apply(t,[this].concat(e))||this).onComplete=null,i._progress=0,i._url=null,i._isPlay=!1,i}i(e,t);var r=e.prototype;return r.load=function(t,i){var s=this;l.res.load(t,o,(function(e,r){e&&n(e),s.playing&&(s._isPlay=!1,s.stop()),s._url&&l.res.release(s._url),s.enabled=!0,s.clip=r,i&&i(),s.play(),s._url=t}))},r.update=function(t){this.currentTime>0&&(this._isPlay=!0),this._isPlay&&0==this.playing&&(this._isPlay=!1,this.enabled=!1,this.onComplete&&this.onComplete())},r.release=function(){this._url&&(l.res.release(this._url),this._url=null)},s(e,[{key:"progress",get:function(){return this.duration>0&&(this._progress=this.currentTime/this.duration),this._progress},set:function(t){this._progress=t,this.currentTime=t*this.duration}}]),e}(u))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/Badge.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RoundRectMask.ts"],(function(t){var e,i,o,n,r,a,l,s,d,h,u,c,g,p,b,f,N,y,m,C,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createClass},function(t){a=t.cclegacy,l=t._decorator,s=t.Enum,d=t.SpriteFrame,h=t.CCInteger,u=t.color,c=t.UITransform,g=t.Vec3,p=t.Label,b=t.Node,f=t.Layers,N=t.Mask,y=t.Sprite,m=t.Overflow,C=t.Component},function(t){w=t.RoundRectMask}],execute:function(){var T,v,z,P,E,I,_,B,x,O,R,S,L,F,k,D;a._RF.push({},"bac76ow94VI+IpAB1DQUKfq","Badge",void 0);var A=l.ccclass,H=l.property,M=t("Position",function(t){return t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t}({}));s(M);t("Badge",(T=A("Badge"),v=H({type:d,tooltip:"背景"}),z=H({tooltip:"内容"}),P=H({type:h,tooltip:"宽"}),E=H({type:h,tooltip:"高"}),I=H({type:h,tooltip:"圆角"}),_=H({type:M,tooltip:"位置\n 0: 左上角 \n 1: 右上角"}),T(((D=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,o(e,"bg",O,n(e)),o(e,"string",R,n(e)),o(e,"width",S,n(e)),o(e,"height",L,n(e)),o(e,"radius",F,n(e)),o(e,"position",k,n(e)),e.badgeNode=null,e.color=u(214,30,30,240),e.textColor=u(255,255,255,255),e.labelNode=null,e}i(e,t);var a=e.prototype;return a.onLoad=function(){this.initBadge()},a.initBadge=function(){var t=this.createBadge();this.node.addChild(t)},a.setPosition=function(t){var e,i,o=null==(e=this.node.getComponent(c))?void 0:e.contentSize;null==(i=this.badgeNode.getComponent(c))||i.contentSize;switch(t){case M.TOP_LEFT:var n=-o.width/2,r=o.height/2;this.badgeNode.setPosition(new g(n,r,0));break;case M.TOP_RIGHT:var a=o.width/2,l=o.height/2;this.badgeNode.setPosition(new g(a,l,0))}},a.setText=function(t){this.text=t;var e=this.labelNode.getComponent(p);return e&&(e.string=this.text,e.color=this.textColor),this},a.createBadge=function(){var t,e,i;this.badgeNode=new b("BadgeNode");var o=new b("backgroundNode");this.labelNode=new b("labelNode"),this.badgeNode.layer=f.Enum.UI_2D,o.layer=f.Enum.UI_2D,this.labelNode.layer=f.Enum.UI_2D,this.badgeNode.addComponent(N),this.badgeNode.addComponent(w).radius=this.radius,null==(t=this.badgeNode.getComponent(c))||t.setContentSize(this.width,this.height),this.badgeNode.active=!0;var n=o.addComponent(y);n.type=y.Type.SIMPLE,n.color=this.color,n.spriteFrame=this.bg,null==(e=o.getComponent(c))||e.setContentSize(this.width,this.height);var r=this.labelNode.addComponent(p);return null==(i=r.getComponent(c))||i.setContentSize(this.width,this.height),r.string=this.text,r.color=this.textColor,r.fontSize=18,r.isBold=!0,r.horizontalAlign=p.HorizontalAlign.CENTER,r.verticalAlign=p.VerticalAlign.CENTER,r.lineHeight=0,r.overflow=m.NONE,r.enableWrapText=!1,this.badgeNode.addChild(o),this.badgeNode.addChild(this.labelNode),this.setPosition(this.position),this.badgeNode},a.start=function(){},r(e,[{key:"text",get:function(){return this.string},set:function(t){this.string=t,this.setText(t)}}]),e}(C)).POSITION=void 0,O=e((x=D).prototype,"bg",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(x.prototype,"string",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"6"}}),S=e(x.prototype,"width",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),L=e(x.prototype,"height",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 26}}),F=e(x.prototype,"radius",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 6}}),k=e(x.prototype,"position",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return M.TOP_LEFT}}),B=x))||B));a._RF.pop()}}}));

System.register("chunks:///_virtual/banner.ts",["cc","./mock.ts"],(function(n){var r,e;return{setters:[function(n){r=n.cclegacy},function(n){e=n.MockBanner}],execute:function(){r._RF.push({},"ec1a6E7p8VJ27bF7pXmPwoA","banner",void 0);n("BannerAds",function(){function n(n){this._bannerAd=void 0,this._bannerAd=n}n.create=function(r,o,t,i){void 0===t&&(t=30);var a=window.wx||window.tt||window.swan;if(a){var c=a.createBannerAd({adUnitId:r,style:o});return c.onError((function(n){i(n),console.error("error when loading ads: ",n)})),new n(c)}return console.error("Mini game environment is not supported, Ad is mock"),new n(e.createBannerAd({adUnitId:r,adIntervals:t,style:o}))};var r=n.prototype;return r.Show=function(n){this._bannerAd?this._bannerAd.show().catch((function(r){n(r),console.error("error when showing ads: ",r)})):console.error("Banner ad is null")},r.Hide=function(n){this._bannerAd?this._bannerAd.hide().catch((function(r){n(r),console.error("error when hiding ads: ",r)})):console.error("Banner ad is null")},n}());r._RF.pop()}}}));

System.register("chunks:///_virtual/BehaviorTree.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BTreeNode.ts"],(function(t){var e,r,i;return{setters:[function(t){e=t.createClass},function(t){r=t.cclegacy},function(t){i=t.BTreeNode}],execute:function(){r._RF.push({},"22a91RP3fNG/rWWAXlmM4BT","BehaviorTree",void 0);var s=0;t("BehaviorTree",function(){function t(t,e){this.title=void 0,this._root=void 0,this._current=void 0,this._started=!1,this._blackboard=void 0,s+=1,this.title=t.constructor.name+"(btree_"+s+")",this._root=t,this._blackboard=e}var r=t.prototype;return r.setObject=function(t){this._blackboard=t},r.run=function(){this._started&&console.error("行为树【"+this.title+"】未调用步骤，在最后一次调用步骤时有一个任务未完成"),this._started=!0;var e=t.getNode(this._root);this._current=e,e.setControl(this),e.start(this._blackboard),e.run(this._blackboard)},r.running=function(t){this._started=!1},r.success=function(){this._current.end(this._blackboard),this._started=!1},r.fail=function(){this._current.end(this._blackboard),this._started=!1},t.register=function(t,e){this._registeredNodes.set(t,e)},t.getNode=function(t){var e=t instanceof i?t:this._registeredNodes.get(t);if(!e)throw new Error("无法找到节点【"+t+"】，可能它没有注册过");return e},e(t,[{key:"started",get:function(){return this._started}}]),t}())._registeredNodes=new Map,r._RF.pop()}}}));

System.register("chunks:///_virtual/BhvButtonGroup.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,i,e,r,o,a,l,u,s,p,c,b;return{setters:[function(n){t=n.applyDecoratedDescriptor,i=n.inheritsLoose,e=n.initializerDefineProperty,r=n.assertThisInitialized},function(n){o=n.cclegacy,a=n._decorator,l=n.Enum,u=n.Button,s=n.SpriteFrame,p=n.EventHandler,c=n.Component,b=n.color}],execute:function(){var f,m,v,h,d,y,E,C,g,T,S,z,L,R,w,I,D,N,_,H,O,B,P,A,G,M,x,X,k,F,J;o._RF.push({},"41df676L55LvJ52uxkQpfxJ","BhvButtonGroup",void 0);var U=a.ccclass,j=a.property,Q=a.menu,V=function(n){return n[n.CHILDREN_INDEX=0]="CHILDREN_INDEX",n[n.CHILDREN_NAME=1]="CHILDREN_NAME",n}(V||{});n("BhvButtonGroup",(f=Q("添加特殊行为/UI/Button Group(一组按钮控制)"),m=j({type:l(u.Transition)}),v=j({visible:function(){return this.transition===u.Transition.COLOR}}),h=j({visible:function(){return this.transition===u.Transition.COLOR}}),d=j({visible:function(){return this.transition===u.Transition.COLOR}}),y=j({visible:function(){return this.transition===u.Transition.COLOR}}),E=j({type:s,visible:function(){return this.transition===u.Transition.SPRITE}}),C=j({type:s,visible:function(){return this.transition===u.Transition.SPRITE}}),g=j({type:s,visible:function(){return this.transition===u.Transition.SPRITE}}),T=j({type:s,visible:function(){return this.transition===u.Transition.SPRITE}}),S=j({visible:function(){return this.transition===u.Transition.SCALE||this.transition===u.Transition.COLOR}}),z=j({visible:function(){return this.transition===u.Transition.SCALE}}),L=j({type:l(V)}),R=j({type:[p]}),w=j({tooltip:"规避3.x引擎BUG，EventHandler.component位为空导致找不到触发事件的脚本名的问题",readonly:!0}),U(I=f((N=t((D=function(n){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=n.call.apply(n,[this].concat(o))||this,e(t,"transition",N,r(t)),e(t,"hoverColor",_,r(t)),e(t,"normalColor",H,r(t)),e(t,"pressedColor",O,r(t)),e(t,"disabledColor",B,r(t)),e(t,"normalSprite",P,r(t)),e(t,"pressedSprite",A,r(t)),e(t,"hoverSprite",G,r(t)),e(t,"disabledSprite",M,r(t)),e(t,"duration",x,r(t)),e(t,"zoomScale",X,r(t)),e(t,"paramType",k,r(t)),e(t,"touchEvents",F,r(t)),e(t,"EventHandler_component",J,r(t)),t}return i(t,n),t.prototype.onLoad=function(){var n=this;this.node.children.forEach((function(t,i){var e=t.getComponent(u);null==e&&(e=t.addComponent(u)),n.touchEvents.forEach((function(r){var o=new p;o.component=""==r.component?n.EventHandler_component:r.component,o.handler=r.handler,o.target=r.target,n.paramType===V.CHILDREN_INDEX?o.customEventData=i.toString():o.customEventData=t.name,e.clickEvents.push(o)}))}))},t}(c)).prototype,"transition",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u.Transition.NONE}}),_=t(D.prototype,"hoverColor",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b(255,255,255)}}),H=t(D.prototype,"normalColor",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b(214,214,214)}}),O=t(D.prototype,"pressedColor",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b(211,211,211)}}),B=t(D.prototype,"disabledColor",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b(124,124,124)}}),P=t(D.prototype,"normalSprite",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(D.prototype,"pressedSprite",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(D.prototype,"hoverSprite",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(D.prototype,"disabledSprite",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(D.prototype,"duration",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),X=t(D.prototype,"zoomScale",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.1}}),k=t(D.prototype,"paramType",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return V.CHILDREN_INDEX}}),F=t(D.prototype,"touchEvents",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=t(D.prototype,"EventHandler_component",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"VMModify"}}),I=D))||I)||I));o._RF.pop()}}}));

System.register("chunks:///_virtual/BhvFrameIndex.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,i,o,s,a,p,u,c,l,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.createClass},function(e){s=e.cclegacy,a=e._decorator,p=e.Sprite,u=e.SpriteFrame,c=e.CCInteger,l=e.error,d=e.Component}],execute:function(){var h,m,f,x,y,F,v,g;s._RF.push({},"c238ewfJ2VJnZ8Gb8YQs5Ts","BhvFrameIndex",void 0);var I=a.ccclass,b=a.property,_=a.executeInEditMode,C=a.requireComponent,w=a.menu;e("BhvFrameIndex",(h=C(p),m=w("添加特殊行为/UI/Frame Index(帧图改变)"),f=b({type:[u],tooltip:"sprite将会用到帧图片"}),x=b({type:c,tooltip:"当前显示的帧图"}),I(y=_(y=h(y=m((v=t((F=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,n(t,"spriteFrames",v,i(t)),n(t,"_index",g,i(t)),t}r(t,e);var s=t.prototype;return s.setName=function(e){var t=this.spriteFrames.findIndex((function(t){return t.name==e}));t<0&&l("frameIndex 设置了不存在的name:",e),this.index=t||0},s.random=function(e,t){if(this.spriteFrames){var r=this.spriteFrames.length;(null==e||e<0)&&(e=0),(null==t||t>r)&&(t=r),this.index=Math.floor(Math.random()*(t-e)+e)}},s.next=function(){this.index++},s.previous=function(){this.index--},o(t,[{key:"index",get:function(){return this._index},set:function(e){e<0||(this._index=e%this.spriteFrames.length,this.node.getComponent(p).spriteFrame=this.spriteFrames[this._index])}}]),t}(d)).prototype,"spriteFrames",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[null]}}),t(F.prototype,"index",[x],Object.getOwnPropertyDescriptor(F.prototype,"index"),F.prototype),g=t(F.prototype,"_index",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=F))||y)||y)||y)||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/BhvRollNumber.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,l,a,o,n,u,s,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,l=t.assertThisInitialized,a=t.createClass},function(t){o=t.cclegacy,n=t._decorator,u=t.Label,s=t.Enum,c=t.lerp,p=t.Component}],execute:function(){var h,b,f,g,m,y,E,v,d,T,_,M,S,R,w,I,V,F,N;o._RF.push({},"72d13dwmG9LS4gkJhSuAp3F","BhvRollNumber",void 0);var k=n.ccclass,A=n.property,L=n.menu,z=function(t){return t[t.INTEGER=0]="INTEGER",t[t.FIXED_2=1]="FIXED_2",t[t.TIMER=2]="TIMER",t[t.PERCENTAGE=3]="PERCENTAGE",t[t.KMBT_FIXED2=4]="KMBT_FIXED2",t[t.CUSTOMER=5]="CUSTOMER",t}(z||{});t("BhvRollNumber",(h=L("添加特殊行为/UI/Roll Number (滚动数字)"),b=A({type:u,tooltip:"需要滚动的 Label 组件,如果不进行设置，就会从自己的节点自动查找"}),f=A({tooltip:"当前的滚动值(开始的滚动值)"}),g=A({tooltip:"是否显示正负符号"}),m=A({tooltip:"滚动的目标值"}),y=A({tooltip:"滚动的线性差值",step:.01,max:1,min:0}),E=A({tooltip:"是否在开始时就播放"}),v=A({tooltip:"在滚动之前会等待几秒",step:.1,max:1,min:0}),d=A({type:s(z),tooltip:"是否在开始时就播放"}),k(T=h((M=e((_=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,r(e,"label",M,l(e)),r(e,"value",S,l(e)),r(e,"showPlusSymbol",R,l(e)),r(e,"_targetValue",w,l(e)),r(e,"lerp",I,l(e)),r(e,"playAtStart",V,l(e)),r(e,"runWaitTimer",F,l(e)),r(e,"valueType",N,l(e)),e._custom_callback=null,e.isScrolling=!1,e}i(e,t);var o=e.prototype;return o.onLoad=function(){null==this.label&&(this.label=this.node.getComponent(u)),this.playAtStart&&(this.updateLabel(),this.scroll())},o.scroll=function(){var t=this;this.isScrolling||(this.runWaitTimer>0?this.scheduleOnce((function(){t.isScrolling=!0}),this.runWaitTimer):this.isScrolling=!0)},o.stop=function(){this.value=this.targetValue,this.isScrolling=!1,this.updateLabel()},o.init=function(t,e,i){this.targetValue=e||0,this.value=t||0,this.lerp=i||.1},o.scrollTo=function(t){null!=t&&(this.targetValue=t)},o.updateLabel=function(){var t=this.value,e="";switch(this.valueType){case z.INTEGER:e=Math.round(t)+"";break;case z.FIXED_2:e=t.toFixed(2);break;case z.TIMER:e=function(t,e){void 0===t&&(t=0);void 0===e&&(e=!0);var i=Math.floor(t),r=Math.floor(i/3600),l=Math.floor(i%3600/60),a=i%60,o=""+l,n=""+a;a<10&&(n="0"+a);return e?(l<10&&(o="0"+l),r+":"+o+":"+n):(o=""+(l+60*r),l<10&&(o="0"+l),o+":"+n)}(t);break;case z.PERCENTAGE:e=Math.round(100*t)+"%";break;case z.KMBT_FIXED2:e=t>=Number.MAX_VALUE?"MAX":t>1e12?(t/1e12).toFixed(2)+"T":t>1e9?(t/1e9).toFixed(2)+"B":t>1e6?(t/1e6).toFixed(2)+"M":t>1e3?(t/1e3).toFixed(2)+"K":Math.round(t).toString();break;case z.CUSTOMER:this._custom_callback&&(e=this._custom_callback(this.value,this.targetValue))}if(this.showPlusSymbol&&(t>0?e="+"+e:t<0&&(e="-"+e)),this.label){if(e===this.label.string)return;this.label.string=e}},o.update=function(t){if(0!=this.isScrolling)return this.value=c(this.value,this.targetValue,this.lerp),this.updateLabel(),Math.abs(this.value-this.targetValue)<=1e-4?(this.value=this.targetValue,void(this.isScrolling=!1)):void 0},a(e,[{key:"targetValue",get:function(){return this._targetValue},set:function(t){this._targetValue=t,this.scroll()}}]),e}(p)).prototype,"label",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(_.prototype,"value",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=e(_.prototype,"showPlusSymbol",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(_.prototype,"targetValue",[m],Object.getOwnPropertyDescriptor(_.prototype,"targetValue"),_.prototype),w=e(_.prototype,"_targetValue",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),I=e(_.prototype,"lerp",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),V=e(_.prototype,"playAtStart",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),F=e(_.prototype,"runWaitTimer",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),N=e(_.prototype,"valueType",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.INTEGER}}),T=_))||T)||T));o._RF.pop()}}}));

System.register("chunks:///_virtual/BhvSwitchPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VMEnv.ts"],(function(e){var i,t,n,r,o,a,s,c,h,u;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.createClass},function(e){a=e.cclegacy,s=e._decorator,c=e.CCInteger,h=e.Component},function(e){u=e.VMEnv}],execute:function(){var d,p,g,l,f,x;a._RF.push({},"b3d083kncpDPqVztMtiq6DO","BhvSwitchPage",void 0);var v=s.ccclass,y=s.property,P=s.executeInEditMode,_=s.menu;e("BhvSwitchPage",(d=_("添加特殊行为/UI/Switch Page (切换页面)"),p=y({type:c}),v(g=P(g=d((f=i((l=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return i=e.call.apply(e,[this].concat(o))||this,n(i,"isLoopPage",f,r(i)),n(i,"_index",x,r(i)),i.preIndex=0,i._isChanging=!1,i}t(i,e);var a=i.prototype;return a.onLoad=function(){this.preIndex=this.index},a._updateEditorPage=function(e){if(u.editor)for(var i=this.node.children,t=0;t<i.length;t++){var n=i[t];n.active=t==e}},a._updatePage=function(e){var i=this.node.children,t=this.preIndex,n=this.index;if(t!==n){var r=i[t],o=i[n];r.active=!1,o.active=!0}},a.next=function(){return!this.isChanging&&(this.index++,!0)},a.previous=function(){return!this.isChanging&&(this.index--,!0)},a.setEventIndex=function(e,i){return this.index>=0&&null!=this.index&&!1===this.isChanging&&(this.index=i,!0)},o(i,[{key:"index",get:function(){return this._index},set:function(e){if(!this.isChanging){e=Math.round(e);var i=this.node.children.length-1;this.isLoopPage?(e>i&&(e=0),e<0&&(e=i)):(e>i&&(e=i),e<0&&(e=0)),this.preIndex=this._index,this._index=e,u.editor?this._updateEditorPage(e):this._updatePage(e)}}},{key:"isChanging",get:function(){return this._isChanging}}]),i}(h)).prototype,"isLoopPage",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=i(l.prototype,"_index",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),i(l.prototype,"index",[p],Object.getOwnPropertyDescriptor(l.prototype,"index"),l.prototype),g=l))||g)||g)||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/BranchNode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BehaviorTree.ts","./BTreeNode.ts"],(function(n){var t,i,o,e;return{setters:[function(n){t=n.inheritsLoose},function(n){i=n.cclegacy},function(n){o=n.BehaviorTree},function(n){e=n.BTreeNode}],execute:function(){i._RF.push({},"beafaDMsw9FCbGDpLVmMfa1","BranchNode",void 0);n("BranchNode",function(n){function i(t){var i;return(i=n.call(this)||this).children=void 0,i._actualTask=void 0,i._runningNode=void 0,i._nodeRunning=void 0,i._blackboard=void 0,i.children=t||[],i}t(i,n);var e=i.prototype;return e.start=function(){this._actualTask=0,n.prototype.start.call(this)},e.run=function(n){0==this.children.length?this._control.fail():(this._blackboard=n,this.start(),this._actualTask<this.children.length&&this._run()),this.end()},e._run=function(n){var t=o.getNode(this.children[this._actualTask]);this._runningNode=t,t.setControl(this),t.start(this._blackboard),t.run(this._blackboard)},e.running=function(n){this._nodeRunning=n,this._control.running(n)},e.success=function(){this._nodeRunning=null,this._runningNode.end(this._blackboard)},e.fail=function(){this._nodeRunning=null,this._runningNode.end(this._blackboard)},i}(e));i._RF.pop()}}}));

System.register("chunks:///_virtual/BTreeNode.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"f0aeepAwndJP7wlpP6QKx06","BTreeNode",void 0);t("BTreeNode",function(){function t(){this._control=void 0,this.title=void 0,this.title=this.constructor.name}var n=t.prototype;return n.start=function(t){},n.end=function(t){},n.setControl=function(t){this._control=t},n.running=function(t){this._control.running(this)},n.success=function(){this._control.success()},n.fail=function(){this._control.fail()},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/BuildTimeConstants.ts",["cc","./env"],(function(t){var n,e;return{setters:[function(t){n=t.cclegacy},function(t){e=t}],execute:function(){n._RF.push({},"21a39/4HchJdJkSQKKKkLh9","BuildTimeConstants",void 0);var o=Object.keys(e).sort();t("BuildTimeConstants",(function(){var t=o.reduce((function(t,n){return Math.max(t,n.length)}),0),n=""+o.map((function(n){var o=e[n],u="boolean"==typeof o?o?"true":"false":o;return"\n"+n.padStart(t," ")+" : "+u}));console.log(n)}));n._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./ButtonSimple.ts"],(function(t){var e,n,o,i,a,r,c,s,l,u,f,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,a=t.createClass},function(t){r=t.cclegacy,c=t._decorator,s=t.Animation,l=t.AnimationClip,u=t.Sprite},function(t){f=t.oops},function(t){p=t.default}],execute:function(){var d,h,m,y,g,b;r._RF.push({},"1be36hrGO5Oz6Eapg6ygW03","ButtonEffect",void 0);var _=c.ccclass,v=c.property,E=c.menu;t("default",(d=_("ButtonEffect"),h=E("ui/button/ButtonEffect"),m=v({tooltip:"是否开启"}),d(y=h((b=e((g=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,o(e,"disabledEffect",b,i(e)),e.anim=void 0,e}n(e,t);var r=e.prototype;return r.onLoad=function(){this.anim=this.node.addComponent(s);var e=f.res.get("common/anim/button_scale_start",l),n=f.res.get("common/anim/button_scale_end",l);this.anim.defaultClip=e,this.anim.createState(e,null==e?void 0:e.name),this.anim.createState(n,null==n?void 0:n.name),t.prototype.onLoad.call(this)},r.onTouchtStart=function(t){this.disabledEffect||this.anim.play("button_scale_start")},r.onTouchEnd=function(e){this.disabledEffect||this.anim.play("button_scale_end"),t.prototype.onTouchEnd.call(this,e)},a(e,[{key:"grayscale",get:function(){return this.node.getComponent(u).grayscale},set:function(t){this.node.getComponent(u)&&(this.node.getComponent(u).grayscale=t)}}]),e}(p)).prototype,"disabledEffect",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=g))||y)||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonSimple.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,n,e,i,r,u,c,h,s;return{setters:[function(t){o=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,u=t._decorator,c=t.Node,h=t.game,s=t.Component}],execute:function(){var a,p,l,T,d,f,E,v;r._RF.push({},"8d645yObX1FvJfk2sbi0rxp","ButtonSimple",void 0);var y=u.ccclass,m=u.property,C=u.menu;t("default",(a=y("ButtonSimple"),p=C("ui/button/ButtonSimple"),l=m({tooltip:"是否只能触发一次"}),T=m({tooltip:"每次触发间隔"}),a(d=p((E=o((f=function(t){function o(){for(var o,n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];return o=t.call.apply(t,[this].concat(r))||this,e(o,"once",E,i(o)),e(o,"interval",v,i(o)),o.touchCount=0,o.touchtEndTime=0,o}n(o,t);var r=o.prototype;return r.onLoad=function(){this.node.on(c.EventType.TOUCH_START,this.onTouchtStart,this),this.node.on(c.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(c.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},r.onTouchtStart=function(t){},r.onTouchEnd=function(t){if(this.once){if(this.touchCount>0)return void(t.propagationStopped=!0);this.touchCount++}this.touchtEndTime&&h.totalTime-this.touchtEndTime<this.interval?t.propagationStopped=!0:this.touchtEndTime=h.totalTime},r.onDestroy=function(){this.node.off(c.EventType.TOUCH_START,this.onTouchtStart,this),this.node.off(c.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(c.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},o}(s)).prototype,"once",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=o(f.prototype,"interval",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 500}}),d=f))||d)||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonTouchLong.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ButtonEffect.ts"],(function(t){var o,n,i,e,s,u,c,r;return{setters:[function(t){o=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){s=t.cclegacy,u=t._decorator,c=t.EventHandler},function(t){r=t.default}],execute:function(){var a,h,l,p,T,f,_,g;s._RF.push({},"da96en7WYpPTaPIkO1l/Nux","ButtonTouchLong",void 0);var v=u.ccclass,m=u.property,L=u.menu;t("ButtonTouchLong",(a=v("ButtonTouchLong"),h=L("ui/button/ButtonTouchLong"),l=m({tooltip:"长按时间（秒）"}),p=m({type:[c],tooltip:"长按时间（秒）"}),a(T=h((_=o((f=function(t){function o(){for(var o,n=arguments.length,s=new Array(n),u=0;u<n;u++)s[u]=arguments[u];return o=t.call.apply(t,[this].concat(s))||this,i(o,"time",_,e(o)),i(o,"clickEvents",g,e(o)),o._passTime=0,o._isTouchLong=!0,o._event=null,o}n(o,t);var s=o.prototype;return s.onLoad=function(){this._isTouchLong=!1,t.prototype.onLoad.call(this)},s.onTouchtStart=function(o){this._event=o,this._passTime=0,t.prototype.onTouchtStart.call(this,o)},s.onTouchEnd=function(o){this._passTime>this.time&&(o.propagationStopped=!0),this._event=null,this._passTime=0,this._isTouchLong=!1,t.prototype.onTouchEnd.call(this,o)},s.removeTouchLong=function(){this._event=null,this._isTouchLong=!1},s.update=function(t){this._event&&!this._isTouchLong&&(this._passTime+=t,this._passTime>=this.time&&(this._isTouchLong=!0,this.clickEvents.forEach((function(t){t.emit([t.customEventData])})),this.removeTouchLong()))},o}(r)).prototype,"time",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),g=o(f.prototype,"clickEvents",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=f))||T)||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/CameraUtil.ts",["cc"],(function(e){var t,i,r,n,o;return{setters:[function(e){t=e.cclegacy,i=e.Vec3,r=e.view,n=e.v2,o=e.rect}],execute:function(){t._RF.push({},"95c77QQpp1EjKj8UBFCCdKu","CameraUtil",void 0);e("CameraUtil",function(){function e(){}return e.isInView=function(e,t){var n=e.node.getWorldPosition(),o=e.worldToScreen(t),c=i.normalize(new i,t.subtract(n)),u=e.node.forward,a=i.dot(u,c),w=r.getViewportRect();return a>0&&o.x<=w.width&&o.x>=0&&o.y<=w.height&&o.y>=0},e.isInView2D=function(e,t){var i=e.worldToScreen(t),n=r.getViewportRect();return i.x<=n.width&&i.x>=0&&i.y<=n.height&&i.y>=0},e.isInView2DRect=function(e,t,i){var c=e.worldToScreen(t),u=r.getViewportRect(),a=u.width*i,w=u.height*i,d=n(u.width/2,u.height/2);return o(d.x-a/2,d.y-w/2,a,w).contains(n(c.x,c.y))},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/Card.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts","./SingletonModuleComp.ts","./CardBll.ts","./CardModel.ts","./CardView.ts"],(function(t){var r,e,o,n,i,s,a;return{setters:[function(t){r=t.inheritsLoose},function(t){e=t.cclegacy},function(t){o=t.ecs},function(t){n=t.smc},function(t){i=t.CardBllComp},function(t){s=t.CardModelComp},function(t){a=t.CardViewComp}],execute:function(){var d;e._RF.push({},"7a6bfLH+/ZG2JdAPmAJYreh","Card",void 0);t("Card",o.register("Card")(d=function(t){function e(){for(var r,e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return(r=t.call.apply(t,[this].concat(o))||this).CardModel=void 0,r.CardBll=void 0,r.CardView=void 0,r}r(e,t);var o=e.prototype;return o.init=function(){this.addComponents(s,i)},o.destroy=function(){this.CardView&&(this.CardView.setToEmpty(),this.remove(a,!1)),this.CardBll.reset(),this.CardModel.reset(),n.player.PlayerModel.removeCard(this),t.prototype.destroy.call(this)},e}(o.Entity))||d),t("EcsCardSystem",function(t){function e(){return t.call(this)||this}return r(e,t),e}(o.System));e._RF.pop()}}}));

System.register("chunks:///_virtual/CardBll.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts"],(function(t){var r,n,e;return{setters:[function(t){r=t.inheritsLoose},function(t){n=t.cclegacy},function(t){e=t.ecs}],execute:function(){var o;n._RF.push({},"8b5c366/XhA3YhAkCAa7Oqu","CardBll",void 0);var i=t("CardBllComp",e.register("CardBll")(o=function(t){function n(){return t.apply(this,arguments)||this}return r(n,t),n.prototype.reset=function(){},n}(e.Comp))||o);t("CardBllSystem",function(t){function n(){return t.apply(this,arguments)||this}r(n,t);var o=n.prototype;return o.filter=function(){return e.allOf(i)},o.entityEnter=function(t){t.remove(i)},n}(e.ComblockSystem));n._RF.pop()}}}));

System.register("chunks:///_virtual/CardModel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts","./TableCard.ts","./TableEffect.ts","./Card.ts","./SingletonModuleComp.ts","./TableGroup.ts","./RandomManager.ts","./Oops.ts","./GameplayEvent.ts"],(function(t){var e,a,r,n,i,s,o,l,c,u,f,h;return{setters:[function(t){e=t.createClass,a=t.inheritsLoose},function(t){r=t.cclegacy},function(t){n=t.ecs},function(t){i=t.TableCard},function(t){s=t.TableEffect},function(t){o=t.Card},function(t){l=t.smc},function(t){c=t.TableGroup},function(t){u=t.RandomManager},function(t){f=t.oops},function(t){h=t.GameplayEvent}],execute:function(){var p;r._RF.push({},"cf6fcAxEnxDU51wac5aKVyk","CardModel",void 0);var d=t("Rare",function(t){return t[t.Common=1]="Common",t[t.Rare=2]="Rare",t[t.SuperRare=3]="SuperRare",t[t.SuperSuperRare=4]="SuperSuperRare",t[t.Epic=5]="Epic",t[t.Legendary=6]="Legendary",t}({})),g=t("Relation",function(t){return t.Self="自己",t.SameRow="同排",t.SameColumn="同列",t.Adjacent="相邻",t.SameDiagonal="同斜",t.SameColumnAndRow="同行列",t.All="共存",t}({})),m=t("ActionType",function(t){return t.TempChange="临时改变",t.PermanentChange="永久改变",t.Summon="增加卡牌",t.Destroy="移除卡牌",t}({})),v=t("ValueOperation",function(t){return t.Add="+",t.Sub="-",t.Mul="*",t.Div="/",t.Set="=",t}({})),y=t("FilterLogic",function(t){return t.And="AND",t.Or="OR",t.Not="NOT",t.Xor="XOR",t}({})),_=t("CompareOperation",function(t){return t.Equal="==",t.Greater=">",t.Less="<",t.GreaterEqual=">=",t.LessEqual="<=",t}({})),C=t("Filter",function(){function t(){this._self=null,this._target=[]}var a=t.prototype;return a.initFilterParams=function(t,e){this._self=t,this._target=e},a.checkFilter=function(){return new Set},a.reverseFilter=function(){var t=this.checkFilter(),e=new Set;return this._target.forEach((function(a){t.has(a)||e.add(a)})),e},e(t,[{key:"result",get:function(){return this.checkFilter()}},{key:"reverseResult",get:function(){return this.reverseFilter()}}]),t}()),k=t("IsFilter",function(t){function e(){for(var e,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).ID="",e}return a(e,t),e.prototype.checkFilter=function(){var t=this,e=new Set;return this._target.forEach((function(a){a&&a.CardModel.id.toString()===t.ID&&e.add(a)})),e},e}(C)),w=t("BelongFilter",function(t){function e(){for(var e,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).GROUP_ID="",e}return a(e,t),e.prototype.checkFilter=function(){var t=new Set,e=new c;return e.init(parseInt(this.GROUP_ID)),this._target.forEach((function(a){a&&e.card.split(",").includes(a.CardModel.id.toString())&&t.add(a)})),t},e}(C)),b=t("ComparationFilter",function(t){function e(){for(var e,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).left="",e.right="",e.operation=_.Equal,e}a(e,t);var r=e.prototype;return r.getValue=function(t,e,a){if(a.startsWith("self")){var r=a.split(".")[1];return["Attack","Healing","Defense","showCount"].includes(r)?t[r]:t.dynamicData[r]}if(a.startsWith("target")){var n=a.split(".")[1];return["Attack","Healing","Defense","showCount"].includes(n)?e[n]:e.dynamicData[n]}return parseInt(a)},r.checkFilter=function(){var t=this,e=new Set;return this._target.forEach((function(a){var r=t.getValue(t._self.CardModel,a?a.CardModel:null,t.left),n=t.getValue(t._self.CardModel,a?a.CardModel:null,t.right);switch(t.operation){case _.Equal:r===n&&e.add(a);break;case _.Greater:r>n&&e.add(a);break;case _.Less:r<n&&e.add(a);break;case _.GreaterEqual:r>=n&&e.add(a);break;case _.LessEqual:r<=n&&e.add(a)}})),e},e}(C)),A=t("Action",function(){function t(){this.actionType=m.TempChange,this.target="",this.valueOperation=v.Add,this.value=0,this._self=null,this._target=[]}var e=t.prototype;return e.initActionParams=function(t,e){this._self=t,this._target=e},e.doAction=function(){var t=this;switch(console.log("do action: ",this.actionType,this.target,this.valueOperation,this.value),this.actionType){case m.TempChange:this.target.startsWith("self")?this.applyValue(this._self.CardModel.dynamicData,"temp"+this.target.split(".")[1],this.value,this.valueOperation):this._target.forEach((function(e){t.applyValue(e.CardModel.dynamicData,"temp"+t.target.split(".")[1],t.value,t.valueOperation)}));break;case m.PermanentChange:this.target.startsWith("self")?this.applyValue(this._self.CardModel,this.target.split(".")[1],this.value,this.valueOperation):this._target.forEach((function(e){t.applyValue(e.CardModel,t.target.split(".")[1],t.value,t.valueOperation)}));break;case m.Summon:if(console.log("summon: ",this._target),this.target.startsWith("GROUP")){var e=new c;e.init(parseInt(this.target.split("(")[1].split(")")[0])),u.instance.getRandomByObjectList(e.card.split(","),1).forEach((function(t){var e=new i;e.init(parseInt(t));var a=n.getEntity(o);a.CardModel.load(e.id),l.player.PlayerModel.cardList.push(a);var r=l.player.PlayerModel.getEmptySlot();r>=0&&(l.player.PlayerModel.currentResult[r]=a,f.message.dispatchEvent(h.RefreshGrid))}))}else if(this.target.startsWith("ID")){var a=new i;a.init(parseInt(this.target.split("(")[1].split(")")[0]));var r=n.getEntity(o);r.CardModel.load(a.id),l.player.PlayerModel.cardList.push(r)}break;case m.Destroy:if(console.log("destroy: ",this.target),this.target.startsWith("self")){this._self.destroy();break}this.target.startsWith("target")&&this._target.forEach((function(t){t.destroy()}))}this._self.CardView&&this._self.CardView.initBaseData()},e.applyValue=function(t,e,a,r){switch(r){case v.Add:t[e]+=a;break;case v.Sub:t[e]-=a;break;case v.Mul:t[e]*=a;break;case v.Div:t[e]/=a;break;case v.Set:t[e]=a}console.log("value change: ",t,e,a,r)},t}()),S=t("Effect",function(){function t(){this.relation=g.Self,this.filterCondition=[],this.filterLogic=[],this.action=[],this._self=null,this._target=[]}var e=t.prototype;return e.initEffectParams=function(t,e){this._self=t,this._target=e},e.checkEffect=function(){var t=this,e=new Set,a=this.filterLogic.slice(),r=null;return this.filterCondition.forEach((function(n){n.initFilterParams(t._self,t._target);var i=n.result;if(a.length>0&&a[0]===y.Not&&(a.shift(),i=n.reverseResult),null===r)e=i;else switch(r){case y.And:e=new Set(Array.from(e).filter((function(t){return i.has(t)})));break;case y.Or:e=new Set(Array.from(e).concat(Array.from(i)));break;case y.Xor:e=new Set(Array.from(e).filter((function(t){return!i.has(t)})))}r=a.shift()})),Array.from(e)},t}());t("CardModelComp",n.register("CardModel")(p=function(t){function e(){for(var e,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).id=0,e.name="__card_name__",e.Attack=0,e.Healing=0,e.Defense=0,e.rare=d.Common,e.group=[],e.effect=[],e.image="__card_image__",e.description="__card_description__",e.showCount=0,e.dynamicData={tempAttack:0,tempHealing:0,tempDefense:0},e}a(e,t);var r=e.prototype;return r.load=function(t){var e=new i;e.init(t),console.log("load card info: ",t),this.id=t,this.name=e.name,this.description=e.description,this.Attack=e.attack,this.Healing=e.healing,this.Defense=e.defense,this.rare=e.rare,e.group&&(this.group=e.group.split(",")),e.effect&&(this.effect=this.buildEffect(e.effect))},r.buildEffect=function(t){var e=this,a=[];return t.split(",").forEach((function(t){var r=new s;r.init(parseInt(t));var n=new S;n.relation=r.relation;var i=e.parseConditionString(r.filter),o=i.conditions,l=i.operators;n.filterCondition=o,n.filterLogic=l,n.action=e.parseActions(r.action),a.push(n)})),a},r.parseConditionString=function(t){return{conditions:Array.from(t.matchAll(/(NOT\s*)?((self|target)\.\w+\s*(>|<|>=|<=|==)\s*(\d+|"[^"]*"|true|false)|(is|belong)\s*"\d+")/g),(function(t){var e=t[0];if(console.log(e),e.startsWith("is")){var a=new k;return a.ID=e.split(" ")[1].replace(/"/g,""),a}if(e.startsWith("belong")){var r=new w;return r.GROUP_ID=e.split(" ")[1].replace(/"/g,""),r}var n=new b,i=e.split(" "),s=i[0],o=i[1],l=i[2];switch(n.left=s,n.right=l,o){case">":n.operation=_.Greater;break;case"<":n.operation=_.Less;break;case">=":n.operation=_.GreaterEqual;break;case"<=":n.operation=_.LessEqual;break;case"==":n.operation=_.Equal}return n})),operators:Array.from(t.matchAll(/\s*(AND|OR|XOR)\s*/g),(function(t){return t[1]}))}},r.parseActions=function(t){for(var e,a=/(临时改变|永久改变|增加卡牌|移除卡牌),((self|target)(\.\w+)?|GROUP\(\d+\)|ID\(\d+\))(,([\+\-\*\/=]\d+))?;/gm,r=[];null!==(e=a.exec(t));){var n=new A;switch(e[1]){case"临时改变":n.actionType=m.TempChange;break;case"永久改变":n.actionType=m.PermanentChange;break;case"增加卡牌":n.actionType=m.Summon;break;case"移除卡牌":n.actionType=m.Destroy}if(n.target=e[2],e[6]){switch(e[6][0]){case"+":n.valueOperation=v.Add;break;case"-":n.valueOperation=v.Sub;break;case"*":n.valueOperation=v.Mul;break;case"/":n.valueOperation=v.Div;break;case"=":n.valueOperation=v.Set}n.value=parseInt(e[6].substring(1))}r.push(n)}return r},r.reset=function(){this.id=0,this.name="__card_name__",this.Attack=0,this.Healing=0,this.Defense=0,this.rare=d.Common,this.group=[],this.effect=[],this.image="__card_image__",this.description="__card_description__",this.showCount=0,this.dynamicData={tempAttack:0,tempHealing:0,tempDefense:0}},e}(n.Comp))||p);r._RF.pop()}}}));

System.register("chunks:///_virtual/CardView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts","./CCVMParentComp.ts","./CardModel.ts"],(function(t){var a,e,n,r,o,c,i,s;return{setters:[function(t){a=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,r=t.Sprite,o=t.Color},function(t){c=t.ecs},function(t){i=t.CCVMParentComp},function(t){s=t.Rare}],execute:function(){var d;e._RF.push({},"2eb16tu2CVNBpY+5PtWuK9K","CardView",void 0);var l=n.ccclass;n.property,t("CardViewComp",l("CardViewComp")(d=c.register("CardView",!1)(d=function(t){function e(){for(var a,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(a=t.call.apply(t,[this].concat(n))||this).data={cardName:"空",cardAttack:"",cardHealth:"",cardDefense:"",cardDescription:"",cardShowCount:"",cardTempAttack:"",cardTempHealth:"",cardTempDefense:"",applyAttack:"",applyHealth:"",applyDefense:""},a}a(e,t);var n=e.prototype;return n.initBaseData=function(){var t=this.ent.CardModel;this.data.cardName=t.name,this.data.cardAttack=null==t.Attack?"":t.Attack.toString(),this.data.cardHealth=null==t.Healing?"":t.Healing.toString(),this.data.cardDefense=null==t.Defense?"":t.Defense.toString(),this.data.cardDescription=t.description;var a=this.node.getComponent(r);switch(t.rare){case s.Common:a.color=new o("868e96");break;case s.Rare:a.color=new o("228be6");break;case s.SuperRare:a.color=new o("40c057");break;case s.SuperSuperRare:a.color=new o("e64980");break;case s.Epic:a.color=new o("7950f2");break;case s.Legendary:a.color=new o("fab005");break;default:a.color=o.WHITE}this.data.cardShowCount=t.showCount>0?t.showCount.toString():"",this.data.cardTempAttack=0==t.dynamicData.tempAttack?"":t.dynamicData.tempAttack.toString(),this.data.cardTempHealth=0==t.dynamicData.tempHealing?"":t.dynamicData.tempHealing.toString(),this.data.cardTempDefense=0==t.dynamicData.tempDefense?"":t.dynamicData.tempDefense.toString()},n.setToEmpty=function(){this.data.cardName="空",this.data.cardAttack="",this.data.cardHealth="",this.data.cardDefense="",this.data.cardDescription="",this.data.cardShowCount="",this.node.getComponent(r).color=o.WHITE},n.start=function(){},n.reset=function(){this.node.destroy()},n.onTouchStart=function(){console.log("onTouchStart")},n.onTouchEnd=function(){console.log("onTouchEnd")},e}(i))||d)||d);e._RF.pop()}}}));

System.register("chunks:///_virtual/CCComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameComponent.ts"],(function(o){var t,e,n,c;return{setters:[function(o){t=o.inheritsLoose},function(o){e=o.cclegacy,n=o._decorator},function(o){c=o.GameComponent}],execute:function(){var r,i;e._RF.push({},"dd207fiyGJLf5r+bkiMgwdt","CCComp",void 0);var a=n.ccclass;n.property,o("CCComp",a("CCComp")(((i=function(o){function e(){for(var t,e=arguments.length,n=new Array(e),c=0;c<e;c++)n[c]=arguments[c];return(t=o.call.apply(o,[this].concat(n))||this).canRecycle=void 0,t.ent=void 0,t}return t(e,o),e}(c)).tid=-1,i.compName=void 0,r=i))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/CCVMParentComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VMParent.ts"],(function(t){var e,n,r,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator},function(t){o=t.default}],execute:function(){var c,a;n._RF.push({},"5908aTmM1lItpXgo7ROpQeQ","CCVMParentComp",void 0);var i=r.ccclass;r.property,t("CCVMParentComp",i("CCVMParentComp")(((a=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).canRecycle=void 0,e.ent=void 0,e}return e(n,t),n}(o)).tid=-1,a.compName=void 0,c=a))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/CenterManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./enum.ts","./ScrollManager.ts","./ViewManager.ts"],(function(e){var t,i,a,r,n,o,s,l,c,p,h,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized,n=e.createClass},function(e){o=e.cclegacy,s=e._decorator,l=e.v3},function(e){c=e.Manager},function(e){p=e.AlwaysScroll},function(e){h=e.ScrollManager},function(e){u=e.ViewManager}],execute:function(){var d,g,v,f,w,_,M,m,A,x,z;o._RF.push({},"49cfdCskIREZ6//by123w4v","CenterManager",void 0);var b=s.ccclass,S=s.property;e("CenterManager",(d=b("CenterManager"),g=S("boolean"),v=S({visible:function(){return this.enabled},tooltip:"自动居中动画的时长"}),f=S({range:[0,1],slide:!0,step:.1,tooltip:"容器(view)的锚点,当滚动停止时,元素锚点位置会和容器锚点位置重合"}),w=S({range:[0,1],slide:!0,step:.1,tooltip:"元素(item)的锚点位置,当滚动停止时,元素锚点位置会和容器锚点位置重合"}),d((m=t((M=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,a(t,"_enabled",m,r(t)),a(t,"duration",A,r(t)),a(t,"containerAnchorPoint",x,r(t)),a(t,"elementAnchorPoint",z,r(t)),t}i(t,e);var o=t.prototype;return o.getContainerOffset=function(e){void 0===e&&(e=this.containerAnchorPoint);var t=0;return t=this.adapter.isHorizontal?-1==this.adapter.multiplier?e:1-e:1==this.adapter.multiplier?e:1-e,this.adapter.mainAxisSize*t},o.getElementOffset=function(e){void 0===e&&(e=this.elementAnchorPoint);return this.adapter.isHorizontal?-1==this.adapter.multiplier?e:1-e:1==this.adapter.multiplier?e:1-e},o.onInit=function(){this.adapter.scrollManager.on(h.Event.ON_ABOUT_TO_STOP,this._onAboutToStop,this),this.adapter.viewManager.on(u.Event.ON_UPDATE_VIEWS,this.scrollToCenter,this,!0)},o._onAboutToStop=function(){this.scrollToCenter()},o.scrollToCenter=function(e){if(void 0===e&&(e=this.duration),this.enabled){var t=this.getCenterVisibleIndex();if(-1!=t){var i=this.adapter.viewManager.getVisibleView(t);this.adapter.scrollManager.scrollToGroupIndex(e,i.index)}}},o.getCenterVisibleIndex=function(e,t){void 0===e&&(e=this.containerAnchorPoint),void 0===t&&(t=this.elementAnchorPoint);for(var i=this.adapter.mainAxis,a=this.getContainerOffset(e),r=-1,n=Number.MAX_SAFE_INTEGER,o=0;o<this.adapter.viewManager.visibleLength;o++){var s=this.adapter.viewManager.getVisibleView(o);if(!s||!s.group)break;var c={x:s.group.position.x,y:s.group.position.y};c[i]-=this.adapter.multiplier*s.group.size[i]*t;var p=this.adapter.scrollManager.content.convertToWorldSpaceAR(l(c.x,c.y)),h=this.adapter.scrollManager.view.convertToNodeSpaceAR(p),u=Math.abs(h[i]+this.adapter.multiplier*a);u<n&&(n=u,r=o)}return r},o.getPositionByGroupIndex=function(e,t,i){void 0===t&&(t=p.Auto),void 0===i&&(i=!1);var a=this.adapter.viewManager.getGroup(e);if(!a)return null;var r=null;if(t==p.Header&&this.adapter.viewManager.loopHeader)i&&(r=this._checkExists(e)),null==r&&(r=this._alwaysHeader(e,a));else if(t==p.Footer&&this.adapter.viewManager.loopFooter)i&&(r=this._checkExists(e)),null==r&&(r=this._alwaysFooter(e,a));else if(null==(r=this._checkExists(e))){var n=this.adapter.viewManager.header,o=this.adapter.viewManager.footer;n?e>o.index?r=this._calcTargetFooter(o.group,o.index+1,e,a):e<n.index&&(r=this._calcTargetHeader(n.group,n.index-1,e,a)):r={position:a.position[this.adapter.mainAxis],size:a.size[this.adapter.mainAxis],anchor:a.anchorPoint[this.adapter.mainAxis]}}return this._convertTargetToPosition(r)},o._convertTargetToPosition=function(e){var t=null;if(e){var i=this.adapter.multiplier,a=-1==i?e.anchor:1-e.anchor;t=-e.position,t-=this.getContainerOffset()*i,t-=e.size*a*i,t+=e.size*this.getElementOffset()*i}return t},o._checkExists=function(e){var t=this.adapter.viewManager.getVisibleIndexByGroupIndex(e);if(-1!=t){var i=this.adapter.viewManager.getVisibleView(t);return{position:i.group.position[this.adapter.mainAxis],size:i.group.size[this.adapter.mainAxis],anchor:i.group.anchorPoint[this.adapter.mainAxis]}}return null},o._calcTargetFooter=function(e,t,i,a){for(var r=this.adapter.viewManager.internal_getInitFooterSize(e),n=t;n<=i;n++)r+=this.adapter.viewManager.internal_accumulationSize(n);return{position:this.adapter.viewManager.internal_convertSizeToFooterPosition(r,a),size:a.size[this.adapter.mainAxis],anchor:a.anchorPoint[this.adapter.mainAxis]}},o._calcTargetHeader=function(e,t,i,a){for(var r=this.adapter.viewManager.internal_getInitHeaderSize(e),n=t;n>=i;n--)r+=this.adapter.viewManager.internal_accumulationSize(n);return{position:this.adapter.viewManager.internal_convertSizeToHeaderPosition(r,a),size:a.size[this.adapter.mainAxis],anchor:a.anchorPoint[this.adapter.mainAxis]}},o._alwaysHeader=function(e,t){var i=0,a=e,r=this.adapter.viewManager.header;return r&&(i=this.adapter.viewManager.internal_getInitHeaderSize(r.group),a=r.index),e!=a&&(i=this._calcSizeToHeader(a,e,i)),{position:this.adapter.viewManager.internal_convertSizeToHeaderPosition(i,t),size:t.size[this.adapter.mainAxis],anchor:t.anchorPoint[this.adapter.mainAxis]}},o._alwaysFooter=function(e,t){var i=0,a=e,r=this.adapter.viewManager.footer;return r&&(i=this.adapter.viewManager.internal_getInitFooterSize(r.group),a=r.index),e!=a&&(i=this._calcSizeToFooter(a,e,i)),{position:this.adapter.viewManager.internal_convertSizeToFooterPosition(i,t),size:t.size[this.adapter.mainAxis],anchor:t.anchorPoint[this.adapter.mainAxis]}},o._calcSizeToHeader=function(e,t,i){for(;;){if(--e<0){if(!this.adapter.viewManager.loopHeader)return i;e=this.adapter.viewManager.groupLength-1}if(i+=this.adapter.viewManager.internal_accumulationSize(e),t==e)return i}},o._calcSizeToFooter=function(e,t,i){for(;;){if(++e>=this.adapter.viewManager.groupLength){if(!this.adapter.viewManager.loopFooter)return i;e=0}if(i+=this.adapter.viewManager.internal_accumulationSize(e),e==t)return i}},n(t,[{key:"enabled",get:function(){return this._enabled},set:function(e){e!=this._enabled&&(this._enabled=e)}},{key:"max",get:function(){var e=this.getContainerOffset(this.containerAnchorPoint);return this.adapter.isArrangeAxisStart?e:this.adapter.mainAxisSize-e}},{key:"min",get:function(){var e=this.getContainerOffset(this.containerAnchorPoint);return this.adapter.isArrangeAxisStart?this.adapter.mainAxisSize-e:e}}]),t}(c)).prototype,"_enabled",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(M.prototype,"enabled",[g],Object.getOwnPropertyDescriptor(M.prototype,"enabled"),M.prototype),A=t(M.prototype,"duration",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),x=t(M.prototype,"containerAnchorPoint",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=t(M.prototype,"elementAnchorPoint",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=M))||_));o._RF.pop()}}}));

System.register("chunks:///_virtual/Choose.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RandomManager.ts","./ECS.ts","./Card.ts","./CardView.ts","./SingletonModuleComp.ts","./TableCard.ts","./CardModel.ts","./Oops.ts","./GameplayEvent.ts"],(function(e){var o,r,a,n,t,i,s,c,u,l,d,p,f,h,C,y,v,m;return{setters:[function(e){o=e.applyDecoratedDescriptor,r=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized,t=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy,s=e._decorator,c=e.Node,u=e.Component},function(e){l=e.RandomManager},function(e){d=e.ecs},function(e){p=e.Card},function(e){f=e.CardViewComp},function(e){h=e.smc},function(e){C=e.TableCard},function(e){y=e.Rare},function(e){v=e.oops},function(e){m=e.GameplayEvent}],execute:function(){var g,E,b,k,M;i._RF.push({},"cac57n2cahHAaf9xZOg53+i","Choose",void 0);var D=s.ccclass,P=s.property;e("Choose",(g=D("Choose"),E=P([f]),g((M=o((k=function(e){function o(){for(var o,r=arguments.length,t=new Array(r),i=0;i<r;i++)t[i]=arguments[i];return o=e.call.apply(e,[this].concat(t))||this,a(o,"cards",M,n(o)),o}r(o,e);var i=o.prototype;return i.start=function(){},i.update=function(e){},i.onEnable=function(){var e=this,o=this.randomCards();console.log("random cards: ",o),o.forEach((function(o,r){var a=d.getEntity(p);a.add(e.cards[r]),a.CardModel.load(o),a.CardView.initBaseData()})),this.cards.forEach((function(o,r){o.node.on(c.EventType.TOUCH_END,(function(){e.onChoose(r)}),e)}))},i.onChoose=function(e){console.log(e),h.player.PlayerModel.cardList.push(this.cards[e].ent),h.player.PlayerModel.pickCount++,v.message.dispatchEvent(m.ChooseCardDone),v.gui.removeByNode(this.node,!1)},i.onSkip=function(){v.message.dispatchEvent(m.ChooseCardDone),v.gui.removeByNode(this.node,!1)},i.randomCards=function(){for(var e,o=[],r=new C,a=t(r.keys());!(e=a()).done;){var n=e.value;switch(r.init(n),r.rare){case y.Common:for(var i=0;i<20;i++)o.push(n);break;case y.Rare:if(h.player.PlayerModel.pickCount>5)for(var s=0;s<10;s++)o.push(n);break;case y.SuperRare:if(h.player.PlayerModel.pickCount>10)for(var c=0;c<5;c++)o.push(n);break;case y.SuperSuperRare:if(h.player.PlayerModel.pickCount>15)for(var u=0;u<3;u++)o.push(n);break;case y.Epic:if(h.player.PlayerModel.pickCount>20)for(var d=0;d<2;d++)o.push(n);break;case y.Legendary:h.player.PlayerModel.pickCount>25&&o.push(n)}}return console.log("randomList: ",o),l.instance.getRandomByObjectList(o,3)},i.onDisable=function(){this.cards.forEach((function(e){e.node.off(c.EventType.TOUCH_END),e.ent.remove(f,!1)}))},o}(u)).prototype,"cards",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=k))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/Collection.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var r,e,a,i;return{setters:[function(t){r=t.inheritsLoose,e=t.createClass,a=t.wrapNativeSuper},function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"1dcf5AtQQVK3KQ/2jHHD5gi","Collection",void 0);t("Collection",function(t){function a(){for(var r,e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return(r=t.call.apply(t,[this].concat(a))||this)._array=[],r}r(a,t);var i=a.prototype;return i.set=function(r,e){if(this.has(r)){var a=this.get(r),i=this._array.indexOf(a);this._array[i]=e}else this._array.push(e);return t.prototype.set.call(this,r,e)},i.delete=function(r){var e=this.get(r);if(e){var a=this._array.indexOf(e);return a>-1&&this._array.splice(a,1),t.prototype.delete.call(this,r)}return!1},i.clear=function(){this._array.splice(0,this._array.length),t.prototype.clear.call(this)},e(a,[{key:"array",get:function(){return this._array}}]),a}(a(Map)));i._RF.pop()}}}));

System.register("chunks:///_virtual/common.ts",["cc"],(function(){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"69e52/Tr/NDpaiGbtaq+FiZ","common",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/CommonPrompt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageLabel.ts","./Oops.ts"],(function(n){var t,e,o,i,c,a,l,r,s;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,o=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){c=n.cclegacy,a=n._decorator,l=n.Component},function(n){r=n.LanguageLabel},function(n){s=n.oops}],execute:function(){var u,f,h,b,p,g,d,m,_,y,C;c._RF.push({},"653bf8VPC5Fn49zFJFqXVgx","CommonPrompt",void 0);var k=a.ccclass,v=a.property;n("CommonPrompt",(u=k("CommonPrompt"),f=v(r),h=v(r),b=v(r),p=v(r),u((m=t((d=function(n){function t(){for(var t,e=arguments.length,c=new Array(e),a=0;a<e;a++)c[a]=arguments[a];return t=n.call.apply(n,[this].concat(c))||this,o(t,"lab_title",m,i(t)),o(t,"lab_content",_,i(t)),o(t,"lab_ok",y,i(t)),o(t,"lab_cancel",C,i(t)),t.config={},t}e(t,n);var c=t.prototype;return c.onTouchEnd=function(n,t){switch(n.target.name){case"btn_ok":this.onOk();break;case"btn_cancel":this.onCancel()}},c.onAdded=function(n){void 0===n&&(n={}),this.config=n||{},this.setTitle(),this.setContent(),this.setBtnOkLabel(),this.setBtnCancelLabel(),this.node.active=!0},c.setTitle=function(){this.lab_title.dataID=this.config.title},c.setContent=function(){this.lab_content.dataID=this.config.content},c.setBtnOkLabel=function(){this.lab_ok.dataID=this.config.okWord},c.setBtnCancelLabel=function(){this.lab_cancel.dataID=this.config.cancelWord,this.lab_cancel.node.parent.active=this.config.needCancel||!1},c.onOk=function(){"function"==typeof this.config.okFunc&&this.config.okFunc(),this.close()},c.onClose=function(){"function"==typeof this.config.closeFunc&&this.config.closeFunc(),this.close()},c.onCancel=function(){"function"==typeof this.config.cancelFunc&&this.config.cancelFunc(),this.close()},c.close=function(){s.gui.removeByNode(this.node)},c.onDestroy=function(){this.config=null},t}(l)).prototype,"lab_title",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(d.prototype,"lab_content",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(d.prototype,"lab_ok",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(d.prototype,"lab_cancel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=d))||g));c._RF.pop()}}}));

System.register("chunks:///_virtual/commonService.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,t,r,s;return{setters:[function(n){e=n.asyncToGenerator,t=n.regeneratorRuntime},function(n){r=n.cclegacy,s=n.sys}],execute:function(){r._RF.push({},"44580o5unVL4LzVzyeSD+LH","commonService",void 0);var i=n("CommonService",function(){function n(){}return n.init=function(n){this._env_name=n;var e=window.wx||window.tt||window.swan;e&&(e.cloud.init({env:this._env_name}),this._init=!0)},n.setMockStorage=function(n){this._storage=n},n.getOpenID=function(){var n=window.openid;return n||"test"},n.Login=function(){var n=e(t().mark((function n(){var e;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.CallFunction("dist","/Login");case 2:if(!(e=n.sent).isSuccess){n.next=6;break}return window.openid=e.data.openid,n.abrupt("return",!0);case 6:return n.abrupt("return",!1);case 7:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),n.Load=function(){var n=e(t().mark((function n(){var e;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.CallFunction("dist","/Load");case 2:if(!(e=n.sent).isSuccess){n.next=5;break}return n.abrupt("return",e.data);case 5:return n.abrupt("return","");case 6:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),n.Save=function(){var n=e(t().mark((function n(e){return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.CallFunction("dist","/Save",{saveData:e});case 2:if(!n.sent.isSuccess){n.next=5;break}return n.abrupt("return",!0);case 5:return n.abrupt("return",!1);case 6:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),n.CallFunction=function(){var n=e(t().mark((function n(e,r,s){var i=this;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,t){console.log("call server url:"+r+", data: "+JSON.stringify(s));var o=window.wx||window.tt||window.swan;o&&o.cloud?(i._init||(o.cloud.init({env:i._env_name}),i._init=!0),o.cloud.callFunction({name:e,data:{$url:r,params:s},success:function(e){console.log(e),200==e.result.status?n({isSuccess:!0,data:e.result.data}):n({isSuccess:!1,data:e.result.data})},fail:function(t){console.error("call funtion: "+e+" url: "+r+" error: ",t),n({isSuccess:!1})}})):(console.error("env cloud is null"),i.MockResponse(r,s).then((function(e){n(e)})))})));case 1:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}(),n.MockResponse=function(){var n=e(t().mark((function n(e,r){var i=this;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.setMockStorage(s.localStorage),n.abrupt("return",new Promise((function(n,t){setTimeout((function(){if("/Login"==e)n({isSuccess:!0,data:{openid:"test"}});else if("/Save"==e)i._storage?(i._storage.setItem(i.getOpenID(),r.saveData),n({isSuccess:!0})):(console.error("MockFunction not set"),n({isSuccess:!1}));else if("/Load"==e)if(i._storage){var t=i._storage.getItem(i.getOpenID());n({isSuccess:!0,data:t})}else console.error("MockFunction not set"),n({isSuccess:!1,data:{}});n({isSuccess:!1})}),1e3)})));case 2:case"end":return n.stop()}}),n,this)})));return function(e,t){return n.apply(this,arguments)}}(),n}());i._env_name=void 0,i._storage=void 0,i._init=!1,r._RF.pop()}}}));

System.register("chunks:///_virtual/Config.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"5034dEezo5Frr6dhZGVgmTh","Config",void 0);i("Config",(function(){this.btc=void 0,this.game=void 0,this.query=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/debug.ts",["cc"],(function(_){var e,D;return{setters:[function(_){e=_.cclegacy,D=_.Color}],execute:function(){e._RF.push({},"b7bf3JPeg5Pz4Pj5H6FXtBa","debug",void 0);_("DEBUG_DRAW_LINE_COLOR",new D(238,124,55,255)),_("DEBUG_DRAW_FILL_COLOR",new D(88,175,64,50)),_("DEBUG_DRAW_BORDER_COLOR",new D(56,120,94,255)),_("DEBUG_DRAW_LIND_WIDTH",3),_("ADAPTER_DEBUG_VIEW",!1),_("ADAPTER_DEBUG_CONTENT",!1);e._RF.pop()}}}));

System.register("chunks:///_virtual/Deck.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./ViewUtil.ts","./CardView.ts","./SingletonModuleComp.ts"],(function(e){var t,n,r,o,i,a,c,s,l,u,f,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,c=e.Node,s=e.Component},function(e){l=e.oops},function(e){u=e.ViewUtil},function(e){f=e.CardViewComp},function(e){p=e.smc}],execute:function(){var d,y,h,C,m;i._RF.push({},"161f6iN/91EiI+ifFF8q2ts","Deck",void 0);var g=a.ccclass,v=a.property;e("Deck",(d=g("Deck"),y=v(c),d((m=t((C=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,r(t,"cardContainer",m,o(t)),t}n(t,e);var i=t.prototype;return i.start=function(){},i.onEnable=function(){this.refresh()},i.update=function(e){},i.refresh=function(){var e=this;p.player.PlayerModel&&p.player.PlayerModel.cardList.forEach((function(t,n){var r=u.createPrefabNode("game/Prefab/CardSmall");r.setParent(e.cardContainer),t.add(r.getComponent(f)),r.getComponent(f).initBaseData()}))},i.onClose=function(){l.gui.removeByNode(this.node,!1)},t}(s)).prototype,"cardContainer",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=C))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/Decorator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BehaviorTree.ts","./BTreeNode.ts"],(function(t){var e,o,n,r;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy},function(t){n=t.BehaviorTree},function(t){r=t.BTreeNode}],execute:function(){o._RF.push({},"0455agxsbxHlYleJPDpJX3l","Decorator",void 0);t("Decorator",function(t){function o(e){var o;return(o=t.call(this)||this).node=void 0,e&&(o.node=n.getNode(e)),o}e(o,t);var r=o.prototype;return r.setNode=function(t){this.node=n.getNode(t)},r.start=function(){this.node.setControl(this),this.node.start(),t.prototype.start.call(this)},r.end=function(){this.node.end()},r.run=function(t){this.node.run(t)},o}(r));o._RF.pop()}}}));

System.register("chunks:///_virtual/Defines.ts",["cc"],(function(s){var t;return{setters:[function(s){t=s.cclegacy}],execute:function(){t._RF.push({},"82d3a9c71JEkI95d3qscHm8","Defines",void 0);s("ViewParams",(function(){this.uuid=null,this.prefabPath=null,this.params=null,this.callbacks=null,this.valid=!0,this.node=null}));t._RF.pop()}}}));

System.register("chunks:///_virtual/DelegateComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts"],(function(e){var o,n,t,a,s;return{setters:[function(e){o=e.inheritsLoose},function(e){n=e.cclegacy,t=e._decorator,a=e.Component},function(e){s=e.oops}],execute:function(){var i;n._RF.push({},"d8f1fGRD7dBzIeBSkOpd/Py","DelegateComponent",void 0);var r=t.ccclass;e("DelegateComponent",r("DelegateComponent")(i=function(e){function n(){for(var o,n=arguments.length,t=new Array(n),a=0;a<n;a++)t[a]=arguments[a];return(o=e.call.apply(e,[this].concat(t))||this).viewParams=null,o}o(n,e);var t=n.prototype;return t.add=function(){this.applyComponentsFunction(this.node,"onAdded",this.viewParams.params),"function"==typeof this.viewParams.callbacks.onAdded&&this.viewParams.callbacks.onAdded(this.node,this.viewParams.params)},t.remove=function(e){var o=this;this.viewParams.valid&&(this.applyComponentsFunction(this.node,"onBeforeRemove",this.viewParams.params),"function"==typeof this.viewParams.callbacks.onBeforeRemove?this.viewParams.callbacks.onBeforeRemove(this.node,(function(){o.removed(o.viewParams,e)})):this.removed(this.viewParams,e))},t.removed=function(e,o){e.valid=!1,"function"==typeof e.callbacks.onRemoved&&e.callbacks.onRemoved(this.node,e.params),o?(this.node.destroy(),s.res.release(e.prefabPath)):this.node.removeFromParent()},t.onDestroy=function(){this.applyComponentsFunction(this.node,"onRemoved",this.viewParams.params),this.viewParams=null},t.applyComponentsFunction=function(e,o,n){for(var t=0;t<e.components.length;t++){var a=e.components[t],s=a[o];s&&s.call(a,n)}},n}(a))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/device.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"8fef9oakYdHJLcwVc+bPJ/S","device",void 0);n("Device",function(){function n(){}return n.vibrateShort=function(n){var t=window.wx||window.tt||window.swan;t&&t.vibrateShort(n)},n.vibrateLong=function(n){var t=window.wx||window.tt||window.swan;t&&t.vibrateLong(n)},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/DrawMeshSector.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,i,a,n,o,s,u,l,c,p,h,d;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,s=e.Material,u=e.MeshRenderer,l=e.macro,c=e.Vec3,p=e.gfx,h=e.utils,d=e.Component}],execute:function(){var f,m,g,y,v,M,b,w,R,z,A;n._RF.push({},"ea0c13ef6VL451GZLWgDtle","DrawMeshSector",void 0);var D=o.ccclass,L=o.property;e("DrawMeshSector",(f=D("DrawSectorMesh"),m=L({type:s}),g=L({tooltip:"外圈半径"}),y=L({tooltip:"内圈半径"}),v=L({tooltip:"扇形角度"}),f((w=r((b=function(e){function r(){for(var r,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return r=e.call.apply(e,[this].concat(n))||this,i(r,"mat",w,a(r)),i(r,"radius",R,a(r)),i(r,"innerRadius",z,a(r)),i(r,"angledegree",A,a(r)),r}t(r,e);var n=r.prototype;return n.start=function(){this.createMesh()},n.createMesh=function(){for(var e=this.addComponent(u),r=Math.floor(this.angledegree/4)+1,t=[],i=2*r+2,a=new Array(i),n=this.angledegree*l.RAD,o=n,s=n/r,d=0;d<i;d+=2){var f=Math.cos(o),m=Math.sin(o);a[d]=new c(this.radius*f,0,this.radius*m),a[d+1]=new c(this.innerRadius*f,0,this.innerRadius*m),o-=s,t.push(a[d].x),t.push(a[d].y),t.push(a[d].z),t.push(a[d+1].x),t.push(a[d+1].y),t.push(a[d+1].z)}for(var g=6*r,y=new Array(g),v=(d=0,0);d<g;d+=6,v+=2)y[d]=v,y[d+1]=v+3,y[d+2]=v+1,y[d+3]=v+2,y[d+4]=v+3,y[d+5]=v;var M=[];for(d=0;d<i;d++){var b=a[d].x/this.radius/2+.5,w=a[d].z/this.radius/2+.5;M.push(b,w)}var R={positions:t,indices:y,uvs:M,primitiveMode:p.PrimitiveMode.TRIANGLE_FAN,attributes:[{name:p.AttributeName.ATTR_NORMAL,format:p.Format.RGB32F}]},z=h.createMesh(R);e.mesh=z,e.material=this.mat},r}(d)).prototype,"mat",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=r(b.prototype,"radius",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),z=r(b.prototype,"innerRadius",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),A=r(b.prototype,"angledegree",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),M=b))||M));n._RF.pop()}}}));

System.register("chunks:///_virtual/ECS.ts",["cc","./ECSComp.ts","./ECSEntity.ts","./ECSMatcher.ts","./ECSModel.ts","./ECSSystem.ts"],(function(t){var n,e,o,i,r,c,u,d;return{setters:[function(t){n=t.cclegacy},function(t){e=t.ECSComp},function(t){o=t.ECSEntity},function(t){i=t.ECSMatcher},function(t){r=t.ECSModel},function(t){c=t.ECSSystem,u=t.ECSRootSystem,d=t.ECSComblockSystem}],execute:function(){var s;t("ecs",void 0),n._RF.push({},"be87fT76plLkaUKEYpkuV0n","ECS",void 0),function(t){var n=t.Entity=o;t.Comp=e,t.System=c,t.RootSystem=u,t.ComblockSystem=d;function s(t){return function(){var t=new n;return t.eid=r.eid++,r.eid2Entity.set(t.eid,t),t}().add(t)}t.register=function(t,n){return void 0===n&&(n=!0),function(e){if(null==e.tid)r.entityCtors.set(e,t);else{if(-1!==e.tid)throw new Error("重复注册组件： "+t+".");e.tid=r.compTid++,e.compName=t,n?(r.compCtors.push(e),r.compPools.set(e.tid,[])):r.compCtors.push(null),r.compAddOrRemove.set(e.tid,[])}}},t.getEntity=function(t){var n=r.entityCtors.get(t);null==n&&console.error(t.name+" 实体没有注册");var e=(r.entityPool.get(n)||[]).pop();return e||((e=new t).eid=r.eid++,e.name=n),e.init?e.init():console.error(t.name+" 实体缺少 init 方法初始化默认组件"),r.eid2Entity.set(e.eid,e),e},t.query=function(t){var n=r.groups.get(t.mid);return n||(n=r.createGroup(t),r.eid2Entity.forEach(n.onComponentAddOrRemove,n)),n.matchEntities},t.clear=function(){r.eid2Entity.forEach((function(t){t.destroy()})),r.groups.forEach((function(t){t.clear()})),r.compAddOrRemove.forEach((function(t){t.length=0})),r.eid2Entity.clear(),r.groups.clear()},t.getEntityByEid=function(t){return r.eid2Entity.get(t)},t.activeEntityCount=function(){return r.eid2Entity.size},t.allOf=function(){var t;return(t=new i).allOf.apply(t,arguments)},t.anyOf=function(){var t;return(t=new i).anyOf.apply(t,arguments)},t.onlyOf=function(){var t;return(t=new i).onlyOf.apply(t,arguments)},t.excludeOf=function(){var t;return(t=new i).excludeOf.apply(t,arguments)},t.getSingleton=function(t){if(!r.tid2comp.has(t.tid)){var n=s(t);r.tid2comp.set(t.tid,n)}return r.tid2comp.get(t.tid)},t.addSingleton=function(t){var n=t.constructor.tid;r.tid2comp.has(n)||r.tid2comp.set(n,t)}}(s||(s=t("ecs",{}))),n._RF.pop()}}}));

System.register("chunks:///_virtual/ECSComp.ts",["cc"],(function(t){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"3d017ZhAZRH4bPfpLr5++8F","ECSComp",void 0);var e=t("ECSComp",(function(){this.ent=void 0,this.canRecycle=!0}));e.tid=-1,e.compName=void 0,c._RF.pop()}}}));

System.register("chunks:///_virtual/ECSEntity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECSMask.ts","./ECSModel.ts"],(function(t){var i,e,n,o;return{setters:[function(t){i=t.createClass},function(t){e=t.cclegacy},function(t){n=t.ECSMask},function(t){o=t.ECSModel}],execute:function(){function r(t,i){for(var e=o.compAddOrRemove.get(i),n=e.length-1;n>=0;n--)e[n](t);o.tid2comp.has(i)&&o.tid2comp.delete(i)}e._RF.push({},"1fb62WC3PZPvLhjoZQfrREJ","ECSEntity",void 0);t("ECSEntity",function(){function t(){this.eid=-1,this.name="",this.mask=new n,this.compTid2Ctor=new Map,this.compTid2Obj=new Map,this._parent=null,this._children=null}var e=t.prototype;return e.addChild=function(t){t._parent=this,this.children.set(t.eid,t)},e.removeChild=function(t){null!=this.children&&(this.children.delete(t.eid),0==this.children.size&&(this._children=null))},e.add=function(t,i){if(void 0===i&&(i=!1),"function"==typeof t){var e,n=t.tid;if(-1===t.tid)throw Error("组件未注册！");if(this.compTid2Ctor.has(n)){if(!i)return console.log("已经存在组件："+t.compName),this[t.compName];this.remove(t)}return this.mask.set(n),this.compTid2Obj.has(n)?(e=this.compTid2Obj.get(n),this.compTid2Obj.delete(n)):e=function(t){var i=o.compCtors[t.tid];if(!i)throw Error("没有找到该组件的构造函数，检查"+t.compName+"是否为不可构造的组件");return o.compPools.get(t.tid).pop()||new i}(t),this[t.compName]=e,this.compTid2Ctor.set(n,t),e.ent=this,r(this,n),e}var s=t.constructor,h=s.tid;if(-1===h||null==h)throw Error("组件未注册");if(this.compTid2Ctor.has(h))throw Error("已经存在该组件");return this.mask.set(h),this[s.compName]=t,this.compTid2Ctor.set(h,s),t.ent=this,t.canRecycle=!1,r(this,h),this},e.addComponents=function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];for(var n=0,o=i;n<o.length;n++){var r=o[n];this.add(r)}return this},e.get=function(t){return this[t.compName]},e.has=function(t){return"number"==typeof t?this.mask.has(t):this.compTid2Ctor.has(t.tid)},e.remove=function(t,i){void 0===i&&(i=!0);var e=!1,n=t.tid,s=t.compName;if(this.mask.has(n)){e=!0;var h=this[t.compName];h.ent=null,i?(h.reset(),h.canRecycle&&o.compPools.get(n).push(h)):this.compTid2Obj.set(n,h)}e&&(this[s]=null,this.mask.delete(n),this.compTid2Ctor.delete(n),r(this,n))},e._remove=function(t){this.remove(t,!1)},e.destroy=function(){var t=this;this._children&&this._children.forEach((function(i){t.removeChild(i),i.destroy()})),this.compTid2Ctor.forEach(this._remove,this),function(t){if(o.eid2Entity.has(t.eid)){var i=o.entityPool.get(t.name);null==i&&(i=[],o.entityPool.set(t.name,i)),i.push(t),o.eid2Entity.delete(t.eid)}else console.warn("试图销毁不存在的实体")}(this),this.compTid2Obj.clear()},i(t,[{key:"parent",get:function(){return this._parent}},{key:"children",get:function(){return null==this._children&&(this._children=new Map),this._children}}]),t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ECSGroup.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"c21a23o9P5FNJamcMmoYWfs","ECSGroup",void 0);t("ECSGroup",function(){function t(t){this.matcher=void 0,this._matchEntities=new Map,this._entitiesCache=null,this.count=0,this._enteredEntities=null,this._removedEntities=null,this.matcher=t}var i=t.prototype;return i.onComponentAddOrRemove=function(t){this.matcher.isMatch(t)?(this._matchEntities.set(t.eid,t),this._entitiesCache=null,this.count++,this._enteredEntities&&(this._enteredEntities.set(t.eid,t),this._removedEntities.delete(t.eid))):this._matchEntities.has(t.eid)&&(this._matchEntities.delete(t.eid),this._entitiesCache=null,this.count--,this._enteredEntities&&(this._enteredEntities.delete(t.eid),this._removedEntities.set(t.eid,t)))},i.watchEntityEnterAndRemove=function(t,e){this._enteredEntities=t,this._removedEntities=e},i.clear=function(){var t,e;this._matchEntities.clear(),this._entitiesCache=null,this.count=0,null==(t=this._enteredEntities)||t.clear(),null==(e=this._removedEntities)||e.clear()},e(t,[{key:"matchEntities",get:function(){return null===this._entitiesCache&&(this._entitiesCache=Array.from(this._matchEntities.values())),this._entitiesCache}},{key:"entity",get:function(){return this.matchEntities[0]}}]),t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/ECSMask.ts",["cc","./ECSModel.ts"],(function(t){var s,i;return{setters:[function(t){s=t.cclegacy},function(t){i=t.ECSModel}],execute:function(){s._RF.push({},"d18694PPbtGs5Ipgo/vaJBX","ECSMask",void 0);t("ECSMask",function(){function t(){this.mask=void 0,this.size=0;var t=Math.ceil(i.compTid/31);this.mask=new Uint32Array(t),this.size=t}var s=t.prototype;return s.set=function(t){this.mask[t/31>>>0]|=1<<t%31},s.delete=function(t){this.mask[t/31>>>0]&=~(1<<t%31)},s.has=function(t){return!!(this.mask[t/31>>>0]&1<<t%31)},s.or=function(t){for(var s=0;s<this.size;s++)if(this.mask[s]&t.mask[s])return!0;return!1},s.and=function(t){for(var s=0;s<this.size;s++)if((this.mask[s]&t.mask[s])!=this.mask[s])return!1;return!0},s.clear=function(){for(var t=0;t<this.size;t++)this.mask[t]=0},t}());s._RF.pop()}}}));

System.register("chunks:///_virtual/ECSMatcher.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECSMask.ts","./ECSModel.ts"],(function(t){var i,n,r,e,s,h,u;return{setters:[function(t){i=t.construct,n=t.createForOfIteratorHelperLoose,r=t.createClass,e=t.inheritsLoose},function(t){s=t.cclegacy},function(t){h=t.ECSMask},function(t){u=t.ECSModel}],execute:function(){s._RF.push({},"37e8arlqPlN7amZYyHFvBIp","ECSMatcher",void 0);var o=1,c=(t("ECSMatcher",function(){function t(){this.rules=[],this._indices=null,this.isMatch=void 0,this.mid=-1,this._key=null,this.mid=o++}var e=t.prototype;return e.anyOf=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.rules.push(i(a,n)),this.bindMatchMethod(),this},e.allOf=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.rules.push(i(f,n)),this.bindMatchMethod(),this},e.onlyOf=function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];this.rules.push(i(f,r));for(var s,h=[],o=n(u.compCtors);!(s=o()).done;){var c=s.value;r.indexOf(c)<0&&h.push(c)}return this.rules.push(i(l,h)),this.bindMatchMethod(),this},e.excludeOf=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.rules.push(i(l,n)),this.bindMatchMethod(),this},e.bindMatchMethod=function(){1===this.rules.length?this.isMatch=this.isMatch1:2===this.rules.length?this.isMatch=this.isMatch2:this.isMatch=this.isMatchMore},e.isMatch1=function(t){return this.rules[0].isMatch(t)},e.isMatch2=function(t){return this.rules[0].isMatch(t)&&this.rules[1].isMatch(t)},e.isMatchMore=function(t){for(var i,r=n(this.rules);!(i=r()).done;){if(!i.value.isMatch(t))return!1}return!0},e.clone=function(){var i=new t;return i.mid=o++,this.rules.forEach((function(t){return i.rules.push(t)})),i},r(t,[{key:"key",get:function(){if(!this._key){for(var t="",i=0;i<this.rules.length;i++)t+=this.rules[i].getKey(),i<this.rules.length-1&&(t+=" && ");this._key=t}return this._key}},{key:"indices",get:function(){var t=this;return null===this._indices&&(this._indices=[],this.rules.forEach((function(i){Array.prototype.push.apply(t._indices,i.indices)}))),this._indices}}]),t}()),function(){function t(){this.indices=[],this.mask=new h;for(var t=-1,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];for(var e=n.length,s=0;s<e;s++){if(-1==(t="number"==typeof n[s]?n[s]:n[s].tid))throw Error("存在没有注册的组件！");this.mask.set(t),this.indices.indexOf(t)<0&&this.indices.push(t)}e>1&&this.indices.sort((function(t,i){return t-i}))}return t.prototype.toString=function(){return this.indices.join("-")},t}()),a=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var n=i.prototype;return n.isMatch=function(t){return this.mask.or(t.mask)},n.getKey=function(){return"anyOf:"+this.toString()},i}(c),f=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var n=i.prototype;return n.isMatch=function(t){return this.mask.and(t.mask)},n.getKey=function(){return"allOf:"+this.toString()},i}(c),l=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var n=i.prototype;return n.getKey=function(){return"excludeOf:"+this.toString()},n.isMatch=function(t){return!this.mask.or(t.mask)},i}(c);s._RF.pop()}}}));

System.register("chunks:///_virtual/ECSModel.ts",["cc","./ECSGroup.ts"],(function(e){var o,n;return{setters:[function(e){o=e.cclegacy},function(e){n=e.ECSGroup}],execute:function(){o._RF.push({},"1d60egM6r9Gta4Op3VABSGM","ECSModel",void 0);var t=e("ECSModel",function(){function e(){}return e.createGroup=function(o){var t=e.groups.get(o.mid);if(!t){t=new n(o),e.groups.set(o.mid,t);for(var r=o.indices,p=0;p<r.length;p++)e.compAddOrRemove.get(r[p]).push(t.onComponentAddOrRemove.bind(t))}return t},e}());t.eid=1,t.entityCtors=new Map,t.entityPool=new Map,t.eid2Entity=new Map,t.compTid=0,t.compPools=new Map,t.compCtors=[],t.compAddOrRemove=new Map,t.tid2comp=new Map,t.groups=new Map,o._RF.pop()}}}));

System.register("chunks:///_virtual/ECSSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECSModel.ts"],(function(t){var e,s,i,n;return{setters:[function(t){e=t.createForOfIteratorHelperLoose,s=t.createClass},function(t){i=t.cclegacy},function(t){n=t.ECSModel}],execute:function(){i._RF.push({},"9261fRWg2RBY5kxbFJsY1QC","ECSSystem",void 0);t("ECSComblockSystem",function(){function t(){this.group=void 0,this.dt=0,this.enteredEntities=null,this.removedEntities=null,this.hasEntityEnter=!1,this.hasEntityRemove=!1,this.hasUpdate=!1,this.hasBeforeUpdate=!1,this.hasAfterUpdate=!1,this.tmpExecute=null,this.execute=void 0;var t=Object.hasOwnProperty,e=Object.getPrototypeOf(this),s=t.call(e,"entityEnter"),i=t.call(e,"entityRemove"),o=t.call(e,"firstUpdate"),r=t.call(e,"update"),h=t.call(e,"beforeUpdate"),a=t.call(e,"afterUpdate");this.hasEntityEnter=s,this.hasEntityRemove=i,this.hasUpdate=r,this.hasBeforeUpdate=h,this.hasAfterUpdate=a,s||i?(this.enteredEntities=new Map,this.removedEntities=new Map,this.execute=this.execute1,this.group=n.createGroup(this.filter()),this.group.watchEntityEnterAndRemove(this.enteredEntities,this.removedEntities)):(this.execute=this.execute0,this.group=n.createGroup(this.filter())),o&&(this.tmpExecute=this.execute,this.execute=this.updateOnce)}var s=t.prototype;return s.init=function(){},s.onDestroy=function(){},s.hasEntity=function(){return this.group.count>0},s.updateOnce=function(t){if(0!==this.group.count){if(this.dt=t,this.enteredEntities.size>0){for(var s,i=this.enteredEntities.values(),n=e(i);!(s=n()).done;){var o=s.value;this.entityEnter(o)}this.enteredEntities.clear()}this.hasBeforeUpdate&&this.beforeUpdate(t);for(var r,h=e(this.group.matchEntities);!(r=h()).done;){var a=r.value;this.firstUpdate(a)}this.hasAfterUpdate&&this.afterUpdate(t),this.execute=this.tmpExecute,this.execute(t),this.tmpExecute=null}},s.execute0=function(t){if(0!==this.group.count){if(this.dt=t,this.hasBeforeUpdate&&this.beforeUpdate(t),this.hasUpdate)for(var s,i=e(this.group.matchEntities);!(s=i()).done;){var n=s.value;this.update(n)}this.hasAfterUpdate&&this.afterUpdate(t)}},s.execute1=function(t){if(this.removedEntities.size>0){if(this.hasEntityRemove)for(var s,i=this.removedEntities.values(),n=e(i);!(s=n()).done;){var o=s.value;this.entityRemove(o)}this.removedEntities.clear()}if(0!==this.group.count){if(this.dt=t,this.enteredEntities.size>0){if(this.hasEntityEnter){i=this.enteredEntities.values();for(var r,h=e(i);!(r=h()).done;){var a=r.value;this.entityEnter(a)}}this.enteredEntities.clear()}if(this.hasBeforeUpdate&&this.beforeUpdate(t),this.hasUpdate)for(var u,c=e(this.group.matchEntities);!(u=c()).done;){var p=u.value;this.update(p)}this.hasAfterUpdate&&this.afterUpdate(t)}},t}()),t("ECSRootSystem",function(){function t(){this.executeSystemFlows=[],this.systemCnt=0}var e=t.prototype;return e.add=function(t){return t instanceof o?Array.prototype.push.apply(this.executeSystemFlows,t.comblockSystems):this.executeSystemFlows.push(t),this.systemCnt=this.executeSystemFlows.length,this},e.init=function(){this.executeSystemFlows.forEach((function(t){return t.init()}))},e.execute=function(t){for(var e=0;e<this.systemCnt;e++)this.executeSystemFlows[e].execute(t)},e.clear=function(){this.executeSystemFlows.forEach((function(t){return t.onDestroy()}))},t}());var o=t("ECSSystem",function(){function t(){this._comblockSystems=[]}return t.prototype.add=function(e){return e instanceof t?(Array.prototype.push.apply(this._comblockSystems,e._comblockSystems),e._comblockSystems.length=0):this._comblockSystems.push(e),this},s(t,[{key:"comblockSystems",get:function(){return this._comblockSystems}}]),t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/Effect2DFollow3D.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./MathUtil.ts"],(function(t){var e,o,i,n,r,a,s,l,c,u,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Node,l=t.Vec3,c=t.Component},function(t){u=t.oops},function(t){p=t.MathUtil}],execute:function(){var f,d,h,m,y,w,b,v;r._RF.push({},"f04f92UNY1J34UPA0VrEIsH","Effect2DFollow3D",void 0);var D=a.ccclass,g=a.property;t("Effect2DFollow3D",(f=D("Effect2DFollow3D"),d=g({type:s}),h=g({type:s}),f((w=e((y=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"node3d",w,n(e)),i(e,"nodeUi",b,n(e)),i(e,"distance",v,n(e)),e.camera=null,e.pos=new l,e}o(e,t);var r=e.prototype;return r.setTarget=function(t){this.node3d=t},r.start=function(){var t=this.zoom();this.node.setScale(t,t,1)},r.lateUpdate=function(t){var e=this.zoom();e=p.lerp(this.node.scale.x,e,.1),this.node.setScale(e,e,1)},r.zoom=function(){this.camera.convertToUINode(this.node3d.worldPosition,u.gui.game,this.pos),this.nodeUi.setPosition(this.pos),l.transformMat4(this.pos,this.node3d.worldPosition,this.camera._camera.matView);var t=this.distance/Math.abs(this.pos.z);return Math.floor(100*t)/100},e}(c)).prototype,"node3d",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(y.prototype,"nodeUi",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(y.prototype,"distance",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),m=y))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/EffectDelayRelease.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EffectSingleCase.ts"],(function(e){var t,n,i,a,r,c,l,o;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,c=e._decorator,l=e.Component},function(e){o=e.EffectSingleCase}],execute:function(){var s,f,u;r._RF.push({},"01359fvxlFJZKx7BLUcTSWS","EffectDelayRelease",void 0);var p=c.ccclass,y=c.property;e("EffectDelayRelease",p("EffectDelayRelease")((u=t((f=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return t=e.call.apply(e,[this].concat(r))||this,i(t,"delay",u,a(t)),t}n(t,e);var r=t.prototype;return r.onEnable=function(){this.scheduleOnce(this.onDelay,this.delay)},r.onDelay=function(){o.instance.put(this.node)},t}(l)).prototype,"delay",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),s=f))||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/EffectEvent.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"445875CzyRKaLiSXTYH66lm","EffectEvent",void 0);t("EffectEvent",function(t){return t.Put="EffectEvent_Put",t}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/EffectFinishedRelease.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./EffectEvent.ts"],(function(e){var t,n,i,o,a,s,r,c,u;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e._decorator,o=e.sp,a=e.Animation,s=e.ParticleSystem,r=e.Component},function(e){c=e.oops},function(e){u=e.EffectEvent}],execute:function(){var l;n._RF.push({},"a751fmayL5JMYH0D4uJoK5H","EffectFinishedRelease",void 0);var f=i.ccclass;i.property,e("EffectFinishedRelease",f("EffectFinishedRelease")(l=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).maxDuration=0,t}t(n,e);var i=n.prototype;return i.onEnable=function(){var e=this,t=this.getComponent(o.Skeleton);if(t){var n=t.skeletonData.skeletonJson.animations;for(var i in n){t.setCompleteListener(this.onRecovery.bind(this)),t.setAnimation(0,i,!1);break}}else{var r=this.node.getComponentsInChildren(a);if(r.length>0)r.forEach((function(t){var n,i=null==(n=t.defaultClip)?void 0:n.name;if(i){var o=t.getState(i);if(o){var a=o.duration;e.maxDuration=a>e.maxDuration?a:e.maxDuration}}t.play()})),this.scheduleOnce(this.onRecovery.bind(this),this.maxDuration);else if(s){this.node.getComponentsInChildren(s).forEach((function(t){t.clear(),t.stop(),t.play();var n=t.duration;e.maxDuration=n>e.maxDuration?n:e.maxDuration})),this.scheduleOnce(this.onRecovery.bind(this),this.maxDuration)}}},i.onRecovery=function(){this.node.parent&&c.message.dispatchEvent(u.Put,this.node)},n}(r))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/EffectSingleCase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./ViewUtil.ts","./EffectEvent.ts","./EffectFinishedRelease.ts"],(function(e){var t,n,s,i,o,f,c,r,a,u,l,p,h,d,g;return{setters:[function(e){t=e.asyncToGenerator,n=e.createClass,s=e.inheritsLoose,i=e.regeneratorRuntime},function(e){o=e.cclegacy,f=e.NodePool,c=e.sp,r=e.Animation,a=e.ParticleSystem,u=e.Component,l=e.Prefab},function(e){p=e.oops},function(e){h=e.ViewUtil},function(e){d=e.EffectEvent},function(e){g=e.EffectFinishedRelease}],execute:function(){o._RF.push({},"bf338Z+oYxIUbd4bPREw9Ud","EffectSingleCase",void 0);var v=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))||this).type=null,t}return s(t,e),t}(u);e("EffectSingleCase",function(){function e(){this._speed=1,this.effects=new Map,this.effects_use=new Map,p.message.on(d.Put,this.onHandler,this)}var s=e.prototype;return s.onHandler=function(e,t){e==d.Put&&this.put(t)},s.loadAndShow=function(e,n,s){var o=this;return new Promise(t(i().mark((function t(f,c){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null==o.effects.get(e)?p.res.load(e,l,(function(t,i){if(t)console.error("名为【"+e+"】的特效资源加载失败");else{var c=o.show(e,n,s);f(c)}})):(r=o.show(e,n,s),f(r));case 2:case"end":return t.stop()}}),t)}))))},s.show=function(e,t,n){var s,i=this.effects.get(e);return null==i&&(i=new f,this.effects.set(e,i)),0==i.size()?((s=h.createPrefabNode(e)).addComponent(v).type=e,n&&n.isPlayFinishedRelease&&s.addComponent(g)):(s=i.get()).getComponent(g),this.setSpeed(s),n&&n.pos&&(s.position=n.pos),t&&(s.parent=t),this.effects_use.set(s,!0),s},s.put=function(e){var t=e.getComponent(v).type,n=this.effects.get(t);n&&(this.effects_use.delete(e),n.put(e))},s.clear=function(e){e?this.effects.get(e).clear():(this.effects.forEach((function(e){e.clear()})),this.effects.clear())},s.setSpeed=function(e){var t=this,n=e.getComponent(c.Skeleton);if(n)n.timeScale=this.speed;else{var s=e.getComponentsInChildren(r);if(s.length>0)s.forEach((function(e){var n,s=null==(n=e.defaultClip)?void 0:n.name;if(s){var i=e.getState(s);i&&(i.speed=t.speed)}}));else if(a){e.getComponentsInChildren(a).forEach((function(e){e.simulationSpeed=t.speed}))}}},n(e,[{key:"speed",get:function(){return this._speed},set:function(e){var t=this;this._speed=e,this.effects_use.forEach((function(e,n){t.setSpeed(n)}))}}],[{key:"instance",get:function(){return null==this._instance&&(this._instance=new e),this._instance}}]),e}())._instance=void 0,o._RF.pop()}}}));

System.register("chunks:///_virtual/EncryptUtil.ts",["cc","./index.js"],(function(t){var n,r;return{setters:[function(t){n=t.cclegacy},function(t){r=t.default}],execute:function(){n._RF.push({},"46d12Bx4JdKnIYHhcvNk6S1","EncryptUtil",void 0);var i=t("EncryptUtil",function(){function t(){}return t.md5=function(t){return r.MD5(t).toString()},t.initCrypto=function(t,n){this.key=t,this.iv=r.enc.Hex.parse(n)},t.aesEncrypt=function(t,n,i){return r.AES.encrypt(t,this.key,{iv:this.iv,format:this.JsonFormatter}).toString()},t.aesDecrypt=function(t,n,i){return r.AES.decrypt(t,this.key,{iv:this.iv,format:this.JsonFormatter}).toString(r.enc.Utf8)},t}());i.key=null,i.iv=null,i.JsonFormatter={stringify:function(t){var n={ct:t.ciphertext.toString(r.enc.Base64)};return t.iv&&(n.iv=t.iv.toString()),t.salt&&(n.s=t.salt.toString()),JSON.stringify(n)},parse:function(t){var n=JSON.parse(t),i=r.lib.CipherParams.create({ciphertext:r.enc.Base64.parse(n.ct)});return n.iv&&(i.iv=r.enc.Hex.parse(n.iv)),n.s&&(i.salt=r.enc.Hex.parse(n.s)),i}},n._RF.pop()}}}));

System.register("chunks:///_virtual/enum.ts",["cc"],(function(e){var t,r;return{setters:[function(e){t=e.cclegacy,r=e.Enum}],execute:function(){t._RF.push({},"21168fhfp5Aw4tN3YlGEjVv","enum",void 0);var o=e("Orientation",function(e){return e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal",e}({})),n=e("MovementType",function(e){return e[e.Unrestricted=0]="Unrestricted",e[e.Elastic=1]="Elastic",e[e.Clamped=2]="Clamped",e}({})),i=e("ArrangeAxis",function(e){return e[e.Start=0]="Start",e[e.End=1]="End",e}({})),u=e("StretchDirection",function(e){return e[e.Auto=0]="Auto",e[e.Header=1]="Header",e[e.Footer=2]="Footer",e[e.Center=3]="Center",e}({})),c=(e("Layer",function(e){return e[e.Lowest=0]="Lowest",e[e.Medium=1]="Medium",e[e.Highest=2]="Highest",e}({})),e("WrapMode",function(e){return e[e.Auto=0]="Auto",e[e.Wrap=1]="Wrap",e[e.Nowrap=2]="Nowrap",e}({})),e("TouchMode",function(e){return e[e.Auto=0]="Auto",e[e.AlwaysAllow=1]="AlwaysAllow",e[e.Disabled=2]="Disabled",e}({}))),a=e("MagneticDirection",function(e){return e[e.Header=0]="Header",e[e.Footer=1]="Footer",e}({})),l=e("ChildAlignment",function(e){return e[e.UpperLeft=0]="UpperLeft",e[e.UpperCenter=1]="UpperCenter",e[e.UpperRight=2]="UpperRight",e[e.MiddleLeft=3]="MiddleLeft",e[e.MiddleCenter=4]="MiddleCenter",e[e.MiddleRight=5]="MiddleRight",e[e.LowerLeft=6]="LowerLeft",e[e.LowerCenter=7]="LowerCenter",e[e.LowerRight=8]="LowerRight",e}({})),L=(e("ScrollDirection",function(e){return e[e.Up=0]="Up",e[e.Down=1]="Down",e[e.Left=2]="Left",e[e.Right=3]="Right",e[e.None=4]="None",e}({})),e("ScrollbarDirection",function(e){return e[e.Top_To_Bottom=0]="Top_To_Bottom",e[e.Bottom_To_Top=1]="Bottom_To_Top",e[e.Left_To_Right=2]="Left_To_Right",e[e.Right_To_Left=3]="Right_To_Left",e}({}))),d=(e("NestedDirection",function(e){return e[e.Both=0]="Both",e[e.Header=1]="Header",e[e.Footer=2]="Footer",e}({})),e("AlwaysScroll",function(e){return e[e.Auto=0]="Auto",e[e.Header=1]="Header",e[e.Footer=2]="Footer",e}({})),e("IndicatorMode",function(e){return e[e.Normal=0]="Normal",e[e.Button=1]="Button",e}({}))),E=e("Transition",function(e){return e[e.None=0]="None",e[e.ColorTint=1]="ColorTint",e[e.SpriteSwap=2]="SpriteSwap",e[e.Scale=3]="Scale",e}({}));e("ReleaseState",function(e){return e.IDLE="IDLE",e.PULL="PULL",e.WAIT="WAIT",e.RELEASE="RELEASE",e}({})),e("HolderEvent",function(e){return e.CREATED="ADAPTER:HOLDER:CREATED",e.VISIBLE="ADAPTER:HOLDER:VISIBLE",e.DISABLE="ADAPTER:HOLDER:DISABLE",e}({})),e("ViewEvent",function(e){return e.VISIBLE="ADAPTER:VIEW:VISIBLE",e.DISABLE="ADAPTER::VIEW:DISABLE",e}({}));r(o),r(n),r(i),r(u),r(a),r(L),r(l),r(c),r(d),r(E),t._RF.pop()}}}));

System.register("chunks:///_virtual/EventDispatcher.ts",["cc","./MessageManager.ts"],(function(t){var s,n;return{setters:[function(t){s=t.cclegacy},function(t){n=t.MessageEventData}],execute:function(){s._RF.push({},"c680af5iPNKeIO4cArf/90m","EventDispatcher",void 0);t("EventDispatcher",function(){function t(){this._msg=null}var s=t.prototype;return s.on=function(t,s,i){null==this._msg&&(this._msg=new n),this._msg.on(t,s,i)},s.off=function(t){this._msg&&this._msg.off(t)},s.dispatchEvent=function(t,s){void 0===s&&(s=null),null==this._msg&&(this._msg=new n),this._msg.dispatchEvent(t,s)},s.destroy=function(){this._msg&&this._msg.clear(),this._msg=null},t}());s._RF.pop()}}}));

System.register("chunks:///_virtual/EventMessage.ts",["cc"],(function(e){var E;return{setters:[function(e){E=e.cclegacy}],execute:function(){E._RF.push({},"beea7u9xnJD4rMj6ua/LTcF","EventMessage",void 0);e("EventMessage",function(e){return e.GAME_ENTER="EventMessage.GAME_ENTER",e.GAME_EXIT="EventMessage.GAME_EXIT",e.GAME_RESIZE="EventMessage.GAME_RESIZE",e}({}));E._RF.pop()}}}));

System.register("chunks:///_virtual/FlashSpine.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,s,a,o;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,s=t.sp,a=t.Material,o=t.Component}],execute:function(){var r;i._RF.push({},"61de7pPhiNF5plXR5pVKfXu","FlashSpine",void 0);var l=n.ccclass;n.property,t("default",l("FlashSpine")(r=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))||this).duration=.5,e._median=0,e._time=0,e._material=null,e._skeleton=null,e}e(i,t);var n=i.prototype;return n.onLoad=function(){this._median=this.duration/2,this._skeleton=this.node.getComponent(s.Skeleton),this._material=this._skeleton.customMaterial,this._material.setProperty("u_rate",1)},n.update=function(t){if(this._time>0){this._time-=t,this._time=this._time<0?0:this._time;var e=2*Math.abs(this._time-this._median)/this.duration,i=new a;i.copy(this._material),this._skeleton.customMaterial=i,i.setProperty("u_rate",e)}},n.clickFlash=function(){this._time=this.duration},i}(o))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/FlashSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,r,a,n;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,r=t._decorator,a=t.Sprite,n=t.Component}],execute:function(){var s;e._RF.push({},"a7a9eXWbUpJ3rONqlgUYCY/","FlashSprite",void 0);var o=r.ccclass;r.property,t("default",o("FlashSprite")(s=function(t){function e(){for(var i,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return(i=t.call.apply(t,[this].concat(r))||this).duration=.5,i._median=0,i._time=0,i._material=null,i}i(e,t);var r=e.prototype;return r.onLoad=function(){this._median=this.duration/2,this._material=this.node.getComponent(a).getMaterial(0),this._material.setProperty("u_rate",1)},r.update=function(t){if(this._time>0){this._time-=t,this._time=this._time<0?0:this._time;var i=2*Math.abs(this._time-this._median)/this.duration;this._material.setProperty("u_rate",i)}},r.clickFlash=function(){this._time=this.duration},e}(n))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/FreeFlightCamera.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,i,n,r,s,a,h,c,p,l,y,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,a=e.math,h=e.KeyCode,c=e.CCFloat,p=e.input,l=e.Input,y=e.game,u=e.Component}],execute:function(){var d,f,v,_,C,S,T,m,E,g,x,k;r._RF.push({},"6c841mU+4JNvqwHy5tJsJh0","FreeFlightCamera",void 0);var w=s.ccclass,z=s.property,A=s.menu,F=a.Vec2,U=a.Vec3,b=a.Quat,D=new F,L=new F,O=new U,H=new b,K="W".charCodeAt(0),M="S".charCodeAt(0),P="A".charCodeAt(0),W="D".charCodeAt(0),N="Q".charCodeAt(0),R="E".charCodeAt(0),Y=h.SHIFT_LEFT;e("FreeFlightCamera",(d=w("FreeFlightCamera"),f=A("oops/camera/FreeFlightCamera"),v=z({type:c,tooltip:"移动速度"}),_=z({type:c,tooltip:"按Shift键后的速度"}),C=z({type:c,slide:!0,range:[.05,.5,.01],tooltip:"移动后惯性效果"}),S=z({type:c,tooltip:"旋转速度"}),d(T=f((E=t((m=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,i(t,"moveSpeed",E,n(t)),i(t,"moveSpeedShiftScale",g,n(t)),i(t,"damp",x,n(t)),i(t,"rotateSpeed",k,n(t)),t._euler=new U,t._velocity=new U,t._position=new U,t._speedScale=1,t}o(t,e);var r=t.prototype;return r.onLoad=function(){p.on(l.EventType.MOUSE_WHEEL,this.onMouseWheel,this),p.on(l.EventType.KEY_DOWN,this.onKeyDown,this),p.on(l.EventType.KEY_UP,this.onKeyUp,this),p.on(l.EventType.TOUCH_START,this.onTouchStart,this),p.on(l.EventType.TOUCH_MOVE,this.onTouchMove,this),p.on(l.EventType.TOUCH_END,this.onTouchEnd,this),U.copy(this._euler,this.node.eulerAngles),U.copy(this._position,this.node.position)},r.onDestroy=function(){p.off(l.EventType.MOUSE_WHEEL,this.onMouseWheel,this),p.off(l.EventType.KEY_DOWN,this.onKeyDown,this),p.off(l.EventType.KEY_UP,this.onKeyUp,this),p.off(l.EventType.TOUCH_START,this.onTouchStart,this),p.off(l.EventType.TOUCH_MOVE,this.onTouchMove,this),p.off(l.EventType.TOUCH_END,this.onTouchEnd,this)},r.update=function(e){U.transformQuat(O,this._velocity,this.node.rotation),U.scaleAndAdd(this._position,this._position,O,this.moveSpeed*this._speedScale),U.lerp(O,this.node.position,this._position,e/this.damp),this.node.setPosition(O),b.fromEuler(H,this._euler.x,this._euler.y,this._euler.z),b.slerp(H,this.node.rotation,H,e/this.damp),this.node.setRotation(H)},r.onMouseWheel=function(e){var t=-e.getScrollY()*this.moveSpeed*.1;U.transformQuat(O,U.UNIT_Z,this.node.rotation),U.scaleAndAdd(this._position,this.node.position,O,t)},r.onKeyDown=function(e){var t=this._velocity;e.keyCode===Y?this._speedScale=this.moveSpeedShiftScale:e.keyCode===K?0===t.z&&(t.z=-1):e.keyCode===M?0===t.z&&(t.z=1):e.keyCode===P?0===t.x&&(t.x=-1):e.keyCode===W?0===t.x&&(t.x=1):e.keyCode===N?0===t.y&&(t.y=-1):e.keyCode===R&&0===t.y&&(t.y=1)},r.onKeyUp=function(e){var t=this._velocity;e.keyCode===Y?this._speedScale=1:e.keyCode===K?t.z<0&&(t.z=0):e.keyCode===M?t.z>0&&(t.z=0):e.keyCode===P?t.x<0&&(t.x=0):e.keyCode===W?t.x>0&&(t.x=0):e.keyCode===N?t.y<0&&(t.y=0):e.keyCode===R&&t.y>0&&(t.y=0)},r.onTouchStart=function(e){y.canvas.requestPointerLock()},r.onTouchMove=function(e){e.getStartLocation(D),D.x>.4*y.canvas.width?(e.getDelta(L),this._euler.y-=L.x*this.rotateSpeed*.1,this._euler.x+=L.y*this.rotateSpeed*.1):(e.getLocation(L),F.subtract(L,L,D),this._velocity.x=.01*L.x,this._velocity.z=.01*-L.y)},r.onTouchEnd=function(e){document.exitPointerLock&&document.exitPointerLock(),e.getStartLocation(D),D.x<.4*y.canvas.width&&(this._velocity.x=0,this._velocity.z=0)},t}(u)).prototype,"moveSpeed",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),g=t(m.prototype,"moveSpeedShiftScale",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),x=t(m.prototype,"damp",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),k=t(m.prototype,"rotateSpeed",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),T=m))||T)||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/Game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./ECS.ts","./CCVMParentComp.ts","./Player.ts","./SingletonModuleComp.ts","./GameUIConfig.ts","./CardView.ts","./RandomManager.ts","./ViewUtil.ts","./GameplayEvent.ts"],(function(e){var t,n,o,r,a,s,i,l,c,u,d,h,f,m,y,p,C,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,i=e.Node,l=e.math},function(e){c=e.oops},function(e){u=e.ecs},function(e){d=e.CCVMParentComp},function(e){h=e.Player},function(e){f=e.smc},function(e){m=e.UIID},function(e){y=e.CardViewComp},function(e){p=e.RandomManager},function(e){C=e.ViewUtil},function(e){g=e.GameplayEvent}],execute:function(){var R,v,M,P,w,G;a._RF.push({},"0a3d7ksxFNMIImNZ+Zl/q04","Game",void 0);var k=s.ccclass,A=s.property;e("GameComp",(R=k("GameComp"),v=u.register("Game",!1),M=A(i),R(P=v((G=t((w=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(t=e.call.apply(e,[this].concat(a))||this).data={enemyHealth:250,enemyDefense:0,enemyAttack:3},o(t,"resultContainer",G,r(t)),t.round=0,t}n(t,e);var a=t.prototype;return a.start=function(){},a.onEnable=function(){f.player=u.getEntity(h),f.player.PlayerModel.vmAdd(),c.message.on(g.RefreshGrid,this.refreshGrid,this),c.message.on(g.ChooseCardDone,this.nextChooseRound,this),c.message.on(g.RoundEnd,this.nextRound,this),this.showChoose()},a.nextChooseRound=function(){var e=this;this.round++,this.round<3?c.timer.scheduleOnce(this.showChoose,.5):c.timer.scheduleOnce((function(){e.genResult()}),.5)},a.nextRound=function(e,t){this.round<10?this.data.enemyAttack=p.instance.getRandomInt(1,5):this.round<20?this.data.enemyAttack=p.instance.getRandomInt(5,10):this.data.enemyAttack=p.instance.getRandomInt(10,15),this.data.enemyHealth-=t.attack;var n=l.clamp(this.data.enemyAttack-f.player.PlayerModel.defense,0,1e5);f.player.PlayerModel.defense=l.clamp(f.player.PlayerModel.defense-this.data.enemyAttack,0,1e5),f.player.PlayerModel.health-=n,this.round++,c.timer.scheduleOnce(this.showChoose,2)},a.randomStartCards=function(){},a.onDisable=function(){f.player.destroy(),f.player=null,c.message.off(g.RefreshGrid,this.refreshGrid,this),c.message.off(g.ChooseCardDone,this.nextChooseRound,this),c.message.off(g.RoundEnd,this.nextRound,this)},a.reset=function(){this.node.destroy()},a.showDeck=function(){c.gui.open(m.Deck)},a.showChoose=function(){f.player.PlayerModel.defense=0,c.gui.open(m.Choose)},a.genResult=function(){c.message.dispatchEvent(g.ResetMask),this.resultContainer.children.forEach((function(e){e.getComponent(y).ent&&e.getComponent(y).ent.remove(y)})),this.resultContainer.destroyAllChildren();var e=p.instance.getRandomByObjectList(f.player.PlayerModel.cardList,16);e=p.instance.shuffleArray(e),console.log("result card list: ",e,"player cards: ",f.player.PlayerModel.cardList),f.player.PlayerModel.currentResult=e,this.showResult(!0)},a.refreshGrid=function(){this.resultContainer.children.forEach((function(e){e.getComponent(y).ent&&e.getComponent(y).ent.remove(y)})),this.resultContainer.destroyAllChildren(),this.showResult()},a.showResult=function(e){var t=this;void 0===e&&(e=!1),f.player&&f.player.PlayerModel.currentResult?f.player.PlayerModel.currentResult.forEach((function(n){var o=C.createPrefabNode("game/Prefab/CardSmall");if(o.setParent(t.resultContainer),n){n.add(o.getComponent(y)),e&&n.CardModel.showCount++;var r=o.getComponent(y);r&&r.initBaseData()}})):console.error("player or currentResult is null")},t}(d)).prototype,"resultContainer",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=w))||P)||P));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameCollision.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,n,o,e,r,l,s,a,c;return{setters:[function(i){t=i.applyDecoratedDescriptor,n=i.inheritsLoose,o=i.initializerDefineProperty,e=i.assertThisInitialized},function(i){r=i.cclegacy,l=i._decorator,s=i.ccenum,a=i.Collider,c=i.Component}],execute:function(){var g,h,E,u,C;r._RF.push({},"8edaam8WhdBEYR4guslfNh/","GameCollision",void 0);var y=l.ccclass,p=l.property,v=i("CollisionType",function(i){return i[i.Role=0]="Role",i[i.Ballistic=1]="Ballistic",i[i.Wall=2]="Wall",i}({}));s(v);i("GameCollision",(g=y("GameCollision"),h=p({type:v,tooltip:"碰撞物体类型"}),g((C=t((u=function(i){function t(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=i.call.apply(i,[this].concat(r))||this).Event_TriggerEnter="onTriggerEnter",t.Event_TriggerStay="onTriggerStay",t.Event_TriggerExit="onTriggerExit",t.Event_CollisionEnter="onCollisionEnter",t.Event_CollisionStay="onCollisionStay",t.Event_CollisionExit="onCollisionExit",t.collider=null,o(t,"type",C,e(t)),t}n(t,i);var r=t.prototype;return r.onLoad=function(){this.collider=this.getComponent(a),this.collider.isTrigger?(this.collider.on(this.Event_TriggerEnter,this.onTrigger,this),this.collider.on(this.Event_TriggerStay,this.onTrigger,this),this.collider.on(this.Event_TriggerExit,this.onTrigger,this)):(this.collider.on(this.Event_CollisionEnter,this.onCollision,this),this.collider.on(this.Event_CollisionStay,this.onCollision,this),this.collider.on(this.Event_CollisionExit,this.onCollision,this))},r.onTrigger=function(i){switch(i.type){case this.Event_TriggerEnter:this.onTriggerEnter(i);break;case this.Event_TriggerStay:this.onTriggerStay(i);break;case this.Event_TriggerExit:this.onTriggerExit(i)}},r.onTriggerEnter=function(i){},r.onTriggerStay=function(i){},r.onTriggerExit=function(i){},r.onCollision=function(i){switch(i.type){case this.Event_CollisionEnter:this.onCollisionEnter(i);break;case this.Event_CollisionStay:this.onCollisionStay(i);break;case this.Event_CollisionExit:this.onCollisionExit(i)}},r.onCollisionEnter=function(i){},r.onCollisionStay=function(i){},r.onCollisionExit=function(i){},t}(c)).prototype,"type",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.Ballistic}}),E=u))||E));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventDispatcher.ts","./ViewUtil.ts"],(function(e){var t,s,n,i,c,a,o,r;return{setters:[function(e){t=e.inheritsLoose,s=e.createClass},function(e){n=e.cclegacy,i=e._decorator,c=e.isValid,a=e.Component},function(e){o=e.EventDispatcher},function(e){r=e.ViewUtil}],execute:function(){var h;n._RF.push({},"9e3f8Q8IgZD9ZsZJ7OrkxWd","GameComponent",void 0);var u=i.ccclass;e("GameComponent",u("GameComponent")(h=function(e){function n(){for(var t,s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this)._eventDispatcher=null,t._isBindMessageActive=!1,t.dynamicsAssets=[],t.nodes=new Map,t}t(n,e);var i=n.prototype;return i.bindMessageActive=function(){this._isBindMessageActive=!0},i.unbindMessageActive=function(){this._isBindMessageActive=!1},i.get=function(e){return this.nodes.get(e)},i.onLoad=function(){r.nodeTreeInfoLite(this.node,this.nodes)},i.addAutoReleaseAsset=function(e){c(e)&&(e.addRef(),this.dynamicsAssets.push(e))},i.addAutoReleaseAssets=function(e){var t=this;e.forEach((function(e){t.addAutoReleaseAsset(e)}))},i.on=function(e,t,s){var n=this;this.eventDispatcher.on(e,(function(e,i){n.isValid?n._isBindMessageActive?n.node.active&&t.call(s,e,i):t.call(s,e,i):n._eventDispatcher&&(n._eventDispatcher.destroy(),n._eventDispatcher=null)}),s)},i.off=function(e){this._eventDispatcher&&this._eventDispatcher.off(e)},i.dispatchEvent=function(e,t){void 0===t&&(t=null),this.eventDispatcher.dispatchEvent(e,t)},i.onDestroy=function(){this._eventDispatcher&&(this._eventDispatcher.destroy(),this._eventDispatcher=null),this.nodes.clear(),this.dynamicsAssets.forEach((function(e){e.decRef()})),this.dynamicsAssets.splice(0,this.dynamicsAssets.length)},s(n,[{key:"eventDispatcher",get:function(){return this._eventDispatcher||(this._eventDispatcher=new o),this._eventDispatcher}}]),n}(a))||h);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts"],(function(t){var e,n,a;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy},function(t){a=t.oops}],execute:function(){n._RF.push({},"54585zBsmtGfZEDczLG3SH5","GameConfig",void 0);t("GameConfig",function(){function t(t){this._data=null;var e=t.json;this._data=Object.freeze(e),a.log.logConfig(this._data,"游戏配置")}return e(t,[{key:"version",get:function(){return this._data.config.version}},{key:"package",get:function(){return this._data.config.package}},{key:"frameRate",get:function(){return this._data.config.frameRate}},{key:"localDataKey",get:function(){return this._data.config.localDataKey}},{key:"localDataIv",get:function(){return this._data.config.localDataIv}},{key:"httpServer",get:function(){return this._data.config.httpServer}},{key:"httpTimeout",get:function(){return this._data.config.httpTimeout}},{key:"language",get:function(){return this._data.language.type||["zh"]}},{key:"languagePathJson",get:function(){return this._data.language.path.json||"language/json"}},{key:"languagePathTexture",get:function(){return this._data.language.path.texture||"language/texture"}},{key:"bundleEnable",get:function(){return this._data.bundle.enable}},{key:"bundleServer",get:function(){return this._data.bundle.server}},{key:"bundleName",get:function(){return this._data.bundle.name}},{key:"bundleVersion",get:function(){return this._data.bundle.version}},{key:"data",get:function(){return this._data}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/GameEvent.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"28ac0rWU79HGpJWrnyK01Gn","GameEvent",void 0);e("GameEvent",function(e){return e.GameServerConnected="GameServerConnected",e.LoginSuccess="LoginSuccess",e}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["cc"],(function(e){var t,i,a;return{setters:[function(e){t=e.cclegacy,i=e.game,a=e.Game}],execute:function(){t._RF.push({},"73fa0CEfOhMdJUoZwoFIIZV","GameManager",void 0);var n=1;e("GameManager",function(){function e(e){this.root=void 0,this.root=e,this.gameTimeScaleExtend()}var t=e.prototype;return t.setTimeScale=function(e){n=e},t.gameTimeScaleExtend=function(){i._calculateDT=function(e){return e||(e=performance.now()),this._deltaTime=e>this._startTime?(e-this._startTime)/1e3:0,this._deltaTime>a.DEBUG_DT_THRESHOLD&&(this._deltaTime=this.frameTime/1e3),this._startTime=e,this._deltaTime*n}},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/GameplayEvent.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"e5795xQMVBLA5s05jqDW0uD","GameplayEvent",void 0);e("GameplayEvent",function(e){return e.Settle="Settle",e.RefreshGrid="RefreshGrid",e.ChooseCardDone="ChooseCardDone",e.RoundEnd="RoundEnd",e.ResetMask="ResetMask",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/GameQueryConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./StringUtil.ts"],(function(t){var n,e,r,i,o;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy,r=t.sys},function(t){i=t.oops},function(t){o=t.StringUtil}],execute:function(){e._RF.push({},"d09acUxcU5Hg4kUjKxVEWLy","GameQueryConfig",void 0);t("GameQueryConfig",function(){function t(){this._data=null,r.isBrowser?(this._data=this.parseUrl(),this._data.username||(this._data.username=o.guid()),i.log.logConfig(this._data,"查询参数")):this._data={}}return t.prototype.parseUrl=function(){if("object"!=typeof window)return{};if(!window.document)return{};var t=window.document.location.href.toString().split("?");if("string"==typeof t[1]){for(var n={},e=0,r=(t=t[1].split("&")).length;e<r;++e){var i=t[e],o=i.indexOf("=");if(!(o<0)){var a=i.substring(0,o),u=i.substring(o+1);n[decodeURIComponent(a)]=u&&decodeURIComponent(u)}}return n}return{}},n(t,[{key:"debug",get:function(){return this._data.debug}},{key:"username",get:function(){return this._data.username}},{key:"lang",get:function(){return this._data.lang||"zh"}},{key:"data",get:function(){return this._data}}]),t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/GameUIConfig.ts",["cc","./LayerManager.ts"],(function(e){var a,o;return{setters:[function(e){a=e.cclegacy},function(e){o=e.LayerType}],execute:function(){var n;a._RF.push({},"14663z2+5JJIYupyDayZnc3","GameUIConfig",void 0);var r=e("UIID",function(e){return e[e.Loading=1]="Loading",e[e.Window=2]="Window",e[e.Netinstable=3]="Netinstable",e[e.Demo=4]="Demo",e[e.Deck=5]="Deck",e[e.Choose=6]="Choose",e}({}));e("UIConfigData",((n={})[r.Loading]={layer:o.UI,prefab:"gui/loading/loading"},n[r.Netinstable]={layer:o.PopUp,prefab:"common/prefab/netinstable"},n[r.Window]={layer:o.Dialog,prefab:"common/prefab/window"},n[r.Demo]={layer:o.UI,prefab:"gui/demo/demo"},n[r.Deck]={layer:o.UI,prefab:"game/UI/Deck"},n[r.Choose]={layer:o.UI,prefab:"game/UI/Choose"},n));a._RF.pop()}}}));

System.register("chunks:///_virtual/Group.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enum.ts"],(function(i){var t,e,n;return{setters:[function(i){t=i.createClass},function(i){e=i.cclegacy},function(i){n=i.StretchDirection}],execute:function(){e._RF.push({},"c701cxQvelFbLzv3DVRhj2t","Group",void 0);i("Group",function(){function i(i){this._adapter=void 0,this._index=-1,this._models=[],this._size={x:0,y:0},this._oldSize={x:0,y:0},this._anchorPoint={x:.5,y:.5},this._position={x:0,y:0},this._oldPosition={x:0,y:0},this._totalMinSize={x:0,y:0},this._totalPreferredSize={x:0,y:0},this._totalFlexibleSize={x:0,y:0},this._isFixed=!1,this._fixedIndex=-1,this._adapter=i,this.internal_reset()}var e=i.prototype;return e.findModelIndex=function(i){return this.models.findIndex((function(t){return t.index==i}))},e.internal_reset=function(){this._models=[],this._size={x:0,y:0},this._oldSize={x:0,y:0},this._anchorPoint={x:.5,y:.5},this._position={x:0,y:0},this._oldPosition={x:0,y:0},this._totalMinSize={x:0,y:0},this._totalPreferredSize={x:0,y:0},this._totalFlexibleSize={x:0,y:0},this._isFixed=!1,this._fixedIndex=-1,this._setAnchorPoint()},e.internal_setPosition=function(i){var t=this.adapter.mainAxis;this.oldPosition[t]=this.position[t],this.position[t]=i},e.internal_setIndex=function(i){this._index=i},e.internal_insert=function(i,t,e){t.internal_reset();var n=this.models;if(this.internal_reset(),this._fixedIndex=i.fixedIndex,!e)for(var s=0;s<n.length;s++){var r=n[s];if(!(r.index<i.modelIndex))break;if(!this._insertHandler(r,t))return i.modelIndex=r.index,i.fixedIndex=this.isFixed?this.index:i.fixedIndex,!0}for(var o=i.modelIndex;o<this.adapter.modelManager.length;o++){var a=this.adapter.modelManager.get(o);if(!this._insertHandler(a,t))return i.modelIndex=a.index,i.fixedIndex=this.isFixed?this.index:i.fixedIndex,a.index}return!1},e.internal_includes=function(i){for(var t=this,e=function(){var e=i[n];if(-1!=t.models.findIndex((function(i){return i.data==e})))return{v:!0}},n=0;n<i.length;n++){var s=e();if("object"==typeof s)return s.v}return!1},e._insertHandler=function(i,t){if(t.internal_isWrap(i,this))return t.internal_reset(),!1;t.internal_push(i),i.element.fixed&&(this._isFixed=!0,this._fixedIndex=-1);var e=this.adapter.mainAxis,n=this.adapter.crossAxis;return(!i.element.ignoreLayout||i.element.ignoreLayout&&i.element.placeholder)&&(this.size[e]=Math.max(this.size[e],i.size[e]*i.scale[e])),this.size[n]=this.adapter.crossAxisSize,this.oldSize[e]=this.size[e],this.oldSize[n]=this.size[n],this.models.push(i),!0},e._setAnchorPoint=function(){switch(this.adapter.viewManager.stretchDirection){case n.Center:this.anchorPoint[this.adapter.mainAxis]=.5;break;case n.Header:this.anchorPoint[this.adapter.mainAxis]=1-this.adapter.mainAxisAnchorPoint;break;default:this.anchorPoint[this.adapter.mainAxis]=this.adapter.mainAxisAnchorPoint}},t(i,[{key:"adapter",get:function(){return this._adapter}},{key:"index",get:function(){return this._index}},{key:"models",get:function(){return this._models}},{key:"size",get:function(){return this._size}},{key:"oldSize",get:function(){return this._oldSize}},{key:"anchorPoint",get:function(){return this._anchorPoint}},{key:"position",get:function(){return this._position}},{key:"oldPosition",get:function(){return this._oldPosition}},{key:"totalMinSize",get:function(){return this._totalMinSize}},{key:"totalPreferredSize",get:function(){return this._totalPreferredSize}},{key:"totalFlexibleSize",get:function(){return this._totalFlexibleSize}},{key:"isFixed",get:function(){return this._isFixed}},{key:"fixedIndex",get:function(){return this._fixedIndex}}]),i}());e._RF.pop()}}}));

System.register("chunks:///_virtual/GUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts"],(function(t){var i,e,n,o,r,s,h,a,l,c,g;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,o=t.UITransform,r=t.Camera,s=t.view,h=t.math,a=t.screen,l=t.ResolutionPolicy,c=t.Component},function(t){g=t.oops}],execute:function(){var u;e._RF.push({},"9461cd/dGNEGK5I5J24xY6L","GUI",void 0);var p=n.ccclass;n.menu,t("GUI",p("GUI")(u=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).transform=void 0,i.camera=void 0,i.portrait=void 0,i.portraitDrz=null,i.landscapeDrz=null,i}i(e,t);var n=e.prototype;return n.onLoad=function(){this.init()},n.init=function(){this.transform=this.getComponent(o),this.camera=this.getComponentInChildren(r),s.getDesignResolutionSize().width>s.getDesignResolutionSize().height?(this.landscapeDrz=s.getDesignResolutionSize(),this.portraitDrz=new h.Size(this.landscapeDrz.height,this.landscapeDrz.width)):(this.portraitDrz=s.getDesignResolutionSize(),this.landscapeDrz=new h.Size(this.portraitDrz.height,this.portraitDrz.width)),this.resize()},n.resize=function(){var t;t=s.getDesignResolutionSize().width>s.getDesignResolutionSize().height?this.landscapeDrz:this.portraitDrz;var i=a.windowSize,e=i.width,n=i.height,o=e,r=n;e/n>t.width/t.height?(o=(r=t.height)*e/n,this.portrait=!1):(r=(o=t.width)*n/e,this.portrait=!0),s.setDesignResolutionSize(o,r,l.UNKNOWN),this.transform.width=o,this.transform.height=r,g.log.logView(t,"设计尺寸"),g.log.logView(i,"屏幕尺寸")},e}(c))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/Guide.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./ECS.ts","./GuideModelComp.ts","./GuideViewComp.ts"],(function(e){var i,o,t,n,r,s;return{setters:[function(e){i=e.inheritsLoose},function(e){o=e.cclegacy},function(e){t=e.oops},function(e){n=e.ecs},function(e){r=e.GuideModelComp},function(e){s=e.GuideViewComp}],execute:function(){var u;o._RF.push({},"8b97787NWJBFb3fFUKU+OlD","Guide",void 0);e("Guide",n.register("Guide")(u=function(e){function o(){for(var i,o=arguments.length,t=new Array(o),n=0;n<o;n++)t[n]=arguments[n];return(i=e.call.apply(e,[this].concat(t))||this).GuideModel=void 0,i.GuideView=void 0,i}i(o,e);var n=o.prototype;return n.init=function(){this.addComponents(r)},n.load=function(e){var i=this;t.res.loadDir(this.GuideModel.res_dir,(function(o){o&&console.error("引手引导资源加载失败");var n=t.gui.guide.addComponent(s);i.add(n),e()}))},n.check=function(e){this.GuideModel&&(this.GuideModel.step=e,this.GuideView.check())},n.destroy=function(){t.res.releaseDir(this.GuideModel.res_dir),this.remove(s),this.remove(r),e.prototype.destroy.call(this)},o}(n.Entity))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/GuideModelComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts","./GuideViewItem.ts"],(function(e){var t,i,s,u,r;return{setters:[function(e){t=e.inheritsLoose,i=e.createClass},function(e){s=e.cclegacy},function(e){u=e.ecs},function(e){r=e.GuideViewItem}],execute:function(){var n;s._RF.push({},"2ab071BICxMbYMKqvalzsFK","GuideModelComp",void 0);e("GuideModelComp",u.register("GuideModel")(n=function(e){function s(){for(var t,i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];return(t=e.call.apply(e,[this].concat(s))||this).step=1,t.last=Number.MAX_VALUE,t.guides=new Map,t.res_dir="gui/guide",t.res_mask="gui/guide/mask",t.res_prompt="gui/guide/prompt",t}return t(s,e),s.prototype.reset=function(){this.step=1,this.last=Number.MAX_VALUE,this.guides.forEach((function(e){e.isValid&&e.getComponent(r).destroy()})),this.guides.clear()},i(s,[{key:"current",get:function(){return this.guides.get(this.step)}}]),s}(u.Comp))||n);s._RF.pop()}}}));

System.register("chunks:///_virtual/GuideViewComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./ECS.ts","./CCComp.ts","./GuideModelComp.ts","./GuideViewMask.ts","./GuideViewPrompt.ts"],(function(t){var e,o,i,s,n,r,d,h,u,l,p;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator,s=t.Node,n=t.Button},function(t){r=t.oops},function(t){d=t.ecs},function(t){h=t.CCComp},function(t){u=t.GuideModelComp},function(t){l=t.GuideViewMask},function(t){p=t.GuideViewPrompt}],execute:function(){var c;o._RF.push({},"c7549lFl/1OEaWHlJN0LxB+","GuideViewComp",void 0);var m=i.ccclass;i.property,t("GuideViewComp",m("GuideViewComp")(c=d.register("GuideView",!1)(c=function(t){function o(){for(var e,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this).model=null,e.mask=null,e.prompt=null,e}e(o,t);var i=o.prototype;return i.start=function(){this.model=this.ent.get(u),this.prompt=this.node.addComponent(p),this.prompt.model=this.model,this.mask=this.node.addComponent(l),this.mask.model=this.model},i.register=function(t,e){this.model.guides.set(t,e)},i.next=function(){this.model.step++,r.log.logView("验证下一个引擎【"+this.model.step+"】"),this.model.step>this.model.last?(this.mask.hide(),this.prompt.hide(),this.ent.destroy(),r.log.logView("全部结束")):this.check()},i.check=function(){var t=this;this.scheduleOnce((function(){var e=t.model.guides.get(t.model.step);null==e?(t.mask.hide(),t.prompt.hide(),r.log.logView("暂无引导")):(t.mask.draw(e),t.prompt.show(e),e.on(s.EventType.TOUCH_END,t.onTouchEnd,t,!0),e.on(s.EventType.TRANSFORM_CHANGED,t.onTransformChanged,t))}))},i.onTransformChanged=function(){this.refresh()},i.onTouchEnd=function(t){var e=t.target;e.off(s.EventType.TOUCH_END,this.onTouchEnd,this,!0),e.off(s.EventType.TRANSFORM_CHANGED,this.onTransformChanged,this);var o=e.getComponent(n);o&&o.clickEvents.forEach((function(e){e.emit([t])})),this.next()},i.refresh=function(){var t=this.model.guides.get(this.model.step);t&&(this.mask.draw(t),this.prompt.show(t))},i.reset=function(){this.model=null,this.mask.destroy(),this.prompt.destroy(),this.destroy()},o}(h))||c)||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/GuideViewItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SingletonModuleComp.ts"],(function(e){var t,i,r,n,o,u,c,s,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,u=e._decorator,c=e.CCInteger,s=e.Component},function(e){a=e.smc}],execute:function(){var p,d,l,f,h;o._RF.push({},"bc20dp8o5tCDqPHzv2A/g0M","GuideViewItem",void 0);var g=u.ccclass,v=u.property;e("GuideViewItem",(p=g("GuideViewItem"),d=v({type:[c]}),p((h=t((f=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return t=e.call.apply(e,[this].concat(o))||this,r(t,"step",h,n(t)),t}i(t,e);var o=t.prototype;return o.start=function(){var e=this,t=a.guide.GuideModel;t&&this.step.forEach((function(i){var r=a.guide.GuideView;r.register(i,e.node),t.step==i&&r.check()}))},o.update=function(e){var t=a.guide.GuideModel;t&&this.step.forEach((function(e){var i=a.guide.GuideView;t.step==e&&i.refresh()}))},t}(s)).prototype,"step",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=f))||l));o._RF.pop()}}}));

System.register("chunks:///_virtual/GuideViewMask.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./ViewUtil.ts","./PolygonMask.ts"],(function(t){var o,n,i,e,s,a,h,r,c,l,d,p,u;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,e=t.Prefab,s=t.instantiate,a=t.Widget,h=t.Node,r=t.UITransform,c=t.v2,l=t.Component},function(t){d=t.oops},function(t){p=t.ViewUtil},function(t){u=t.PolygonMask}],execute:function(){var m;n._RF.push({},"6d04b+vu2lPzYE5+PUUtQQH","GuideViewMask",void 0);var g=i.ccclass;i.property,t("GuideViewMask",g("GuideViewMask")(m=function(t){function n(){for(var o,n=arguments.length,i=new Array(n),e=0;e<n;e++)i[e]=arguments[e];return(o=t.call.apply(t,[this].concat(i))||this).model=null,o.bg=null,o.mask=null,o.mask_pm=null,o.mask_widget=null,o}o(n,t);var i=n.prototype;return i.start=function(){var t=d.res.get(this.model.res_mask,e);this.mask=s(t),this.mask.parent=this.node,this.bg=this.mask.getChildByName("bg"),this.mask_pm=this.mask.getComponent(u),this.mask_widget=this.bg.getComponent(a),this.node.active=!1},i.show=function(){this.node.active=!0,this.mask_widget.target=this.node,this.node.on(h.EventType.TOUCH_END,this.onTouchEnd,this),this.mask_pm.draw()},i.hide=function(){this.node.off(h.EventType.TOUCH_END,this.onTouchEnd,this),this.node.active=!1},i.draw=function(t){var o=this.mask_pm.polygon.points[0],n=this.mask_pm.polygon.points[3],i=this.mask_pm.polygon.points[2],e=this.mask_pm.polygon.points[1],s=t.getComponent(r),a=this.node.getComponent(r).contentSize,h=a.width/2,c=a.height/2,l=s.contentSize.width*s.anchorX,d=s.contentSize.width*(1-s.anchorX),p=s.contentSize.height*s.anchorY,u=s.contentSize.height*(1-s.anchorY);o.x=t.worldPosition.x-h-l,o.y=t.worldPosition.y-c-p,n.x=t.worldPosition.x-h-l,n.y=t.worldPosition.y-c+u,i.x=t.worldPosition.x-h+d,i.y=t.worldPosition.y-c+u,e.x=t.worldPosition.x-h+d,e.y=t.worldPosition.y-c-p,this.show()},i.onTouchEnd=function(t){var o=this.model.current;if(o){var n=p.calculateScreenPosToSpacePos(t,this.node);n=p.calculateASpaceToBSpacePos(this.node,o.parent,n);var i=c(n.x,n.y);o.getComponent(r).getBoundingBox().contains(i)&&o.dispatchEvent(t)}},n}(l))||m);n._RF.pop()}}}));

System.register("chunks:///_virtual/GuideViewPrompt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts"],(function(t){var e,o,i,n,r,p,c,s,a;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator,n=t.Prefab,r=t.instantiate,p=t.Vec3,c=t.UITransform,s=t.Component},function(t){a=t.oops}],execute:function(){var h;o._RF.push({},"199a4NKJqREVY4v5gZEciSY","GuideViewPrompt",void 0);var u=i.ccclass;i.property,t("GuideViewPrompt",u("GuideViewPrompt")(h=function(t){function o(){for(var e,o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))||this).model=null,e.prompt=null,e}e(o,t);var i=o.prototype;return i.start=function(){var t=a.res.get(this.model.res_prompt,n);this.prompt=r(t),this.prompt.parent=a.gui.guide,this.hide()},i.show=function(t){var e=t.worldPosition.clone(),o=new p,i=t.getComponent(c);o.x=.5*i.contentSize.width-i.contentSize.width*i.anchorX,o.y=.5*i.contentSize.height-i.contentSize.height*i.anchorY,e=e.add(o),this.prompt.active=!0,this.prompt.worldPosition=e,this.prompt.setSiblingIndex(this.prompt.parent.children.length)},i.hide=function(){this.prompt.active=!1},o}(s))||h);o._RF.pop()}}}));

System.register("chunks:///_virtual/helper.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"d16dfIj/wBDe7lg2eRhY7du","helper",void 0);var r=n("Helper",function(){function n(){}return n.smoothStep=function(n,t,r){return t*(r=-2*(r=this.clamp01(r))*r*r+3*r*r)+n*(1-r)},n.smoothDamp=function(n,t,r,e,o,a){var i=2/(e=Math.max(1e-4,e)),u=i*a,c=1/(1+u+.48*u*u+.235*u*u*u),x=n-t,p=t,f=o*e,h=(r+i*(x=this.clamp(x,0-f,f)))*a;r=(r-i*h)*c;var s=(t=n-x)+(x+h)*c;return p-n>0==s>p&&(r=((s=p)-p)/a),{velocity:r,position:s}},n.clamp01=function(n){return this.clamp(n,0,1)},n.clamp=function(n,t,r){return void 0===t&&(t=0),void 0===r&&(r=1),Math.min(Math.max(n,t),r)},n.sign=function(n){return n>=0?1:-1},n.lerp=function(n,t,r){return n+(t-n)*this.clamp01(r)},n.approximately=function(n,t){return Math.abs(t-n)<Math.max(1e-4*Math.max(Math.abs(n),Math.abs(t)),8*this.Epsilon)},n.round=function(n,t){return Math.round(n*Math.pow(10,t))/Math.pow(10,t)},n.pingpang=function(n){var t=n;t=Math.abs(n);var r=Math.trunc(t);return r%2==0?t-=r:t=1-(t-r),t},n.isNumber=function(n){return"number"==typeof n&&!isNaN(n)},n.progress=function(n,t,r,e){return n+(t-n)*e},n.getGuid=function(){var n=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(n+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var r=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==t?r:3&r|8).toString(16)}))},n}());r.Epsilon=1401298e-51,r.Infinity=1/0,t._RF.pop()}}}));

System.register("chunks:///_virtual/Holder.ts",["./rollupPluginModLoBabelHelpers.js","cc","./helper.ts","./ModelManager.ts"],(function(e){var t,i,s,n,o,a,h;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy,s=e._decorator,n=e.Node,o=e.UITransform},function(e){a=e.Helper},function(e){h=e.ModelManager}],execute:function(){var r;i._RF.push({},"06194IgtVlOubt8kvkPRvBb","Holder",void 0);var d=s.ccclass;s.property,e("Holder",d("Holder")(r=function(){function e(e,t,i){this._node=void 0,this._transform=void 0,this._code=void 0,this._adapter=void 0,this._model=void 0,this._view=void 0,this._fixedIndex=-1,this._oldData=null,this._oldElement=null,this._isCallCreated=!1,this._isLayout=!1,this._node=e,this._code=t,this._adapter=i,this._transform=this.node.getComponent(o)}var i=e.prototype;return i.internal_visible=function(e,t,i){var s=this;this._view=e,this._model=t,this._oldElement=Object.assign({},t.element),this._model.element.update=this._updateElement.bind(this),this._oldData=this.data,i&&(this.node.active=!0,this._isCallCreated||(this._isCallCreated=!0,this.onCreated()),this.element.fixed&&(this._fixedIndex=this.view.group.models.findIndex((function(e){return e.index==s.model.index}))),this.transform.setContentSize(this.model.size.x,this.model.size.y),this.node.setScale(this.model.scale.x,this.model.scale.y),this._register(),this.onVisible(),this._model.update=this._updateHandler.bind(this))},i._updateElement=function(){this._oldElement.layer!=this.element.layer&&(this.node.parent=this.adapter.scrollManager.getLayerNode(this.element.layer),this._oldElement.layer=this.element.layer),(this._oldElement.wrapAfterMode!=this.element.wrapAfterMode||this._oldElement.wrapBeforeMode!=this.element.wrapBeforeMode||this._oldElement.ignoreLayout!=this.element.ignoreLayout||this.element.ignoreLayout&&this._oldElement.placeholder!=this.element.placeholder)&&(this.adapter.viewManager.internal_updateVisibleView(this.model.index),this._oldElement.wrapAfterMode=this.element.wrapAfterMode,this._oldElement.wrapBeforeMode=this.element.wrapBeforeMode,this._oldElement.ignoreLayout=this.element.ignoreLayout,this._oldElement.placeholder=this.element.placeholder)},i._updateHandler=function(){this._model.update=function(){},this.onVisible(),this._model.update=this._updateHandler.bind(this)},i.internal_disable=function(){this.adapter.scrollManager.internal_disableTouchTarget(this.node),this.onDisable(),this._unregister(),this._model.update=function(){},this._model.element.update=function(){},this._view=null,this._model=null,this._fixedIndex=-1,this._isLayout=!1,this._oldData=null,this.node.active=!1},i.internal_layout=function(){var e={x:this.model.size.x,y:this.model.size.y};this.adapter.layoutManager.isControlMainAxisSize&&(e[this.adapter.mainAxis]=this.model.layoutSize[this.adapter.mainAxis]),this.adapter.layoutManager.isControlCrossAxisSize&&(e[this.adapter.crossAxis]=this.model.layoutSize[this.adapter.crossAxis]),this._isLayout=!0,this.transform.setContentSize(e.x,e.y),this._isLayout=!1,this.node.setPosition(this.model.position.x,this.model.position.y)},i._register=function(){this.node.on(n.EventType.SIZE_CHANGED,this._onSizeChanged,this),this.node.on(n.EventType.TRANSFORM_CHANGED,this._onScaleChanged,this),this.node.on(n.EventType.ANCHOR_CHANGED,this._onAnchorPointChanged,this),this._adapter.modelManager.on(h.Event.ON_UPDATE,this._updateHandler,this)},i._unregister=function(){this.node.off(n.EventType.SIZE_CHANGED,this._onSizeChanged,this),this.node.off(n.EventType.TRANSFORM_CHANGED,this._onScaleChanged,this),this.node.off(n.EventType.ANCHOR_CHANGED,this._onAnchorPointChanged,this),this._adapter.modelManager.off(h.Event.ON_UPDATE,this._updateHandler,this)},i._onSizeChanged=function(){if(!this._isLayout){var e=a.approximately(this.model.size[this.adapter.mainAxis],this.transform.contentSize[this.adapter.mainAxis]),t=a.approximately(this.model.size[this.adapter.crossAxis],this.transform.contentSize[this.adapter.crossAxis]);this.model.size.x=this.transform.width,this.model.size.y=this.transform.height,e&&t||this.view.internal_holderChanged(e)}},i._onScaleChanged=function(e){if(e==n.TransformBit.SCALE&&(this.adapter.layoutManager.controlScaleWidth||this.adapter.layoutManager.controlScaleHeight)){var t=a.approximately(this.model.scale[this.adapter.mainAxis],this.node.scale[this.adapter.mainAxis]),i=a.approximately(this.model.scale[this.adapter.crossAxis],this.node.scale[this.adapter.crossAxis]);this.model.scale.x=this.node.scale.x,this.model.scale.y=this.node.scale.y,t&&i||this.view.internal_holderChanged(t)}},i._onAnchorPointChanged=function(){var e=a.approximately(this.model.anchorPoint[this.adapter.mainAxis],this.transform.anchorPoint[this.adapter.mainAxis]),t=a.approximately(this.model.anchorPoint[this.adapter.crossAxis],this.transform.anchorPoint[this.adapter.crossAxis]);this.model.anchorPoint.x=this.transform.anchorPoint.x,this.model.anchorPoint.y=this.transform.anchorPoint.y,e&&t||this.view.internal_holderChanged(e)},t(e,[{key:"node",get:function(){return this._node}},{key:"transform",get:function(){return this._transform}},{key:"code",get:function(){return this._code}},{key:"adapter",get:function(){return this._adapter}},{key:"model",get:function(){return this._model}},{key:"view",get:function(){return this._view}},{key:"data",get:function(){return this._model&&this._model.data}},{key:"fixedIndex",get:function(){return this._fixedIndex}},{key:"oldData",get:function(){return this._oldData}},{key:"element",get:function(){return this._model&&this._model.element}},{key:"index",get:function(){return this._model&&this._model.index}}]),e}())||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/HttpRequest.ts",["cc"],(function(e){var t,n,r;return{setters:[function(e){t=e.cclegacy,n=e.error,r=e.warn}],execute:function(){t._RF.push({},"806e5t8UetFy4spn89dnuan","HttpRequest",void 0);var s={},u={},a=e("HttpEvent",function(e){return e.NO_NETWORK="http_request_no_network",e.UNKNOWN_ERROR="http_request_unknown_error",e.TIMEOUT="http_request_timout",e}({}));e("HttpRequest",function(){function e(){this.server="http://127.0.0.1/",this.timeout=1e4}var t=e.prototype;return t.get=function(e,t,n){this.sendRequest(e,null,!1,t,n)},t.getWithParams=function(e,t,n,r){this.sendRequest(e,t,!1,n,r)},t.getByArraybuffer=function(e,t,n){this.sendRequest(e,null,!1,t,n,"arraybuffer",!1)},t.getWithParamsByArraybuffer=function(e,t,n,r){this.sendRequest(e,t,!1,n,r,"arraybuffer",!1)},t.post=function(e,t,n,r){this.sendRequest(e,t,!0,n,r)},t.abort=function(e){var t=s[this.server+e];t&&t.abort()},t.getParamString=function(e){var t="";for(var n in e){var r=e[n];if(r instanceof Object)for(var s in r)t+=s+"="+r[s]+"&";else t+=n+"="+r+"&"}return t.substr(0,t.length-1)},t.sendRequest=function(e,t,o,i,f,c,l,d){var h,p,v,R=this;if(void 0===l&&(l=!0),void 0===d&&(d=this.timeout),null!=e&&""!=e)if(h=0==e.toLocaleLowerCase().indexOf("http")?e:this.server+e,t?(v=this.getParamString(t),p=h.indexOf("?")>-1?h+"&"+v:h+"?"+v):p=h,null==s[p]||u[p]!=v){var y=new XMLHttpRequest;s[p]=y,u[p]=v,o?y.open("POST",h):y.open("GET",p),y.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var O={};O.url=h,O.params=t,l&&(y.timeout=d,y.ontimeout=function(){R.deleteCache(p),O.event=a.TIMEOUT,f&&f(O)}),y.onloadend=function(e){if(500==y.status){if(R.deleteCache(p),null==f)return;O.event=a.NO_NETWORK,f&&f(O)}},y.onerror=function(){R.deleteCache(p),null!=f&&(0==y.readyState||1==y.readyState||0==y.status?O.event=a.NO_NETWORK:O.event=a.UNKNOWN_ERROR,f&&f(O))},y.onreadystatechange=function(){if(4==y.readyState&&(R.deleteCache(p),200==y.status&&i))if("arraybuffer"==c)y.responseType=c,i&&i(y.response);else{var e=JSON.parse(y.response);null!=e.code?0==e.code?i&&i(e.data):f&&f(e):i&&i(e)}},null==t||""==t?y.send():y.send(v)}else r("地址【"+h+"】已正在请求中，不能重复请求");else n("请求地址不能为空")},t.deleteCache=function(e){delete s[e],delete u[e]},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/IControl.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"58450TyE3JB069KO8P5+hl4","IControl",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/ImageUtil.ts",["cc"],(function(e){var t,r,n,i,o,a;return{setters:[function(e){t=e.cclegacy,r=e.Color,n=e.gfx,i=e.director,o=e.ImageAsset,a=e.Texture2D}],execute:function(){t._RF.push({},"ebdf3rRnEdIYpKgGdW8gSmZ","ImageUtil",void 0);e("ImageUtil",function(){function e(){}return e.getPixelColor=function(e,t,n){var i=this.readPixels(e),o=(n-1)*e.width*4+4*(t-1),a=i.slice(o,o+4);return new r(a[0],a[1],a[2],a[3])},e.getPixelColorFromBuffer=function(e,t,n,i){var o=(i-1)*t*4+4*(n-1),a=e.slice(o,o+4);return new r(a[0],a[1],a[2],a[3])},e.readPixels=function(e,t,r){var o;r=(t=t||e.width)||e.height;var a=e.getGFXTexture();if(!a)return null;var u=[],c=[],l=new n.BufferTextureCopy;l.texExtent.width=t,l.texExtent.height=r,c.push(l);var g=new Uint8Array(t*r*4);return u.push(g),null==(o=i.root)||o.device.copyTextureToBuffers(a,u,c),g},e.createTextureWithPixels=function(e,t,r){var n=new o;n.reset({width:t,height:r,close:null,_data:e,_compressed:!1,format:a.PixelFormat.RGBA8888});var i=new a;return i.reset({width:n.width,height:n.height,format:a.PixelFormat.RGBA8888}),i.image=n,i},e.setPixels=function(e,t){var r=new o;r.reset({width:e.width,height:e.height,close:null,_data:t,_compressed:!1,format:a.PixelFormat.RGBA8888}),e.image=r},e.imageToBase64=function(e,t){return new Promise((function(r){var n,i=null==(n=/\.png|\.jpg|\.jpeg/.exec(e))?void 0:n[0];if([".png",".jpg",".jpeg"].includes(i)){var o=document.createElement("canvas"),a=o.getContext("2d"),u=new Image;u.src=e,u.onload=function(){o.height=u.height,o.width=u.width,a.drawImage(u,0,0),i=".jpg"===i?"jpeg":i.replace(".","");var e=o.toDataURL("image/"+i);t&&t(e),r(e),u.remove(),o.remove()}}else console.warn("Not a jpg/jpeg or png resource!"),t&&t(""),r("")}))},e.base64ToTexture=function(e){var t=document.createElement("img");t.src=e;var r=new a;return r.initWithElement(t),t.remove(),r},e.base64ToBlob=function(e){for(var t=e.split(","),r=/image\/\w+|;/.exec(t[0])[0],n=window.atob(t[1]),i=new ArrayBuffer(n.length),o=new Uint8Array(i),a=0;a<n.length;a++)o[a]=255&n.charCodeAt(a);return new Blob([o],{type:r})},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/index.ts",["cc","./BehaviorTree.ts","./BranchNode.ts","./Decorator.ts","./BTreeNode.ts","./Priority.ts","./Sequence.ts","./Task.ts","./Selector.ts"],(function(e){var t;return{setters:[function(e){t=e.cclegacy},function(t){e("BehaviorTree",t.BehaviorTree)},function(t){e("BranchNode",t.BranchNode)},function(t){e("Decorator",t.Decorator)},function(t){e("BTreeNode",t.BTreeNode)},function(t){e("Priority",t.Priority)},function(t){e("Sequence",t.Sequence)},function(t){e("Task",t.Task)},function(t){e("Selector",t.Selector)}],execute:function(){t._RF.push({},"96257XYurdITbWhyEf7Qlbn","index",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/index2.ts",["cc","./CenterManager.ts","./LayoutManager.ts","./ModelManager.ts","./PageViewManager.ts","./ReleaseManager.ts","./ScrollManager.ts","./ViewManager.ts","./Group.ts","./Holder.ts","./Manager.ts","./ScrollAdapter.ts","./View.ts","./Indicator.ts","./Scrollbar.ts","./debug.ts","./enum.ts","./interface.ts","./helper.ts"],(function(e){var n;return{setters:[function(e){n=e.cclegacy},function(n){e("CenterManager",n.CenterManager)},function(n){e("LayoutManager",n.LayoutManager)},function(n){e("ModelManager",n.ModelManager)},function(n){e("PageViewManager",n.PageViewManager)},function(n){var r={};r.ReleaseEvent=n.ReleaseEvent,r.ReleaseManager=n.ReleaseManager,e(r)},function(n){var r={};r.ADAPTER=n.ADAPTER,r.ScrollManager=n.ScrollManager,e(r)},function(n){e("ViewManager",n.ViewManager)},function(n){e("Group",n.Group)},function(n){e("Holder",n.Holder)},function(n){e("Manager",n.Manager)},function(n){e("ScrollAdapter",n.ScrollAdapter)},function(n){e("View",n.View)},function(n){e("Indicator",n.Indicator)},function(n){e("Scrollbar",n.Scrollbar)},function(n){var r={};r.ADAPTER_DEBUG_CONTENT=n.ADAPTER_DEBUG_CONTENT,r.ADAPTER_DEBUG_VIEW=n.ADAPTER_DEBUG_VIEW,r.DEBUG_DRAW_BORDER_COLOR=n.DEBUG_DRAW_BORDER_COLOR,r.DEBUG_DRAW_FILL_COLOR=n.DEBUG_DRAW_FILL_COLOR,r.DEBUG_DRAW_LIND_WIDTH=n.DEBUG_DRAW_LIND_WIDTH,r.DEBUG_DRAW_LINE_COLOR=n.DEBUG_DRAW_LINE_COLOR,e(r)},function(n){var r={};r.AlwaysScroll=n.AlwaysScroll,r.ArrangeAxis=n.ArrangeAxis,r.ChildAlignment=n.ChildAlignment,r.HolderEvent=n.HolderEvent,r.IndicatorMode=n.IndicatorMode,r.Layer=n.Layer,r.MagneticDirection=n.MagneticDirection,r.MovementType=n.MovementType,r.NestedDirection=n.NestedDirection,r.Orientation=n.Orientation,r.ReleaseState=n.ReleaseState,r.ScrollDirection=n.ScrollDirection,r.ScrollbarDirection=n.ScrollbarDirection,r.StretchDirection=n.StretchDirection,r.TouchMode=n.TouchMode,r.Transition=n.Transition,r.ViewEvent=n.ViewEvent,r.WrapMode=n.WrapMode,e(r)},null,function(n){e("Helper",n.Helper)}],execute:function(){n._RF.push({},"5be24sUODxN4578M0VnyahK","index",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/Indicator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ScrollAdapter.ts","./enum.ts","./PageViewManager.ts"],(function(e){var t,i,n,a,r,o,l,s,c,p,u,h,d,g,f,_,y,m,v,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.createClass},function(e){o=e.cclegacy,l=e._decorator,s=e.SpriteFrame,c=e.Color,p=e.Node,u=e.Sprite,h=e.UITransform,d=e.Button,g=e.EventHandler,f=e.Layout,_=e.Component,y=e.Size},function(e){m=e.ScrollAdapter},function(e){v=e.IndicatorMode},function(e){C=e.PageViewManager}],execute:function(){var S,w,M,b,z,I,E,L,P,T,A;o._RF.push({},"39a65BHli1DW4GsARI0mFR5","Indicator",void 0);var N=l.ccclass,R=l.property;e("Indicator",(S=N("Indicator"),w=R(m),M=R({type:s}),b=R({type:v}),S((E=t((I=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,n(t,"adapter",E,a(t)),n(t,"spriteFrame",L,a(t)),n(t,"indicatorMode",P,a(t)),n(t,"cellSize",T,a(t)),n(t,"spacing",A,a(t)),t._indicators=[],t._layout=null,t._color=new c,t}i(t,e);var o=t.prototype;return o.__preload=function(){this.adapter&&(this.adapter.pageViewManager.on(C.Event.ON_PAGE_LENGTH_CHANGED,this._onPageLengthChanged,this),this.adapter.pageViewManager.on(C.Event.ON_SCROLL_PAGE_END,this._onScrollPageEnd,this))},o._onScrollPageEnd=function(){this.changedState()},o._onPageLengthChanged=function(){if(this.adapter){var e=this._indicators,t=this.adapter.viewManager.groupLength;if(t!==e.length){var i=0;if(t>e.length)for(i=0;i<t;++i)e[i]||(e[i]=this._createIndicator(i));else for(i=e.length-t;i>0;--i){var n=e[i-1];this.node.removeChild(n.node),e.splice(i-1,1)}this.layout&&this.layout.enabledInHierarchy&&this.layout.updateLayout(),this.changedState()}}},o._createIndicator=function(e){var t=new p;t.layer=this.node.layer;var i=t.addComponent(u);i.spriteFrame=this.spriteFrame,i.sizeMode=u.SizeMode.CUSTOM,t.parent=this.node;var n=t.getComponent(h);if(n.setContentSize(this.cellSize),this.indicatorMode==v.Button){var a=t.getComponent(d)||t.addComponent(d),r=new g;r.component="Indicator",r.handler="_click",r.target=this.node,r.customEventData=e,a.clickEvents.push(r)}return n},o._click=function(e,t){this.adapter.pageViewManager.scrollToPage(this.adapter.pageViewManager.pageTurningSpeed,t)},o.changedState=function(){var e=this._indicators;if(0!==e.length&&this.adapter){var t=this.adapter.pageViewManager.currentIndex;if(!(t>=e.length)){for(var i=0;i<e.length;++i){var n=e[i].getComponent(u);this._color.set(n.color),this._color.a=127.5,n.color=this._color}if(e[t]){var a=e[t].getComponent(u);this._color.set(a.color),this._color.a=255,a.color=this._color}}}},r(t,[{key:"layout",get:function(){return null==this._layout&&(this._layout=this.getComponent(f)||this.addComponent(f),this.adapter.isHorizontal?(this._layout.type=f.Type.HORIZONTAL,this._layout.spacingX=this.spacing):(this._layout.type=f.Type.VERTICAL,this._layout.spacingY=this.spacing),this._layout.resizeMode=f.ResizeMode.CONTAINER),this._layout}}]),t}(_)).prototype,"adapter",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(I.prototype,"spriteFrame",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(I.prototype,"indicatorMode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.Normal}}),T=t(I.prototype,"cellSize",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y(10,10)}}),A=t(I.prototype,"spacing",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),z=I))||z));o._RF.pop()}}}));

System.register("chunks:///_virtual/Initialize.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts","./InitRes.ts"],(function(t){var i,n,e,s,r;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy},function(t){e=t.ecs},function(t){s=t.InitResComp,r=t.InitResSystem}],execute:function(){var c;n._RF.push({},"ffbceQs6Z9IoI5z6mt1avMw","Initialize",void 0);t("Initialize",e.register("Initialize")(c=function(t){function n(){return t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(){this.add(s)},n}(e.Entity))||c),t("EcsInitializeSystem",function(t){function n(){var i;return(i=t.call(this)||this).add(new r),i}return i(n,t),n}(e.System));n._RF.pop()}}}));

System.register("chunks:///_virtual/InitRes.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./JsonUtil.ts","./AsyncQueue.ts","./ECS.ts","./GameUIConfig.ts","./TableCard.ts","./TableEffect.ts","./TableGroup.ts","./LoadingViewComp.ts"],(function(e){var n,t,o,a,r,u,s,c,i,l,f,p,d;return{setters:[function(e){n=e.inheritsLoose,t=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){a=e.cclegacy},function(e){r=e.oops},function(e){u=e.JsonUtil},function(e){s=e.AsyncQueue},function(e){c=e.ecs},function(e){i=e.UIID},function(e){l=e.TableCard},function(e){f=e.TableEffect},function(e){p=e.TableGroup},function(e){d=e.LoadingViewComp}],execute:function(){var g;a._RF.push({},"2ee0c8+7R9EFKQb+OPn9mlk","InitRes",void 0);var m=e("InitResComp",c.register("InitRes")(g=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.reset=function(){},t}(c.Comp))||g);e("InitResSystem",function(e){function a(){return e.apply(this,arguments)||this}n(a,e);var g=a.prototype;return g.filter=function(){return c.allOf(m)},g.entityEnter=function(e){var n=new s;this.loadBundle(n),this.loadCustom(n),this.loadLanguage(n),this.loadCommon(n),this.loadGameConfig(n),this.onComplete(n,e),n.play()},g.loadBundle=function(e){e.push(t(o().mark((function e(n,t,a){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.res.defaultBundleName=r.config.game.bundleName,!r.config.game.bundleEnable){e.next=7;break}return console.log("启用远程资源运行游戏"),e.next=5,r.res.loadBundle(r.config.game.bundleServer,r.config.game.bundleVersion);case 5:e.next=9;break;case 7:return e.next=9,r.res.loadBundle(r.config.game.bundleName);case 9:n();case 10:case"end":return e.stop()}}),e)}))))},g.loadGameConfig=function(e){e.push(t(o().mark((function e(n,t,a){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.load(l.TableName,n);case 1:case"end":return e.stop()}}),e)})))),e.push(t(o().mark((function e(n,t,a){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.load(f.TableName,n);case 1:case"end":return e.stop()}}),e)})))),e.push(t(o().mark((function e(n,t,a){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.load(p.TableName,n);case 1:case"end":return e.stop()}}),e)}))))},g.loadCustom=function(e){e.push(t(o().mark((function e(n,t,a){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.res.load("language/font/"+r.language.current,n);case 1:case"end":return e.stop()}}),e)}))))},g.loadLanguage=function(e){e.push((function(e,n,t){var o=r.storage.get("language");null==o&&(o="zh",r.storage.set("language",o)),r.language.setLanguage(o,e)}))},g.loadCommon=function(e){e.push((function(e,n,t){r.res.loadDir("common",e)}))},g.onComplete=function(e,n){e.complete=t(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.gui.openAsync(i.Loading);case 2:(t=e.sent)&&n.add(t.getComponent(d)),n.remove(m);case 5:case"end":return e.stop()}}),e)})))},a}(c.ComblockSystem));a._RF.pop()}}}));

System.register("chunks:///_virtual/interface.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"3d52dVTlbBOz7Wijt15IBJI","interface",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/JsonOb.ts",["cc"],(function(t){var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"000b00Lx19Ke4hAFc9/Qlnh","JsonOb",void 0);var e=Object.prototype,o="[object Object]",c="[object Array]",n=["push","pop","shift","unshift","sort","reverse","splice"];t("JsonOb",function(){function t(t,r){this._callback=void 0,e.toString.call(t)!==o&&e.toString.call(t)!==c&&console.error("请传入一个对象或数组"),this._callback=r,this.observe(t)}var r=t.prototype;return r.observe=function(t,r){var n=this;e.toString.call(t)===c&&this.overrideArrayProto(t,r),Object.keys(t).forEach((function(i){var s=n,a=t[i],l=r&&r.slice();l?l.push(i):l=[i],Object.defineProperty(t,i,{get:function(){return a},set:function(t){a!==t&&("[object Object]"===e.toString.call(t)&&s.observe(t,l),s._callback(t,a,l),a=t)}}),e.toString.call(t[i])!==o&&e.toString.call(t[i])!==c||n.observe(t[i],l)}),this)},r.overrideArrayProto=function(t,r){var e,o=Array.prototype,c=Object.create(Array.prototype),i=this;n.forEach((function(t){Object.defineProperty(c,t,{value:function(){var c=this.slice();return e=o[t].apply(this,arguments),i.observe(this,r),i._callback(this,c,r),e}})})),t.__proto__=c},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/JsonUtil.ts",["cc","./Oops.ts"],(function(n){var e,s,t;return{setters:[function(n){e=n.cclegacy,s=n.JsonAsset},function(n){t=n.oops}],execute:function(){e._RF.push({},"1a24ank4nRC46jfzaIfOmtQ","JsonUtil",void 0);var o="config/game/",a=new Map;n("JsonUtil",function(){function n(){}return n.get=function(n){if(a.has(n))return a.get(n)},n.load=function(n,e){if(a.has(n))e(a.get(n));else{var r=o+n;t.res.load(r,s,(function(s,t){s?(console.warn(s.message),e(null)):(a.set(n,t.json),e(t.json))}))}},n.loadAsync=function(n){return new Promise((function(e,r){if(a.has(n))e(a.get(n));else{var c=o+n;t.res.load(c,s,(function(s,t){s?(console.warn(s.message),e(null)):(a.set(n,t.json),e(t.json))}))}}))},n.release=function(n){var e=o+n;a.delete(n),t.res.release(e)},n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/LabelChange.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LabelNumber.ts"],(function(i){var t,e,n,s,a,h,r;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,s=i.assertThisInitialized},function(i){a=i.cclegacy,h=i._decorator},function(i){r=i.default}],execute:function(){var c,l,u;a._RF.push({},"fff0fLwVNhNe59VirWTCPFJ","LabelChange",void 0);var o=h.ccclass,d=h.property,p=h.menu;i("LabelChange",o("LabelChange")(c=p("ui/label/LabelChange")((u=t((l=function(i){function t(){for(var t,e=arguments.length,a=new Array(e),h=0;h<e;h++)a[h]=arguments[h];return t=i.call.apply(i,[this].concat(a))||this,n(t,"isInteger",u,s(t)),t.duration=0,t.callback=void 0,t.isBegin=!1,t.speed=0,t.end=0,t}e(t,i);var a=t.prototype;return a.changeTo=function(i,t,e){0!=i?this.playAnim(i,this.num,t,e):e&&e()},a.changeBy=function(i,t,e){0!=i?this.playAnim(i,this.num,this.num+t,e):e&&e()},a.stop=function(i){void 0===i&&(i=!0),this.num=this.end,this.isBegin=!1,i&&this.callback&&this.callback()},a.playAnim=function(i,t,e,n){this.duration=i,this.end=e,this.callback=n,this.speed=(e-t)/i,this.num=t,this.isBegin=!0},a.isEnd=function(i){return this.speed>0?i>=this.end:i<=this.end},a.update=function(i){if(this.isBegin){if(this.num==this.end)return this.isBegin=!1,void(this.callback&&this.callback());var t=this.num+i*this.speed;this.isInteger&&(t=this.end<this.num?Math.floor(t):Math.ceil(t)),this.isEnd(t)&&(t=this.end,this.isBegin=!1,this.callback&&this.callback()),this.num=t}},t}(r)).prototype,"isInteger",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=l))||c)||c);a._RF.pop()}}}));

System.register("chunks:///_virtual/LabelNumber.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,n,i,o,u,a,l,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,o=t.createClass},function(t){u=t.cclegacy,a=t._decorator,l=t.error,s=t.Label}],execute:function(){var p,c,b,m,f,y,h,L,g;u._RF.push({},"f7b43F70BhPlrz4IPhZGmsL","LabelNumber",void 0);var d=a.ccclass,_=a.property,v=a.menu;t("default",(p=d("LabelNumber"),c=v("ui/label/LabelNumber"),b=_({tooltip:"数字"}),m=_({tooltip:"数字"}),f=_({tooltip:"货币符号"}),p(y=c((L=e((h=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return e=t.call.apply(t,[this].concat(o))||this,n(e,"_num",L,i(e)),n(e,"symbol",g,i(e)),e}r(e,t);var u=e.prototype;return u.start=function(){this.updateLabel()},u.updateLabel=function(){"number"!=typeof this._num&&l("[LabelNumber] num不是一个合法数字"),this.string=this.num.toString()+this.symbol},o(e,[{key:"num",get:function(){return this._num},set:function(t){this._num=t,this.updateLabel()}}]),e}(s)).prototype,"_num",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(h.prototype,"num",[m],Object.getOwnPropertyDescriptor(h.prototype,"num"),h.prototype),g=e(h.prototype,"symbol",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=h))||y)||y));u._RF.pop()}}}));

System.register("chunks:///_virtual/LabelTime.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,n,o,a,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,s=t.Label}],execute:function(){var l,c,u,h,m,d,p,f,b,g,y,v;o._RF.push({},"57786GMN6RPbaAT9b9RmX18","LabelTime",void 0);var D=a.ccclass,S=a.property,z=a.menu;t("default",(l=D("LabelTime"),c=z("ui/label/LabelTime"),u=S({tooltip:"到计时间总时间（单位秒）"}),h=S({tooltip:"天数数据格式化"}),m=S({tooltip:"时间格式化"}),d=S({tooltip:"是否有00"}),l(p=c((b=e((f=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,r(e,"countDown",b,n(e)),r(e,"dayFormat",g,n(e)),r(e,"timeFormat",y,n(e)),r(e,"zeroize",v,n(e)),e.dateDisable=void 0,e.result=void 0,e.onSecond=null,e.onComplete=null,e}i(e,t);var o=e.prototype;return o.replace=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return t.replace(/\{(\d+)\}/g,(function(t,e){return i[e]}))},o.format=function(){var t=this.countDown,e=Math.floor(t/86400);t-=86400*e;var i=Math.floor(t/3600);t-=3600*i;var r=Math.floor(t/60),n=t-=60*r;if(this.dateDisable=this.dateDisable||!1,0==e&&0==i&&0==r&&0==n)this.zeroize?this.result=this.replace(this.timeFormat,"00","00","00"):this.result=this.replace(this.timeFormat,"0","0","0");else if(e>0&&!this.dateDisable){var o=this.dayFormat,a=o.indexOf("{1}");0==i&&a>-1&&(o=o.substring(0,a-1));var s=o;e>1&&o.indexOf("days")<0&&(s=s.replace("day","days")),e<2&&(s=s.replace("days","day")),this.result=this.replace(s,e,i)}else i+=24*e,this.zeroize?this.result=this.replace(this.timeFormat,this.coverString(i),this.coverString(r),this.coverString(n)):this.result=this.replace(this.timeFormat,i,r,n);this.string=this.result},o.coverString=function(t){return t<10?"0"+t:t.toString()},o.setDateDisable=function(t){this.dateDisable=t},o.setTime=function(t){this.countDown=t,this.timing_end(),this.timing_start()},o.start=function(){this.timing_start()},o.onScheduleSecond=function(){this.countDown--,this.format(),this.onSecond&&this.onSecond(this.node),0==this.countDown&&this.onScheduleComplete()},o.onScheduleComplete=function(){this.timing_end(),this.onComplete&&this.onComplete(this.node)},o.timing_start=function(){this.schedule(this.onScheduleSecond,1),this.format()},o.timing_end=function(){this.unscheduleAllCallbacks(),this.format()},e}(s)).prototype,"countDown",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e3}}),g=e(f.prototype,"dayFormat",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"{0} day"}}),y=e(f.prototype,"timeFormat",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"{0}:{1}:{2}"}}),v=e(f.prototype,"zeroize",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p=f))||p)||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/Language.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventDispatcher.ts","./Logger.ts","./LanguageData.ts","./LanguagePack.ts"],(function(e){var n,a,t,g,u,s,r;return{setters:[function(e){n=e.inheritsLoose,a=e.createClass},function(e){t=e.cclegacy},function(e){g=e.EventDispatcher},function(e){u=e.Logger},function(e){s=e.LanguageData},function(e){r=e.LanguagePack}],execute:function(){t._RF.push({},"3757cxZqLZObIdvP/gQ6Yuj","Language",void 0);var i=e("LanguageEvent",function(e){return e.CHANGE="LanguageEvent.CHANGE",e.RELEASE_RES="LanguageEvent.RELEASE_RES",e}({}));e("LanguageManager",function(e){function t(){for(var n,a=arguments.length,t=new Array(a),g=0;g<a;g++)t[g]=arguments[g];return(n=e.call.apply(e,[this].concat(t))||this)._languages=["zh","en","tr"],n._languagePack=new r,n._defaultLanguage="zh",n}n(t,e);var g=t.prototype;return g.isExist=function(e){return this.languages.indexOf(e)>-1},g.getNextLang=function(){var e=this.languages,n=e.indexOf(s.current);return e[(n+1)%e.length]},g.setLanguage=function(e,n){var a=this;e=null==e||""==e?this._defaultLanguage:e.toLowerCase(),this.languages.indexOf(e)<0&&(console.log("当前不支持【"+e+"】语言，将自动切换到【"+this._defaultLanguage+"】语言"),e=this._defaultLanguage),e!==s.current?this.loadLanguageAssets(e,(function(t){u.logConfig("当前语言为【"+e+"】"),s.current=e,a._languagePack.updateLanguage(e),a.dispatchEvent(i.CHANGE,t),n(!0)})):n(!1)},g.getLangByID=function(e){return s.getLangByID(e)},g.loadLanguageAssets=function(e,n){return e=e.toLowerCase(),this._languagePack.loadLanguageAssets(e,n)},g.releaseLanguageAssets=function(e){e=e.toLowerCase(),this._languagePack.releaseLanguageAssets(e),this.dispatchEvent(i.RELEASE_RES,e)},a(t,[{key:"languages",get:function(){return this._languages},set:function(e){this._languages=e}},{key:"default",set:function(e){this._defaultLanguage=e||"zh"}},{key:"current",get:function(){return s.current}},{key:"pack",get:function(){return this._languagePack}}]),t}(g));t._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageData.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"27fb3sjD81JlIP2KFTSWUp4","LanguageData",void 0);var e=t("LanguageData",function(){function t(){}return t.getLangByID=function(t){var n=this.json[t];if(n)return n;if(this.excel){var e=this.excel[t];if(e)return e[this.current]}return t},t}());e.current="",e.json={},e.excel=null,n._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./LanguageData.ts"],(function(t){var e,a,n,i,r,o,s,p,u,l,c,g,h,d,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.initializerDefineProperty,n=t.inheritsLoose,i=t.assertThisInitialized,r=t.createClass},function(t){o=t.cclegacy,s=t._decorator,p=t.CCString,u=t.Label,l=t.RichText,c=t.TTFFont,g=t.warn,h=t.Component},function(t){d=t.oops},function(t){f=t.LanguageData}],execute:function(){var y,m,b,L,_,v,D,z,I,S,k,F,w,C;o._RF.push({},"110c8vEd5NEPL/N9meGQnaX","LanguageLabel",void 0);var U=s.ccclass,P=s.property,O=s.menu,T=t("LangLabelParamsItem",U("LangLabelParamsItem")((b=e((m=function(){a(this,"key",b,this),a(this,"value",L,this)}).prototype,"key",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),L=e(m.prototype,"value",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=m))||y);t("LanguageLabel",(_=U("LanguageLabel"),v=O("ui/language/LanguageLabel"),D=P({type:T,displayName:"params"}),z=P({type:T,displayName:"params"}),I=P({serializable:!0}),S=P({type:p,serializable:!0}),_(k=v((w=e((F=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,a(e,"_params",w,i(e)),a(e,"_dataID",C,i(e)),e.initFontSize=0,e._needUpdate=!1,e}n(e,t);var o=e.prototype;return o.language=function(){this._needUpdate=!0},o.onLoad=function(){this._needUpdate=!0},o.setVars=function(t,e){for(var a=!1,n=0;n<this._params.length;n++){var i=this._params[n];i.key===t&&(i.value=e,a=!0)}if(!a){var r=new T;r.key=t,r.value=e,this._params.push(r)}this._needUpdate=!0},o.update=function(){this._needUpdate&&(this.updateContent(),this._needUpdate=!1)},o.updateContent=function(){var t=this.getComponent(u),e=this.getComponent(l),a=d.language.pack.json+"/"+d.language.current,n=d.res.get(a,c);t?(n&&!t.useSystemFont&&(t.font=n),t.string=this.string,this.initFontSize=t.fontSize):e?(n&&!e.useSystemFont&&(e.font=n),this.initFontSize=e.fontSize,e.string=this.string,this.initFontSize=e.fontSize):g("[LanguageLabel], 该节点没有cc.Label || cc.RichText组件")},r(e,[{key:"params",get:function(){return this._params||[]},set:function(t){this._params=t,this._needUpdate=!0}},{key:"dataID",get:function(){return this._dataID||""},set:function(t){this._dataID=t,this._needUpdate=!0}},{key:"string",get:function(){var t=f.getLangByID(this._dataID);return t&&this._params.length>0&&this._params.forEach((function(e){t=t.replace("%{"+e.key+"}",e.value)})),t||(g("[LanguageLabel] 未找到语言标识，使用dataID替换"),t=this._dataID),t}}]),e}(h)).prototype,"_params",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),e(F.prototype,"params",[z],Object.getOwnPropertyDescriptor(F.prototype,"params"),F.prototype),C=e(F.prototype,"_dataID",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),e(F.prototype,"dataID",[S],Object.getOwnPropertyDescriptor(F.prototype,"dataID"),F.prototype),k=F))||k)||k));o._RF.pop()}}}));

System.register("chunks:///_virtual/LanguagePack.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts","./Oops.ts","./JsonUtil.ts","./LanguageData.ts","./LanguageLabel.ts","./LanguageSpine.ts","./LanguageSprite.ts"],(function(n){var e,t,r,a,o,u,s,i,g,l,c,f,p,d;return{setters:[function(n){e=n.asyncToGenerator,t=n.regeneratorRuntime},function(n){r=n.cclegacy,a=n.director,o=n.error,u=n.JsonAsset,s=n.TTFFont},function(n){i=n.Logger},function(n){g=n.oops},function(n){l=n.JsonUtil},function(n){c=n.LanguageData},function(n){f=n.LanguageLabel},function(n){p=n.LanguageSpine},function(n){d=n.LanguageSprite}],execute:function(){r._RF.push({},"2ffebyj59xIc4v4BZty8SDm","LanguagePack",void 0);n("LanguagePack",function(){function n(){this.json="language/json",this.texture="language/texture",this.spine="language/spine"}var r=n.prototype;return r.updateLanguage=function(n){for(var e=a.getScene().children,t=0;t<e.length;++t){for(var r=e[t].getComponentsInChildren(f),o=0;o<r.length;o++)r[o].language();for(var u=e[t].getComponentsInChildren(d),s=0;s<u.length;s++)u[s].language();for(var i=e[t].getComponentsInChildren(p),g=0;g<i.length;g++)i[g].language()}},r.loadLanguageAssets=function(){var n=e(t().mark((function n(e,r){return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.loadTexture(e);case 2:return n.next=4,this.loadSpine(e);case 4:return n.next=6,this.loadJson(e);case 6:return n.next=8,this.loadTable(e);case 8:r(e);case 9:case"end":return n.stop()}}),n,this)})));return function(e,t){return n.apply(this,arguments)}}(),r.loadTable=function(n){return new Promise(e(t().mark((function n(e,r){return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.loadAsync("Language");case 2:c.excel=n.sent,c.excel&&i.logConfig("config/game/Language","下载语言包 excel 资源"),e(null);case 5:case"end":return n.stop()}}),n)}))))},r.loadTexture=function(n){var e=this;return new Promise((function(t,r){var a=e.texture+"/"+n;g.res.loadDir(a,(function(n,e){if(n)return o(n),void t(null);i.logConfig(a,"下载语言包 textures 资源"),t(null)}))}))},r.loadJson=function(n){var e=this;return new Promise((function(t,r){var a=e.json+"/"+n;g.res.load(a,u,(function(n,e){if(n)return o(n),void t(null);c.json=e.json,i.logConfig(a,"下载语言包 json 资源"),g.res.load(a,s,(function(n){null==n&&i.logConfig(a,"下载语言包 ttf 资源"),t(null)}))}))}))},r.loadSpine=function(n){var e=this;return new Promise((function(t,r){var a=e.spine+"/"+n;g.res.loadDir(a,(function(n,e){if(n)return o(n),void t(null);i.logConfig(a,"下载语言包 spine 资源"),t(null)}))}))},r.releaseLanguageAssets=function(n){var e=this.texture+"/"+n;g.res.releaseDir(e),i.logView(e,"释放语言 texture 资源");var t=this.json+"/"+n;g.res.release(t),i.logView(t,"释放语言文字资源");var r=this.spine+"/"+n;g.res.release(r),i.logView(r,"释放语言 spine 资源")},n}());r._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageSpine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./LanguageData.ts"],(function(t){var e,a,n,i,o,r,u,p,s,c,l,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,o=t.createClass},function(t){r=t.cclegacy,u=t._decorator,p=t.CCString,s=t.sp,c=t.Component},function(t){l=t.oops},function(t){g=t.LanguageData}],execute:function(){var f,d,h,y,D,S,m;r._RF.push({},"53e25hqV6VEJqayXfz6Qam2","LanguageSpine",void 0);var L=u.ccclass,_=u.property,v=u.menu;t("LanguageSpine",(f=L("LanguageSpine"),d=v("ui/language/LanguageSpine"),h=_({serializable:!0}),y=_({type:p,serializable:!0}),f(D=d((m=e((S=function(t){function e(){for(var e,a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,n(e,"_dataID",m,i(e)),e._defaultAnimation="",e}a(e,t);var r=e.prototype;return r.onLoad=function(){var t=this.getComponent(s.Skeleton);this._defaultAnimation=t.animation},r.start=function(){this.updateSpine()},r.language=function(){this.updateSpine()},r.updateSpine=function(){var t="language/spine/"+g.current+"/"+this.dataID,e=l.res.get(t,s.SkeletonData);if(e){var a=this.getComponent(s.Skeleton);a.skeletonData=e,a.setAnimation(0,this._defaultAnimation,!0)}else console.error("[LanguageSpine] 资源不存在 "+t)},o(e,[{key:"dataID",get:function(){return this._dataID||""},set:function(t){this._dataID=t,this.updateSpine()}}]),e}(c)).prototype,"_dataID",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),e(S.prototype,"dataID",[y],Object.getOwnPropertyDescriptor(S.prototype,"dataID"),S.prototype),D=S))||D)||D));r._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./LanguageData.ts"],(function(e){var t,a,r,i,n,o,p,u,s,c,l,g,f,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,n=e.createClass},function(e){o=e.cclegacy,p=e._decorator,u=e.CCString,s=e.SpriteFrame,c=e.Sprite,l=e.UITransform,g=e.Component},function(e){f=e.oops},function(e){S=e.LanguageData}],execute:function(){var d,y,h,D,b,m,z,I,L;o._RF.push({},"11b96k/RIZF57Loehxyl6Hs","LanguageSprite",void 0);var v=p.ccclass,_=p.property,w=p.menu;e("LanguageSprite",(d=v("LanguageSprite"),y=w("ui/language/LanguageSprite"),h=_({serializable:!0}),D=_({type:u,serializable:!0}),b=_({tooltip:"是否设置为图片原始资源大小"}),d(m=y((I=t((z=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,r(t,"_dataID",I,i(t)),r(t,"isRawSize",L,i(t)),t}a(t,e);var o=t.prototype;return o.start=function(){this.updateSprite()},o.language=function(){this.updateSprite()},o.updateSprite=function(){var e="language/texture/"+S.current+"/"+this.dataID+"/spriteFrame",t=f.res.get(e,s);if(t){var a=this.getComponent(c);if(a.spriteFrame=t,this.isRawSize){var r,i=t._originalSize;null==(r=a.getComponent(l))||r.setContentSize(i)}}else console.error("[LanguageSprite] 资源不存在 "+e)},n(t,[{key:"dataID",get:function(){return this._dataID||""},set:function(e){this._dataID=e,this.updateSprite()}}]),t}(g)).prototype,"_dataID",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(z.prototype,"dataID",[D],Object.getOwnPropertyDescriptor(z.prototype,"dataID"),z.prototype),L=t(z.prototype,"isRawSize",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),m=z))||m)||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/LayerDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./LayerPopup.ts"],(function(t){var a,e,i,n;return{setters:[function(t){a=t.inheritsLoose},function(t){e=t.cclegacy},function(t){i=t.ViewParams},function(t){n=t.LayerPopUp}],execute:function(){e._RF.push({},"dcad5w8wHlEDJpIKJ4gUxEP","LayerDialog",void 0);t("LayerDialog",function(t){function e(){for(var a,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return(a=t.call.apply(t,[this].concat(i))||this).params=[],a.current=void 0,a}a(e,t);var n=e.prototype;return n.add=function(t,a,e){if(this.black.enabled=!0,this.current&&this.current.valid){var i=this.getUuid(t.prefab);return this.params.push({config:t,params:a,callbacks:e}),i}return this.show(t,a,e)},n.show=function(t,a,e){var n=this,s=t.prefab,r=this.getUuid(s),u=this.ui_nodes.get(r);null==u&&((u=new i).uuid=this.getUuid(s),u.prefabPath=s,u.valid=!0,this.ui_nodes.set(u.uuid,u)),u.callbacks=null!=e?e:{};var c=u.callbacks.onRemoved;return u.callbacks.onRemoved=function(t,a){c&&c(t,a),setTimeout((function(){n.next()}),0)},u.params=a||{},this.current=u,this.load(u,t.bundle),r},n.setBlackDisable=function(){0==this.params.length&&(this.black.enabled=!1)},n.next=function(){if(this.params.length>0){var t=this.params.shift();this.show(t.config,t.params,t.callbacks)}},e}(n));e._RF.pop()}}}));

System.register("chunks:///_virtual/LayerManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GUI.ts","./DelegateComponent.ts","./LayerDialog.ts","./LayerNotify.ts","./LayerPopup.ts","./LayerUI.ts","./UIMap.ts"],(function(e){var i,t,a,o,n,s,r,u,h,d,p,c,l,f,y,g;return{setters:[function(e){i=e.createClass,t=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){o=e.cclegacy,n=e.warn,s=e.Node,r=e.Layers,u=e.Widget,h=e.Camera},function(e){d=e.GUI},function(e){p=e.DelegateComponent},function(e){c=e.LayerDialog},function(e){l=e.LayerNotify},function(e){f=e.LayerPopUp},function(e){y=e.LayerUI},function(e){g=e.UIMap}],execute:function(){o._RF.push({},"7ba675xFGdHqIOykTysNzEu","LayerManager",void 0);var m=e("LayerType",function(e){return e.Game="LayerGame",e.UI="LayerUI",e.PopUp="LayerPopUp",e.Dialog="LayerDialog",e.System="LayerSystem",e.Notify="LayerNotify",e.Guide="LayerGuide",e}({}));e("LayerManager",function(){var e=o.prototype;function o(e){this.root=void 0,this.camera=void 0,this.game=void 0,this.guide=void 0,this.uiMap=void 0,this.ui=void 0,this.popup=void 0,this.dialog=void 0,this.system=void 0,this.notify=void 0,this.configs={},this.root=e,this.camera=this.root.getComponentInChildren(h),this.game=this.create_node(m.Game),this.ui=new y(m.UI),this.popup=new f(m.PopUp),this.dialog=new c(m.Dialog),this.system=new c(m.System),this.notify=new l(m.Notify),this.guide=this.create_node(m.Guide),e.addChild(this.game),e.addChild(this.ui),e.addChild(this.popup),e.addChild(this.dialog),e.addChild(this.system),e.addChild(this.notify),e.addChild(this.guide)}return e.init=function(e){this.configs=e},e.toast=function(e,i){void 0===i&&(i=!1),this.notify.show(e,i)},e.setConfig=function(e,i){this.configs[e]=i},e.setUIMap=function(e){null==this.uiMap&&(this.uiMap=new g),this.uiMap.init(this,e)},e.open=function(e,i,t){void 0===i&&(i=null);var a=this.configs[e];if(null!=a)switch(a.layer){case m.UI:this.ui.add(a,i,t);break;case m.PopUp:this.popup.add(a,i,t);break;case m.Dialog:this.dialog.add(a,i,t);break;case m.System:this.system.add(a,i,t)}else n("打开编号为【"+e+"】的界面失败，配置信息不存在")},e.openAsync=function(){var e=t(a().mark((function e(i,t){var o=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=null),e.abrupt("return",new Promise((function(e,a){var n={onAdded:function(i,t){e(i)}};o.open(i,t,n)})));case 2:case"end":return e.stop()}}),e)})));return function(i,t){return e.apply(this,arguments)}}(),e.has=function(e){var i=this.configs[e];if(null==i)return n("编号为【"+e+"】的界面失败，配置信息不存在"),!1;var t=!1;switch(i.layer){case m.UI:t=this.ui.has(i.prefab);break;case m.PopUp:t=this.popup.has(i.prefab);break;case m.Dialog:t=this.dialog.has(i.prefab);break;case m.System:t=this.system.has(i.prefab)}return t},e.remove=function(e,i){void 0===i&&(i=!0);var t=this.configs[e];if(null!=t)switch(t.layer){case m.UI:this.ui.remove(t.prefab,i);break;case m.PopUp:this.popup.remove(t.prefab,i);break;case m.Dialog:this.dialog.remove(t.prefab,i);break;case m.System:this.system.remove(t.prefab,i)}else n("删除编号为【"+e+"】的界面失败，配置信息不存在")},e.removeByNode=function(e,i){if(void 0===i&&(i=!1),e instanceof s){var t=e.getComponent(p);t&&t.viewParams?e.parent.removeByUuid(t.viewParams.uuid,i):(n("当前删除的node不是通过界面管理器添加到舞台上"),e.destroy())}},e.clear=function(e){void 0===e&&(e=!1),this.ui.clear(e),this.popup.clear(e),this.dialog.clear(e),this.system.clear(e)},e.create_node=function(e){var i=new s(e);i.layer=r.Enum.UI_2D;var t=i.addComponent(u);return t.isAlignLeft=t.isAlignRight=t.isAlignTop=t.isAlignBottom=!0,t.left=t.right=t.top=t.bottom=0,t.alignMode=2,t.enabled=!0,i},i(o,[{key:"portrait",get:function(){return this.root.getComponent(d).portrait}}]),o}());o._RF.pop()}}}));

System.register("chunks:///_virtual/LayerNotify.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./Notify.ts","./Defines.ts","./DelegateComponent.ts","./LayerUI.ts"],(function(t){var e,n,o,a,i,r,s,u,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t.error,a=t.instantiate},function(t){i=t.oops},function(t){r=t.Notify},function(t){s=t.ViewParams},function(t){u=t.DelegateComponent},function(t){c=t.LayerUI}],execute:function(){n._RF.push({},"da14ax+B2xNsL2taQFOh7we","LayerNotify",void 0);var f="common/prefab/notify";t("LayerNotify",function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var c=n.prototype;return c.show=function(t,e){var n=new s;n.uuid=this.getUuid(f),n.prefabPath=f,n.params={content:t,useI18n:e},n.callbacks={},n.valid=!0,this.ui_nodes.set(n.uuid,n),this.load(n)},c.load=function(t){var e=this;i.res.load(t.prefabPath,(function(n,i){n&&o(n);var r=a(i);t.node=r,r.addComponent(u).viewParams=t,e.createNode(t)}))},c.createNode=function(e){var n=t.prototype.createNode.call(this,e),o=n.getComponent(r);return n.active=!0,o.toast(e.params.content,e.params.useI18n),n},n}(c));n._RF.pop()}}}));

System.register("chunks:///_virtual/LayerPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LayerUI.ts"],(function(t){var e,i,n,a,o;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t.Layers,a=t.BlockInputEvents},function(t){o=t.LayerUI}],execute:function(){i._RF.push({},"25d07BQBCFADaSsh/I3GrTX","LayerPopup",void 0);t("LayerPopUp",function(t){function i(e){var i;return(i=t.call(this,e)||this).black=void 0,i.init(),i}e(i,t);var o=i.prototype;return o.init=function(){this.layer=n.Enum.UI_2D,this.black=this.addComponent(a),this.black.enabled=!1},o.add=function(e,i,n){return this.black.enabled=!0,t.prototype.add.call(this,e,i,n)},o.remove=function(e,i){t.prototype.remove.call(this,e,i),this.setBlackDisable()},o.removeByUuid=function(e,i){t.prototype.removeByUuid.call(this,e,i),this.setBlackDisable()},o.setBlackDisable=function(){this.black.enabled=!1},o.clear=function(e){t.prototype.clear.call(this,e),this.black.enabled=!1,this.active=!1},i}(o));i._RF.pop()}}}));

System.register("chunks:///_virtual/LayerUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./Defines.ts","./DelegateComponent.ts"],(function(e){var t,n,i,a,r,o,u,s,d,c,h,l;return{setters:[function(e){t=e.inheritsLoose,n=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy,a=e.warn,r=e.error,o=e.instantiate,u=e.isValid,s=e.Widget,d=e.Node},function(e){c=e.oops},function(e){h=e.ViewParams},function(e){l=e.DelegateComponent}],execute:function(){i._RF.push({},"bc8b86Br9dGeKxeLijkyJKE","LayerUI",void 0);e("LayerUI",function(e){function i(t){var n;(n=e.call(this,t)||this).ui_nodes=new Map,n.ui_cache=new Map;var i=n.addComponent(s);return i.isAlignLeft=i.isAlignRight=i.isAlignTop=i.isAlignBottom=!0,i.left=i.right=i.top=i.bottom=0,i.alignMode=2,i.enabled=!0,n}t(i,e);var d=i.prototype;return d.getUuid=function(e){return(this.name+"_"+e).replace(/\//g,"_")},d.add=function(e,t,n){var i=e.prefab,r=this.getUuid(i),o=this.ui_nodes.get(r);return o&&o.valid?(a("路径为【"+i+"】的预制重复加载"),""):(null==o&&((o=new h).uuid=r,o.prefabPath=i,this.ui_nodes.set(o.uuid,o)),o.params=null!=t?t:{},o.callbacks=null!=n?n:{},o.valid=!0,this.load(o,e.bundle),r)},d.load=function(e,t){var n=this,i=this.ui_nodes.get(e.uuid);i&&i.node?this.createNode(i):(t=t||c.res.defaultBundleName,c.res.load(t,e.prefabPath,(function(t,i){t&&r(t);var a=o(i);e.node=a,a.addComponent(l).viewParams=e,n.createNode(e)})))},d.createNode=function(e){return e.valid=!0,e.node.getComponent(l).add(),e.node.parent=this,e.node},d.remove=function(e,t){t&&this.removeCache(e);for(var n=this.__nodes(),i=0;i<n.length;i++){var a=n[i].viewParams;a.prefabPath===e&&(t?this.ui_nodes.delete(a.uuid):this.ui_cache.set(a.prefabPath,a),n[i].remove(t),a.valid=!1)}},d.removeByUuid=function(e,t){var n=this.ui_nodes.get(e);n&&(t&&this.ui_nodes.delete(n.uuid),n.node.getComponent(l).remove(t))},d.removeCache=function(e){var t=this.ui_cache.get(e);t&&(this.ui_nodes.delete(t.uuid),this.ui_cache.delete(e),t.node.destroy())},d.getByUuid=function(e){for(var t,i=this.__nodes(),a=n(i);!(t=a()).done;){var r=t.value;if(r.viewParams&&r.viewParams.uuid===e)return r.node}return null},d.get=function(e){for(var t,i=[],a=this.__nodes(),r=n(a);!(t=r()).done;){var o=t.value;o.viewParams.prefabPath===e&&i.push(o.node)}return i},d.has=function(e){for(var t,i=this.__nodes(),a=n(i);!(t=a()).done;){var r=t.value;if(r.viewParams.uuid===e||r.viewParams.prefabPath===e)return!0}return!1},d.find=function(e){for(var t,i=[],a=this.__nodes(),r=n(a);!(t=r()).done;){var o=t.value;e.test(o.viewParams.prefabPath)&&i.push(o.node)}return i},d.__nodes=function(){for(var e=[],t=this.children,n=0;n<t.length;n++){var i=t[n].getComponent(l);i&&i.viewParams&&i.viewParams.valid&&u(i)&&e.push(i)}return e},d.size=function(){return this.children.length},d.clear=function(e){var t=this;this.ui_nodes.forEach((function(n,i){t.removeByUuid(n.uuid,e),n.valid=!1})),this.ui_nodes.clear(),e&&this.ui_cache.forEach((function(e,n){t.removeCache(n)}))},i}(d));i._RF.pop()}}}));

System.register("chunks:///_virtual/LayerUtil.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t;return{setters:[function(e){n=e.createClass},function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"b7a864Zpb5N4Zm7onWE1i9D","LayerUtil",void 0);var i=e("LayerItem",function(){function e(e,n){this._value=void 0,this._name=void 0,this._value=e,this._name=n}return n(e,[{key:"value",get:function(){return this._value}},{key:"name",get:function(){return this._name}},{key:"mask",get:function(){return 1<<this._value}}]),e}()),r=e("LayerUtil",function(){function e(){}return e.setNodeLayer=function(n,t){t.layer=n.mask,t.children.forEach((function(t){t.layer=n.mask,e.setNodeLayer(n,t)}))},e}());r.MAP=new i(0,"MAP"),r.AVATAR=new i(1,"AVATAR"),r.IGNORE_RAYCAST=new i(20,"IGNORE_RAYCAST"),r.GIZMOS=new i(21,"GIZMOS"),r.EDITOR=new i(22,"EDITOR"),r.UI_3D=new i(23,"UI_3D"),r.SCENE_GIZMO=new i(24,"SCENE_GIZMO"),r.UI_2D=new i(25,"UI_2D"),r.PROFILTER=new i(28,"PROFILTER"),r.DEFAULT=new i(30,"DEFAULT"),t._RF.pop()}}}));

System.register("chunks:///_virtual/LayoutManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./enum.ts","./helper.ts"],(function(t){var e,i,r,n,o,l,a,s,h,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.createClass},function(t){l=t.cclegacy,a=t._decorator},function(t){s=t.Manager},function(t){h=t.ChildAlignment,c=t.Orientation},function(t){p=t.Helper}],execute:function(){var g,u,_,f,d,z,S,y,A,m,x,H,E,b,O,T,v,C,L,W,M,D,P,N,w;l._RF.push({},"d91f5nGeD5IbK7eVk2CJPJh","LayoutManager",void 0);var k=a.ccclass,I=a.property,U=function(t){return t[t.ON_LAYOUT_COMPLATED=0]="ON_LAYOUT_COMPLATED",t[t.ON_CHANGED_LAYOUT_STATE=1]="ON_CHANGED_LAYOUT_STATE",t}(U||{});t("LayoutManager",(g=k("LayoutManager"),u=I({type:h}),_=I({type:h,tooltip:"布局元素的对齐方式"}),f=I({tooltip:"元素交叉轴布局的间距"}),d=I({tooltip:"反转布局"}),z=I({tooltip:"延迟布局，开启后会统一在下一帧布局，建议开启"}),S=I({group:{id:"0",name:"forceExpand"},tooltip:"是否强制布局元素宽度扩展以填充额外的可用空间"}),y=I({group:{id:"0",name:"forceExpand"},tooltip:"是否强制布局元素高度扩展以填充额外的可用空间"}),A=I({group:{id:"0",name:"controlSize"},tooltip:"如果设置为 false，布局只会影响元素的位置，而不会影响宽度，在这种情况下你可以设置元素的宽度\n如果设置为 true，元素的宽度将由布局根据它们各自的 IElement.minSize、IElement.preferredSize、IElement.flexibleSize自动设置。如果元素的宽度应根据可用空间的大小而变化，应开启此功能。在这种情况下不能直接设置每个元素的宽度，但可以通过控制每个元素的IElement.minSize、IElement.preferredSize、IElement.flexibleSize来进行控制"}),m=I({group:{id:"0",name:"controlSize"},tooltip:"如果设置为 false，布局只会影响元素的位置，而不会影响高度，在这种情况下你可以设置元素的高度\n如果设置为 true，元素的高度将由布局根据它们各自的 IElement.minSize、IElement.preferredSize、IElement.flexibleSize自动设置。如果元素的高度应根据可用空间的大小而变化，应开启此功能。在这种情况下不能直接设置每个元素的高度，但可以通过控制每个元素的IElement.minSize、IElement.preferredSize、IElement.flexibleSize来进行控制"}),x=I({group:{id:"0",name:"controlScale"},tooltip:"是否使用 x 缩放计算宽度"}),H=I({group:{id:"0",name:"controlScale"},tooltip:"是否使用 y 缩放计算高度"}),g(((w=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,r(e,"_childAlignment",O,n(e)),r(e,"_spacing",T,n(e)),r(e,"_reverseArrangement",v,n(e)),r(e,"delayLayout",C,n(e)),r(e,"_forceExpandWidth",L,n(e)),r(e,"_forceExpandHeight",W,n(e)),r(e,"_controlSizeWidth",M,n(e)),r(e,"_controlSizeHeight",D,n(e)),r(e,"_controlScaleWidth",P,n(e)),r(e,"_controlScaleHeight",N,n(e)),e._isDirty=!1,e._layoutQueue=[],e}i(e,t);var l=e.prototype;return l.onInit=function(){},l.layout=function(t){t&&(this.delayLayout?(this.unLayout(t.index),this._layoutQueue.push(t),this._isDirty=!0):(this._layoutHandler(t),this.emit(U.ON_LAYOUT_COMPLATED,[t.index])))},l.unLayout=function(t){-1!=(t=this._layoutQueue.findIndex((function(e){return e.index==t})))&&this._layoutQueue.splice(t,1)},l._layoutHandler=function(t){this._calcAlongAxis(t,c.Horizontal,this.adapter.isHorizontal),this._setChildrenAlongAxis(t,c.Horizontal,this.adapter.isHorizontal),this._calcAlongAxis(t,c.Vertical,this.adapter.isHorizontal),this._setChildrenAlongAxis(t,c.Vertical,this.adapter.isHorizontal)},l._calcAlongAxis=function(t,e,i){for(var r=e==c.Horizontal?this.horizontal:this.vertical,n=this._getControlSize(e),o=this._getControlScale(e),l=this._getForceExpandSize(e),a=r,s=r,h=0,p=i!=(e==c.Vertical),g=this._getLayoutList(t.models),u=0;u<g.length;u++){var _=g[u],f=this._getChildSizes(_,e,n,l),d=f.min,z=f.preferred,S=f.flexible;if(o){var y=_.scale[this._getAxis(e)];d*=y,z*=y,S*=y}p?(a=Math.max(d+r,a),s=Math.max(z+r,s),h=Math.max(S,h)):(a+=d+this.spacing,s+=z+this.spacing,h+=S)}!p&&g.length>0&&(a-=this.spacing,s-=this.spacing),s=Math.max(a,s),this._setLayoutInputForAxis(t,a,s,h,e)},l._getControlSize=function(t){return t==c.Horizontal?this.controlSizeWidth:this.controlSizeHeight},l._getControlScale=function(t){return t==c.Horizontal?this.controlScaleWidth:this.controlScaleHeight},l._getForceExpandSize=function(t){return t==c.Horizontal?this.forceExpandWidth:this.forceExpandHeight},l._setChildrenAlongAxis=function(t,e,i){var r=t.size[this._getAxis(e)],n=this._getControlSize(e),o=this._getControlScale(e),l=this._getForceExpandSize(e),a=this._getAlignmentOnAxis(e),s=this._getLayoutList(t.models),h=i!=(e==c.Vertical),g=this.reverseArrangement?s.length-1:0,u=this.reverseArrangement?0:s.length,_=this.reverseArrangement?-1:1,f=this._getAxis(e);if(h)for(var d=r-(e==c.Horizontal?this.horizontal:this.vertical),z=g;this.reverseArrangement?z>=u:z<u;z+=_){var S=s[z],y=this._getChildSizes(S,e,n,l),A=y.min,m=y.preferred,x=y.flexible,H=o?S.scale[f]:1,E=p.clamp(d,A,x>0?r:m),b=this._getStartOffset(t,e,E*H);if(n)this._setChildAlongAxisWithScale(t,S,e,b,H,E);else{var O=(E-S.size[f])*a;O*=H,this._setChildAlongAxisWithScale(t,S,e,b+O,H)}}else{var T=e==c.Horizontal?this.left:this.top,v=0,C=r-this._getTotalPreferredSize(t,e);C>0&&(0==this._getTotalFlexibleSize(t,e)?T=this._getStartOffset(t,e,this._getTotalPreferredSize(t,e)-(e==c.Horizontal?this.horizontal:this.vertical)):this._getTotalFlexibleSize(t,e)>0&&(v=C/this._getTotalFlexibleSize(t,e)));var L=0;this._getTotalMinSize(t,e)!=this._getTotalPreferredSize(t,e)&&(L=p.clamp01((r-this._getTotalMinSize(t,e))/(this._getTotalPreferredSize(t,e)-this._getTotalMinSize(t,e))));for(z=g;this.reverseArrangement?z>=u:z<u;z+=_){var W=s[z],M=this._getChildSizes(W,e,n,l),D=(A=M.min,m=M.preferred,x=M.flexible,o?W.scale[f]:1),P=p.lerp(A,m,L);if(P+=x*v,n)this._setChildAlongAxisWithScale(t,W,e,T,D,P);else{O=(P-W.size[f])*a;this._setChildAlongAxisWithScale(t,W,e,T+O,D)}T+=P*D+this.spacing}}},l._setChildAlongAxisWithScale=function(t,e,i,r,n,o){if(null!=e){var l=this._getAxis(i),a=0;isNaN(o)?a=e.size[l]:(e.layoutSize[l]=o,a=o);var s={x:e.position.x,y:e.position.y},h=0;i==c.Horizontal?(h=r+a*e.anchorPoint[l]*n,h-=t.size[l]*t.anchorPoint[l],h+=t.position[l]):(h=-r-a*(1-e.anchorPoint[l])*n,h+=t.size[l]*(1-t.anchorPoint[l]),h+=t.position[l]),s[l]=h,e.position=s}},l._getStartOffset=function(t,e,i){var r=i+(e==c.Horizontal?this.horizontal:this.vertical),n=t.size[this._getAxis(e)]-r,o=this._getAlignmentOnAxis(e);return(e==c.Horizontal?this.left:this.top)+n*o},l._setLayoutInputForAxis=function(t,e,i,r,n){var o=this._getAxis(n);t.totalMinSize[o]=e,t.totalPreferredSize[o]=i,t.totalFlexibleSize[o]=r},l._getAxis=function(t){return t==c.Horizontal?"x":"y"},l._getMinSize=function(t,e){return t.minSize[this._getAxis(e)]},l._getPreferredSize=function(t,e){var i=this._getAxis(e);return Math.max(t.minSize[i],t.preferredSize[i])},l._getFlexibleSize=function(t,e){return t.flexibleSize[this._getAxis(e)]},l._getTotalMinSize=function(t,e){return t.totalMinSize[this._getAxis(e)]},l._getTotalPreferredSize=function(t,e){return t.totalPreferredSize[this._getAxis(e)]},l._getTotalFlexibleSize=function(t,e){return t.totalFlexibleSize[this._getAxis(e)]},l._getChildSizes=function(t,e,i,r){var n,o,l;return i?(n=this._getMinSize(t.element,e),o=this._getPreferredSize(t.element,e),l=this._getFlexibleSize(t.element,e)):(o=n=t.size[this._getAxis(e)],l=0),r&&(l=Math.max(l,1)),{min:n,preferred:o,flexible:l}},l._getAlignmentOnAxis=function(t){return t==c.Horizontal?this.adapter.layoutManager.childAlignment%3*.5:.5*Math.floor(this.adapter.layoutManager.childAlignment/3)},l._getLayoutList=function(t){for(var e=[],i=0;i<t.length;i++){var r=t[i];r.element.ignoreLayout||e.push(r)}return e},l.internal_lateUpdate=function(t){if(this._isDirty){this._isDirty=!1;for(var e=[];this._layoutQueue.length>0;){var i=this._layoutQueue.shift();this._layoutHandler(i),e.push(i.index)}e.length>0&&this.emit(U.ON_LAYOUT_COMPLATED,e)}},o(e,[{key:"childAlignment",get:function(){return this._childAlignment},set:function(t){t!=this._childAlignment&&(this._childAlignment=t,this.emit(U.ON_CHANGED_LAYOUT_STATE))}},{key:"spacing",get:function(){return this._spacing},set:function(t){t!=this._spacing&&(this._spacing=t,this.emit(U.ON_CHANGED_LAYOUT_STATE))}},{key:"reverseArrangement",get:function(){return this._reverseArrangement},set:function(t){t!=this._reverseArrangement&&(this._reverseArrangement=t,this.emit(U.ON_CHANGED_LAYOUT_STATE))}},{key:"forceExpandWidth",get:function(){return this._forceExpandWidth},set:function(t){t!=this._forceExpandWidth&&(this._forceExpandWidth=t,this.emit(U.ON_CHANGED_LAYOUT_STATE))}},{key:"forceExpandHeight",get:function(){return this._forceExpandHeight},set:function(t){t!=this._forceExpandHeight&&(this._forceExpandHeight=t,this.emit(U.ON_CHANGED_LAYOUT_STATE))}},{key:"controlSizeWidth",get:function(){return this._controlSizeWidth},set:function(t){t!=this._controlSizeWidth&&(this._controlSizeWidth=t,this.emit(U.ON_CHANGED_LAYOUT_STATE))}},{key:"controlSizeHeight",get:function(){return this._controlSizeHeight},set:function(t){t!=this._controlSizeHeight&&(this._controlSizeHeight=t,this.emit(U.ON_CHANGED_LAYOUT_STATE))}},{key:"controlScaleWidth",get:function(){return this._controlScaleWidth},set:function(t){t!=this._controlScaleWidth&&(this._controlScaleWidth=t,this.emit(U.ON_CHANGED_LAYOUT_STATE))}},{key:"controlScaleHeight",get:function(){return this._controlScaleHeight},set:function(t){t!=this._controlScaleHeight&&(this._controlScaleHeight=t,this.emit(U.ON_CHANGED_LAYOUT_STATE))}},{key:"top",get:function(){return this.adapter.isVertical?0:this.adapter.viewManager.top}},{key:"bottom",get:function(){return this.adapter.isVertical?0:this.adapter.viewManager.bottom}},{key:"left",get:function(){return this.adapter.isHorizontal?0:this.adapter.viewManager.left}},{key:"right",get:function(){return this.adapter.isHorizontal?0:this.adapter.viewManager.right}},{key:"horizontal",get:function(){return this.left+this.right}},{key:"vertical",get:function(){return this.top+this.bottom}},{key:"isControlMainAxisSize",get:function(){return this.adapter.isHorizontal&&this.controlSizeWidth||this.adapter.isVertical&&this.controlSizeHeight}},{key:"isControlCrossAxisSize",get:function(){return this.adapter.isHorizontal&&this.controlSizeHeight||this.adapter.isVertical&&this.controlSizeWidth}},{key:"isControlCrossAxisScale",get:function(){return this.adapter.isHorizontal&&this.controlScaleHeight||this.adapter.isVertical&&this.controlScaleWidth}}]),e}(s)).Event=U,O=e((b=w).prototype,"_childAlignment",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.UpperLeft}}),e(b.prototype,"childAlignment",[_],Object.getOwnPropertyDescriptor(b.prototype,"childAlignment"),b.prototype),T=e(b.prototype,"_spacing",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(b.prototype,"spacing",[f],Object.getOwnPropertyDescriptor(b.prototype,"spacing"),b.prototype),v=e(b.prototype,"_reverseArrangement",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(b.prototype,"reverseArrangement",[d],Object.getOwnPropertyDescriptor(b.prototype,"reverseArrangement"),b.prototype),C=e(b.prototype,"delayLayout",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),L=e(b.prototype,"_forceExpandWidth",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(b.prototype,"forceExpandWidth",[S],Object.getOwnPropertyDescriptor(b.prototype,"forceExpandWidth"),b.prototype),W=e(b.prototype,"_forceExpandHeight",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),e(b.prototype,"forceExpandHeight",[y],Object.getOwnPropertyDescriptor(b.prototype,"forceExpandHeight"),b.prototype),M=e(b.prototype,"_controlSizeWidth",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(b.prototype,"controlSizeWidth",[A],Object.getOwnPropertyDescriptor(b.prototype,"controlSizeWidth"),b.prototype),D=e(b.prototype,"_controlSizeHeight",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(b.prototype,"controlSizeHeight",[m],Object.getOwnPropertyDescriptor(b.prototype,"controlSizeHeight"),b.prototype),P=e(b.prototype,"_controlScaleWidth",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(b.prototype,"controlScaleWidth",[x],Object.getOwnPropertyDescriptor(b.prototype,"controlScaleWidth"),b.prototype),N=e(b.prototype,"_controlScaleHeight",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(b.prototype,"controlScaleHeight",[H],Object.getOwnPropertyDescriptor(b.prototype,"controlScaleHeight"),b.prototype),E=b))||E));l._RF.pop()}}}));

System.register("chunks:///_virtual/ListItemRenerer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,a,n,s,c,r,o,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized,s=t.createClass},function(t){c=t.cclegacy,r=t._decorator,o=t.Node,l=t.Component}],execute:function(){var h,u,d,p,f;c._RF.push({},"206d6CmpDhGC6OmI710HP7j","ListItemRenerer",void 0);var C=r.ccclass,b=r.property;t("default",(h=C("ListItemRenderer"),u=b({displayName:"是否添加点击事件"}),h((f=e((p=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];return e=t.call.apply(t,[this].concat(s))||this,a(e,"isClick",f,n(e)),e.callback=void 0,e.cbThis=void 0,e._data=void 0,e}i(e,t);var c=e.prototype;return c.dataChanged=function(){},c.refreshData=function(){this.dataChanged()},c.onDestroy=function(){this._data=null},c.setTouchCallback=function(t,e){this.callback=t,this.cbThis=e,this.node&&(this.node.hasEventListener(o.EventType.TOUCH_END)&&this.node.off(o.EventType.TOUCH_END,this.onClickCallback,this),this.node.on(o.EventType.TOUCH_END,this.onClickCallback,this))},c.onClickCallback=function(t){this.callback&&this.callback.call(this.cbThis,this.data)},s(e,[{key:"data",get:function(){return this._data},set:function(t){this._data=t,this.dataChanged()}}]),e}(l)).prototype,"isClick",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=p))||d));c._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingIndicator.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,i,n,r,e,a,l,c;return{setters:[function(t){o=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){e=t.cclegacy,a=t._decorator,l=t.Node,c=t.Component}],execute:function(){var s,d,u,p,g;e._RF.push({},"95143M/82NCOLKGzw14JlmS","LoadingIndicator",void 0);var h=a.ccclass,f=a.property;t("LoadingIndicator",(s=h("LoadingIndicator"),d=f(l),s((g=o((p=function(t){function o(){for(var o,i=arguments.length,e=new Array(i),a=0;a<i;a++)e[a]=arguments[a];return o=t.call.apply(t,[this].concat(e))||this,n(o,"loading",g,r(o)),o.loading_rotate=0,o}return i(o,t),o.prototype.update=function(t){this.loading_rotate+=220*t,this.loading.setRotationFromEuler(0,0,-this.loading_rotate%360),this.loading_rotate>360&&(this.loading_rotate-=360)},o}(c)).prototype,"loading",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=p))||u));e._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingViewComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./ECS.ts","./SingletonModuleComp.ts","./Guide.ts","./CCVMParentComp.ts","./GameUIConfig.ts","./ViewUtil.ts"],(function(t){var e,o,n,a,i,r,s,u,c,l,d,g;return{setters:[function(t){e=t.inheritsLoose,o=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){a=t.cclegacy,i=t._decorator},function(t){r=t.oops},function(t){s=t.ecs},function(t){u=t.smc},function(t){c=t.Guide},function(t){l=t.CCVMParentComp},function(t){d=t.UIID},function(t){g=t.ViewUtil}],execute:function(){var p;a._RF.push({},"92429ykTnxFCrcGyW58JWjj","LoadingViewComp",void 0);var f=i.ccclass;i.property,t("LoadingViewComp",f("LoadingViewComp")(p=s.register("LoadingView",!1)(p=function(t){function a(){for(var e,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).data={finished:0,total:0,progress:"0",prompt:""},e.progress=0,e}e(a,t);var i=a.prototype;return i.reset=function(){this.data.prompt=r.language.getLangByID("loading_load_player"),g.createPrefabNode("game/Prefab/Game").setParent(r.game.root),r.gui.remove(d.Loading)},i.start=function(){this.enter()},i.enter=function(){this.loadRes()},i.loadRes=function(){var t=o(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.data.progress=0,t.next=3,this.loadCustom();case 3:this.loadGameRes();case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.loadCustom=function(){this.data.prompt=r.language.getLangByID("loading_load_json")},i.loadGameRes=function(){this.data.prompt=r.language.getLangByID("loading_load_game"),r.res.loadDir("game",this.onProgressCallback.bind(this),this.onCompleteCallback.bind(this))},i.onProgressCallback=function(t,e,o){this.data.finished=t,this.data.total=e;var n=t/e;n>this.progress&&(this.progress=n,this.data.progress=(100*n).toFixed(2))},i.onCompleteCallback=function(){u.guide=s.getEntity(c),u.guide.GuideModel.step=1,u.guide.GuideModel.last=100,u.guide.load((function(){})),this.ent.remove(a)},a}(l))||p)||p);a._RF.pop()}}}));

System.register("chunks:///_virtual/Logger.ts",["cc"],(function(t){var n,i;return{setters:[function(t){n=t.cclegacy,i=t.log}],execute:function(){n._RF.push({},"479cdJANP5KaJgU+8z0DdSE","Logger",void 0);var e=t("LogType",function(t){return t[t.Net=1]="Net",t[t.Model=2]="Model",t[t.Business=4]="Business",t[t.View=8]="View",t[t.Config=16]="Config",t[t.Trace=32]="Trace",t}({})),o={1:"网络日志",2:"数据日志",4:"业务日志",8:"视图日志",16:"配置日志",32:"标准日志"},s=t("Logger",function(){function t(){}return t.init=function(){this.tags=e.Net|e.Model|e.Business|e.View|e.Config|e.Trace},t.setTags=function(t){void 0===t&&(t=null),t&&(this.tags=t)},t.start=function(t){void 0===t&&(t="Time"),console.time(t)},t.end=function(t){void 0===t&&(t="Time"),console.timeEnd(t)},t.table=function(t,n){this.isOpen(e.Trace)&&console.table(t)},t.trace=function(t,n){(void 0===n&&(n="color:#000000;"),this.isOpen(e.Trace))&&(console.log||i).call(null,"%c%s%s",n,this.getDateString(),t)},t.logNet=function(t,n){this.orange(e.Net,t,n)},t.logModel=function(t,n){this.violet(e.Model,t,n)},t.logBusiness=function(t,n){this.blue(e.Business,t,n)},t.logView=function(t,n){this.green(e.View,t,n)},t.logConfig=function(t,n){this.gray(e.Config,t,n)},t.orange=function(t,n,i){this.print(t,n,"color:#ee7700;",i)},t.violet=function(t,n,i){this.print(t,n,"color:Violet;",i)},t.blue=function(t,n,i){this.print(t,n,"color:#3a5fcd;",i)},t.green=function(t,n,i){this.print(t,n,"color:green;",i)},t.gray=function(t,n,i){this.print(t,n,"color:gray;",i)},t.isOpen=function(t){return 0!=(this.tags&t)},t.print=function(t,n,e,s){if(this.isOpen(t)){var r=console.log||i,c=o[t];s?r.call(null,"%c%s%s%s:%s%o",e,this.getDateString(),"["+c+"]",this.stack(5),s,n):r.call(null,"%c%s%s%s:%o",e,this.getDateString(),"["+c+"]",this.stack(5),n)}},t.stack=function(t){var n=(new Error).stack.split("\n"),i=[];n.forEach((function(t){var n,e=(t=t.substring(7)).split(" ");e.length<2?i.push(e[0]):i.push(((n={})[e[0]]=e[1],n))}));var e,o=[],s=[];if(t<i.length-1)for(var r in i[t]){if(2==(s=r.split(".")).length)o=s.concat();else{var c=(e=i[t][r]).lastIndexOf("/"),l=e.lastIndexOf(".");if(c>-1&&l>-1){var g=e.substring(c+1,l);o.push(g)}else o.push(e)}}return 1==o.length?"["+o[0]+".ts]":2==o.length?"["+o[0]+".ts->"+o[1]+"]":""},t.getDateString=function(){var t=new Date,n=t.getHours().toString(),i="";return i+=(1==n.length?"0"+n:n)+":",i+=(1==(n=t.getMinutes().toString()).length?"0"+n:n)+":",i+=(1==(n=t.getSeconds().toString()).length?"0"+n:n)+":",1==(n=t.getMilliseconds().toString()).length&&(n="00"+n),2==n.length&&(n="0"+n),i="["+(i+=n)+"]"},t}());s.tags=0,s.init(),n._RF.pop()}}}));

System.register("chunks:///_virtual/LotteryMask.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./GameplayEvent.ts"],(function(t){var e,i,s,o,n,r,a,h,c,l,p,u,g,f,y,d,m,T,C,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,s=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,r=t._decorator,a=t.Mask,h=t.CCFloat,c=t.Graphics,l=t.Label,p=t.CCBoolean,u=t.Node,g=t.Vec3,f=t.UITransform,y=t.Color,d=t.Intersection2D,m=t.math,T=t.Component},function(t){C=t.oops},function(t){v=t.GameplayEvent}],execute:function(){var b,w,D,E,L,P,k,z,M,_,R,H,O;n._RF.push({},"a907djaJ0VF66sKWPMr+TZ8","LotteryMask",void 0);var S=r.ccclass,U=r.property;t("LotteryMask",(b=S("LotteryMask"),w=U(a),D=U(h),E=U(c),L=U(l),P=U(p),b((M=e((z=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return e=t.call.apply(t,[this].concat(n))||this,s(e,"mask",M,o(e)),s(e,"size",_,o(e)),s(e,"progressCube",R,o(e)),s(e,"progerss",H,o(e)),s(e,"calcDebugger",O,o(e)),e.graphics=null,e.tempDrawPoints=[],e.polygonPointsList=[],e.settled=!1,e}i(e,t);var n=e.prototype;return n.onEnable=function(){this.graphics=this.mask.getComponent(c),this.node.on(u.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(u.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(u.EventType.TOUCH_END,this.onTouchEnd,this),C.message.on(v.ResetMask,this.reset,this),this.reset()},n.onDisable=function(){this.node.off(u.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(u.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(u.EventType.TOUCH_END,this.onTouchEnd,this),C.message.off(v.ResetMask,this.reset,this)},n.onTouchStart=function(t){var e=t.touch.getLocation(),i=new g(e.x,e.y,0);this._addCircle(this.mask.getComponent(f).convertToNodeSpaceAR(i))},n.onTouchMove=function(t){var e=t.touch.getLocation(),i=new g(e.x,e.y,0);this._addCircle(this.mask.getComponent(f).convertToNodeSpaceAR(i))},n.onTouchEnd=function(t){var e=t.touch.getLocation(),i=new g(e.x,e.y,0);this._addCircle(this.mask.getComponent(f).convertToNodeSpaceAR(i)),this.tempDrawPoints=[],this.calcProgress()},n.calcProgress=function(){var t=this,e=0,i=this.progressCube;this.polygonPointsList.forEach((function(s){s.isHit&&(e+=1,t.calcDebugger&&(i.rect(s.rect.x,s.rect.y,s.rect.width,s.rect.height),i.fillColor=new y(216,18,18,255),i.fill()))})),this.progerss.string="已经刮开了 "+Math.ceil(e/this.polygonPointsList.length*100)+"%",e>=this.polygonPointsList.length&&(this.graphics.rect(0,0,500,500),this.graphics.fill(),this.settled||(C.message.dispatchEvent(v.Settle),this.settled=!0))},n._addCircle=function(t){var e=this.tempDrawPoints.length;if(this.tempDrawPoints.push(t),e<=1)this.graphics.circle(t.x,t.y,this.size/2),this.graphics.fill();else{var i=this.tempDrawPoints[e-2],s=this.tempDrawPoints[e-1];this.graphics.moveTo(i.x,i.y),this.graphics.lineTo(s.x,s.y),this.graphics.lineWidth=this.size,this.graphics.lineCap=c.LineCap.ROUND,this.graphics.lineJoin=c.LineJoin.ROUND,this.graphics.strokeColor=new y(255,255,255,255),this.graphics.stroke(),this.polygonPointsList.forEach((function(t){t.isHit=t.isHit||d.lineRect(i,s,t.rect)}))}},n.reset=function(){this.graphics.clear(),this.tempDrawPoints=[],this.polygonPointsList=[],this.progerss.string="已经刮开了 0%",this.progressCube.clear();for(var t=0;t<this.progressCube.getComponent(f).width;t+=this.size)for(var e=0;e<this.progressCube.getComponent(f).height;e+=this.size)this.polygonPointsList.push({rect:m.rect(t,e,this.size,this.size),isHit:!1});this.settled=!1},e}(T)).prototype,"mask",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(z.prototype,"size",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=e(z.prototype,"progressCube",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(z.prototype,"progerss",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(z.prototype,"calcDebugger",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=z))||k));n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./Main.ts","./Card.ts","./CardBll.ts","./CardModel.ts","./CardView.ts","./Choose.ts","./Deck.ts","./Game.ts","./Settle.ts","./LotteryMask.ts","./Player.ts","./PlayerModel.ts","./SingletonModuleComp.ts","./GameEvent.ts","./GameUIConfig.ts","./GameplayEvent.ts","./TableCard.ts","./TableEffect.ts","./TableGroup.ts","./TableLanguage.ts","./TablePromptWindow.ts","./Guide.ts","./GuideModelComp.ts","./GuideViewComp.ts","./GuideViewItem.ts","./GuideViewMask.ts","./GuideViewPrompt.ts","./PolygonMask.ts","./Initialize.ts","./InitRes.ts","./LoadingViewComp.ts","./banner.ts","./common.ts","./commonService.ts","./device.ts","./mock.ts","./reportEvent.ts","./rewardVideo.ts","./share.ts","./umami.ts","./Oops.ts","./Root.ts","./AudioEffect.ts","./AudioManager.ts","./AudioMusic.ts","./EventDispatcher.ts","./EventMessage.ts","./MessageManager.ts","./ResLoader.ts","./Logger.ts","./RandomManager.ts","./StorageManager.ts","./Timer.ts","./TimerManager.ts","./GameCollision.ts","./GameComponent.ts","./GameManager.ts","./GUI.ts","./Defines.ts","./DelegateComponent.ts","./LayerDialog.ts","./LayerManager.ts","./LayerNotify.ts","./LayerPopup.ts","./LayerUI.ts","./UIMap.ts","./CommonPrompt.ts","./LoadingIndicator.ts","./Notify.ts","./ArrayUtil.ts","./CameraUtil.ts","./EncryptUtil.ts","./ImageUtil.ts","./JsonUtil.ts","./LayerUtil.ts","./MathUtil.ts","./ObjectUtil.ts","./PhysicsUtil.ts","./PlatformUtil.ts","./RegexUtil.ts","./RotateUtil.ts","./StringUtil.ts","./Vec3Util.ts","./ViewUtil.ts","./Ambilight.ts","./FlashSpine.ts","./FlashSprite.ts","./SpineFinishedRelease.ts","./NavLine.ts","./DrawMeshSector.ts","./Effect2DFollow3D.ts","./EffectDelayRelease.ts","./EffectEvent.ts","./EffectFinishedRelease.ts","./EffectSingleCase.ts","./MoveRigidBody.ts","./MoveTo.ts","./MoveTranslate.ts","./AnimatorAnimation.ts","./AnimatorCustomization.ts","./AnimatorDragonBones.ts","./AnimatorSkeletal.ts","./AnimatorSpine.ts","./AnimatorSpineSecondary.ts","./AnimatorBase.ts","./AnimatorCondition.ts","./AnimatorController.ts","./AnimatorParams.ts","./AnimatorState.ts","./AnimatorStateLogic.ts","./AnimatorTransition.ts","./BTreeNode.ts","./BehaviorTree.ts","./BranchNode.ts","./Decorator.ts","./IControl.ts","./Priority.ts","./Selector.ts","./Sequence.ts","./Task.ts","./index.ts","./FreeFlightCamera.ts","./OrbitCamera.ts","./AsyncQueue.ts","./Collection.ts","./ECS.ts","./ECSComp.ts","./ECSEntity.ts","./ECSGroup.ts","./ECSMask.ts","./ECSMatcher.ts","./ECSModel.ts","./ECSSystem.ts","./Group.ts","./Holder.ts","./Manager.ts","./ScrollAdapter.ts","./View.ts","./Indicator.ts","./Scrollbar.ts","./debug.ts","./enum.ts","./interface.ts","./helper.ts","./index2.ts","./CenterManager.ts","./LayoutManager.ts","./ModelManager.ts","./PageViewManager.ts","./ReleaseManager.ts","./ScrollManager.ts","./ViewManager.ts","./Badge.ts","./RoundRectMask.ts","./ButtonEffect.ts","./ButtonSimple.ts","./ButtonTouchLong.ts","./LabelChange.ts","./LabelNumber.ts","./LabelTime.ts","./Language.ts","./LanguageData.ts","./LanguageLabel.ts","./LanguagePack.ts","./LanguageSpine.ts","./LanguageSprite.ts","./ListItemRenerer.ts","./VirtualListScrollView.ts","./JsonOb.ts","./StringFormat.ts","./VMBase.ts","./VMCompsEdit.ts","./VMCustom.ts","./VMEnv.ts","./VMEvent.ts","./VMLabel.ts","./VMModify.ts","./VMParent.ts","./VMProgress.ts","./VMState.ts","./ViewModel.ts","./BhvButtonGroup.ts","./BhvFrameIndex.ts","./BhvRollNumber.ts","./BhvSwitchPage.ts","./HttpRequest.ts","./NetInterface.ts","./NetManager.ts","./NetNode.ts","./NetProtocolPako.ts","./NetProtocolProtobuf.ts","./WebSock.ts","./RtToModel.ts","./RtToSprite.ts","./CCComp.ts","./CCVMParentComp.ts","./BuildTimeConstants.ts","./Config.ts","./GameConfig.ts","./GameQueryConfig.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./Root.ts","./ECS.ts","./GameUIConfig.ts","./SingletonModuleComp.ts","./Initialize.ts"],(function(n){var t,i,o,e,c,s,u,r,a,f;return{setters:[function(n){t=n.inheritsLoose},function(n){i=n.cclegacy,o=n._decorator},function(n){e=n.oops},function(n){c=n.Root},function(n){s=n.ecs},function(n){u=n.UIConfigData},function(n){r=n.smc},function(n){a=n.Initialize,f=n.EcsInitializeSystem}],execute:function(){var l;i._RF.push({},"0eec0s4qrZF7onPlYBrD+y+","Main",void 0);var p=o.ccclass;o.property,n("Main",p("Main")(l=function(n){function i(){return n.apply(this,arguments)||this}t(i,n);var o=i.prototype;return o.start=function(){},o.run=function(){r.initialize=s.getEntity(a)},o.initGui=function(){e.gui.init(u)},o.initEcsSystem=function(){e.ecs.add(new f)},i}(c))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/Manager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,a;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy,a=t._decorator}],execute:function(){var i;n._RF.push({},"9e556t6rHxO6ZbZa4CSsrXu","Manager",void 0);var r=a.ccclass;a.property,t("Manager",r("Manager")(i=function(){function t(){this._inited=!1,this._eventMap=new Map,this._adapter=null}var n=t.prototype;return n.internal_create=function(t){this._adapter=t},n.internal_init=function(){this._inited||(this._inited=!0,this.onInit())},n.on=function(t,e,n,a){void 0===a&&(a=!1),this._eventMap.has(t)||this._eventMap.set(t,[]);var i=this._eventMap.get(t);null!=i&&i.find((function(t){return t.target==n&&t.callback==e}))||i.push({callback:e,target:n,once:a})},n.off=function(t,e,n){if(this._eventMap.has(t)){var a=this._eventMap.get(t),i=null==a?void 0:a.findIndex((function(t){return t.callback==e&&t.target==n}));-1!=i&&a.splice(i,1)}},n.emit=function(t){if(this._eventMap.has(t)){for(var e=this._eventMap.get(t),n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];for(var r=0;r<e.length;r++){var c,s=e[r];(c=s.callback).call.apply(c,[s.target].concat(a)),s.once&&(e.splice(r,1),r--)}}},e(t,[{key:"adapter",get:function(){return this._adapter}}]),t}())||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/MathUtil.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"8c615ZS4PRMPKPA9ZqKjiJC","MathUtil",void 0);var r=t("MathUtil",function(){function t(){}return t.sign=function(t){return t>0?1:t<0?-1:0},t.progress=function(t,n,r){return t+(n-t)*r},t.lerp=function(t,n,r){return r>1?r=1:r<0&&(r=0),t*(1-r)+n*r},t.lerpAngle=function(n,r,e){var u=(r%=360)-(n%=360);return u>180?r=n-(360-u):u<-180&&(r=n+(360+u)),(t.lerp(n,r,e)%360+360)%360},t.angleTowards=function(t,n,r){var e=(n%=360)-(t%=360);e>180?n=t-(360-e):e<-180&&(n=t+(360+e));var u=n-t;return r>Math.abs(u)?n:((t+r*Math.sign(u))%360+360)%360},t.clamp=function(t,n,r){return t<n?n:t>r?r:t},t.probability=function(t){return Math.random()<t},t}());r.deg2Rad=Math.PI/180,r.rad2Deg=180/Math.PI,n._RF.pop()}}}));

System.register("chunks:///_virtual/MessageManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,s,i;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,s=e.warn,i=e.log}],execute:function(){n._RF.push({},"a401fY+wj9NsqOACoZ7Zy/R","MessageManager",void 0);var o=function(){this.event=void 0,this.listener=void 0,this.object=void 0},r=(e("MessageEventData",function(){function e(){this.events={}}var n=e.prototype;return n.on=function(e,t,n){var s=this.events[e];null==s&&(s=[],this.events[e]=s);var i=new o;i.event=e,i.listener=t,i.object=n,s.push(i),r.Instance.on(e,t,n)},n.off=function(e){var n=this.events[e];if(n){for(var s,i=t(n);!(s=i()).done;){var o=s.value;r.Instance.off(e,o.listener,o.object)}delete this.events[e]}},n.dispatchEvent=function(e,t){void 0===t&&(t=null),r.Instance.dispatchEvent(e,t)},n.clear=function(){for(var e in this.events)this.off(e)},e}()),e("MessageManager",function(){function e(){this.events={}}var t=e.prototype;return t.on=function(e,t,n){if(e&&t){var i=this.events[e];null==i&&(i=[],this.events[e]=i);for(var r=i.length,a=0;a<r;a++){var v=i[a];v.listener==t&&v.object==n&&s("名为【"+e+"】的事件重复注册侦听器")}var c=new o;c.event=e,c.listener=t,c.object=n,i.push(c)}else s("注册【"+e+"】事件的侦听器函数为空")},t.once=function(e,t,n){var s=this,i=function(o,r){s.off(e,i,n),i=null,t.call(n,o,r)};this.on(e,i,n)},t.off=function(e,t,n){var s=this.events[e];if(s){for(var o=s.length,r=0;r<o;r++){var a=s[r];if(a.listener==t&&a.object==n){s.splice(r,1);break}}0==s.length&&delete this.events[e]}else i("名为【"+e+"】的事件不存在")},t.dispatchEvent=function(e,t){void 0===t&&(t=null);var n=this.events[e];if(null!=n)for(var s=n.concat(),i=s.length,o=0;o<i;o++){var r=s[o];r.listener.call(r.object,e,t)}},e}()));r.Instance=new r,n._RF.pop()}}}));

System.register("chunks:///_virtual/mock.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,o,i,r,s,c,a,u,h,l,d,p,f,g;return{setters:[function(e){n=e.inheritsLoose,t=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){i=e.cclegacy,r=e.Node,s=e.director,c=e.Canvas,a=e.Layers,u=e.Graphics,h=e.UITransform,l=e.Vec2,d=e.Size,p=e.view,f=e.Color,g=e.Label}],execute:function(){i._RF.push({},"50c52npWlJBjLcu1mfJkFTG","mock",void 0);var v=e("MockAds",(function(e){this.AdGraphics=void 0,this.AdGraphics=e}));e("MockBanner",function(e){function i(){return e.apply(this,arguments)||this}n(i,e),i.createBannerAd=function(e){var n=s.getScene().getComponentsInChildren(c),t=n[n.length-1];if(t){var o=new r;o.name="MockBanner",o.layer=a.makeMaskInclude([a.Enum.UI_2D]);var g=o.addComponent(u),v=o.getComponent(h);return v.anchorPoint=new l(0,1),v.contentSize=new d(p.getDesignResolutionSize().width,p.getDesignResolutionSize().height),o.setParent(t.node),o.setPosition(-p.getDesignResolutionSize().width/2,p.getDesignResolutionSize().height/2),g.fillColor=f.WHITE,g.strokeColor=f.GRAY,g.rect(e.style.left,e.style.top,e.style.width,-e.style.height),g.stroke(),g.fill(),g.node.active=!1,new i(o)}console.error("Failed to load mock ads, Canvas is not found in scene")};var g=i.prototype;return g.show=function(){var e=t(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.AdGraphics.active=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),g.hide=function(){var e=t(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.AdGraphics.active=!1;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i}(v)),e("MockRewardVideo",function(e){function i(){for(var n,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return(n=e.call.apply(e,[this].concat(o))||this)._countDown=0,n.countUI=void 0,n}n(i,e),i.createRewardedVideoAd=function(e){var n=s.getScene().getComponentsInChildren(c),t=n[n.length-1];if(t){var o=new r;o.name="MockRewardVideo",o.layer=a.makeMaskInclude([a.Enum.UI_2D]);var v=o.addComponent(u),w=o.getComponent(h);w.anchorPoint=new l(0,1),w.contentSize=new d(p.getDesignResolutionSize().width,p.getDesignResolutionSize().height),o.setParent(t.node),o.setPosition(-p.getDesignResolutionSize().width/2,p.getDesignResolutionSize().height/2),v.fillColor=f.WHITE,v.strokeColor=f.GRAY,v.rect(0,0,p.getDesignResolutionSize().width,-p.getDesignResolutionSize().height),v.stroke(),v.fill(),v.node.active=!1;var m=new r;m.name="MockRewardVideoButton",m.layer=a.makeMaskInclude([a.Enum.UI_2D]);var k=m.addComponent(g);return k.string="关闭",k.color=f.BLACK,m.setParent(o),m.setPosition(p.getDesignResolutionSize().width/2,-p.getDesignResolutionSize().height/2),new i(o)}console.error("Failed to load mock ads, Canvas is not found in scene")};var v=i.prototype;return v.onClose=function(e){var n=this;this.AdGraphics.on(r.EventType.TOUCH_END,(function(){e({isEnded:n._countDown<=0}),n.AdGraphics.active=!1,n._countDown=0}))},v.offClose=function(e){this.AdGraphics.off(r.EventType.TOUCH_END)},v.show=function(){var e=t(o().mark((function e(){var n,t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.AdGraphics.active=!0,this._countDown=5,console.log("count down init: ",this._countDown),n=setInterval((function(){t._countDown-=1,console.log("count down: ",t._countDown),t._countDown<=0&&clearInterval(n)}),1e3);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),v.count=function(){},v.hide=function(){var e=t(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.AdGraphics.active=!1;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),v.destroy=function(){var e=t(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.AdGraphics.destroy();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i}(v));i._RF.pop()}}}));

System.register("chunks:///_virtual/ModelManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./enum.ts","./helper.ts"],(function(e){var t,n,i,o,r,a,s,l,c,h,d,u;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass,i=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){r=e.cclegacy,a=e._decorator,s=e.Node,l=e.UITransform},function(e){c=e.Manager},function(e){h=e.WrapMode,d=e.Layer},function(e){u=e.Helper}],execute:function(){var f,_;r._RF.push({},"18c36plR9VHHbXIt40bKQ+w","ModelManager",void 0);var p=a.ccclass,y=(a.property,function(e){return e[e.ON_CLEAR=0]="ON_CLEAR",e[e.ON_INSERT=1]="ON_INSERT",e[e.ON_REMOVE=2]="ON_REMOVE",e[e.ON_MOVE=3]="ON_MOVE",e[e.ON_UPDATE=4]="ON_UPDATE",e[e.ON_CHANGE_BEFORE=5]="ON_CHANGE_BEFORE",e}(y||{}));e("ModelManager",p("ModelManager")(((_=function(e){function r(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this)._modelList=[],t._length=0,t}t(r,e);var a=r.prototype;return a.onInit=function(){},a.insert=function(){var e=i(o().mark((function e(t,n){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0===n&&(n=this.length),i=this._toArray(t),n=u.clamp(n,0,this.length),this.emit(y.ON_CHANGE_BEFORE),this._insertHandler(i,n),this._length=this._modelList.length,i.length>0&&this.emit(y.ON_INSERT,n);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),a._insertHandler=function(e,t){var n=this,i=t;this._length=this._modelList.length;for(var o=[],r=function(e,t){return(u=n._getNewModel(e)).index=t,n._modelList.push(u),u},a=function(e){var t=n.get(i);if(t)o.push(n._copyModel(t,{})),t.data=e,t.index=i,n._initModel(t);else{var a=r(e,i);n._initModel(a)}i++},s=0,l=e.length;s<l;s++)a(e[s]);for(var c=0;c<o.length;c++){var h=o[c],d=i+c;if(this.get(d)){var u=this.get(d);o.push(this._copyModel(u,{})),this._copyModel(h,u)}else{var f=r(h.data,d);this._copyModel(h,f)}}},a.remove=function(e,t){if(void 0===t&&(t=1),0!=t&&!(e<0||e>=this.length)){var n=this.length;this.emit(y.ON_CHANGE_BEFORE);for(var i=e;i<this.length;i++){var o=this.get(i),r=this.get(i+t);if(!r){n=i;break}this._copyModel(r,o),o.index=i}this._modelList.splice(n,this.length),this._length=this._modelList.length,this.emit(y.ON_REMOVE,e)}},a.move=function(e,t,n){var i=this;if(!(e<0||t<=0)){this.emit(y.ON_CHANGE_BEFORE);var o=this._modelList.map((function(e){return i._copyModel(e,{})})),r=o.splice(e,t);o.splice.apply(o,[n,0].concat(r));for(var a=0;a<o.length;a++)this._copyModel(o[a],this._modelList[a]);var s=Math.min(e,n);this.emit(y.ON_MOVE,s)}},a.update=function(){this.emit(y.ON_UPDATE)},a.clear=function(){this._modelList.length=0,this._length=0,this.emit(y.ON_CLEAR)},a.has=function(e){return!!this._modelList[e]},a.get=function(e){return isNaN(e)?null:this._modelList[e]},a.slice=function(e,t){return 0==this.length?[]:this._modelList.slice(e,t)},a._toArray=function(e){return e?e instanceof Array?e:[e]:[]},a._getNewModel=function(e){return{data:e,index:-1,code:null,size:{x:0,y:0},layoutSize:{x:0,y:0},scale:{x:0,y:0},position:{x:0,y:0},anchorPoint:{x:0,y:0},element:{wrapBeforeMode:h.Wrap,wrapAfterMode:h.Nowrap,ignoreLayout:!1,placeholder:!1,minSize:{x:0,y:0},preferredSize:{x:0,y:0},flexibleSize:{x:0,y:0},layer:d.Lowest,fixed:!1,fixedOffset:0,fixedSpacing:null,update:function(){}},isValid:!0,update:function(){}}},a._initModel=function(e){var t=this.adapter.getPrefab(e.data);if(!t)throw Error("预制体不能为空");if(t instanceof s){var n=t.getComponent(l);e.code=t.uuid,e.size={x:n.width,y:n.height},e.scale={x:n.node.scale.x,y:n.node.scale.y},e.anchorPoint={x:n.anchorPoint.x,y:n.anchorPoint.y}}else{var i=t.data.getComponent(l);e.code=t.data._prefab.fileId,e.size={x:i.width,y:i.height},e.scale={x:i.node.scale.x,y:i.node.scale.y},e.anchorPoint={x:i.anchorPoint.x,y:i.anchorPoint.y}}e.layoutSize={x:0,y:0},e.position={x:0,y:0},e.element={wrapBeforeMode:h.Wrap,wrapAfterMode:h.Nowrap,ignoreLayout:!1,placeholder:!1,minSize:{x:0,y:0},preferredSize:{x:0,y:0},flexibleSize:{x:0,y:0},layer:d.Lowest,fixed:!1,fixedOffset:0,fixedSpacing:null,update:function(){}},this.adapter.initElement(e.element,e.data)},a._copyModel=function(e,t){e.element.update=function(){};return function e(t,n){for(var i in t){var o=t[i];"data"!=i?"index"!=i&&(null!=o&&"object"==typeof o?(n[i]={},e(o,n[i])):n[i]=o):n[i]=o}}(e,t),t},n(r,[{key:"length",get:function(){return this._length}},{key:"modelList",get:function(){return this._modelList}}]),r}(c)).Event=y,f=_))||f);r._RF.pop()}}}));

System.register("chunks:///_virtual/MoveRigidBody.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,o,n,s,a,p,l,c,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized,n=t.createClass},function(t){s=t.cclegacy,a=t._decorator,p=t.Vec3,l=t.RigidBody,c=t.EPSILON,y=t.Component}],execute:function(){var d,u,h,g,_,f,v,m,b,B,M;s._RF.push({},"4e8cedkWeJDEZoUMtauac/M","MoveRigidBody",void 0);var w=a.ccclass,A=a.property,S=new p,z=new p;t("MoveRigidBody",(d=w("MoveRigidBody"),u=A({tooltip:"阻尼"}),h=A({tooltip:"重力"}),g=A({tooltip:"移动速度"}),_=A({tooltip:"速度比率"}),d((m=e((v=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,r(e,"damping",m,o(e)),r(e,"gravity",b,o(e)),r(e,"_speed",B,o(e)),r(e,"_ratio",M,o(e)),e._rigidBody=null,e._grounded=!0,e._curMaxSpeed=0,e._prevAngleY=0,e._stateX=0,e._stateZ=0,e._velocity=new p,e}i(e,t);var s=e.prototype;return s.start=function(){this._rigidBody=this.getComponent(l),this._prevAngleY=this.node.eulerAngles.y},s.stop=function(){this._stateX=0,this._stateZ=0,this._rigidBody.clearVelocity()},s.update=function(t){this.applyGravity(),this.applyDamping(t),this.grounded&&this.applyLinearVelocity(S,1)},s.applyGravity=function(){var t=this.gravity,e=this._rigidBody.mass;z.set(0,e*t,0),this._rigidBody.applyForce(z)},s.applyDamping=function(t){this._rigidBody.getLinearVelocity(z),z.lengthSqr()>c&&(z.multiplyScalar(Math.pow(1-this.damping,t)),this._rigidBody.setLinearVelocity(z))},s.applyLinearVelocity=function(t,e){if(this._stateX||this._stateZ){S.set(this._stateX,0,this._stateZ),S.normalize(),this._rigidBody.getLinearVelocity(z),p.scaleAndAdd(z,z,t,e);var i=this._curMaxSpeed,r=1;z.lengthSqr()>i&&(Math.abs(this.node.eulerAngles.y-this._prevAngleY)>=10&&(r=2),this._prevAngleY=this.node.eulerAngles.y,z.normalize(),z.multiplyScalar(i/r)),this._rigidBody.setLinearVelocity(z)}},n(e,[{key:"speed",get:function(){return this._speed},set:function(t){this._speed=t,this._curMaxSpeed=t*this.ratio}},{key:"ratio",get:function(){return this._ratio},set:function(t){this._ratio=t,this._curMaxSpeed=this.speed*t}},{key:"grounded",get:function(){return this._grounded}},{key:"velocity",get:function(){return this._velocity},set:function(t){this._velocity=t;var e=t.x,i=t.z;(e>0&&this._stateX<0||e<0&&this._stateX>0||i>0&&this._stateZ<0||i<0&&this._stateZ>0)&&this._rigidBody.clearVelocity(),this._stateX=e,this._stateZ=i}}]),e}(y)).prototype,"damping",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),b=e(v.prototype,"gravity",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-10}}),B=e(v.prototype,"_speed",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),e(v.prototype,"speed",[g],Object.getOwnPropertyDescriptor(v.prototype,"speed"),v.prototype),M=e(v.prototype,"_ratio",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),e(v.prototype,"ratio",[_],Object.getOwnPropertyDescriptor(v.prototype,"ratio"),v.prototype),f=v))||f));s._RF.pop()}}}));

System.register("chunks:///_virtual/MoveTo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Timer.ts","./Vec3Util.ts"],(function(t){var e,i,o,s,n,l,r,h;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,o=t._decorator,s=t.Node,n=t.Vec3,l=t.Component},function(t){r=t.Timer},function(t){h=t.Vec3Util}],execute:function(){var a;i._RF.push({},"5e22a+qWUpI6ZHSVRRj2DYT","MoveTo",void 0);var c=o.ccclass;o.property,t("MoveTo",c("MoveTo")(a=function(t){function i(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))||this).target=null,e.velocity=h.zero,e.speed=0,e.hasYAxis=!0,e.ns=s.NodeSpace.LOCAL,e.offset=0,e.offsetVector=null,e.onStart=null,e.onComplete=null,e.onChange=null,e.timer=new r,e.end=null,e}e(i,t);var o=i.prototype;return o.update=function(t){var e;if(console.assert(this.speed>0,"移动速度必须要大于零"),null!=(e=this.target instanceof s?this.ns==s.NodeSpace.WORLD?this.target.worldPosition:this.target.position:this.target)){if(null==this.end||!this.end.strictEquals(e)){var i,o=e.clone();this.offsetVector&&(o=o.add(this.offsetVector)),0==this.hasYAxis&&(o.y=0);var l=this.ns==s.NodeSpace.WORLD?this.node.worldPosition:this.node.position;this.velocity=h.sub(o,l).normalize();var r,a=n.distance(l,o)-this.offset;if(null==(i=this.onChange)||i.call(this),a<=0)return void this.exit();null==(r=this.onStart)||r.call(this),this.timer.step=a/this.speed,this.end=e.clone()}if(this.speed>0){var c=h.mul(this.velocity,this.speed*t);this.ns==s.NodeSpace.WORLD?this.node.worldPosition=h.add(this.node.worldPosition,c):this.node.position=h.add(this.node.position,c)}this.timer.update(t)&&(0==this.offset&&(this.ns==s.NodeSpace.WORLD?this.node.worldPosition=this.end:this.node.position=this.end),this.exit())}else this.exit()},o.exit=function(){var t;null==(t=this.onComplete)||t.call(this),this.destroy()},i}(l))||a);i._RF.pop()}}}));

System.register("chunks:///_virtual/MoveTranslate.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Vec3Util.ts"],(function(e){var t,o,r,n,c,s,a;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,r=e._decorator,n=e.Vec3,c=e.Node,s=e.Component},function(e){a=e.Vec3Util}],execute:function(){var i;o._RF.push({},"e626612zClLO4OZDEWvT+fr","MoveTranslate",void 0);var l=r.ccclass;r.property,e("MoveTranslate",l("MoveTranslate")(i=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))||this).velocity=a.zero,t.speed=0,t.vector=new n,t}return t(o,e),o.prototype.update=function(e){this.speed>0&&(n.multiplyScalar(this.vector,this.velocity,this.speed*e),this.node.translate(this.vector,c.NodeSpace.WORLD))},o}(s))||i);o._RF.pop()}}}));

System.register("chunks:///_virtual/NavLine.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,n,s,a,o,l,p,h,c,u,d,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,o=t.Node,l=t.MeshRenderer,p=t.Vec3,h=t.Vec2,c=t.v2,u=t.macro,d=t.Component,y=t.Color}],execute:function(){var f,m,b,v,g,w,N,_,z,P,x,D,M,E,L,R,C;s._RF.push({},"41dce0XCUNII74J0zSeaDUf","NavLine",void 0);var F=a.ccclass,O=a.property;t("NavLine",(f=F("NavLine - 导航钱组件"),m=O({type:o,displayName:"玩家模型节点"}),b=O({type:l,displayName:"箭头网格",tooltip:"拖MeshRenderer组件到这里"}),v=O({displayName:"导航线颜色"}),g=O({displayName:"执行间隔",tooltip:"多少帧执行一次，数值越大动画越流程，建议3-5",min:1}),w=O({displayName:"箭头速度",tooltip:"控制材质texture位移，数值越大动画播放越快",min:.1}),N=O({displayName:"箭头密度",tooltip:"控制箭头的密度，数值越大越密",min:.1}),_=O({displayName:"角度变化",tooltip:"箭头是否有 x 欧拉角度变化，有高度的地形引导开启"}),f((x=e((P=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,r(e,"player",x,n(e)),r(e,"mesh",D,n(e)),r(e,"color",M,n(e)),r(e,"interval",E,n(e)),r(e,"speed",L,n(e)),r(e,"density",R,n(e)),r(e,"xEuler",C,n(e)),e.mat=null,e.inited=!1,e.distance=0,e.frame=0,e.start_pos=new p,e.target_pos=new p,e.tOffset=new h(1,1),e}i(e,t);var s=e.prototype;return s.start=function(){this.mat=this.mesh.material,this.mat.setProperty("textureMoveSpeed",c(0,this.speed)),this.hide()},s.show=function(t){this.node.setRotationFromEuler(0,this.player.eulerAngles.y,0),this.mesh.node.active=!0,this.frame=0,this.inited=!0,this.mat.setProperty("mainColor",this.color),this.start_pos.set(this.player.worldPosition),this.target_pos.set(t),this.setDistance()},s.hide=function(){this.inited=!1,this.mesh.node.active=!1},s.setDistance=function(){this.distance=p.distance(this.target_pos,this.player.worldPosition),this.node.setScale(this.node.scale.x,this.node.scale.y,this.distance),this.node.setWorldPosition(this.player.worldPosition),this.tOffset.y=this.distance*this.density,this.mat.setProperty("tilingOffset",this.tOffset),this.xEuler&&this.rotation(this.start_pos,this.target_pos)},s.rotation=function(t,e){var i=Math.asin(Math.sin(Math.abs(e.y-t.y)/this.distance))*u.DEG%360,r=e.y-t.y>0?-i:i;this.node.setRotationFromEuler(r,this.player.eulerAngles.y,0)},s.update=function(t){this.inited&&(this.frame++,this.frame>=this.interval&&(this.setDistance(),this.frame=0))},e}(d)).prototype,"player",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(P.prototype,"mesh",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(P.prototype,"color",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y(255,0,0,255)}}),E=e(P.prototype,"interval",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),L=e(P.prototype,"speed",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),R=e(P.prototype,"density",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),C=e(P.prototype,"xEuler",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),z=P))||z));s._RF.pop()}}}));

System.register("chunks:///_virtual/NetInterface.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"d9f8b+CV69FyKwnUdCjOtad","NetInterface",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/NetManager.ts",["cc"],(function(n){var e;return{setters:[function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"d8cd5el6GBGTYTW+N8b8EuJ","NetManager",void 0),n("NetManager",function(){function n(){this._channels={}}n.getInstance=function(){return this._instance||(this._instance=new n),this._instance};var e=n.prototype;return e.setNetNode=function(n,e){void 0===e&&(e=0),this._channels[e]=n},e.removeNetNode=function(n){delete this._channels[n]},e.connect=function(n,e){return void 0===e&&(e=0),!!this._channels[e]&&this._channels[e].connect(n)},e.send=function(n,e,t){void 0===e&&(e=!1),void 0===t&&(t=0);var i=this._channels[t];return i?i.send(n,e):-1},e.request=function(n,e,t,i,s){void 0===t&&(t=!0),void 0===i&&(i=!1),void 0===s&&(s=0);var c=this._channels[s];c&&c.request(n,e,t,i)},e.requestUnique=function(n,e,t,i,s){void 0===t&&(t=!0),void 0===i&&(i=!1),void 0===s&&(s=0);var c=this._channels[s];return!!c&&c.requestUnique(n,e,t,i)},e.close=function(n,e,t){if(void 0===t&&(t=0),this._channels[t])return this._channels[t].closeSocket(n,e)},n}())._instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/NetNode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts"],(function(e){var t,s,i,n,o;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){s=e.cclegacy,i=e.error,n=e.warn},function(e){o=e.Logger}],execute:function(){s._RF.push({},"57f0fB90kNBUJ98yyu+jxjx","NetNode",void 0);var r=["已关闭","连接中","验证中","可传输数据"],c=e("NetTipsType",function(e){return e[e.Connecting=0]="Connecting",e[e.ReConnecting=1]="ReConnecting",e[e.Requesting=2]="Requesting",e}({})),l=e("NetNodeState",function(e){return e[e.Closed=0]="Closed",e[e.Connecting=1]="Connecting",e[e.Checking=2]="Checking",e[e.Working=3]="Working",e}({}));e("NetNode",function(){function e(){this._connectOptions=null,this._autoReconnect=0,this._isSocketInit=!1,this._isSocketOpen=!1,this._state=l.Closed,this._socket=null,this._networkTips=null,this._protocolHelper=null,this._connectedCallback=null,this._disconnectCallback=null,this._callbackExecuter=null,this._keepAliveTimer=null,this._receiveMsgTimer=null,this._reconnectTimer=null,this._heartTime=1e4,this._receiveTime=6e6,this._reconnetTimeOut=8e6,this._requests=Array(),this._listener={}}var s=e.prototype;return s.init=function(e,t,s,i){void 0===s&&(s=null),void 0===i&&(i=null),o.logNet("网络初始化"),this._socket=e,this._protocolHelper=t,this._networkTips=s,this._callbackExecuter=i||function(e,t){e.callback.call(e.target,t)}},s.connect=function(e){return!(!this._socket||this._state!=l.Closed)&&(this._isSocketInit||this.initSocket(),this._state=l.Connecting,this._socket.connect(e)?(null==this._connectOptions&&"number"==typeof e.autoReconnect&&(this._autoReconnect=e.autoReconnect),this._connectOptions=e,this.updateNetTips(c.Connecting,!0),!0):(this.updateNetTips(c.Connecting,!1),!1))},s.initSocket=function(){var e=this;this._socket&&(this._socket.onConnected=function(t){e.onConnected(t)},this._socket.onMessage=function(t){e.onMessage(t)},this._socket.onError=function(t){e.onError(t)},this._socket.onClosed=function(t){e.onClosed(t)},this._isSocketInit=!0)},s.updateNetTips=function(e,t){this._networkTips&&(e==c.Requesting?this._networkTips.requestTips(t):e==c.Connecting?this._networkTips.connectTips(t):e==c.ReConnecting&&this._networkTips.reconnectTips(t))},s.onConnected=function(e){var t=this;o.logNet("网络已连接"),this._isSocketOpen=!0,null!==this._connectedCallback?(this._state=l.Checking,this._connectedCallback((function(){t.onChecked()}))):this.onChecked(),o.logNet("网络已连接当前状态为【"+r[this._state]+"】")},s.onChecked=function(){o.logNet("连接验证成功，进入工作状态"),this._state=l.Working,this.updateNetTips(c.Connecting,!1),this.updateNetTips(c.ReConnecting,!1);var e=this._requests.concat();if(e.length>0){o.logNet("请求【"+this._requests.length+"】个待发送的信息");for(var t=0;t<e.length;){var s=e[t];this._socket.send(s.buffer),null==s.rspObject||""!=s.rspCmd?e.splice(t,1):++t}this.updateNetTips(c.Requesting,this._requests.length>0)}},s.onMessage=function(e){var s=JSON.parse(e);if(this._protocolHelper.checkResponsePackage(s)){this._protocolHelper.handlerResponsePackage(s)||this._networkTips&&this._networkTips.responseErrorCode(s.code),this.resetReceiveMsgTimer(),this.resetHearbeatTimer();var n=this._protocolHelper.getPackageId(s);if(o.logNet("接受到命令【"+n+"】的消息"),this._requests.length>0){for(var r in this._requests){var l=this._requests[r];if(l.rspCmd==n&&l.rspObject){o.logNet("触发请求命令【"+n+"】的回调"),this._callbackExecuter(l.rspObject,s.data),this._requests.splice(parseInt(r),1);break}}0==this._requests.length?this.updateNetTips(c.Requesting,!1):o.logNet("请求队列中还有【"+this._requests.length+"】个请求在等待")}var h=this._listener[n];if(null!=h)for(var u,a=t(h);!(u=a()).done;){var _=u.value;o.logNet("触发监听命令【"+n+"】的回调"),this._callbackExecuter(_,s.data)}}else i("校验接受消息数据异常")},s.onError=function(e){i(e)},s.onClosed=function(e){var t=this;this.clearTimer(),!this._disconnectCallback||this._disconnectCallback()?this.isAutoReconnect()?(this.updateNetTips(c.ReConnecting,!0),this._reconnectTimer=setTimeout((function(){t._socket.close(),t._state=l.Closed,t.connect(t._connectOptions),t._autoReconnect>0&&(t._autoReconnect-=1)}),this._reconnetTimeOut)):this._state=l.Closed:o.logNet("断开连接")},s.close=function(e,t){this.clearTimer(),this._listener={},this._requests.length=0,this._networkTips&&(this._networkTips.connectTips(!1),this._networkTips.reconnectTips(!1),this._networkTips.requestTips(!1)),this._socket?this._socket.close(e,t):this._state=l.Closed},s.closeSocket=function(e,t){this._socket&&this._socket.close(e,t)},s.send=function(e,t){return void 0===t&&(t=!1),this._state==l.Working||t?this._socket.send(e):this._state==l.Checking||this._state==l.Connecting?(this._requests.push({buffer:e,rspCmd:"",rspObject:null}),o.logNet("当前状态为【"+r[this._state]+"】,繁忙并缓冲发送数据"),0):(i("当前状态为【"+r[this._state]+"】,请求错误"),-1)},s.request=function(e,t,s,i){void 0===s&&(s=!0),void 0===i&&(i=!1);var n=this._protocolHelper.handlerRequestPackage(e);this.base_request(e,n,t,s,i)},s.requestUnique=function(e,t,s,i){void 0===s&&(s=!0),void 0===i&&(i=!1);for(var n=this._protocolHelper.handlerRequestPackage(e),r=0;r<this._requests.length;++r)if(this._requests[r].rspCmd==n)return o.logNet("命令【"+n+"】重复请求"),!1;return this.base_request(e,n,t,s,i),!0},s.base_request=function(e,t,s,i,n){void 0===i&&(i=!0),void 0===n&&(n=!1);var r=JSON.stringify(e);(this._state==l.Working||n)&&this._socket.send(r),o.logNet("队列命令为【"+t+"】的请求，等待请求数据的回调"),this._requests.push({buffer:r,rspCmd:t,rspObject:s}),i&&this.updateNetTips(c.Requesting,!0)},s.setResponeHandler=function(e,t,s){return null==t?(i("命令为【"+e+"】设置响应处理程序错误"),!1):(this._listener[e]=[{target:s,callback:t}],!0)},s.addResponeHandler=function(e,t,s){if(null==t)return i("命令为【"+e+"】添加响应处理程序错误"),!1;var n={target:s,callback:t};null==this._listener[e]?this._listener[e]=[n]:-1==this.getNetListenersIndex(e,n)&&this._listener[e].push(n);return!0},s.removeResponeHandler=function(e,t,s){if(null!=this._listener[e]&&null!=t){var i=this.getNetListenersIndex(e,{target:s,callback:t});-1!=i&&this._listener[e].splice(i,1)}},s.cleanListeners=function(e){void 0===e&&(e=""),""==e?this._listener={}:delete this._listener[e]},s.getNetListenersIndex=function(e,t){for(var s=-1,i=0;i<this._listener[e].length;i++){var n=this._listener[e][i];if(n.callback==t.callback&&n.target==t.target){s=i;break}}return s},s.resetReceiveMsgTimer=function(){var e=this;null!==this._receiveMsgTimer&&clearTimeout(this._receiveMsgTimer),this._receiveMsgTimer=setTimeout((function(){n("接收消息定时器关闭网络连接"),e._socket.close()}),this._receiveTime)},s.resetHearbeatTimer=function(){var e=this;null!==this._keepAliveTimer&&clearTimeout(this._keepAliveTimer),this._keepAliveTimer=setTimeout((function(){o.logNet("网络节点保持活跃发送心跳信息"),e.send(e._protocolHelper.getHearbeat())}),this._heartTime)},s.clearTimer=function(){null!==this._receiveMsgTimer&&clearTimeout(this._receiveMsgTimer),null!==this._keepAliveTimer&&clearTimeout(this._keepAliveTimer),null!==this._reconnectTimer&&clearTimeout(this._reconnectTimer)},s.isAutoReconnect=function(){return 0!=this._autoReconnect},s.rejectReconnect=function(){this._autoReconnect=0,this.clearTimer()},e}());s._RF.pop()}}}));

System.register("chunks:///_virtual/NetProtocolPako.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"88ae0lIg5BFWb1O1E8/Etwi","NetProtocolPako",void 0);t("NetProtocolPako",function(){function t(){}var e=t.prototype;return e.getHeadlen=function(){return 0},e.getHearbeat=function(){return""},e.getPackageLen=function(t){return t.toString().length},e.checkResponsePackage=function(t){return!0},e.handlerResponsePackage=function(t){return 1==t.code&&(t.isCompress&&(t.data=(e=t.data,n=e.split("").map((function(t){return t.charCodeAt(0)})),a=new Uint8Array(n),pako.inflate(a,{to:"string"}))),t.data=JSON.parse(t.data),!0);var e,n,a},e.handlerRequestPackage=function(t){var e,n=t.action+"_"+t.method;return t.callback=n,t.isCompress&&(t.data=(e=t.data,pako.gzip(e,{to:"string"}))),n},e.getPackageId=function(t){return t.callback},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/NetProtocolProtobuf.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"5714auyGttOSrOXeVsvIAUz","NetProtocolProtobuf",void 0);t("NetProtocolProtobuf",function(){function t(){}var e=t.prototype;return e.getHeadlen=function(){return 0},e.getHearbeat=function(){return""},e.getPackageLen=function(t){return t.toString().length},e.checkResponsePackage=function(t){return!0},e.handlerResponsePackage=function(t){return 1==t.code&&(t.isCompress,t.data=JSON.parse(t.data),!0)},e.handlerRequestPackage=function(t){var e=t.action+"_"+t.method;return t.callback=e,t.isCompress,e},e.getPackageId=function(t){return t.callback},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Notify.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageLabel.ts"],(function(n){var t,e,i,o,a,r,l,c,s,u;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,l=n.Label,c=n.Animation,s=n.Component},function(n){u=n.LanguageLabel}],execute:function(){var p,f,b,h,y,d,g;a._RF.push({},"01391Mp6X1Gn554rkzavN4K","Notify",void 0);var m=r.ccclass,v=r.property;n("Notify",(p=m("Notify"),f=v(l),b=v(c),p((d=t((y=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return t=n.call.apply(n,[this].concat(a))||this,i(t,"lab_content",d,o(t)),i(t,"animation",g,o(t)),t}e(t,n);var a=t.prototype;return a.onLoad=function(){this.animation&&this.animation.on(c.EventType.FINISHED,this.onFinished,this)},a.onFinished=function(){this.node.destroy()},a.toast=function(n,t){var e=this.lab_content.getComponent(u);t?(e.enabled=!0,e.dataID=n):(e.enabled=!1,this.lab_content.string=n)},t}(s)).prototype,"lab_content",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(y.prototype,"animation",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=y))||h));a._RF.pop()}}}));

System.register("chunks:///_virtual/ObjectUtil.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"86827QLFSRM7Zojsx0WqWuQ","ObjectUtil",void 0);t("ObjectUtil",function(){function t(){}return t.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},t.deepCopy=function(t){if(null==t||"object"!=typeof t)return t;var e=null;if(t instanceof Date)return(e=new Date).setTime(t.getTime()),e;if(t instanceof Array){e=[];for(var n=0,r=t.length;n<r;n++)e[n]=this.deepCopy(t[n]);return e}if(t instanceof Object){for(var c in e={},t)t.hasOwnProperty(c)&&(e[c]=this.deepCopy(t[c]));return e}console.warn("不支持的类型："+e)},t.copy=function(t){return JSON.parse(JSON.stringify(t))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Oops.ts",["cc","./ECS.ts","./HttpRequest.ts","./NetManager.ts","./Config.ts","./MessageManager.ts","./ResLoader.ts","./Logger.ts","./RandomManager.ts","./StorageManager.ts"],(function(e){var n,t,o,a,s,g,i,c,r,u;return{setters:[function(e){n=e.cclegacy},function(e){t=e.ecs},function(e){o=e.HttpRequest},function(e){a=e.NetManager},function(e){s=e.Config},function(e){g=e.MessageManager},function(e){i=e.ResLoader},function(e){c=e.Logger},function(e){r=e.RandomManager},function(e){u=e.StorageManager}],execute:function(){n._RF.push({},"cbae5wzfSZGzZMuyeAetSfg","Oops",void 0);e("version","1.1.3");var f=e("oops",(function(){}));f.log=c,f.config=new s,f.message=g.Instance,f.random=r.instance,f.storage=new u,f.timer=void 0,f.audio=void 0,f.gui=void 0,f.game=void 0,f.res=new i,f.language=void 0,f.http=new o,f.tcp=new a,f.ecs=new t.RootSystem,n._RF.pop()}}}));

System.register("chunks:///_virtual/OrbitCamera.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,o,r,a,n,s,u,l,h,c,p,g,R,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,a=t.createClass},function(t){n=t.cclegacy,s=t._decorator,u=t.Vec3,l=t.Quat,h=t.Node,c=t.input,p=t.Input,g=t.lerp,R=t.Component,_=t.Vec2}],execute:function(){var d,f,b,y,w,m,S,T,v,x,z,E,O,C,D,M,P,Y,A,k,U,j,H,W,F,Q,L,N,V,B,I;n._RF.push({},"4e454G/OQ1NB7tjzAUf269U","OrbitCamera",void 0);var X=s.ccclass,G=s.property,q=new u,J=new u,K=new l;t("OrbitCamera",(d=X("OrbitCamera"),f=G({tooltip:"是否启动触摸控制"}),b=G({tooltip:"是否开启启用缩放半径（鼠标滚轮控制摄像机与目标距离）"}),y=G({tooltip:"摄像机与目标的半径缩放速度",visible:function(){return!0===this.enableScaleRadius}}),w=G({tooltip:"摄像机与目标的半径最小值",visible:function(){return!0===this.enableScaleRadius}}),m=G({tooltip:"摄像机与目标的半径最大值",visible:function(){return!0===this.enableScaleRadius}}),S=G({tooltip:"自动旋转是否开启"}),T=G({tooltip:"自动旋转速度",visible:function(){return!0===this.autoRotate}}),v=G({tooltip:"旋转速度"}),x=G({tooltip:"跟随速度"}),z=G({tooltip:"X轴旋转范围（人物上下看的角度控制）"}),E=G({tooltip:"摄像机与目标的距离（以玩家为中心环绕球半径）"}),O=G({type:h,tooltip:"跟随目标"}),C=G({type:u,tooltip:"目标旋转偏移量（初始旋转向量）"}),D=G({tooltip:"是否跟随目标 Y 轴旋转"}),d((Y=e((P=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return e=t.call.apply(t,[this].concat(a))||this,o(e,"enableTouch",Y,r(e)),o(e,"enableScaleRadius",A,r(e)),o(e,"radiusScaleSpeed",k,r(e)),o(e,"minRadius",U,r(e)),o(e,"maxRadius",j,r(e)),o(e,"autoRotate",H,r(e)),o(e,"autoRotateSpeed",W,r(e)),o(e,"rotateSpeed",F,r(e)),o(e,"followSpeed",Q,r(e)),o(e,"xRotationRange",L,r(e)),o(e,"_targetRadius",N,r(e)),o(e,"_target",V,r(e)),o(e,"_startRotation",B,r(e)),o(e,"followTargetRotationY",I,r(e)),e._center=new u,e._targetCenter=new u,e._touched=!1,e._targetRotation=new u,e._rotation=new l,e._radius=10,e}i(e,t);var n=e.prototype;return n.start=function(){this.enableTouch&&(c.on(p.EventType.TOUCH_START,this.onTouchStart,this),c.on(p.EventType.TOUCH_MOVE,this.onTouchMove,this),c.on(p.EventType.TOUCH_END,this.onTouchEnd,this)),this.enableScaleRadius&&c.on(p.EventType.MOUSE_WHEEL,this.onMouseWheel,this),this.target&&this.resetTargetRotation(),l.fromEuler(this._rotation,this._targetRotation.x,this._targetRotation.y,this._targetRotation.z),this.target&&(this._targetCenter.set(this.target.worldPosition),this._center.set(this._targetCenter)),this._radius=this.radius,this.limitRotation()},n.resetTargetRotation=function(){var t=this._targetRotation.set(this._startRotation);this.followTargetRotationY&&(t=J.set(t),l.toEuler(q,this.target.worldRotation),t.add(q))},n.limitRotation=function(){var t=this._targetRotation;t.x<this.xRotationRange.x?t.x=this.xRotationRange.x:t.x>this.xRotationRange.y&&(t.x=this.xRotationRange.y),t.z=0},n.onTouchStart=function(){this._touched=!0},n.onTouchMove=function(t){if(this._touched){var e=t.touch.getDelta();l.fromEuler(K,this._targetRotation.x,this._targetRotation.y,this._targetRotation.z),l.rotateX(K,K,.005*-e.y),l.rotateY(K,K,.005*-e.x),l.toEuler(this._targetRotation,K),this.limitRotation()}},n.onTouchEnd=function(){this._touched=!1},n.onMouseWheel=function(t){var e=t.getScrollY();this._targetRadius+=this.radiusScaleSpeed*-Math.sign(e),this._targetRadius=Math.min(this.maxRadius,Math.max(this.minRadius,this._targetRadius))},n.update=function(t){var e=this._targetRotation;this.autoRotate&&!this._touched&&(e.y+=this.autoRotateSpeed*t),this.target&&(this._targetCenter.set(this.target.worldPosition),this.followTargetRotationY&&(e=J.set(e),l.toEuler(q,this.target.worldRotation),e.y+=q.y)),l.fromEuler(K,e.x,e.y,e.z),l.slerp(this._rotation,this._rotation,K,7*t*this.rotateSpeed),u.lerp(this._center,this._center,this._targetCenter,5*t*this.followSpeed),this._radius=g(this._radius,this._targetRadius,5*t),u.transformQuat(q,u.FORWARD,this._rotation),u.multiplyScalar(q,q,this._radius),q.add(this._center),this.node.position=q,this.node.lookAt(this._center)},n.follow=function(){var t=this._targetRotation;this.target&&(this._targetCenter.set(this.target.worldPosition),this.followTargetRotationY&&(t=J.set(t),l.toEuler(q,this.target.worldRotation),t.y+=q.y)),l.fromEuler(K,t.x,t.y,t.z),this._rotation=K,this._center=this._targetCenter,this._radius=this._targetRadius,u.transformQuat(q,u.FORWARD,this._rotation),u.multiplyScalar(q,q,this._radius),q.add(this._center),this.node.position=q,this.node.lookAt(this._center)},a(e,[{key:"radius",get:function(){return this._targetRadius},set:function(t){this._targetRadius=t}},{key:"target",get:function(){return this._target},set:function(t){this._target=t,this._targetRotation.set(this._startRotation),this._targetCenter.set(t.worldPosition)}},{key:"targetRotation",get:function(){return this._startRotation.set(this._targetRotation),this._startRotation},set:function(t){this._targetRotation.set(t),this._startRotation.set(t)}}]),e}(R)).prototype,"enableTouch",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),A=e(P.prototype,"enableScaleRadius",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=e(P.prototype,"radiusScaleSpeed",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),U=e(P.prototype,"minRadius",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),j=e(P.prototype,"maxRadius",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),H=e(P.prototype,"autoRotate",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),W=e(P.prototype,"autoRotateSpeed",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 90}}),F=e(P.prototype,"rotateSpeed",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Q=e(P.prototype,"followSpeed",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),L=e(P.prototype,"xRotationRange",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new _(5,70)}}),N=e(P.prototype,"_targetRadius",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),e(P.prototype,"radius",[E],Object.getOwnPropertyDescriptor(P.prototype,"radius"),P.prototype),V=e(P.prototype,"_target",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(P.prototype,"target",[O],Object.getOwnPropertyDescriptor(P.prototype,"target"),P.prototype),B=e(P.prototype,"_startRotation",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),e(P.prototype,"targetRotation",[C],Object.getOwnPropertyDescriptor(P.prototype,"targetRotation"),P.prototype),I=e(P.prototype,"followTargetRotationY",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=P))||M));n._RF.pop()}}}));

System.register("chunks:///_virtual/PageViewManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./enum.ts","./ScrollManager.ts","./ViewManager.ts"],(function(e){var t,n,i,r,a,o,s,l,h,c,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.createClass},function(e){o=e.cclegacy,s=e._decorator},function(e){l=e.Manager},function(e){h=e.AlwaysScroll},function(e){c=e.ScrollManager},function(e){g=e.ViewManager}],execute:function(){var u,d,_,p,f,b,E,T,O,v,L,S,P,N;o._RF.push({},"9a9b8/q4JFHHb650TtGE+gS","PageViewManager",void 0);var M=s.ccclass,x=s.property,I=function(e){return e[e.ON_PAGE_LENGTH_CHANGED=0]="ON_PAGE_LENGTH_CHANGED",e[e.ON_SCROLL_PAGE_BEFOR=1]="ON_SCROLL_PAGE_BEFOR",e[e.ON_SCROLL_PAGE_END=2]="ON_SCROLL_PAGE_END",e}(I||{});e("PageViewManager",(u=M("PageViewManager"),d=x("boolean"),_=x({range:[0,1],slide:!0,step:.01,visible:function(){return this.enabled},tooltip:"滚动临界值，默认单位百分比，当拖拽超出该数值时，松开会自动滚动下一页，小于时则还原"}),p=x({range:[0,1],slide:!0,step:.01,visible:function(){return this.enabled},tooltip:"设置 PageView PageTurning 事件的发送时机"}),f=x({visible:function(){return this.enabled},tooltip:"快速滑动翻页临界值\n        当用户快速滑动时，会根据滑动开始和结束的距离与时间计算出一个速度值\n        该值与此临界值相比较，如果大于临界值，则进行自动翻页"}),b=x({visible:function(){return this.enabled},tooltip:"每个页面翻页时所需时间。单位：秒"}),u(((N=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"_enabled",O,r(t)),i(t,"scrollThreshold",v,r(t)),i(t,"pageTurningEventTiming",L,r(t)),i(t,"autoPageTurningThreshold",S,r(t)),i(t,"pageTurningSpeed",P,r(t)),t._currentIndex=0,t}n(t,e);var o=t.prototype;return o.onInit=function(){this._register()},o._register=function(){this.adapter&&this.enabled&&(this.adapter.scrollManager.on(c.Event.ON_SCROLL_END,this._handleReleaseLogic,this),this.adapter.scrollManager.on(c.Event.ON_SCROLL_CANCEL,this._handleReleaseLogic,this),this.adapter.scrollManager.on(c.Event.ON_SCROLL_TO_GROUPINDEX_BEFOR,this._onScrollToIndex,this),this.adapter.viewManager.on(g.Event.ON_UPDATE_VIEWS,this._onUpdateViews,this,!0))},o._unregister=function(){this.adapter&&!this.enabled&&(this.adapter.scrollManager.off(c.Event.ON_SCROLL_END,this._handleReleaseLogic,this),this.adapter.scrollManager.off(c.Event.ON_SCROLL_CANCEL,this._handleReleaseLogic,this),this.adapter.scrollManager.off(c.Event.ON_SCROLL_TO_GROUPINDEX_BEFOR,this._onScrollToIndex,this),this.adapter.viewManager.off(g.Event.ON_UPDATE_VIEWS,this._onUpdateViews,this))},o.scrollToPage=function(e,t,n){t<0||t>=this.length||t==this.currentIndex&&0!=this.adapter.scrollManager.calcOffset()||(this.adapter.scrollManager.scrollToGroupIndex(e,t,n),this.emit(I.ON_SCROLL_PAGE_BEFOR,t))},o.scrollToPrevPage=function(e,t){void 0===e&&(e=this.pageTurningSpeed),void 0===t&&(t=h.Header),0!=this._currentIndex?this.scrollToPage(e,this._currentIndex-1,t):this.adapter.viewManager.loopHeader&&this.scrollToPage(e,this.length-1,t)},o.scrollToNextPage=function(e,t){void 0===e&&(e=this.pageTurningSpeed),void 0===t&&(t=h.Footer),this._currentIndex>=this.length-1?this.adapter.viewManager.loopFooter&&this.scrollToPage(e,0,t):this.scrollToPage(e,this._currentIndex+1,t)},o._onUpdateViews=function(){this.emit(I.ON_PAGE_LENGTH_CHANGED),this._currentIndex=0,this.scrollToPage(this.pageTurningSpeed,this._currentIndex)},o._onScrollToIndex=function(e){this._currentIndex=e,this.emit(I.ON_SCROLL_PAGE_END,e)},o._handleReleaseLogic=function(e){if(this._enabled&&this.adapter.scrollManager.isMyEventAndMoved){var t=e.getUIStartLocation()[this.adapter.mainAxis]-e.getUILocation()[this.adapter.mainAxis],n=this._getNextIndex(t);this._isScrollable(t)||this._isQuicklyScrollable(this.adapter.scrollManager.velocity)?this.scrollToPage(this.pageTurningSpeed,n):this.scrollToPage(this.pageTurningSpeed,this._currentIndex)}},o._getNextIndex=function(e){var t=this._currentIndex;return this.adapter.isHorizontal?this.adapter.isArrangeAxisStart?e>0?t++:e<0&&t--:(e<0&&t++,e>0&&t--):this.adapter.isArrangeAxisStart?e<0?t++:e>0&&t--:e>0?t++:e<0&&t--,t>=this.length&&this.adapter.viewManager.loopFooter?t=0:t<0&&this.adapter.viewManager.loopHeader&&(t=this.length-1),(t<0||t>=this.length)&&(t=this._currentIndex),t},o._isScrollable=function(e){return Math.abs(e)>=this.adapter.mainAxisSize*this.scrollThreshold},o._isQuicklyScrollable=function(e){return Math.abs(e)>this.autoPageTurningThreshold},a(t,[{key:"enabled",get:function(){return this._enabled},set:function(e){e!=this._enabled&&(this._enabled=e,this._enabled?this._register():this._unregister())}},{key:"currentIndex",get:function(){return this._currentIndex}},{key:"length",get:function(){return this.adapter.viewManager.groupLength}}]),t}(l)).Event=I,O=t((T=N).prototype,"_enabled",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(T.prototype,"enabled",[d],Object.getOwnPropertyDescriptor(T.prototype,"enabled"),T.prototype),v=t(T.prototype,"scrollThreshold",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),L=t(T.prototype,"pageTurningEventTiming",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),S=t(T.prototype,"autoPageTurningThreshold",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),P=t(T.prototype,"pageTurningSpeed",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),E=T))||E));o._RF.pop()}}}));

System.register("chunks:///_virtual/PhysicsUtil.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"c1584nuvI9HtJ5IHcmFEBzR","PhysicsUtil",void 0);var i=e("GroupItem",function(){function e(e,t){this._value=void 0,this._name=void 0,this._value=e,this._name=t}return t(e,[{key:"value",get:function(){return this._value}},{key:"name",get:function(){return this._name}},{key:"mask",get:function(){return 1<<this._value}}]),e}()),u=e("PhysicsUtil",function(){function e(){}return e.setNodeLayer=function(t,n){n.layer=t.mask,n.children.forEach((function(n){n.layer=t.mask,e.setNodeLayer(t,n)}))},e}());u.DEFAULT=new i(0,"DEFAULT"),u.GAME_OBJECT_SELECT=new i(1,"GAME_OBJECT_SELECT"),u.GAME_OWNER=new i(2,"GAME_OWNER"),n._RF.pop()}}}));

System.register("chunks:///_virtual/PlatformUtil.ts",["cc"],(function(t){var i,n,r;return{setters:[function(t){i=t.cclegacy,n=t.native,r=t.sys}],execute:function(){i._RF.push({},"c08229jnmdPP5vR721N6GG9","PlatformUtil",void 0);t("PlatformUtil",function(){function t(){}return t.isNativeAndroid=function(){return void 0!==n&&!(!r.isNative||r.platform!==r.Platform.ANDROID)},t.isNativeIOS=function(){return void 0!==n&&!(!r.isNative||r.os!==r.OS.IOS)},t.getPlateform=function(){return this.isNativeAndroid()?"android":this.isNativeIOS()?"ios":"h5"},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts","./PlayerModel.ts"],(function(t){var e,r,n,o;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy},function(t){n=t.ecs},function(t){o=t.PlayerModelComp}],execute:function(){var i;r._RF.push({},"f6141DHB4VOqJ3c011y/7UV","Player",void 0);t("Player",n.register("Player")(i=function(t){function r(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).PlayerModel=void 0,e}e(r,t);var n=r.prototype;return n.init=function(){this.addComponents(o)},n.destroy=function(){t.prototype.destroy.call(this),this.PlayerModel.reset()},r}(n.Entity))||i),t("EcsPlayerSystem",function(t){function r(){return t.call(this)||this}return e(r,t),r}(n.System));r._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerModel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts","./ViewModel.ts"],(function(e){var t,n,i,r,s;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){i=e.cclegacy},function(e){r=e.ecs},function(e){s=e.VM}],execute:function(){var o;i._RF.push({},"e806cigiS9EZ6RQDMF6q8Lw","PlayerModel",void 0);e("PlayerModelComp",r.register("PlayerModel")(o=function(e){function i(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).vm={maxHealth:100,health:100,defense:0},t.pickCount=0,t.cardList=[],t.currentResult=[],t}t(i,e);var r=i.prototype;return r.vmAdd=function(){s.add(this.vm,"PlayerModel")},r.vmRemove=function(){s.remove("PlayerModel")},r.removeCard=function(e){var t=this.cardList.indexOf(e);t>=0&&this.cardList.splice(t,1);var n=this.currentResult.indexOf(e);n>=0&&this.currentResult.splice(n,1)},r.getEmptySlot=function(){for(var e=0;e<this.currentResult.length;e++)if(null==this.currentResult[e])return e;return-1},r.reset=function(){for(var e in this.vm)delete this.vm[e];this.vmRemove(),this.pickCount=0,this.cardList=[],this.defense=0,this.health=0,this.maxHealth=0},n(i,[{key:"health",get:function(){return this.vm.health},set:function(e){this.vm.health=e}},{key:"maxHealth",get:function(){return this.vm.maxHealth},set:function(e){this.vm.maxHealth=e}},{key:"defense",get:function(){return this.vm.defense},set:function(e){this.vm.defense=e}}]),i}(r.Comp))||o);i._RF.pop()}}}));

System.register("chunks:///_virtual/PolygonMask.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,n,e,s,i,r,l;return{setters:[function(o){t=o.inheritsLoose},function(o){n=o.cclegacy,e=o._decorator,s=o.PolygonCollider2D,i=o.Mask,r=o.error,l=o.Component}],execute:function(){var p;n._RF.push({},"ac3c6WAsQlPmJUk8veTbkoW","PolygonMask",void 0);var a=e.ccclass,c=(e.property,e.executeInEditMode),y=e.requireComponent;o("PolygonMask",a("PolygonMask")(p=c(p=y([s,i])(p=function(o){function n(){for(var t,n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];return(t=o.call.apply(o,[this].concat(e))||this).mask=null,t.polygon=null,t}t(n,o);var e=n.prototype;return e.onLoad=function(){var o=this;if(this.mask=this.getComponent(i),this.polygon=this.getComponent(s),this.mask.type===i.Type.GRAPHICS_STENCIL){var t=this.polygon._points;Object.defineProperty(this.polygon,"_points",{get:function(){return t},set:function(n){t=n,o.draw()}})}else r("PolygonMask: mask type must be graphics_stencil")},e.draw=function(){if(this.mask.type===i.Type.GRAPHICS_STENCIL){var o=this.mask.subComp;o.clear(),o.moveTo(this.polygon.points[0].x,this.polygon.points[0].y);for(var t=1;t<this.polygon.points.length;++t)o.lineTo(this.polygon.points[t].x,this.polygon.points[t].y);o.close(),o.stroke(),o.fill()}},n}(l))||p)||p)||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/Priority.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BranchNode.ts"],(function(t){var i,s,c;return{setters:[function(t){i=t.inheritsLoose},function(t){s=t.cclegacy},function(t){c=t.BranchNode}],execute:function(){s._RF.push({},"f7555DSpj9LbYpRDi8/UKdN","Priority",void 0);t("Priority",function(t){function s(){return t.apply(this,arguments)||this}i(s,t);var c=s.prototype;return c.success=function(){t.prototype.success.call(this),this._control.success()},c.fail=function(){t.prototype.fail.call(this),this._actualTask+=1,this._actualTask<this.children.length?this._run(this._blackboard):this._control.fail()},s}(c));s._RF.pop()}}}));

System.register("chunks:///_virtual/RandomManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"3e09eJBwfZBsLPqFszZLvMS","RandomManager",void 0),t("RandomManager",function(){function t(){this.isClient=!0,this.isGlobal=!1,this.random=null}var e=t.prototype;return e.getRandom=function(){return this.isGlobal?Math.random():this.random()},e.setSeed=function(t){if(this.isClient)Math.seedrandom&&(this.isGlobal?new Math.seedrandom(t,{global:!0}):this.random=new Math.seedrandom(t));else{var n=require("seedrandom");this.isGlobal?new n(t,{global:!0}):this.random=new n(t)}},e.getRandomFloat=function(t,n){return void 0===t&&(t=0),void 0===n&&(n=1),this.getRandom()*(n-t)+t},e.getRandomInt=function(t,n,e){switch(void 0===e&&(e=2),t=Math.ceil(t),n=Math.floor(n),e){case 1:return Math.floor(this.getRandom()*(n-t))+t;case 2:return Math.floor(this.getRandom()*(n-t+1))+t;case 3:return Math.floor(this.getRandom()*(n-t-1))+t+1}return 0},e.getRandomByMinMaxList=function(t,n,e){for(var a=[],o=0;o<e;o++)a.push(this.getRandomInt(t,n));return a},e.getRandomByObjectList=function(t,n){for(var e=this.shuffleArray(t).slice(0,n);e.length<n;)e.push(void 0);return e},e.shuffleArray=function(t){for(var n=t.slice(),e=[];n.length>0;){var a=Math.floor(this.getRandom()*n.length);e.push(n.splice(a,1)[0])}return e},e.getRandomBySumList=function(t,n){for(var e=n,a=0,o=[],i=0;i<t;i++)a=this.getRandomInt(0,e,3),i==t-1?a=e:e-=a,o.push(a);return o},n(t,null,[{key:"instance",get:function(){return null==this._instance&&(this._instance=new t,this._instance.random=Math.random),this._instance}}]),t}())._instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/RegexUtil.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"dec9bVPigFCmKy5NVk+0y7h","RegexUtil",void 0);e("RegexUtil",function(){function e(){}return e.isDoubleWord=function(e){return/[^\x00-\xff]/.test(e)},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/ReleaseManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./enum.ts","./ScrollManager.ts"],(function(t){var e,i,a,s,n,r,o,l,h,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.createClass,a=t.inheritsLoose,s=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator},function(t){l=t.Manager},function(t){h=t.ReleaseState},function(t){p=t.ScrollManager}],execute:function(){var _,u,c,d,f,g,L,b,v,S,E,m,R,w;r._RF.push({},"584779mBRhND6eHOQ3xrp/1","ReleaseManager",void 0);var y=o.ccclass,M=o.property,O=function(t){return t[t.ON_PULL_UP=0]="ON_PULL_UP",t[t.ON_PULL_DOWN=1]="ON_PULL_DOWN",t[t.ON_PULL_LEFT=2]="ON_PULL_LEFT",t[t.ON_PULL_RIGHT=3]="ON_PULL_RIGHT",t}(O||{}),U=(t("ReleaseManager",(_=y("ReleaseManager"),u=M("boolean"),c=M({range:[0,1],slide:!0,step:.01,visible:function(){return this.enabled},tooltip:"根据此阈值来切换state状态"}),d=M({range:[0,1],slide:!0,step:.01,visible:function(){return this.enabled},tooltip:"根据此阈值来切换state状态"}),f=M({range:[0,1],slide:!0,step:.01,visible:function(){return this.enabled},tooltip:"根据此阈值来切换state状态"}),g=M({range:[0,1],slide:!0,step:.01,visible:function(){return this.enabled},tooltip:"根据此阈值来切换state状态"}),_(((w=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,s(e,"_enabled",v,n(e)),s(e,"left",S,n(e)),s(e,"right",E,n(e)),s(e,"top",m,n(e)),s(e,"bottom",R,n(e)),e._pullUp=void 0,e._pullDown=void 0,e._pullLeft=void 0,e._pullRight=void 0,e}a(e,t);var r=e.prototype;return r.onInit=function(){this.enabled&&(this._pullUp=new U(this,O.ON_PULL_UP,this.bottom),this._pullDown=new U(this,O.ON_PULL_DOWN,this.top),this._pullLeft=new U(this,O.ON_PULL_LEFT,this.right),this._pullRight=new U(this,O.ON_PULL_RIGHT,this.left),this.adapter.scrollManager.on(p.Event.ON_SCROLL_START,this.onScrollStart,this),this.adapter.scrollManager.on(p.Event.ON_SCROLL_END,this.onScrollEnd,this),this.adapter.scrollManager.on(p.Event.ON_SCROLL_CANCEL,this.onScrollEnd,this),this.checkLoop())},r.checkLoop=function(){this.adapter.isHorizontal?this.adapter.isArrangeAxisStart?(this.left>0&&(this.adapter.viewManager.loopHeader=!1),this.right>0&&(this.adapter.viewManager.loopFooter=!1)):(this.left>0&&(this.adapter.viewManager.loopFooter=!1),this.right>0&&(this.adapter.viewManager.loopHeader=!1)):this.adapter.isArrangeAxisStart?(this.top>0&&(this.adapter.viewManager.loopHeader=!1),this.bottom>0&&(this.adapter.viewManager.loopFooter=!1)):(this.top>0&&(this.adapter.viewManager.loopFooter=!1),this.bottom>0&&(this.adapter.viewManager.loopHeader=!1))},r.onScrollStart=function(){this.adapter.isHorizontal?(this.left>0&&this._pullRight._setState(h.IDLE),this.right>0&&this._pullLeft._setState(h.IDLE)):(this.top>0&&this._pullDown._setState(h.IDLE),this.bottom>0&&this._pullUp._setState(h.IDLE))},r.onScrollEnd=function(){this.adapter.isHorizontal?(this.left>0&&this._pullRight._setState(h.RELEASE),this.right>0&&this._pullLeft._setState(h.RELEASE)):(this.top>0&&this._pullDown._setState(h.RELEASE),this.bottom>0&&this._pullUp._setState(h.RELEASE))},r.internal_lateUpdate=function(t){if(this.enabled){var e=this.adapter.scrollManager.boundaryOffset;this.adapter.scrollManager.dragging||(e=0),this.adapter.isHorizontal?(this.left>0&&this._pullRight._set(Math.max(-e,0),e<0),this.right>0&&this._pullLeft._set(Math.max(e,0),e>0)):(this.top>0&&this._pullDown._set(Math.max(e,0),e>0),this.bottom>0&&this._pullUp._set(Math.max(-e,0),e<0))}},i(e,[{key:"enabled",get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t)}},{key:"max",get:function(){return this.enabled?this.adapter.isHorizontal?this._pullLeft?this._pullLeft.expand:0:this._pullDown?this._pullDown.expand:0:0}},{key:"min",get:function(){return this.enabled?this.adapter.isHorizontal?this._pullRight?this._pullRight.expand:0:this._pullUp?this._pullUp.expand:0:0}}]),e}(l)).Event=O,v=e((b=w).prototype,"_enabled",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(b.prototype,"enabled",[u],Object.getOwnPropertyDescriptor(b.prototype,"enabled"),b.prototype),S=e(b.prototype,"left",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=e(b.prototype,"right",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=e(b.prototype,"top",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=e(b.prototype,"bottom",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=b))||L)),t("ReleaseEvent",function(){function t(t,e,i){this._expand=0,this._progress=0,this._offset=0,this._state=void 0,this._defaultPercentage=void 0,this._manager=void 0,this._event=void 0,this._stop=void 0,this._defaultPercentage=i,this._manager=t,this._event=e}var e=t.prototype;return e._set=function(t,e){e&&(this._stop=!1),this._stop||(this._offset=t,this._progress=t/(this._defaultPercentage*this._manager.adapter.mainAxisSize),this._stop=this._offset<=.1,this._setState(h.PULL),this._manager.emit(this._event,this))},e._setState=function(t){this._state!=h.WAIT&&(t==h.PULL&&this._state==h.RELEASE||(this._state=t))},e.wait=function(t){void 0===t&&(t=this._defaultPercentage*this._manager.adapter.mainAxisSize),this._expand=t,this._state=h.WAIT},e.release=function(){this._expand=0,this._state=h.IDLE,this.offset<=.1&&(this._offset=0,this._progress=0,this._manager.emit(this._event,this))},i(t,[{key:"expand",get:function(){return this._expand}},{key:"progress",get:function(){return this._progress}},{key:"offset",get:function(){return this._offset}},{key:"state",get:function(){return this._state}}]),t}()));r._RF.pop()}}}));

System.register("chunks:///_virtual/reportEvent.ts",["cc","./umami.ts"],(function(t){var n,e;return{setters:[function(t){n=t.cclegacy},function(t){e=t.Umami}],execute:function(){n._RF.push({},"08759HtmWxDyacBEZe/GWcd","reportEvent",void 0);t("ReportEvent",function(){function t(){}return t.init=function(t){e.init(t.host,t.website_id),console.log("Init Umami: ",t)},t.report=function(t,n,o,i){if(void 0===o&&(o=!0),!o){var r=window.wx||window.tt||window.swan;r&&r.reportEvent(t,n)}e.track(t,n),console.log("Report Event: ",t,n)},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/ResLoader.ts",["cc"],(function(e){var n,s,t,l,r,o;return{setters:[function(e){n=e.cclegacy,s=e.assetManager,t=e.error,l=e.js,r=e.Asset,o=e.resources}],execute:function(){n._RF.push({},"1a2e4jFffpHrYjrpxbnC760","ResLoader",void 0);e("ResLoader",function(){function e(){this.defaultBundleName="resources"}var n=e.prototype;return n.loadRemote=function(e){var n=null,t=null;2==(arguments.length<=1?0:arguments.length-1)?(n=arguments.length<=1?void 0:arguments[1],t=arguments.length<=2?void 0:arguments[2]):t=arguments.length<=1?void 0:arguments[1],s.loadRemote(e,n,t)},n.loadBundle=function(e,n){return new Promise((function(l,r){s.loadBundle(e,{version:n},(function(e,n){if(e)return t(e);l(n)}))}))},n.load=function(e,n,s,t,l){var r=null;"string"==typeof n||n instanceof Array?(r=this.parseLoadResArgs(n,s,t,l)).bundle=e:(r=this.parseLoadResArgs(e,n,s,t)).bundle=this.defaultBundleName,this.loadByArgs(r)},n.loadAsync=function(e,n,s){var l=this;return new Promise((function(r,o){l.load(e,n,s,(function(e,n){e&&t(e.message),r(n)}))}))},n.loadDir=function(e,n,s,t,l){var r=null;"string"==typeof n?(r=this.parseLoadResArgs(n,s,t,l)).bundle=e:(r=this.parseLoadResArgs(e,n,s,t)).bundle=this.defaultBundleName,r.dir=r.paths,this.loadByArgs(r)},n.release=function(e,n){null==n&&(n=this.defaultBundleName);var t=s.getBundle(n);if(t){var l=t.get(e);l&&this.releasePrefabtDepsRecursively(l._uuid)}},n.releaseDir=function(e,n){var t=this;null==n&&(n=this.defaultBundleName);var l=s.getBundle(n);if(l){var r=l.getDirWithPath(e);r&&r.map((function(e){t.releasePrefabtDepsRecursively(e.uuid)})),""==e&&"resources"!=n&&s.removeBundle(l)}},n.releasePrefabtDepsRecursively=function(e){var n=s.assets.get(e);s.releaseAsset(n)},n.get=function(e,n,t){return null==t&&(t=this.defaultBundleName),s.getBundle(t).get(e,n)},n.dump=function(){s.assets.forEach((function(e,n){console.log(s.assets.get(n))})),console.log("当前资源总数:"+s.assets.count)},n.parseLoadResArgs=function(e,n,s,t){var o=e,u=n,a=s,i=t;if(void 0===t){var d=l.isChildClassOf(n,r);s?(i=s,d&&(a=null)):void 0!==s||d||(i=n,a=null,u=null),void 0===s||d||(a=n,u=null)}return{paths:o,type:u,onProgress:a,onComplete:i}},n.loadByBundleAndArgs=function(e,n){n.dir?e.loadDir(n.paths,n.type,n.onProgress,n.onComplete):(n.paths,e.load(n.paths,n.type,n.onProgress,n.onComplete))},n.loadByArgs=function(e){var n=this;if(e.bundle)if(s.bundles.has(e.bundle)){var t=s.bundles.get(e.bundle);this.loadByBundleAndArgs(t,e)}else s.loadBundle(e.bundle,(function(s,t){s||n.loadByBundleAndArgs(t,e)}));else this.loadByBundleAndArgs(o,e)},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/rewardVideo.ts",["cc","./mock.ts"],(function(o){var n,e;return{setters:[function(o){n=o.cclegacy},function(o){e=o.MockRewardVideo}],execute:function(){n._RF.push({},"c53caWTTA1L+oIJLjKTqvTk","rewardVideo",void 0);o("RewardVideoAds",function(){function o(o){this._Ad=void 0,this._Ad=o}o.create=function(n,t){var r=window.wx||window.tt||window.swan;if(r){var i=r.createRewardedVideoAd({adUnitId:n});return i.onError((function(o){t(o),console.error("error when loading ads: ",o)})),console.log("debug ad: ",i),new o(i)}return console.error("Mini game environment is not supported"),new o(e.createRewardedVideoAd({adUnitId:n,multiton:!1}))};var n=o.prototype;return n.SetonClose=function(o){var n=this;this._Ad.onClose((function(e){o(e),n._Ad.offClose()}))},n.SetoffClose=function(o){this._Ad.offClose(o)},n.Show=function(o,n){var e=this;this._Ad?this._Ad.show().catch((function(n){e._Ad.load().then((function(){e._Ad.show()})).catch((function(n){console.log("激励视频 广告显示失败, ",n),o(n),console.error("error when showing ads: ",n)}))})).then((function(o){n(o),console.log("success when showing ads: ",o)})):console.error("Banner ad is null")},n.Destroy=function(o){this._Ad?this._Ad.destroy():console.error("Banner ad is null")},o}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Root.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Language.ts","./BuildTimeConstants.ts","./GameConfig.ts","./GameQueryConfig.ts","./Oops.ts","./AudioManager.ts","./EventMessage.ts","./TimerManager.ts","./GameManager.ts","./GUI.ts","./LayerManager.ts"],(function(e){var t,n,i,o,a,s,r,u,c,g,l,f,m,p,d,E,h,v,y,R,G,M,b,C,N,w,T;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,r=e.Node,u=e.JsonAsset,c=e.game,g=e.director,l=e.Game,f=e.log,m=e.sys,p=e.view,d=e.Component},function(e){E=e.LanguageManager},function(e){h=e.BuildTimeConstants},function(e){v=e.GameConfig},function(e){y=e.GameQueryConfig},function(e){R=e.version,G=e.oops},function(e){M=e.AudioManager},function(e){b=e.EventMessage},function(e){C=e.TimerManager},function(e){N=e.GameManager},function(e){w=e.GUI},function(e){T=e.LayerManager}],execute:function(){var _,A,I,D,L;a._RF.push({},"90b9cOmlmBCnpCpEpgvdrQr","Root",void 0);s.ccclass;var S=s.property,z=!1;e("Root",(_=S({type:r,tooltip:"游戏层"}),A=S({type:r,tooltip:"界面层"}),D=t((I=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,i(t,"game",D,o(t)),i(t,"gui",L,o(t)),t.persistRootNode=null,t}n(t,e);var a=t.prototype;return a.onLoad=function(){var e=this;if(!z){z=!0,console.log("Oops Framework v"+R),this.enabled=!1;var t="config";G.res.load(t,u,(function(){var n=G.res.get(t);G.config.btc=new h,G.config.query=new y,G.config.game=new v(n),G.http.server=G.config.game.httpServer,G.http.timeout=G.config.game.httpTimeout,G.storage.init(G.config.game.localDataKey,G.config.game.localDataIv),c.frameRate=G.config.game.frameRate,e.enabled=!0,e.init(),e.run()}))}},a.update=function(e){G.ecs.execute(e)},a.initGui=function(){},a.initEcsSystem=function(){},a.run=function(){},a.init=function(){this.persistRootNode=new r("PersistRootNode"),g.addPersistRootNode(this.persistRootNode),G.audio=this.persistRootNode.addComponent(M),G.audio.load(),G.timer=this.persistRootNode.addComponent(C),G.language=new E,G.game=new N(this.game),G.gui=new T(this.gui),this.initGui(),this.initEcsSystem(),G.ecs.init(),c.on(l.EVENT_SHOW,(function(){f("Game.EVENT_SHOW"),G.timer.load(),G.audio.resumeAll(),g.resume(),c.resume(),G.message.dispatchEvent(b.GAME_ENTER)})),c.on(l.EVENT_HIDE,(function(){f("Game.EVENT_HIDE"),G.timer.save(),G.audio.pauseAll(),g.pause(),c.pause(),G.message.dispatchEvent(b.GAME_EXIT)}));var e=this.gui.addComponent(w);0==m.isMobile&&p.setResizeCallback((function(){e.resize(),G.message.dispatchEvent(b.GAME_RESIZE)}))},t}(d)).prototype,"game",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(I.prototype,"gui",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I));a._RF.pop()}}}));

System.register("chunks:///_virtual/RotateUtil.ts",["cc","./Vec3Util.ts"],(function(t){var o,n,r,e,i;return{setters:[function(t){o=t.cclegacy,n=t.Quat,r=t.Vec3,e=t.toRadian},function(t){i=t.Vec3Util}],execute:function(){o._RF.push({},"103324kr75Hi5d7RZCcRt3P","RotateUtil",void 0);t("RotateUtil",function(){function t(){}return t.rotateAround=function(t,o,r){var e=new n;n.rotateAround(e,t.getRotation(),o.normalize(),r),t.setRotation(e)},t.rotateAroundTarget=function(t,o,e,i){var a=t.worldPosition,u=o.worldPosition,c=new n,s=new r;n.fromAxisAngle(c,e,i),r.subtract(s,u,a),r.transformQuat(s,s,c),r.add(s,a,s),o.setWorldPosition(s),n.rotateAround(c,o.worldRotation,e,i),n.normalize(c,c),o.setWorldRotation(c)},t.circularEdgePosition=function(t,o,a){var u=i.z.multiplyScalar(o),c=i.sub(u,t),s=new r,l=new n;return n.fromAxisAngle(l,r.UP,e(a)),r.transformQuat(s,c,l),r.add(s,t,s),s},t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/RoundRectMask.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,a,n,r,s,o,u,p,c,h,d,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createClass},function(t){s=t.cclegacy,o=t._decorator,u=t.Mask,p=t.CCFloat,c=t.UITransform,h=t.game,d=t.Game,l=t.Component}],execute:function(){var k,m,f,R,v,y,g,C,M;s._RF.push({},"da0f8CBQkZDqaekNuERqKjA","RoundRectMask",void 0);var _=o.ccclass,w=o.property,D=o.executeInEditMode,b=o.disallowMultiple,E=o.requireComponent,T=o.menu;t("RoundRectMask",(k=_("RoundRectMask"),m=D(!0),f=b(!0),R=E(u),v=T("渲染组件/圆角遮罩"),y=w({type:p,tooltip:"圆角半径:\n0-1之间为最小边长比例值, \n>1为具体像素值"}),k(g=m(g=f(g=R(g=v((M=e((C=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,a(e,"propRadius",M,n(e)),e.mask=null,e}i(e,t);var s=e.prototype;return s.onEnable=function(){this.mask=this.getComponent(u),this.updateMask(this.radius)},s.updateMask=function(t){var e=t>=0?t:0;if(e<1){var i=this.node.getComponent(c);e=Math.min((null==i?void 0:i.width)||0,(null==i?void 0:i.width)||0)*e}this.mask&&(this.mask.radius=e,this.mask.onDraw=this.onDraw.bind(this.mask),this.mask._updateGraphics=this._updateGraphics.bind(this.mask),this.mask.type=u.Type.GRAPHICS_RECT)},s._updateGraphics=function(){var t=this._graphics;t&&this.onDraw(t)},s.onDraw=function(t){var e=this.node.getComponent(c);t.clear();var i=e.width,a=e.height,n=-i*e.anchorX,r=-a*e.anchorY;t.roundRect(n,r,i,a,this.radius||0),h.renderType===d.RENDER_TYPE_CANVAS?t.stroke():t.fill()},r(e,[{key:"radius",get:function(){return this.propRadius},set:function(t){this.propRadius=t,this.updateMask(t)}}]),e}(l)).prototype,"propRadius",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),g=C))||g)||g)||g)||g)||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/RtToModel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,o,a,l,s,c,u,h,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Camera,s=e.MeshRenderer,c=e.RenderTexture,u=e.view,h=e.gfx,p=e.Component}],execute:function(){var d,f,m,y,g,w,b;o._RF.push({},"dbd7dMQYutDs7I7uj+3zIiU","RtToModel",void 0);var v=a.ccclass,R=a.property;e("RtToModel",(d=v("RtToModel"),f=R(l),m=R(s),d((w=t((g=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"camara",w,n(t)),i(t,"model",b,n(t)),t.rt=new c,t}r(t,e);var o=t.prototype;return o.start=function(){var e=u.getVisibleSize(),t=new h.ColorAttachment,r=new h.DepthStencilAttachment,i=new h.RenderPassInfo([t],r,[]);this.rt.reset({width:e.width,height:e.height,passInfo:i}),this.camara.targetTexture=this.rt,this.model.material.setProperty("mainTexture",this.rt)},o.onDestroy=function(){this.rt.destroy()},t}(p)).prototype,"camara",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(g.prototype,"model",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=g))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/RtToSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,o,r,n,s,h,a,p,u,c,l,f,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,h=t.Camera,a=t.Sprite,p=t.Node,u=t.RenderTexture,c=t.UITransform,l=t.gfx,f=t.SpriteFrame,T=t.Component}],execute:function(){var d,y,v,m,g,E,b,C,R,S,w;n._RF.push({},"f608cdDWBNEKLILVNBcQYvf","RtToSprite",void 0);var _=s.ccclass,O=s.property;t("RtToSprite",(d=_("RtToSprite"),y=O({type:h,tooltip:"渲染模型的三维摄像机"}),v=O({type:a,tooltip:"显示模型的二维精灵组件"}),m=O({tooltip:"是否触摸控制旋转"}),g=O({type:p,tooltip:"三维模型",visible:function(){return!0===this.rotation}}),d((C=e((b=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,o(e,"camera",C,r(e)),o(e,"sprite",R,r(e)),o(e,"rotation",S,r(e)),o(e,"model",w,r(e)),e.rt=new u,e.touched=!1,e}i(e,t);var n=e.prototype;return n.start=function(){var t=this.sprite.getComponent(c);this.refreshRenderTexture(t.width,t.height),this.rotation&&(this.sprite.node.on(p.EventType.TOUCH_START,this.onTouchStart,this),this.sprite.node.on(p.EventType.TOUCH_MOVE,this.onTouchMove,this),this.sprite.node.on(p.EventType.TOUCH_END,this.onTouchEnd,this),this.sprite.node.on(p.EventType.TOUCH_CANCEL,this.onTouchEnd,this))},n.onTouchStart=function(t){this.touched=!0},n.onTouchMove=function(t){if(this.touched){var e=this.model.eulerAngles,i=t.touch.getDelta().x;e.y+=-i,this.model.eulerAngles=e}},n.onTouchEnd=function(t){this.touched=!1},n.refreshRenderTexture=function(t,e){var i=new l.ColorAttachment,o=new l.DepthStencilAttachment,r=new l.RenderPassInfo([i],o,[]);this.rt.reset({width:t,height:e,passInfo:r});var n=this.sprite.spriteFrame,s=new f;s.reset({originalSize:n.originalSize,rect:n.rect,offset:n.offset,isRotate:n.rotated,borderTop:n.insetTop,borderLeft:n.insetLeft,borderBottom:n.insetBottom,borderRight:n.insetRight}),this.camera.targetTexture=this.rt,s.texture=this.rt,this.sprite.spriteFrame=s},n.onDestroy=function(){this.rotation&&(this.sprite.node.off(p.EventType.TOUCH_START,this.onTouchStart,this),this.sprite.node.off(p.EventType.TOUCH_MOVE,this.onTouchMove,this),this.sprite.node.off(p.EventType.TOUCH_END,this.onTouchEnd,this),this.sprite.node.off(p.EventType.TOUCH_CANCEL,this.onTouchEnd,this)),this.rt.destroy()},e}(T)).prototype,"camera",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(b.prototype,"sprite",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(b.prototype,"rotation",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=e(b.prototype,"model",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=b))||E));n._RF.pop()}}}));

System.register("chunks:///_virtual/ScrollAdapter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enum.ts","./CenterManager.ts","./LayoutManager.ts","./ModelManager.ts","./PageViewManager.ts","./ReleaseManager.ts","./ScrollManager.ts","./ViewManager.ts","./Holder.ts","./View.ts"],(function(e){var t,n,i,r,a,o,s,l,c,g,u,h,M,p,f,w,d,y,A,v,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.createClass},function(e){o=e.cclegacy,s=e._decorator,l=e.Component},function(e){c=e.Orientation,g=e.ArrangeAxis,u=e.ViewEvent,h=e.HolderEvent},function(e){M=e.CenterManager},function(e){p=e.LayoutManager},function(e){f=e.ModelManager},function(e){w=e.PageViewManager},function(e){d=e.ReleaseManager},function(e){y=e.ScrollManager},function(e){A=e.ViewManager},function(e){v=e.Holder},function(e){m=e.View}],execute:function(){var b,S,_,V,x,z,k,H,D,E,I,L,P,C,B;o._RF.push({},"d5d1crBDMFIA4umJNt7GKmz","ScrollAdapter",void 0);var R=s.ccclass,U=s.property,F=(e("ScrollAdapter",(b=R("ScrollAdapter"),S=U(y),_=U(A),V=U(p),x=U(w),z=U(d),k=U(M),b((E=t((D=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"scrollManager",E,r(t)),i(t,"viewManager",I,r(t)),i(t,"layoutManager",L,r(t)),i(t,"pageViewManager",P,r(t)),i(t,"releaseManager",C,r(t)),i(t,"centerManager",B,r(t)),t.modelManager=new f,t}n(t,e);var o=t.prototype;return o.initElement=function(e,t){},o.getView=function(){return new F(this)},o.getHolder=function(e,t){return new T(e,t,this)},o.getParentAdapter=function(e){if(null!=e){var t=e.getComponent("ScrollAdapter");return t||this.getParentAdapter(e.parent)}},o.__preload=function(){this.scrollManager.internal_create(this),this.viewManager.internal_create(this),this.modelManager.internal_create(this),this.releaseManager.internal_create(this),this.layoutManager.internal_create(this),this.pageViewManager.internal_create(this),this.centerManager.internal_create(this),this.viewManager.internal_init(),this.releaseManager.internal_init(),this.layoutManager.internal_init(),this.pageViewManager.internal_init(),this.centerManager.internal_init(),this.scrollManager.internal_init(),this.modelManager.internal_init()},o.lateUpdate=function(e){this.scrollManager.internal_lateUpdate(e),this.viewManager.internal_lateUpdate(e),this.layoutManager.internal_lateUpdate(e),this.releaseManager.internal_lateUpdate(e)},a(t,[{key:"isVertical",get:function(){return this.scrollManager.orientation==c.Vertical}},{key:"isHorizontal",get:function(){return this.scrollManager.orientation==c.Horizontal}},{key:"isArrangeAxisStart",get:function(){return this.viewManager.arrangeAxis==g.Start}},{key:"mainAxis",get:function(){return this.isVertical?"y":"x"}},{key:"crossAxis",get:function(){return this.isVertical?"x":"y"}},{key:"mainAxisAnchorPoint",get:function(){var e=this.isVertical?1:0;return this.isArrangeAxisStart?e:1-e}},{key:"mainAxisSize",get:function(){return this.scrollManager.view.contentSize[this.mainAxis]}},{key:"crossAxisSize",get:function(){return this.scrollManager.view.contentSize[this.crossAxis]}},{key:"multiplier",get:function(){var e=this.isVertical?-1:1;return this.isArrangeAxisStart?-e:e}},{key:"paddingHeader",get:function(){return this.isHorizontal?this.isArrangeAxisStart?this.viewManager.left:this.viewManager.right:this.isArrangeAxisStart?this.viewManager.top:this.viewManager.bottom}},{key:"paddingFooter",get:function(){return this.isHorizontal?this.isArrangeAxisStart?this.viewManager.right:this.viewManager.left:this.isArrangeAxisStart?this.viewManager.bottom:this.viewManager.top}},{key:"mainAxisPadding",get:function(){return this.isHorizontal?this.viewManager.left+this.viewManager.right:this.viewManager.top+this.viewManager.bottom}}]),t}(l)).prototype,"scrollManager",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y}}),I=t(D.prototype,"viewManager",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new A}}),L=t(D.prototype,"layoutManager",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p}}),P=t(D.prototype,"pageViewManager",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new w}}),C=t(D.prototype,"releaseManager",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new d}}),B=t(D.prototype,"centerManager",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new M}}),H=D))||H)),function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var i=t.prototype;return i.onVisible=function(){this.adapter.node.emit(u.VISIBLE,this)},i.onDisable=function(){this.adapter.node.emit(u.DISABLE,this)},t}(m)),T=function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var i=t.prototype;return i.onCreated=function(){this.node.emit(h.CREATED,this)},i.onVisible=function(){this.node.emit(h.VISIBLE,this)},i.onDisable=function(){this.node.emit(h.DISABLE,this)},t}(v);o._RF.pop()}}}));

System.register("chunks:///_virtual/Scrollbar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ScrollAdapter.ts","./enum.ts","./helper.ts","./ScrollManager.ts"],(function(t){var i,e,n,r,o,a,s,h,l,c,u,p,_,f,d,g,m,b,S,T,v,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.createClass},function(t){a=t.cclegacy,s=t._decorator,h=t.Color,l=t.Sprite,c=t.SpriteFrame,u=t.Node,p=t.v3,_=t.UITransform,f=t.Component,d=t.Vec2},function(t){g=t.ScrollAdapter},function(t){m=t.ScrollbarDirection,b=t.Transition,S=t.Orientation},function(t){T=t.Helper},function(t){v=t.ScrollManager,y=t.ADAPTER}],execute:function(){var E,w,H,z,C,M,O,A,L,x,R,U,G,D,I,N,k,P,V,F,B,j,K,W,q,J,Q,X,Y,Z,$,tt,it,et,nt,rt,ot,at,st,ht;a._RF.push({},"e7832mHcjNK2r9z66HM2mwU","Scrollbar",void 0);var lt=s.ccclass,ct=s.property,ut=new h;t("Scrollbar",(E=lt("Scrollbar"),w=ct(g),H=ct(l),z=ct({type:m,tooltip:"滚动方向"}),C=ct({tooltip:"开启后会允许用户滑动进度条"}),M=ct({range:[0,1],slide:!0,step:.001,visible:function(){return this.interactable},tooltip:"可拖拽的最小限制，默认=0不限制,仅当你开启了循环,并且你的item会实时修改主轴尺寸时,那么你应该适当限制拖拽区域"}),O=ct({range:[0,1],slide:!0,step:.001,visible:function(){return this.interactable},tooltip:"可拖拽的最大限制，默认=1不限制,仅当你开启了循环,并且你的item会实时修改主轴尺寸时,那么你应该适当限制拖拽区域"}),A=ct({type:b}),L=ct({type:b,visible:function(){return this.interactable}}),x=ct({type:l,visible:function(){return this.transition!=b.None&&this.interactable}}),R=ct({type:c,visible:function(){return this.transition==b.SpriteSwap&&this.interactable}}),U=ct({type:c,visible:function(){return this.transition==b.SpriteSwap&&this.interactable}}),G=ct({visible:function(){return this.transition==b.ColorTint&&this.interactable}}),D=ct({visible:function(){return this.transition==b.ColorTint&&this.interactable}}),I=ct({visible:function(){return this.transition==b.Scale&&this.interactable}}),N=ct({visible:function(){return this.transition==b.Scale&&this.interactable}}),k=ct({visible:function(){return this.transition==b.Scale||this.transition==b.ColorTint&&this.interactable}}),P=ct({range:[0,11],slide:!0,step:1,tooltip:"用于进度的步数。值为 < 2 将禁用"}),V=ct({tooltip:"开启后会在滚动条无更新时自动隐藏"}),F=ct({visible:function(){return this.enableAutoHide},tooltip:"自动隐藏滚动条的时间"}),E((K=i((j=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return i=t.call.apply(t,[this].concat(o))||this,n(i,"adapter",K,r(i)),n(i,"handle",W,r(i)),n(i,"direction",q,r(i)),n(i,"interactable",J,r(i)),n(i,"dragMinLimit",Q,r(i)),n(i,"dragMaxLimit",X,r(i)),n(i,"_transition",Y,r(i)),n(i,"targetGraphic",Z,r(i)),n(i,"hoverSprite",$,r(i)),n(i,"pressedSprite",tt,r(i)),n(i,"hoverColor",it,r(i)),n(i,"pressedColor",et,r(i)),n(i,"hoverScale",nt,r(i)),n(i,"pressedScale",rt,r(i)),n(i,"transitionDuration",ot,r(i)),n(i,"numberOfSteps",at,r(i)),n(i,"enableAutoHide",st,r(i)),n(i,"autoHideTime",ht,r(i)),i._transitionInfo=void 0,i._targetEnter=void 0,i._targetStart=void 0,i._isDirty=!1,i._transform=void 0,i._handleTransform=void 0,i._size=0,i._value=-1,i._pointerEvent=void 0,i._offset=void 0,i._isHide=void 0,i._opacity=255,i._autoHideRemainingTime=void 0,i._rawTargetScale=void 0,i._rawTargetFrame=void 0,i._rawTargetColor=void 0,i}e(i,t);var a=i.prototype;return a.__preload=function(){this.transform.setAnchorPoint(.5,.5),this.handleTransform.setAnchorPoint(.5,.5),this.handle.node.setPosition(0,0),this.adapter&&(this.adapter.scrollManager.on(v.Event.ON_UPDATE_PERCENTAGE,this._onUpdateScrollbar,this),this._updateVisuals()),this.targetGraphic&&(this._rawTargetScale=this.targetGraphic.node.getScale().clone(),this._rawTargetFrame=this.targetGraphic.spriteFrame,this._rawTargetColor=this.targetGraphic.color.clone()),this._openAutoHide(!0)},a.onEnable=function(){var t=this.node.getComponent(l);t&&(this._opacity=t.color.a),this.adapter&&(this.node[y]=!0,this.node.on(u.EventType.TOUCH_START,this._onTouchStart,this),this.node.on(u.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.on(u.EventType.TOUCH_END,this._onTouchEnd,this),this.node.on(u.EventType.TOUCH_CANCEL,this._onTouchEnd,this),this.node.on(u.EventType.MOUSE_ENTER,this._mouseEnter,this),this.node.on(u.EventType.MOUSE_LEAVE,this._mouseLeave,this),this.targetGraphic&&(this.targetGraphic.node.on(u.EventType.MOUSE_ENTER,this._targetMouseEnter,this),this.targetGraphic.node.on(u.EventType.MOUSE_LEAVE,this._targetMouseLeave,this)))},a.onDisable=function(){this.node.off(u.EventType.TOUCH_START,this._onTouchStart,this),this.node.off(u.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.off(u.EventType.TOUCH_END,this._onTouchEnd,this),this.node.off(u.EventType.TOUCH_CANCEL,this._onTouchEnd,this),this.node.off(u.EventType.MOUSE_ENTER,this._mouseEnter,this),this.node.off(u.EventType.MOUSE_LEAVE,this._mouseLeave,this),this.targetGraphic&&(this.targetGraphic.node.off(u.EventType.MOUSE_ENTER,this._targetMouseEnter,this),this.targetGraphic.node.off(u.EventType.MOUSE_LEAVE,this._targetMouseLeave,this))},a._targetMouseEnter=function(){switch(this._targetEnter=!0,this._openAutoHide(!1),this.transition){case b.Scale:this._transitionScale(this._targetStart?this.pressedScale:this.hoverScale);break;case b.SpriteSwap:this._transitionSprite(this._targetStart?this.pressedSprite:this.hoverSprite);break;case b.ColorTint:this._transitionColor(this._targetStart?this.pressedColor:this.hoverColor)}},a._targetMouseLeave=function(){switch(this._targetEnter=!1,this._openAutoHide(!0),this.transition){case b.Scale:this._transitionScale(this._targetStart?this.pressedScale:this._rawTargetScale);break;case b.SpriteSwap:this._transitionSprite(this._targetStart?this.pressedSprite:this._rawTargetFrame);break;case b.ColorTint:this._transitionColor(this._targetStart?this.pressedColor:this._rawTargetColor)}},a._transitionScale=function(t){t&&this.targetGraphic&&(this._transitionInfo={time:0,from:this.targetGraphic.node.getScale().clone(),to:t})},a._transitionColor=function(t){t&&this.targetGraphic&&(this._transitionInfo={time:0,from:this.targetGraphic.color,to:t})},a._transitionSprite=function(t){t&&this.targetGraphic&&(this.targetGraphic.spriteFrame=t)},a._mouseEnter=function(t){this.interactable&&this._openAutoHide(!1)},a._mouseLeave=function(t){this.interactable&&this._openAutoHide(!0)},a._openAutoHide=function(t){this.enableAutoHide&&(this._autoHideRemainingTime=this.autoHideTime,this._isHide=t,t||this._setOpacity(this._opacity))},a._onTouchStart=function(t){if(this.interactable&&1!=this.size&&0!=this.size){this._openAutoHide(!1),this._pointerEvent=null,this._targetStart=!0;var i=t.getUIStartLocation();if(this._offset=this.handleTransform.convertToNodeSpaceAR(p(i.x,i.y)),Math.abs(this._offset[this.xy])>.5*this.handleTransform[this.wh]){this._offset=null,this._pointerEvent=t;var e=this._calcPercentage(t);this._setPercentage(e)}this.transition==b.Scale?this._transitionScale(this.pressedScale):this.transition==b.SpriteSwap?this._transitionSprite(this.pressedSprite):this.transition==b.ColorTint&&this._transitionColor(this.pressedColor)}},a._onTouchMove=function(t){if(this.interactable&&1!=this.size&&0!=this.size&&this._offset){var i=this._calcPercentage(t,this._offset[this.xy]);this._setPercentage(i)}},a._onTouchEnd=function(t){if(this.interactable&&1!=this.size&&0!=this.size){switch(this._offset=null,this._pointerEvent=null,this._targetStart=!1,this.transition){case b.Scale:this._transitionScale(this._targetEnter?this.hoverScale:this._rawTargetScale);break;case b.SpriteSwap:this._transitionSprite(this._targetEnter?this.hoverSprite:this._rawTargetFrame);break;case b.ColorTint:this._transitionColor(this._targetEnter?this.hoverColor:this._rawTargetColor)}this.adapter.centerManager.scrollToCenter()}},a._setPercentage=function(t){this.adapter.scrollManager.stopScroll(),this.adapter.scrollManager.setPercentage(t)},a._calcPercentage=function(t,i){void 0===i&&(i=0);var e=(this.axis==S.Horizontal?this.transform.width:this.transform.height)*(1-this.size),n=t.getUILocation(),r=this.transform.convertToNodeSpaceAR(p(n.x,n.y))[this.xy]-i-.5*-this.transform[this.wh];r-=.5*this.handleTransform[this.wh];var o=this.adapter.scrollManager.percentage;switch(this.direction){case m.Right_To_Left:case m.Top_To_Bottom:o=T.clamp(1-r/e,this.dragMinLimit,this.dragMaxLimit);break;case m.Left_To_Right:case m.Bottom_To_Top:o=T.clamp(r/e,this.dragMinLimit,this.dragMaxLimit)}return this.getSteps(o)},a._onUpdateScrollbar=function(t,i){var e=0,n=0;this.adapter.viewManager.virtualSize>0&&(e=this.adapter.viewManager.virtualSize>=this.adapter.mainAxisSize?T.clamp01((this.adapter.mainAxisSize-Math.abs(i))/this.adapter.viewManager.virtualSize):1),n=t,this.size=e,this.numberOfSteps>1&&(n=Math.round(n*(this.numberOfSteps-1))/(this.numberOfSteps-1),n=T.clamp01(n)),this.value=n,this._autoHideRemainingTime=this.autoHideTime,this._setOpacity(this._opacity)},a._updateVisuals=function(){if(this.handleTransform&&this.adapter){var t={x:0,y:0},i={x:0,y:0},e=this.adapter.mainAxis,n=T.clamp01(this.value)*(1-this.size);t[e]=n,i[e]=n+this.size;var r=this.transform.contentSize[this.wh]-i[e]*this.transform.contentSize[this.wh],o=t[e]*this.transform.contentSize[this.wh],a=this.handle.node.getPosition();switch(this.direction){case m.Bottom_To_Top:case m.Left_To_Right:a[this.xy]=.5*(o-r);break;case m.Top_To_Bottom:case m.Right_To_Left:a[this.xy]=.5*(r-o)}this.handleTransform[this.wh]=this.transform.contentSize[this.wh]-r-o,this.handle.node.setPosition(a)}},a.update=function(t){this._clearDirty(),this._autoHide(t),this._tranitionHandler(t)},a._clearDirty=function(){if(this._isDirty&&(this._isDirty=!1,this._updateVisuals(),this._pointerEvent)){var t=this._pointerEvent.getUILocation();this._offset=this.handleTransform.convertToNodeSpaceAR(p(t.x,t.y)),this._pointerEvent=null}},a._autoHide=function(t){if(this.enableAutoHide&&this._isHide&&!(this._autoHideRemainingTime<=0)&&(this._autoHideRemainingTime-=t,this._autoHideRemainingTime<=this.autoHideTime)){this._autoHideRemainingTime=Math.max(0,this._autoHideRemainingTime);var i=this._opacity*(this._autoHideRemainingTime/this.autoHideTime);this._setOpacity(i)}},a._tranitionHandler=function(t){var i=this.targetGraphic;if(this.transition!=b.None&&i&&this._transitionInfo){this._transitionInfo.time+=t;var e=1;if(this.transitionDuration>0&&(e=this._transitionInfo.time/this.transitionDuration),e>=1&&(e=1),this.transition==b.Scale){this._transitionInfo.current=i.node.getScale();var n=this._transitionInfo.from,r=this._transitionInfo.to;this._transitionInfo.current.x=T.lerp(n.x,r.x,e),this._transitionInfo.current.y=T.lerp(n.y,r.y,e),i.node.setScale(this._transitionInfo.current)}else if(this.transition==b.ColorTint){var o=this._transitionInfo.from,a=this._transitionInfo.to;h.lerp(ut,o,a,e),i.color=ut}1===e&&(this._transitionInfo=null)}},a._setOpacity=function(t){if(this.handle){var i=function(i){i&&(ut.set(i.color),ut.a=t,i.color=ut)};i(this.node.getComponent(l)),i(this.handle.getComponent(l))}},a.getSteps=function(t){return this.numberOfSteps>1&&(t=Math.round(t*(this.numberOfSteps-1))/(this.numberOfSteps-1),t=T.clamp(t,this.dragMinLimit,this.dragMaxLimit)),t},o(i,[{key:"transition",get:function(){return this._transition},set:function(t){t!=this._transition&&(this._transition=t,t!=b.None&&(this.targetGraphic||(this.targetGraphic=this.handle)))}},{key:"size",get:function(){return this._size},set:function(t){t!=this._size&&(this._size=T.clamp(t,.01,1),this._isDirty=!0)}},{key:"value",get:function(){return this._value},set:function(t){t!=this._value&&(this._value=this.getSteps(t),this._isDirty=!0)}},{key:"stepSize",get:function(){return this.numberOfSteps>1?1/(this.numberOfSteps-1):.1}},{key:"transform",get:function(){return this._transform||(this._transform=this.node.getComponent(_)),this._transform}},{key:"handleTransform",get:function(){return this.handle?(this._handleTransform||(this._handleTransform=this.handle.node.getComponent(_)),this._handleTransform):null}},{key:"xy",get:function(){return this.axis==S.Horizontal?"x":"y"}},{key:"wh",get:function(){return this.axis==S.Horizontal?"width":"height"}},{key:"axis",get:function(){return this.direction==m.Left_To_Right||this.direction==m.Right_To_Left?S.Horizontal:S.Vertical}}]),i}(f)).prototype,"adapter",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(j.prototype,"handle",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=i(j.prototype,"direction",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.Top_To_Bottom}}),J=i(j.prototype,"interactable",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Q=i(j.prototype,"dragMinLimit",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),X=i(j.prototype,"dragMaxLimit",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Y=i(j.prototype,"_transition",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.None}}),i(j.prototype,"transition",[L],Object.getOwnPropertyDescriptor(j.prototype,"transition"),j.prototype),Z=i(j.prototype,"targetGraphic",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=i(j.prototype,"hoverSprite",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=i(j.prototype,"pressedSprite",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=i(j.prototype,"hoverColor",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.WHITE.clone()}}),et=i(j.prototype,"pressedColor",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h(211,211,211,255)}}),nt=i(j.prototype,"hoverScale",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new d(1,1)}}),rt=i(j.prototype,"pressedScale",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new d(1.2,1.2)}}),ot=i(j.prototype,"transitionDuration",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),at=i(j.prototype,"numberOfSteps",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),st=i(j.prototype,"enableAutoHide",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ht=i(j.prototype,"autoHideTime",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),B=j))||B));a._RF.pop()}}}));

System.register("chunks:///_virtual/ScrollManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./debug.ts","./enum.ts","./helper.ts","./ViewManager.ts"],(function(t){var e,i,n,a,r,o,s,h,l,c,_,d,u,p,g,v,f,E,y,O,M,T,A;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,r=t.createClass},function(t){o=t.cclegacy,s=t._decorator,h=t.Vec3,l=t.UITransform,c=t.Node,_=t.Widget,d=t.EventTouch,u=t.macro,p=t.easing},function(t){g=t.Manager},null,function(t){v=t.Orientation,f=t.TouchMode,E=t.MovementType,y=t.NestedDirection,O=t.ScrollDirection,M=t.Layer},function(t){T=t.Helper},function(t){A=t.ViewManager}],execute:function(){var S,m,w,b,P,C,N,L,D,x,H,R,z,I,U,V,k,F,B,G,X,W,Z,j,q,Y,K,J,Q,$;o._RF.push({},"6000cNyEYlC4aj/Efw70/yK","ScrollManager",void 0);var tt=s.ccclass,et=s.property,it=new h,nt=t("ADAPTER","__ADAPTER__"),at=function(t){return t[t.ON_SCROLL=0]="ON_SCROLL",t[t.ON_UPDATE_PERCENTAGE=1]="ON_UPDATE_PERCENTAGE",t[t.ON_VIEW_SIZE_CHANGED=2]="ON_VIEW_SIZE_CHANGED",t[t.ON_ABOUT_TO_STOP=3]="ON_ABOUT_TO_STOP",t[t.ON_SCROLL_START=4]="ON_SCROLL_START",t[t.ON_SCROLL_END=5]="ON_SCROLL_END",t[t.ON_SCROLL_CANCEL=6]="ON_SCROLL_CANCEL",t[t.ON_CHANGED_ORIENTATION=7]="ON_CHANGED_ORIENTATION",t[t.ON_SCROLL_TO_GROUPINDEX_BEFOR=8]="ON_SCROLL_TO_GROUPINDEX_BEFOR",t[t.ON_SCROLL_TO_GROUPINDEX_AFTER=9]="ON_SCROLL_TO_GROUPINDEX_AFTER",t[t.ON_SCROLL_TO_MODELINDEX_BEFOR=10]="ON_SCROLL_TO_MODELINDEX_BEFOR",t[t.ON_SCROLL_TO_MODELINDEX_AFTER=11]="ON_SCROLL_TO_MODELINDEX_AFTER",t}(at||{});t("ScrollManager",(S=tt("ScrollManager"),m=et(l),w=et(l),b=et(l),P=et(l),C=et({type:v}),N=et({type:v}),L=et({type:f,tooltip:"Auto: 当内容撑满可视区域或开启ReleaseManager时允许拖动\n        AlwaysAllow: 任何情况下都可以拖动，即使没有任何元素\n        Disabled: 任何情况下都禁用拖动\n        "}),D=et({type:E}),x=et({range:[0,1],slide:!0,step:.001,visible:function(){return this.movementType==E.Elastic}}),H=et({range:[0,1],slide:!0,step:.001,visible:function(){return this.inertia}}),R=et({tooltip:"当滚动速度小于这个值时，会发送ON_ABOUT_TO_STOP广播"}),z=et({tooltip:"取消子节点的Button点击事件"}),I=et({range:[0,.5],slide:!0,step:.001,visible:function(){return this.inertia},tooltip:"嵌套时，当子元素的ScrollView拖动方向和当前拖动方向相同时，使用当前阈值进行计算由谁来处理拖动\n        无特殊需求时，默认值即可"}),U=et({range:[.5,1],slide:!0,step:.001,visible:function(){return this.inertia},tooltip:"嵌套时，当子元素的ScrollView拖动方向和当前拖动方向相同时，使用当前阈值进行计算由谁来处理拖动\n        无特殊需求时，默认值即可"}),S((($=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,n(e,"_view",F,a(e)),n(e,"_content",B,a(e)),n(e,"_orientation",G,a(e)),n(e,"touchMode",X,a(e)),n(e,"movementType",W,a(e)),n(e,"elasticity",Z,a(e)),n(e,"inertia",j,a(e)),n(e,"decelerationRate",q,a(e)),n(e,"aboutToStopVelocity",Y,a(e)),n(e,"cancelInnerEvents",K,a(e)),n(e,"nestedMinThreshold",J,a(e)),n(e,"nestedMaxThreshold",Q,a(e)),e.__debug_graphics=void 0,e._boundaryOffset=0,e._viewWidget=null,e._parentAdapter=void 0,e._layerLowest=void 0,e._layerMedium=void 0,e._layerHighest=void 0,e._percentage=0,e._velocity=0,e._dragging=!1,e._scrolling=!1,e._isCanceledEvent=!1,e._contentStartPosition=new h,e._prevContentPosition=new h,e._nestedDirection=y.Both,e._parentTouch=!1,e._stopCheckNested=!1,e._scrollHandlePercentage=null,e._scrollHandlePosition=null,e._isEmitAboutToStop=!1,e._isMyEventAndMoved=!1,e._scrollDirection=O.None,e._laseScrollDirection=O.None,e._touchEvent=null,e.test=!1,e}i(e,t);var o=e.prototype;return o.onInit=function(){var t=this;this._initView(),this._initContent(),this._parentAdapter=this.adapter.getParentAdapter(this.adapter.node.parent),this.view.node[nt]=!0,this.adapter.viewManager.on(A.Event.ON_UPDATE_VIEWS,this._onUpdateViews,this),this.adapter.viewManager.on(A.Event.ON_CHANGED_VIRTUALSIZE,this._onChangedVirtualSize,this),this.adapter.viewManager.on(A.Event.ON_CHANGED_OVERFLOWHEADER,this._onChangedOverflowHeader,this),this.adapter.viewManager.on(A.Event.ON_RESET_ALL_STATE,this._onResetAllState,this),this.adapter.viewManager.on(A.Event.ON_CLEARVIEWS,this._onResetAllState,this),this.adapter.node.on(c.EventType.SIZE_CHANGED,this._onAdapterSizeChanged,this),this.view.node.on(c.EventType.SIZE_CHANGED,this._onViewSizeChanged,this),this._registerTouchEvent(),this.__createDebug(),this.view.scheduleOnce((function(){t._updatePercentage()}))},o._initView=function(){if(!this.view)throw Error("ScrollManager view 参数为空！");var t={x:.5,y:.5};t[this.adapter.mainAxis]=this.adapter.mainAxisAnchorPoint,this.view.setAnchorPoint(t.x,t.y);var e=this.view.getComponent(_);e||((e=this.view.addComponent(_)).isAlignLeft=e.isAlignRight=e.isAlignTop=e.isAlignBottom=!0,e.left=e.right=e.top=e.bottom=0),e.updateAlignment(),this._viewWidget=e},o.__createDebug=function(){},o.__drawDebug=function(){if(this.__debug_graphics){this.__debug_graphics.clear();var t=this.adapter.mainAxis,e=this.adapter.crossAxis,i=this.adapter.multiplier,n={x:0,y:0},a={x:0,y:0};a[t]=this.adapter.viewManager.virtualSize,a[e]=this.adapter.crossAxisSize,n[t]=this.contentPosition-a[t]*this.content.anchorPoint[t]*i,n[t]+=this.adapter.viewManager.overflowHeader,n[e]-=a[e]*this.view.anchorPoint[e],this.__debug_graphics.fillRect(n.x,n.y,a.x,a.y),this.__debug_graphics.stroke()}},o._initContent=function(){if(!this.content)throw Error("ScrollManager content 参数为空！");this.content.setAnchorPoint(this.view.anchorPoint);var t={x:0,y:0};t[this.adapter.crossAxis]=this.view.contentSize[this.adapter.crossAxis],this.content.setContentSize(t.x,t.y),this._layerLowest||(this._layerLowest=new c("_layerLowest"),this._layerMedium=new c("_layerMedium"),this._layerHighest=new c("_layerHighest"),this.content.node.addChild(this._layerLowest),this.content.node.addChild(this._layerMedium),this.content.node.addChild(this._layerHighest)),this._updateContentPosition({x:0,y:0})},o._registerTouchEvent=function(){this.view.node.on(c.EventType.TOUCH_START,this._onTouchStart,this,!0),this.view.node.on(c.EventType.TOUCH_END,this._onTouchEnd,this,!0),this.view.node.on(c.EventType.TOUCH_CANCEL,this._onTouchCancel,this,!0),this.view.node.on(c.EventType.TOUCH_MOVE,this._onTouchMove,this,!0)},o._bubbleToParent=function(t){this._parentAdapter&&this._parentAdapter.scrollManager.view.node.dispatchEvent(t)},o._emitCancelEvent=function(t){if(!this._isCanceledEvent){var e=t.getUILocation();e.subtract(t.getUIStartLocation()),this.cancelInnerEvents&&e.length()>7&&t.target!==this.view.node&&(this._simulateEvent(t,c.EventType.MOUSE_LEAVE),this._simulateEvent(t,c.EventType.TOUCH_CANCEL),this._isCanceledEvent=!0)}},o._simulateEvent=function(t,e,i){if(void 0===i&&(i=!0),t){var n=new d(t.getTouches(),t.bubbles),a=t.target;n.type=e,n.touch=t.touch,n.simulate=i,a.dispatchEvent(n)}},o._onUpdateViews=function(){this._velocity=0,this._updatePercentage()},o._onChangedVirtualSize=function(){this._updatePercentage(),null!=this._scrollHandlePosition&&null!=this._scrollHandlePosition.change&&this._scrollHandlePosition.change()},o._onChangedOverflowHeader=function(t){this.__drawDebug()},o._onResetAllState=function(){this._velocity=0,this._scrolling=!1,this._dragging=!1,this._isMyEventAndMoved=!1,this._scrollDirection=O.None,this._percentage=0,this._isEmitAboutToStop=!1,this._boundaryOffset=0,this._isCanceledEvent=!1,this._parentTouch=!1,this._stopCheckNested=!1,this._scrollDirection=O.None,this._touchEvent=null,this.stopScroll(),this._initView(),this._initContent()},o._onAdapterSizeChanged=function(){this._viewWidget.updateAlignment()},o._onViewSizeChanged=function(){this.emit(at.ON_VIEW_SIZE_CHANGED)},o._isMyEvent=function(t,e){return t.eventPhase==d.AT_TARGET||!e||e[0]==this.view.node&&!t.target[nt]},o._onTouchStart=function(t){this._velocity=0,this._dragging=!0,this._isMyEventAndMoved=!1,this._isCanceledEvent=!1,this._parentTouch=!1,this._stopCheckNested=!1,this._isEmitAboutToStop=!1,this._scrollDirection=O.None,this._contentStartPosition.set(this.content.node.position),this._touchEvent=t,this.stopScroll(),this._calcNestedDirection(),this.emit(at.ON_SCROLL_START)},o._onTouchEnd=function(t,e){this._dragging=!1,this._touchEvent=null,this.emit(at.ON_SCROLL_END,t)},o._onTouchCancel=function(t,e){t.simulate||(this._dragging=!1,this._touchEvent=null,this.emit(at.ON_SCROLL_CANCEL,t))},o._onTouchMove=function(t,e){if(this._isMyEvent(t,e)){if(this._emitCancelEvent(t),this._parentTouch||!this.canTouch)return this._bubbleToParent(t);if(this._touchEvent){var i=this.adapter.mainAxis,n=t.getUILocation(),a=t.getUIStartLocation(),r=n.subtract(a);if(!r.equals2f(0,0)){var o={x:0,y:0};o[i]=this._contentStartPosition[i]+r[i];var s=o[i]-this.contentPosition,h=this.calcOffset(s),l=this.adapter.isHorizontal?-1:1;o[i]+=l*h,this.movementType==E.Elastic&&0!=h&&(o[i]-=l*this._rubberDelta(h,this.adapter.mainAxisSize)),this._checkNested(t,o,this._parentAdapter),this._parentTouch?this._bubbleToParent(t):(this._isMyEventAndMoved=!0,this._updateContentPosition(o))}}}},o._calcNestedDirection=function(){this._parentAdapter&&(this.percentage<=this.nestedMinThreshold&&!this.adapter.viewManager.loopHeader?this._nestedDirection=1==this.adapter.multiplier?y.Footer:y.Header:this.percentage>=this.nestedMaxThreshold&&!this.adapter.viewManager.loopFooter?this._nestedDirection=1==this.adapter.multiplier?y.Header:y.Footer:this._nestedDirection=y.Both)},o._checkNested=function(t,e,i){if(i&&!this._stopCheckNested){if(this.orientation==i.scrollManager.orientation){var n=e[this.adapter.mainAxis]-this._contentStartPosition[this.adapter.mainAxis];if(Math.abs(n)<=.1)return;this._nestedDirection==y.Footer?n<0&&(this._parentTouch=!0):this._nestedDirection==y.Header&&n>0&&(this._parentTouch=!0)}else{var a=0,r=0;if(t instanceof d){var o=t.getUIStartLocation(),s=t.getUILocation();a=Math.abs(o.x-s.x),r=Math.abs(o.y-s.y)}else a=Math.abs(t.getScrollX()),r=Math.abs(t.getScrollY());if(a==r)return;a>r?this.adapter.isVertical&&(this._parentTouch=!0):r>a&&this.adapter.isHorizontal&&(this._parentTouch=!0)}if(!this._parentTouch&&i.scrollManager.parentAdapter)return this._checkNested(t,e,i.scrollManager.parentAdapter);this._stopCheckNested=!0}},o._updateContentPosition=function(t,e){void 0===e&&(e=!0),this._updateScrollDirection(t),this.content.node.setPosition(t.x,t.y),this.emit(at.ON_SCROLL,this._scrollDirection),e?this._updatePercentage():this.__drawDebug()},o._updatePrevContentPosition=function(){this._prevContentPosition.set(this.content.node.position)},o._calcPercentage=function(t,e){var i=this.internal_getHiddenSize(),n=this.adapter.viewManager.loopHeader,a=this.adapter.viewManager.loopFooter,r=this.adapter.multiplier,o=this.adapter.viewManager.overflowHeader,s=t*r;if(this.adapter.isHorizontal?s-=e*r:s+=e*r,a)s+=(o+(i+=this.adapter.viewManager.spacing)*r)*r,this.adapter.centerManager.enabled?s+=this.adapter.centerManager.getContainerOffset():s+=this.adapter.paddingHeader,s+=1,s%=i;else if(n){s+=this.adapter.mainAxisSize-1,this.adapter.centerManager.enabled?s-=this.adapter.centerManager.getContainerOffset():s-=this.adapter.paddingFooter,s+=(o+i*r)*r,t*-r>o*r&&(s+=this.adapter.viewManager.spacing),s%=i}else s+=o*r,this.adapter.centerManager.enabled?s+=this.adapter.centerManager.getContainerOffset():s+=this.adapter.paddingHeader,s>i&&(s=i);return s/i},o._updatePercentage=function(){var t=this.calcOffset();this.adapter.viewManager.virtualSize<=this.adapter.mainAxisSize?this._percentage=0:this._percentage=this._calcPercentage(this.contentPosition,t),this.emit(at.ON_UPDATE_PERCENTAGE,this._percentage,t),this.__drawDebug()},o.internal_disableTouchTarget=function(t){if(this._touchEvent&&this._touchEvent.target==t){var e=this._touchEvent;this._simulateEvent(e,c.EventType.TOUCH_CANCEL,!1),this._simulateEvent(e,c.EventType.MOUSE_LEAVE,!1),this._touchEvent=null}},o.internal_getHiddenSize=function(){var t=this.adapter.viewManager.loopHeader,e=this.adapter.viewManager.loopFooter,i=this.adapter.viewManager.virtualSize;return t||e||this.adapter.centerManager.enabled||(i-=this.adapter.mainAxisSize,i+=this.adapter.mainAxisPadding),i},o._getContentMinBoundaryOffset=function(t,e){return!this.adapter.viewManager.header||!this.adapter.centerManager.enabled&&this.adapter.viewManager.virtualSize<=this.adapter.mainAxisSize?this.adapter.isHorizontal?e+this._defaultMax+t:e+this._defaultMin+t:this.adapter.viewManager.min+t},o._getContentMaxBoundaryOffset=function(t,e){return!this.adapter.viewManager.header||!this.adapter.centerManager.enabled&&this.adapter.viewManager.virtualSize<=this.adapter.mainAxisSize?this.adapter.isHorizontal?e+this._defaultMin+t:e+this._defaultMax+t:this.adapter.viewManager.max+t},o._getMaxBoundaryOffset=function(t){var e=this._viewMax;return this.adapter.isHorizontal?this.adapter.isArrangeAxisStart?t:e+t:this.adapter.isArrangeAxisStart?-t:e-t},o._getMinBoundaryOffset=function(t){var e=this._viewMin;return this.adapter.isHorizontal?this.adapter.isArrangeAxisStart?e+t:t:this.adapter.isArrangeAxisStart?e-t:-t},o._rubberDelta=function(t,e){return(1-1/(.55*Math.abs(t)/e+1))*e*Math.sign(t)},o._calcElastic=function(t,e,i){var n=this.adapter.mainAxis,a=this.elasticity;this._scrolling&&(a*=3);var r=this.adapter.isHorizontal?-1:1,o=T.smoothDamp(this.contentPosition,this.contentPosition+r*e,this._velocity,a,T.Infinity,t),s=o.velocity,h=o.position;Math.abs(s)<1&&(s=0),this._velocity=s,i[n]=h},o._calcInertia=function(t,e){this._velocity*=Math.pow(this.decelerationRate,t),Math.abs(this._velocity)<1&&(this._velocity=0),e[this.adapter.mainAxis]+=this._velocity*t},o._calcClamped=function(t){var e=this.adapter.mainAxis,i=t[e]-this.contentPosition,n=this.calcOffset(i);this.adapter.isHorizontal?t[e]-=n:t[e]+=n},o._updateScrollDirection=function(t){var e=t[this.adapter.mainAxis]-this.contentPosition;0!=e?(this.adapter.isHorizontal?this._scrollDirection=e>0?O.Right:O.Left:this._scrollDirection=e>0?O.Up:O.Down,this._laseScrollDirection=this._scrollDirection):this._scrollDirection=O.None},o.internal_setContentPosition=function(t,e){void 0===e&&(e=!0);var i={x:0,y:0};i[this.adapter.mainAxis]=t,this._updateContentPosition(i,e)},o.internal_lateUpdate=function(t){this.test||(this._autoScrolling(t),this._scrollHandler(t,this._scrollHandlePosition,this._scrollPositionHandler.bind(this)),this._scrollHandler(t,this._scrollHandlePercentage,this._scrollPercentageHandler.bind(this)))},o._autoScrolling=function(t){var e=this.calcOffset();if(this._boundaryOffset=e,this._dragging||0==e&&0==this._velocity||(this.content.node.getPosition(it),this.movementType==E.Elastic&&0!=e?this._calcElastic(t,e,it):this.inertia?this._calcInertia(t,it):this._velocity=0,this.movementType==E.Clamped&&this._calcClamped(it),this._updateContentPosition(it)),this._dragging&&this.inertia){var i=(this.contentPosition-this._prevContentPosition[this.adapter.mainAxis])/t;this._velocity=T.lerp(this._velocity,i,10*t)}this._prevContentPosition.equals(this.content.node.position)||this._updatePrevContentPosition(),!this._isEmitAboutToStop&&!this._dragging&&Math.abs(this._velocity)<=this.aboutToStopVelocity&&(this._scrollHandlePercentage||this._scrollHandlePosition||(this.emit(at.ON_ABOUT_TO_STOP,this._velocity),this._isEmitAboutToStop=!0)),this._scrolling=!1},o._scrollHandler=function(t,e,i){if(null!=e){e.deltaTime+=t;var n=e.deltaTime/(e.duration>u.FLT_EPSILON?e.duration:u.FLT_EPSILON);n=T.clamp01(n);var a=p.quintOut(n);e.current=T.progress(e.from,e.to,e.current,a),i(e,n)}},o._scrollPercentageHandler=function(t,e){var i=this.percentage;if(this.setPercentage(t.current),1==e||i==this.percentage){var n=!0;this._scrollHandlePercentage.stop&&(n=this._scrollHandlePercentage.stop()),n&&(this._scrollHandlePercentage=null)}},o._scrollPositionHandler=function(t,e){var i={x:0,y:0};i[this.adapter.mainAxis]=t.current,this._setAutoScroll(i),(1==e||Math.abs(this.contentPosition-t.to)<=1e-4)&&(this._scrollHandlePosition.stop&&this._scrollHandlePosition.stop(),this._scrollHandlePosition=null)},o._setAutoScroll=function(t){var e=this,i=function(t){e._updateContentPosition(t),e._updatePrevContentPosition(),e._velocity=0};i(t);var n=this.calcOffset();if(0!=n){var a=this.adapter.isHorizontal?-1:1;return t[this.adapter.mainAxis]+=n*a,i(t),!1}return!0},o._scrollToPosition=function(t,e,i){var n=this;if(!this.canAutoScroll)return!1;var a=e();return!(null==a||Math.abs(this.contentPosition-a)<u.FLT_EPSILON)&&(this._scrollHandlePercentage=null,this._scrollHandlePosition={current:0,from:this.contentPosition,to:a,deltaTime:0,duration:Math.max(0,t),change:function(){a=e(),n._scrollHandlePosition.to=a},stop:function(){i()}},!0)},o.getLayerNode=function(t){switch(t){case M.Medium:return this._layerMedium;case M.Highest:return this._layerHighest;default:return this._layerLowest}},o.scrollToModelIndex=function(t,e,i){var n=this,a=this.adapter.viewManager.getGroupIndexByModelIndex(e);if(-1!=a){var r=!1;this._scrollToPosition(t,(function(){var t=n.adapter.centerManager.getPositionByGroupIndex(a,i,r);return r=!0,t}),(function(){n.emit(at.ON_SCROLL_TO_MODELINDEX_AFTER,e)}))&&this.emit(at.ON_SCROLL_TO_MODELINDEX_BEFOR,e)}},o.scrollToGroupIndex=function(t,e,i){var n=this,a=!1;this._scrollToPosition(t,(function(){var t=n.adapter.centerManager.getPositionByGroupIndex(e,i,a);return a=!0,t}),(function(){n.emit(at.ON_SCROLL_TO_GROUPINDEX_AFTER,e)}))&&this.emit(at.ON_SCROLL_TO_GROUPINDEX_BEFOR,e)},o.scrollToHeader=function(t){this.scrollToGroupIndex(t,0)},o.scrollToFooter=function(t){this.scrollToGroupIndex(t,this.adapter.viewManager.groupLength-1)},o.scrollToPercentage=function(t,e){if(!this.canAutoScroll)return!1;Math.abs(this._percentage-e)<.001||(e=T.clamp01(e),t=Math.max(0,t),this._scrollHandlePercentage=null,this._scrollHandlePercentage={deltaTime:0,duration:t,current:0,from:this._percentage,to:e})},o.stopVelocity=function(){this._velocity=0},o.stopScroll=function(){this._scrollHandlePosition=null,this._scrollHandlePercentage=null,this.stopVelocity()},o.setPercentage=function(t){for(var e=this.internal_getHiddenSize(),i={x:0,y:0},n=0,a=null;n<100;){n++;var r=this._percentage-t;if(null!=a&&this._percentage===a)break;if(Math.abs(r)<u.FLT_EPSILON)break;a=this._percentage;var o=this.contentPosition-r*this.adapter.multiplier*e;if(i[this.adapter.mainAxis]=o,!this._setAutoScroll(i))break}100==n&&console.warn("循环次数已达最大值，尽量不要在滚动过程中频繁修改尺寸")},o.calcOffset=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.contentPosition);var i=0;if(this.movementType==E.Unrestricted)return i;var n=this._getContentMaxBoundaryOffset(t,e),a=this._getContentMinBoundaryOffset(t,e),r=this._getMaxBoundaryOffset(n),o=this._getMinBoundaryOffset(a);!this.adapter.centerManager.enabled&&this.adapter.viewManager.virtualSize>this.adapter.mainAxisSize&&(this.adapter.isVertical?(r-=this.adapter.viewManager.top,o+=this.adapter.viewManager.bottom):(r-=this.adapter.viewManager.left,o+=this.adapter.viewManager.right));var s=0,h=0;if(this.adapter.centerManager.enabled&&this.adapter.viewManager.groupLength>0)h=this.adapter.centerManager.max,s=this.adapter.centerManager.min;else{var l=this.adapter.viewManager.getMagneticOffset();r-=l,o-=l}return this.adapter.releaseManager.enabled&&(h=Math.max(h,this.adapter.releaseManager.max),s=Math.max(s,this.adapter.releaseManager.min)),r-=h,(o+=s)<-.001?i=o:r>.001&&(i=r),i},r(e,[{key:"view",get:function(){return this._view},set:function(t){this._view=t}},{key:"content",get:function(){return this._content},set:function(t){this._content=t}},{key:"orientation",get:function(){return this._orientation},set:function(t){t!=this._orientation&&(this._orientation=t,this.emit(at.ON_CHANGED_ORIENTATION))}},{key:"_viewMin",get:function(){return-this.adapter.mainAxisSize}},{key:"_viewMax",get:function(){return this.adapter.mainAxisSize}},{key:"_defaultMin",get:function(){return 1==this.adapter.multiplier?-this.adapter.mainAxisSize:0}},{key:"_defaultMax",get:function(){return 1==this.adapter.multiplier?0:this.adapter.mainAxisSize}},{key:"isMyEventAndMoved",get:function(){return this._isMyEventAndMoved}},{key:"velocity",get:function(){return this._velocity}},{key:"scrollDirection",get:function(){return this._scrollDirection}},{key:"laseScrollDirection",get:function(){return this._laseScrollDirection}},{key:"percentage",get:function(){return this._percentage}},{key:"dragging",get:function(){return this._dragging}},{key:"boundaryOffset",get:function(){return this._boundaryOffset}},{key:"parentAdapter",get:function(){return this._parentAdapter}},{key:"canAutoScroll",get:function(){return!this.dragging&&this.adapter.viewManager.virtualSize>this.adapter.mainAxisSize}},{key:"canTouch",get:function(){return this.touchMode==f.AlwaysAllow||this.touchMode!=f.Disabled&&(!!this.adapter.centerManager.enabled||(!!this.adapter.releaseManager.enabled||this.adapter.viewManager.virtualSize>this.adapter.mainAxisSize))}},{key:"contentPosition",get:function(){return this.content.node.position[this.adapter.mainAxis]}}]),e}(g)).Event=at,F=e((k=$).prototype,"_view",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(k.prototype,"view",[w],Object.getOwnPropertyDescriptor(k.prototype,"view"),k.prototype),B=e(k.prototype,"_content",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(k.prototype,"content",[P],Object.getOwnPropertyDescriptor(k.prototype,"content"),k.prototype),G=e(k.prototype,"_orientation",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.Vertical}}),e(k.prototype,"orientation",[N],Object.getOwnPropertyDescriptor(k.prototype,"orientation"),k.prototype),X=e(k.prototype,"touchMode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f.Auto}}),W=e(k.prototype,"movementType",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return E.Elastic}}),Z=e(k.prototype,"elasticity",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),j=e(k.prototype,"inertia",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),q=e(k.prototype,"decelerationRate",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.135}}),Y=e(k.prototype,"aboutToStopVelocity",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),K=e(k.prototype,"cancelInnerEvents",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),J=e(k.prototype,"nestedMinThreshold",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.001}}),Q=e(k.prototype,"nestedMaxThreshold",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.999}}),V=k))||V));o._RF.pop()}}}));

System.register("chunks:///_virtual/Selector.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BranchNode.ts"],(function(t){var n,c,o;return{setters:[function(t){n=t.inheritsLoose},function(t){c=t.cclegacy},function(t){o=t.BranchNode}],execute:function(){c._RF.push({},"90470XqT/FGHo/PRQktLcYy","Selector",void 0);t("Selector",function(t){function c(){return t.apply(this,arguments)||this}n(c,t);var o=c.prototype;return o.success=function(){t.prototype.success.call(this),this._control.success()},o.fail=function(){t.prototype.fail.call(this),this._actualTask+=1,this._actualTask<this.children.length?this._run(this._blackboard):this._control.fail()},o._run=function(n){this._nodeRunning?this._nodeRunning.run(this._blackboard):t.prototype._run.call(this)},c}(o));c._RF.pop()}}}));

System.register("chunks:///_virtual/Sequence.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BranchNode.ts"],(function(t){var n,e,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){c=t.BranchNode}],execute:function(){e._RF.push({},"1ef80bgYZBPXqCDIpzHpbBJ","Sequence",void 0);t("Sequence",function(t){function e(n){return t.call(this,n)||this}n(e,t);var c=e.prototype;return c.success=function(){t.prototype.success.call(this),this._actualTask+=1,this._actualTask<this.children.length?this._run(this._blackboard):this._control.success()},c.fail=function(){t.prototype.fail.call(this),this._control.fail()},c._run=function(n){this._nodeRunning?this._nodeRunning.run(this._blackboard):t.prototype._run.call(this)},e}(c));e._RF.pop()}}}));

System.register("chunks:///_virtual/Settle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./AsyncQueue.ts","./ECS.ts","./Card.ts","./CardModel.ts","./SingletonModuleComp.ts","./GameplayEvent.ts"],(function(e){var t,n,a,r,o,i,c,s,l,u,d,p,f,h,m,y,g,C,M,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){c=e.cclegacy,s=e._decorator,l=e.Label,u=e.Animation,d=e.EditBox,p=e.Component},function(e){f=e.oops},function(e){h=e.AsyncQueue},function(e){m=e.ecs},function(e){y=e.Card},function(e){g=e.ActionType,C=e.Relation},function(e){M=e.smc},function(e){w=e.GameplayEvent}],execute:function(){var v,b,A,D,k,S,x,P,R,E,I;c._RF.push({},"3e3e7OGIZVB1pAE7aI2khFJ","Settle",void 0);var L=s.ccclass,T=s.property;e("Settle",(v=L("Settle"),b=T(l),A=T(l),D=T(l),k=T(u),v((P=t((x=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,a(t,"attackLabel",P,r(t)),a(t,"defenseLabel",R,r(t)),a(t,"healingLabel",E,r(t)),a(t,"applyAnimation",I,r(t)),t}n(t,e);var c=t.prototype;return c.onEnable=function(){f.message.on(w.Settle,this.settle,this)},c.onDisable=function(){f.message.off(w.Settle,this.settle,this)},c.settle=function(){var e=this;M.player.PlayerModel.defense=0;var t=new h,n=new h,a=new h,r=new h,c=new h;M.player&&M.player.PlayerModel.currentResult&&M.player.PlayerModel.currentResult.slice().reverse().forEach((function(t,s){s=M.player.PlayerModel.currentResult.length-1-s,t&&(t.CardModel.dynamicData.tempAttack=0,t.CardModel.dynamicData.tempDefense=0,t.CardModel.dynamicData.tempHealing=0,t.CardModel.effect.forEach((function(l){l.initEffectParams(t,e.getTargets(l.relation,s));var u=l.checkEffect();console.log("filteredTarget: ",u),u.length>0&&l.action.forEach((function(e){switch(e.actionType){case g.TempChange:n.push(o(i().mark((function t(n,a,r){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.initActionParams(l._self,u),t.next=3,e.doAction();case 3:n();case 4:case"end":return t.stop()}}),t)}))));break;case g.PermanentChange:a.push(o(i().mark((function t(n,a,r){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.initActionParams(l._self,u),t.next=3,e.doAction();case 3:n();case 4:case"end":return t.stop()}}),t)}))));break;case g.Summon:r.push(o(i().mark((function t(n,a,r){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.initActionParams(l._self,u),t.next=3,e.doAction();case 3:n();case 4:case"end":return t.stop()}}),t)}))));break;case g.Destroy:c.push(o(i().mark((function t(n,a,r){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.initActionParams(l._self,u),t.next=3,e.doAction();case 3:n();case 4:case"end":return t.stop()}}),t)}))))}}))})))})),console.log("TempChangeQueue: ",n),console.log("PermanentChangeQueue: ",a),console.log("SummonQueue: ",r),console.log("DestroyQueue: ",c),t.push(o(i().mark((function e(t,a,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.play();case 2:t();case 3:case"end":return e.stop()}}),e)})))),t.push(o(i().mark((function e(t,n,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.play();case 2:t();case 3:case"end":return e.stop()}}),e)})))),t.push(o(i().mark((function e(t,n,a){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.play();case 2:t();case 3:case"end":return e.stop()}}),e)})))),t.push(o(i().mark((function e(t,n,a){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.play();case 2:t();case 3:case"end":return e.stop()}}),e)})))),t.push(o(i().mark((function t(n,a,r){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.apply(),n();case 2:case"end":return t.stop()}}),t)})))),t.play()},c.getTargets=function(e,t){switch(e){case C.Adjacent:return this.getAdjacentIndices(t);case C.SameRow:return this.getSameRowIndices(t);case C.SameColumn:return this.getSameColumnIndices(t);case C.SameDiagonal:return this.getDiagonalIndices(t);case C.SameColumnAndRow:return this.getSameRowIndices(t).concat(this.getSameColumnIndices(t));case C.All:return M.player.PlayerModel.currentResult.slice(0,t).concat(M.player.PlayerModel.currentResult.slice(t+1));case C.Self:return[M.player.PlayerModel.currentResult[t]];default:return[]}},c.indexToCard=function(e,t){var n=[];return e.forEach((function(e){n.push(t[e])})),n},c.getAdjacentIndices=function(e){for(var t=3-Math.floor(e/4),n=e%4,a=[],r=-1;r<=1;r++)for(var o=-1;o<=1;o++)if(0!==r||0!==o){var i=t+r,c=n+o;i>=0&&i<4&&c>=0&&c<4&&a.push(4*(4-i-1)+c)}return this.indexToCard(a,M.player.PlayerModel.currentResult)},c.getSameRowIndices=function(e){for(var t=Math.floor(e/4),n=[],a=0;a<4;a++)4*t+a!==e&&n.push(4*t+a);return this.indexToCard(n,M.player.PlayerModel.currentResult)},c.getSameColumnIndices=function(e){for(var t=e%4,n=[],a=0;a<4;a++)4*a+t!==e&&n.push(4*a+t);return this.indexToCard(n,M.player.PlayerModel.currentResult)},c.getDiagonalIndices=function(e){for(var t=Math.floor(e/4),n=e%4,a=[],r=t-1,o=n-1;r>=0&&o>=0;r--,o--)a.push(4*r+o);for(var i=t+1,c=n+1;i<4&&c<4;i++,c++)a.push(4*i+c);for(var s=t+1,l=n-1;s<4&&l>=0;s++,l--)a.push(4*s+l);for(var u=t-1,d=n+1;u>=0&&d<4;u--,d++)a.push(4*u+d);return this.indexToCard(a,M.player.PlayerModel.currentResult)},c.apply=function(){var e=this,t=0,n=0,a=0;M.player.PlayerModel.currentResult.forEach((function(e){e&&(t+=e.CardModel.dynamicData.tempAttack+e.CardModel.Attack,n+=e.CardModel.dynamicData.tempDefense+e.CardModel.Defense,a+=e.CardModel.dynamicData.tempHealing+e.CardModel.Healing,e.CardView.data.applyAttack=e.CardModel.dynamicData.tempAttack+e.CardModel.Attack,e.CardView.data.applyDefense=e.CardModel.dynamicData.tempDefense+e.CardModel.Defense,e.CardView.data.applyHealth=e.CardModel.dynamicData.tempHealing+e.CardModel.Healing,e.CardView.getComponent(u).play(),e.CardModel.dynamicData.tempAttack=0,e.CardModel.dynamicData.tempDefense=0,e.CardModel.dynamicData.tempHealing=0)})),this.attackLabel.string=t.toString(),this.defenseLabel.string=n.toString(),this.healingLabel.string=a.toString(),M.player.PlayerModel.defense+=n,M.player.PlayerModel.health+=a,f.timer.scheduleOnce((function(){e.applyAnimation.play(),e.applyAnimation.on(u.EventType.FINISHED,(function(){e.attackLabel.string="",e.defenseLabel.string="",e.healingLabel.string=""}),e),f.message.dispatchEvent(w.RoundEnd,{attack:t,defense:n,healing:a})}),1)},c.addCard=function(){var e=this.getComponentInChildren(d).string,t=m.getEntity(y);t.CardModel.load(parseInt(e)),M.player.PlayerModel.cardList.push(t)},c.update=function(e){},t}(p)).prototype,"attackLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(x.prototype,"defenseLabel",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(x.prototype,"healingLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(x.prototype,"applyAnimation",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=x))||S));c._RF.pop()}}}));

System.register("chunks:///_virtual/share.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"5f5c0BRuS5Lc6fX6XtAy2vA","share",void 0);e("Share",function(){function e(){}return e.showShareMenu=function(e){var n=window.wx||window.tt||window.swan;n&&n.shareAppMessage(e)},e.setShareAppMessageListener=function(e){var n=window.wx||window.tt||window.swan;n&&n.onShareAppMessage(e)},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/SingletonModuleComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECS.ts"],(function(n){var e,t,o;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy},function(n){o=n.ecs}],execute:function(){var l;t._RF.push({},"17a56vOVQFMMarANxr6JvP7","SingletonModuleComp",void 0);var i=n("SingletonModuleComp",o.register("SingletonModule")(l=function(n){function t(){for(var e,t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];return(e=n.call.apply(n,[this].concat(o))||this).initialize=null,e.guide=null,e.player=null,e}return e(t,n),t.prototype.reset=function(){},t}(o.Comp))||l);n("smc",o.getSingleton(i));t._RF.pop()}}}));

System.register("chunks:///_virtual/SpineFinishedRelease.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts"],(function(e){var t,i,n,s,o,r,a,p,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,a=e.sp,p=e.Component},function(e){l=e.oops}],execute:function(){var h,c,u;o._RF.push({},"9589eKB/RZKXpxoYhz5SyC7","SpineFinishedRelease",void 0);var d=r.ccclass,f=r.property;e("SpineFinishedRelease",d("SpineFinishedRelease")((u=t((c=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,n(t,"isDestroy",u,s(t)),t.spine=void 0,t.resPath=null,t}i(t,e);var o=t.prototype;return o.setResPath=function(e){this.resPath=e},o.onLoad=function(){var e=this;this.spine=this.getComponent(a.Skeleton),this.spine.setCompleteListener(this.onSpineComplete.bind(this)),this.resPath?l.res.load(this.resPath,a.SkeletonData,(function(t,i){t?console.error("加载【"+e.resPath+"】的 SPINE 资源不存在"):(e.spine.skeletonData=i,e.spine.setAnimation(0,"animation",!1))})):this.spine.setAnimation(0,"animation",!1)},o.onSpineComplete=function(){this.isDestroy?this.node.destroy():this.node.removeFromParent()},t}(p)).prototype,"isDestroy",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),h=c))||h);o._RF.pop()}}}));

System.register("chunks:///_virtual/StorageManager.ts",["cc","./env","./EncryptUtil.ts"],(function(e){var t,n,r,i;return{setters:[function(e){t=e.cclegacy,n=e.sys},function(e){r=e.PREVIEW},function(e){i=e.EncryptUtil}],execute:function(){t._RF.push({},"ed226gLF85Oyr+WhA9TJZLX","StorageManager",void 0);e("StorageManager",function(){function e(){this._key=null,this._iv=null,this._id=""}var t=e.prototype;return t.init=function(e,t){i.initCrypto(e,t),this._key=i.md5(e),this._iv=i.md5(t)},t.setUser=function(e){this._id=e},t.set=function(e,t){var r=e+"_"+this._id;if(null!=e){if(r=i.md5(r),null==t)return console.warn("存储的值为空，则直接移除该存储"),void this.remove(e);if("function"!=typeof t){if("object"==typeof t)try{t=JSON.stringify(t)}catch(e){return void console.error("解析失败，str = "+t)}else"number"==typeof t&&(t+="");null!=this._key&&null!=this._iv&&(t=i.aesEncrypt(""+t,this._key,this._iv)),n.localStorage.setItem(r,t)}else console.error("储存的值不能为方法")}else console.error("存储的key不能为空")},t.get=function(e,t){if(void 0===t&&(t=""),null==e)return console.error("存储的key不能为空"),null;e=e+"_"+this._id,e=i.md5(e);var o=n.localStorage.getItem(e);return null==o||""===o||r||null==this._key||null==this._iv||(o=i.aesDecrypt(o,this._key,this._iv)),null===o?t:o},t.getNumber=function(e,t){void 0===t&&(t=0);var n=this.get(e);return"0"==n?Number(n):Number(n)||t},t.getBoolean=function(e){var t=this.get(e);return Boolean(t)||!1},t.getJson=function(e,t){var n=this.get(e);return n&&JSON.parse(n)||t},t.remove=function(e){if(null!=e){var t=e+"_"+this._id;t=i.md5(t),n.localStorage.removeItem(t)}else console.error("存储的key不能为空")},t.clear=function(){n.localStorage.clear()},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/StringFormat.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"85fe8Gc6h5Ava+JsdbBs8cR","StringFormat",void 0);t("StringFormatFunction",new(function(){function t(){}var e=t.prototype;return e.deal=function(t,e){if(""===e)return t;var n=(e=e.toLowerCase().trim()).match(/^[a-z|A-Z]+/gi),i=e.match(/\d+$/gi),r="",o=0,c="";if(n&&(r=n[0]),i&&(o=parseInt(i[0])),"number"==typeof t)switch(r){case"int":c=this.int(t);break;case"fix":c=this.fix(t,o);break;case"kmbt":c=this.KMBT(t);break;case"per":c=this.per(t,o);break;case"sep":c=this.sep(t)}else{switch(r){case"limit":c=this.limit(t,o)}c=t}return c},e.sep=function(t){return Math.round(t).toString().replace(new RegExp("(\\d)(?=(\\d{3})+$)","ig"),"$1,")},e.time_m=function(t){},e.time_s=function(t){},e.time_ms=function(t){},e.timeStamp=function(t){return new Date(t).toString()},e.per=function(t,e){return Math.round(100*t).toFixed(e)},e.int=function(t){return Math.round(t)},e.fix=function(t,e){return t.toFixed(e)},e.limit=function(t,e){return t.substring(0,e)},e.KMBT=function(t,e){return this.compressUnit(t,[1e3,1e6,1e9,1e12],["","K","M","B","T"],2)},e.compressUnit=function(t,e,n,i){void 0===i&&(i=2);var r,o=e,c=n,u="";for(r=0;r<o.length;r++){if(t<o[r]){u=r>0?(t/o[r-1]).toFixed(i):t.toFixed(0);break}}return u+c[r]},t}()));e._RF.pop()}}}));

System.register("chunks:///_virtual/StringUtil.ts",["cc"],(function(t){var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"aa8435LSBtAR5HPsje6IJ2w","StringUtil",void 0);t("StringUtil",function(){function t(){}return t.guid=function(){for(var t="",r=1;r<=32;r++){t+=Math.floor(16*Math.random()).toString(16),8!=r&&12!=r&&16!=r&&20!=r||(t+="-")}return t},t.numberTotPermil=function(t){return t.toLocaleString()},t.numberToThousand=function(t,r){void 0===r&&(r=2);var n=1e3;if(t<n)return t.toString();var e=Math.floor(Math.log(t)/Math.log(n));return(t/Math.pow(n,e)).toFixed(r)+["","K","M","G"][e]},t.numberToTenThousand=function(t,r){void 0===r&&(r=2);var n=1e4;if(t<n)return t.toString();var e=Math.floor(Math.log(t)/Math.log(n));return(t/Math.pow(n,e)).toFixed(r)+["","万","亿","万亿"][e]},t.format=function(t,r){var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var e in/(y+)/.test(r)&&(r=r.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+e+")").test(r)&&(r=r.replace(RegExp.$1,1==RegExp.$1.length?n[e]:("00"+n[e]).substr((""+n[e]).length)));return r},t.stringToArray1=function(t){return""==t?[]:t.split(",")},t.stringToArray2=function(t){return""==t?[]:t.split("|")},t.stringToArray3=function(t){return""==t?[]:t.split(":")},t.stringToArray4=function(t){return""==t?[]:t.split(";")},t.sub=function(t,r,n){void 0===n&&(n=!1);var e=/[^\x00-\xff]/g;if(t.replace(e,"mm").length<=r)return t;for(var o=Math.floor(r/2);o<t.length;o++)if(t.substr(0,o).replace(e,"mm").length>=r)return n?t.substr(0,o)+"...":t.substr(0,o);return t},t.stringLen=function(t){for(var r=0,n=t.length,e=-1,o=0;o<n;o++)r+=(e=t.charCodeAt(o))>=0&&e<=128?1:2;return r},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/TableCard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JsonUtil.ts"],(function(t){var e,n,a;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy},function(t){a=t.JsonUtil}],execute:function(){n._RF.push({},"ae60aDFa6hJTrfyC4EXRDEE","TableCard",void 0),t("TableCard",function(){function t(){this.data=void 0,this.id=0}var n=t.prototype;return n.init=function(e){var n=a.get(t.TableName);this.data=n[e],this.id=e},n.length=function(){var e=a.get(t.TableName);return Object.keys(e).length},n.keys=function(){var e=a.get(t.TableName);return Object.keys(e)},e(t,[{key:"name",get:function(){return this.data.name}},{key:"description",get:function(){return this.data.description}},{key:"attack",get:function(){return this.data.attack}},{key:"defense",get:function(){return this.data.defense}},{key:"healing",get:function(){return this.data.healing}},{key:"rare",get:function(){return this.data.rare}},{key:"group",get:function(){return this.data.group}},{key:"effect",get:function(){return this.data.effect}}]),t}()).TableName="Card",n._RF.pop()}}}));

System.register("chunks:///_virtual/TableEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JsonUtil.ts"],(function(t){var e,n,a;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy},function(t){a=t.JsonUtil}],execute:function(){n._RF.push({},"af334/FzHRI1YUOtZvZ3vhO","TableEffect",void 0),t("TableEffect",function(){function t(){this.data=void 0,this.id=0}var n=t.prototype;return n.init=function(e){var n=a.get(t.TableName);this.data=n[e],this.id=e},n.length=function(){var e=a.get(t.TableName);return Object.keys(e).length},n.keys=function(){var e=a.get(t.TableName);return Object.keys(e)},e(t,[{key:"name",get:function(){return this.data.name}},{key:"relation",get:function(){return this.data.relation}},{key:"filter",get:function(){return this.data.filter}},{key:"action",get:function(){return this.data.action}}]),t}()).TableName="Effect",n._RF.pop()}}}));

System.register("chunks:///_virtual/TableGroup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JsonUtil.ts"],(function(t){var e,n,a;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy},function(t){a=t.JsonUtil}],execute:function(){n._RF.push({},"c45d66AnodITq8LV/7UMSEV","TableGroup",void 0),t("TableGroup",function(){function t(){this.data=void 0,this.id=0}var n=t.prototype;return n.init=function(e){var n=a.get(t.TableName);this.data=n[e],this.id=e},n.length=function(){var e=a.get(t.TableName);return Object.keys(e).length},n.keys=function(){var e=a.get(t.TableName);return Object.keys(e)},e(t,[{key:"name",get:function(){return this.data.name}},{key:"card",get:function(){return this.data.card}},{key:"description",get:function(){return this.data.description}}]),t}()).TableName="Group",n._RF.pop()}}}));

System.register("chunks:///_virtual/TableLanguage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JsonUtil.ts"],(function(e){var t,n,a;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy},function(e){a=e.JsonUtil}],execute:function(){n._RF.push({},"74f4fgFfZxHnqCfURfaciMV","TableLanguage",void 0),e("TableLanguage",function(){function e(){this.data=void 0,this.id=0}var n=e.prototype;return n.init=function(t){var n=a.get(e.TableName);this.data=n[t],this.id=t},n.length=function(){var t=a.get(e.TableName);return Object.keys(t).length},n.keys=function(){var t=a.get(e.TableName);return Object.keys(t)},t(e,[{key:"zh",get:function(){return this.data.zh}},{key:"en",get:function(){return this.data.en}}]),e}()).TableName="Language",n._RF.pop()}}}));

System.register("chunks:///_virtual/TablePromptWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JsonUtil.ts"],(function(t){var i,e,n;return{setters:[function(t){i=t.createClass},function(t){e=t.cclegacy},function(t){n=t.JsonUtil}],execute:function(){e._RF.push({},"1e3d7uann5MRokAL2wULm9y","TablePromptWindow",void 0),t("TablePromptWindow",function(){function t(){this.data=void 0,this.id=0,this.id1=0,this.id2=0}return t.prototype.init=function(i,e,r){var a=n.get(t.TableName);this.data=a[i][e][r],this.id=i,this.id1=e,this.id2=r},i(t,[{key:"title",get:function(){return this.data.title}},{key:"describe",get:function(){return this.data.describe}},{key:"array",get:function(){return this.data.array}},{key:"hp",get:function(){return this.data.hp}}]),t}()).TableName="PromptWindow",e._RF.pop()}}}));

System.register("chunks:///_virtual/Task.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BTreeNode.ts"],(function(e){var n,t,o;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy},function(e){o=e.BTreeNode}],execute:function(){t._RF.push({},"95087QhEU1G1LWnM2D7haTQ","Task",void 0);e("Task",function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.run=function(e){},t}(o));t._RF.pop()}}}));

System.register("chunks:///_virtual/Timer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,s;return{setters:[function(e){t=e.createClass},function(e){s=e.cclegacy}],execute:function(){s._RF.push({},"6021fct1uhJsImEuhdFWC0f","Timer",void 0);e("Timer",function(){function e(e){void 0===e&&(e=0),this.callback=null,this._elapsedTime=0,this._step=-1,this.step=e}var s=e.prototype;return s.update=function(e){return!(this.step<=0)&&(this._elapsedTime+=e,this._elapsedTime>=this._step&&(this._elapsedTime-=this._step,null==(t=this.callback)||t.call(this),!0));var t},s.reset=function(){this._elapsedTime=0},s.stop=function(){this._elapsedTime=0,this.step=-1},t(e,[{key:"elapsedTime",get:function(){return this._elapsedTime}},{key:"step",get:function(){return this._step},set:function(e){this._step=e,this._elapsedTime=0}},{key:"progress",get:function(){return this._elapsedTime/this._step}}]),e}());s._RF.pop()}}}));

System.register("chunks:///_virtual/TimerManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StringUtil.ts","./Timer.ts"],(function(e){var t,i,n,r,o;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e.Component},function(e){r=e.StringUtil},function(e){o=e.Timer}],execute:function(){i._RF.push({},"73600VLsIBLOKhOhd7td4P8","TimerManager",void 0);e("TimerManager",function(e){function i(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).times={},t.initTime=(new Date).getTime(),t.serverTime=0,t}t(i,e);var n=i.prototype;return n.update=function(e){for(var t in this.times){var i=this.times[t];i.timer.update(e)&&i.object[i.field]>0&&(i.object[i.field]--,0==i.object[i.field]?this.onTimerComplete(i):i.onSecond&&i.onSecond.call(i.object))}},n.onTimerComplete=function(e){e.onComplete&&e.onComplete.call(e.object),e.event&&this.node.dispatchEvent(e.event),delete this.times[e.id]},n.register=function(e,t,i,n){var s=new o;s.step=1;var m={};return m.id=r.guid(),m.timer=s,m.object=e,m.field=t,m.onSecond=i,m.onComplete=n,this.times[m.id]=m,m.id},n.unRegister=function(e){this.times[e]&&delete this.times[e]},n.setServerTime=function(e){return e&&(this.serverTime=e),this.serverTime},n.getServerTime=function(){return this.serverTime+this.getTime()},n.format=function(e,t){var i={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?i[n]:("00"+i[n]).substr((""+i[n]).length)));return e},n.getTime=function(){return this.getLocalTime()-this.initTime},n.getLocalTime=function(){return Date.now()},n.save=function(){for(var e in this.times)this.times[e].startTime=this.getTime()},n.load=function(){for(var e in this.times){var t=Math.floor((this.getTime()-(this.times[e].startTime||this.getTime()))/1e3),i=this.times[e];i.object[i.field]=i.object[i.field]-t,i.object[i.field]<0&&(i.object[i.field]=0,this.onTimerComplete(i)),this.times[e].startTime=null}},i}(n));i._RF.pop()}}}));

System.register("chunks:///_virtual/UIMap.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"1bd03ggtItIIajoqd0I4VGL","UIMap",void 0);var i=function(){this.id=void 0,this.pid=void 0,this.parent=null,this.child=[],this.name=void 0,this.panel=void 0};n("UIMap",function(){function n(){this.manager=void 0,this.nodes=new Map}var t=n.prototype;return t.init=function(n,t){var e=this;for(var a in this.manager=n,t){var r=t[a],s=new i;s.id=parseInt(a),s.pid=r.parent,s.name=r.name,s.panel=r.panel,this.nodes.set(s.id,s)}this.nodes.forEach((function(n,t){n.parent=e.nodes.get(n.pid),n.parent&&n.parent.child.push(n)}))},t.pathFinding=function(n,t){var i=this,e=this.nodes.get(n),a=this.nodes.get(t),r=this.findUp(e),s=this.findUp(a);return r.forEach((function(n){i.manager.remove(n.id,!0)})),s.forEach((function(n){i.manager.open(n.id)})),{paths_close:r,paths_open:s}},t.findUp=function(n){for(var t=[],i=n;null!=i.parent;)t.push(i),i=i.parent;return t},t.release=function(){this.nodes.clear()},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/umami.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i;return{setters:[function(t){e=t.extends},function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"35630f5b8ZEkZgbRqkKHq71","umami",void 0);var n=t("Umami",function(){function t(){}return t.send=function(t,e){var i=this;void 0===e&&(e="event");var n={"Content-Type":"application/json"};void 0!==this.cache&&(n["x-umami-cache"]=this.cache);var o=window.wx||window.tt||window.swan;o?o.request({url:this.endpoint,method:"POST",data:JSON.stringify({type:e,payload:t}),header:n,success:function(t){this.cache=t},fail:function(t){console.log(t)}}):fetch(this.endpoint,{method:"POST",body:JSON.stringify({type:e,payload:t}),headers:n}).then((function(t){return t.text()})).then((function(t){return i.cache=t})).catch((function(){}))},t.getPayload=function(){return{website:this.website,hostname:this.hostname,screen:this.screen,language:this.language,title:this.title,url:this.url,referrer:this.referrer}},t.getDefaultInfo=function(){this.hostname=window.location.hostname,this.screen=window.screen.width+"x"+window.screen.height,this.language=navigator.language,this.title=document.title,this.url=window.location.href,this.referrer=document.referrer||null},t.init=function(t,e){this.website=e,this.endpoint=t+"/api/send";var i=window.wx||window.tt||window.swan;if(i)try{var n=i.getSystemInfoSync();this.hostname=n.version,this.screen=n.screenWidth+"x"+n.screenHeight,this.language=n.language,this.title=n.platform,this.url=n.model,this.referrer=n.SDKVersion}catch(t){this.getDefaultInfo()}else this.getDefaultInfo();this.track()},t.track=function(t,i){return"string"==typeof t?this.send(e({},this.getPayload(),{name:t,data:"object"==typeof i?i:void 0})):"object"==typeof t?this.send(t):"function"==typeof t?this.send(t(this.getPayload())):this.send(this.getPayload())},t}());n.cache=void 0,n.endpoint=void 0,n.website=void 0,n.hostname=void 0,n.screen=void 0,n.language=void 0,n.title=void 0,n.url=void 0,n.referrer=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/Vec3Util.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MathUtil.ts"],(function(n){var e,r,t,u,a;return{setters:[function(n){e=n.createClass},function(n){r=n.cclegacy,t=n.Vec3,u=n.Mat4},function(n){a=n.MathUtil}],execute:function(){r._RF.push({},"38947ih8d5EQ7HG4buug+SR","Vec3Util",void 0);n("Vec3Util",function(){function n(){}return n.progress=function(n,e,r){var u=new t;return u.x=a.progress(n.x,e.x,r),u.y=a.progress(n.y,e.y,r),u.z=a.progress(n.z,e.z,r),u},n.add=function(n,e){var r=new t;return t.add(r,n,e),r},n.sub=function(n,e){var r=new t;return t.subtract(r,n,e),r},n.mul=function(n,e){var r=new t;return t.multiplyScalar(r,n,e),r},n.div=function(n,e){var r=new t;return r.x=n.x/e,r.y=n.y/e,r.z=n.z/e,r},n.equals=function(n,e){return n.x==e.x&&n.y==e.y&&n.z==e.z},n.magnitude=function(n){return n.length()},n.normalize=function(n){return new t(n.x,n.y,n.z).normalize()},n.direction=function(n,e){var r=new t;return t.subtract(r,e,n),r.normalize()},n.distance=function(n,e){return t.distance(n,e)},n.lerp=function(n,e,r){return this.bezierOne(r,n,e)},n.slerp=function(n,e,r){if(r<=0)return n;if(r>=1)return e;var u=this.rotateTo(n,e,t.angle(n,e)/Math.PI*180*r),a=e.length()*r+n.length()*(1-r);return u.normalize().multiplyScalar(a)},n.rotateTo=function(n,e,r){if(0==t.angle(n,e))return e;var a=new t;t.cross(a,n,e),a.normalize();var i=r*Math.PI/180,l=new u;return l.rotate(i,a),new t(n.x*l.m00+n.y*l.m04+n.z*l.m08,n.x*l.m01+n.y*l.m05+n.z*l.m09,n.x*l.m02+n.y*l.m06+n.z*l.m10)},n.bezierOne=function(n,e,r){n>1?n=1:n<0&&(n=0);var t=e.clone(),u=r.clone();return t.multiplyScalar(1-n).add(u.multiplyScalar(n))},n.bezierTwo=function(n,e,r,u){n>1?n=1:n<0&&(n=0);var a=1-n,i=n*n,l=e.clone(),o=new t,c=r.clone(),y=u.clone();return o.add(l.multiplyScalar(a*a)),o.add(c.multiplyScalar(2*a*n)),o.add(y.multiplyScalar(i)),o},n.bezierThree=function(n,e,r,t,u){n>1?n=1:n<0&&(n=0);var a=1-n,i=a*a,l=i*a,o=n*n,c=o*n,y=e.clone(),f=e.clone(),s=r.clone(),d=t.clone(),m=u.clone();return f.add(y.multiplyScalar(l)),f.add(s.multiplyScalar(3*i*n)),f.add(d.multiplyScalar(3*a*o)),f.add(m.multiplyScalar(c)),f},n.dot=function(n,e){var r=n,t=e;return r.x*t.x+r.y*t.y+r.z*t.z},n.cross=function(n,e){var r=new t(1,0,0),u=new t(0,1,0),a=new t(0,0,1),i=new t(n.x,n.y,n.z),l=new t(e.x,e.y,e.z),o=r.multiplyScalar(i.y*l.z-l.y*i.z),c=u.multiplyScalar(l.x*i.z-i.x*l.z),y=a.multiplyScalar(i.x*l.y-l.x*i.y);return o.add(c).add(y)},n.angle=function(n,e){var r=this.dot(n.clone().normalize(),e.clone().normalize());return Math.acos(r)/Math.PI*180*Math.sign(r)},n.dirAngle=function(e,r){var t=n.cross(e,r);return n.angle(e,r)*Math.sign(n.dot(t.normalize(),n.cross(r.normalize(),e.normalize())))},e(n,null,[{key:"x",get:function(){return new t(1,0,0)}},{key:"y",get:function(){return new t(0,1,0)}},{key:"z",get:function(){return new t(0,0,1)}},{key:"left",get:function(){return new t(-1,0,0)}},{key:"right",get:function(){return new t(1,0,0)}},{key:"up",get:function(){return new t(0,1,0)}},{key:"down",get:function(){return new t(0,-1,0)}},{key:"forward",get:function(){return new t(0,0,1)}},{key:"back",get:function(){return new t(0,0,-1)}},{key:"one",get:function(){return new t(1,1,1)}},{key:"zero",get:function(){return new t(0,0,0)}}]),n}());r._RF.pop()}}}));

System.register("chunks:///_virtual/View.ts",["./rollupPluginModLoBabelHelpers.js","cc","./debug.ts","./enum.ts","./helper.ts","./LayoutManager.ts","./ViewManager.ts"],(function(e){var t,i,r,a,s,n,o,h;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy,r=e._decorator},function(e){a=e.DEBUG_DRAW_LIND_WIDTH},function(e){s=e.WrapMode},function(e){n=e.Helper},function(e){o=e.LayoutManager},function(e){h=e.ViewManager}],execute:function(){var l;i._RF.push({},"20c27Yt8z5L9bZJqa8MgjS3","View",void 0);var d=r.ccclass;r.property,e("View",d("View")(l=function(){function e(e){this.__debug_graphics=void 0,this._adapter=void 0,this._total=0,this._innerSize=0,this._group=null,this._holderList=[],this._tempHolderList=[],this._isOverflowFixed=void 0,this._adapter=e,this.internal_reset(),this.__createDebug()}var i=e.prototype;return i.__createDebug=function(){},i.__drawDebug=function(){if(this.__debug_graphics&&this.group){this.__debug_graphics.clear();var e=this.adapter.mainAxis,t=this.adapter.crossAxis,i={x:0,y:0},r={x:this.group.size.x,y:this.group.size.y},s={x:this.group.anchorPoint.x,y:this.group.anchorPoint.y};i[e]=this.group.position[e]-r[e]*s[e],i[e]+=.5*a,i[t]=this.group.position[t]-r[t]*(1-s[t]),i[t]+=.5*a,r[e]-=a,r[t]-=a,this.__debug_graphics.roundRect(i.x,i.y,r.x,r.y,2),this.__debug_graphics.stroke()}},i.getFixedHolders=function(){if(!this.group.isFixed)return[];for(var e=[],t=this.holderList.length,i=0;i<t;i++){var r=this.holderList[i];r.model.element.fixed&&e.push(r)}return e},i.internal_isWrap=function(e,t){var i=!1,r=t&&t.models[t.models.length-1];if(r)switch(e.element.wrapBeforeMode){case s.Wrap:i=!0;break;case s.Nowrap:i=r.element.wrapAfterMode==s.Wrap;break;case s.Auto:(i=r.element.wrapAfterMode==s.Wrap)||(i=this._calculateInnerSize(e,t))}return i},i.internal_reset=function(){this._group=null,this._innerSize=0,this._total=0,this._holderList.length=0,this._isOverflowFixed=!0,this._tempHolderList.length=0,this.__debug_graphics&&this.__debug_graphics.clear()},i.internal_push=function(e){this._total++;var t=this.adapter.crossAxis;(!e.element.ignoreLayout||e.element.ignoreLayout&&e.element.placeholder)&&(0!=this._innerSize&&(this._innerSize+=this.adapter.layoutManager.spacing),this._innerSize+=e.size[t])},i.internal_recycleHolders=function(e){for(var t=0;t<this._holderList.length;t++){var i=this._holderList[t];i.internal_disable(),e(i)}this._holderList.length=0},i.internal_preVisible=function(e,t){return this._group=e,this._createHolders(t),this},i.internal_visible=function(){this.register();for(var e=0;e<this._tempHolderList.length;e++){var t=this._tempHolderList[e],i=t.holder,r=t.model,a=t.isNew;i.internal_visible(this,r,a)}this._tempHolderList.length=0,this.adapter.layoutManager.layout(this.group),this.onVisible()},i.internal_disable=function(){this.adapter.layoutManager.unLayout(this.index),this.unregister(),this.onDisable(),this.internal_reset()},i.internal_holderChanged=function(e){var t=!0,i=this.adapter.mainAxis,r=this.group.size[i];if(!e){for(var a=0,s=0;s<this.group.models.length;s++){var o=this.group.models[s],h=o.size[i];(this.adapter.isVertical&&this.adapter.layoutManager.controlScaleHeight||this.adapter.isHorizontal&&this.adapter.layoutManager.controlScaleWidth)&&(h*=o.scale[i]),a=Math.max(a,h)}n.approximately(this.group.size[i],a)||(this.group.oldSize[i]=this.group.size[i],this.group.size[i]=a,t=!1)}t?this.adapter.layoutManager.layout(this.group):this.adapter.viewManager.internal_viewChanged(this,r)},i.register=function(){this.adapter.viewManager.on(h.Event.ON_SCROLL,this._onScroll,this),this.adapter.viewManager.on(h.Event.ON_LATEUPDATE,this._onLateUpdate,this),this.adapter.layoutManager.on(o.Event.ON_LAYOUT_COMPLATED,this._onLayoutComplated,this),this.adapter.layoutManager.on(o.Event.ON_CHANGED_LAYOUT_STATE,this._onChangedLayoutState,this)},i.unregister=function(){this.adapter.viewManager.off(h.Event.ON_SCROLL,this._onScroll,this),this.adapter.viewManager.off(h.Event.ON_LATEUPDATE,this._onLateUpdate,this),this.adapter.layoutManager.off(o.Event.ON_LAYOUT_COMPLATED,this._onLayoutComplated,this),this.adapter.layoutManager.off(o.Event.ON_CHANGED_LAYOUT_STATE,this._onChangedLayoutState,this)},i._createHolders=function(e){var t=this.adapter.mainAxis;this._tempHolderList.length=0;for(var i=0;i<this.group.models.length;i++){var r=this.group.models[i],a=!1,s=e&&e(r);s||(s=this.adapter.viewManager.internal_getHolder(r),a=!0),r.position[t]=this.group.position[t],this._holderList.push(s),this._tempHolderList.push({holder:s,model:r,isNew:a})}},i._calculateInnerSize=function(e,t){if(0==this._total)return!1;var i=e.size[this.adapter.crossAxis];return this._innerSize+i+this.adapter.layoutManager.spacing>t.size[this.adapter.crossAxis]},i._onLayoutComplated=function(e){if(-1!=e.indexOf(this.index)){for(var t=0;t<this.holderList.length;t++){this.holderList[t].internal_layout()}this.group.isFixed&&this._calcFixedPosition()}},i._calcFixedPosition=function(){for(var e=this._holderList.length,t=this.adapter.mainAxis,i=0;i<e;i++){var r=this._holderList[i];if(r.element.fixed){var a={x:r.model.position.x,y:r.model.position.y},s=0,n=this._getModelBoundary(r.model);if(this._isNeedFixed(n)){a[t]-=n;var o=this.adapter.viewManager.getNextFixedHolders(this.index);s=this._getRelativeNextHolderOffset(r,o)}a[t]+=s*this.adapter.multiplier,a[t]!=r.node.position[t]&&r.node.setPosition(a.x,a.y)}}},i._onChangedLayoutState=function(){this.adapter.layoutManager.layout(this.group)},i._onScroll=function(){this.group.isFixed&&0!=this._holderList.length&&this._calcFixedPosition()},i._onLateUpdate=function(e){},i._isNeedFixed=function(e){return 1==this.adapter.multiplier?e>=0:e<=0},i._getModelBoundary=function(e){var t=n.isNumber(e.element.fixedOffset)?e.element.fixedOffset:0;return 1==this.adapter.multiplier?this._getModelHeaderBoundary(e)+t:this._getModelFooterBoundary(e)-t},i._getModelHeaderBoundary=function(e){var t=this.adapter.mainAxis;return e.position[t]+e.size[t]*(1-e.anchorPoint[t])*e.scale[t]+this.adapter.scrollManager.contentPosition},i._getModelFooterBoundary=function(e){var t=this.adapter.mainAxis;return e.position[t]-e.size[t]*e.anchorPoint[t]*e.scale[t]+this.adapter.scrollManager.contentPosition},i._getModelSizeWithSpacing=function(e){var t=this.adapter.mainAxis,i=n.isNumber(e.element.fixedOffset)?e.element.fixedOffset:0,r=n.isNumber(e.element.fixedSpacing)?e.element.fixedSpacing:this.adapter.viewManager.spacing;return e.size[t]*e.scale[t]+i+r},i._getReatureRelativeBoundary=function(e,t){var i=1==this.adapter.multiplier?this._getModelHeaderBoundary(e):this._getModelFooterBoundary(e),r=1==this.adapter.multiplier?i+t:t-i;return Math.min(r,t)},i._getRelativeNextHolderOffset=function(e,t){for(var i=t.length,r=this.adapter.crossAxis,a=this._getModelSizeWithSpacing(e.model),s=0,n=0;n<i;n++){var o=t[n],h=this._getReatureRelativeBoundary(o.model,a),l=e.model.scale[r]==o.model.scale[r],d=e.model.size[r]==o.model.size[r];if(e.fixedIndex==o.fixedIndex&&l&&d){s=h>0?h:0;break}h>0&&(s=Math.max(s,h))}return s},t(e,[{key:"isOverflowFixed",get:function(){return this._isOverflowFixed}},{key:"adapter",get:function(){return this._adapter}},{key:"group",get:function(){return this._group}},{key:"holderList",get:function(){return this._holderList}},{key:"index",get:function(){return this.group?this.group.index:-1}}]),e}())||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/ViewManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Group.ts","./Manager.ts","./View.ts","./enum.ts","./helper.ts","./ModelManager.ts","./ScrollManager.ts"],(function(i){var e,t,r,s,a,n,o,l,h,d,u,p,c,_,g,f,v,x;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,r=i.initializerDefineProperty,s=i.assertThisInitialized,a=i.createClass},function(i){n=i.cclegacy,o=i._decorator,l=i.instantiate},function(i){h=i.Group},function(i){d=i.Manager},function(i){u=i.View},function(i){p=i.ArrangeAxis,c=i.StretchDirection,_=i.MagneticDirection,g=i.ScrollDirection},function(i){f=i.Helper},function(i){v=i.ModelManager},function(i){x=i.ScrollManager}],execute:function(){var b,m,w,A,V,H,z,S,y,F,E,I,M,O,P,D,T,N,G,L,C,R,k,B,U,W,Z,j,q,J,K,Q,X,Y,$;n._RF.push({},"74bbbWBWzpGspxEpsEO9xIS","ViewManager",void 0);var ii=o.ccclass,ei=o.property,ti=function(i){return i[i.ON_SCROLL=0]="ON_SCROLL",i[i.ON_LATEUPDATE=1]="ON_LATEUPDATE",i[i.ON_CLEARVIEWS=2]="ON_CLEARVIEWS",i[i.ON_UPDATE_VIEWS=3]="ON_UPDATE_VIEWS",i[i.ON_CHANGED_VIRTUALSIZE=4]="ON_CHANGED_VIRTUALSIZE",i[i.ON_MAGNETIC=5]="ON_MAGNETIC",i[i.ON_CHANGED_OVERFLOWHEADER=6]="ON_CHANGED_OVERFLOWHEADER",i[i.ON_RESET_ALL_STATE=7]="ON_RESET_ALL_STATE",i[i.ON_CHANGED_SPACING=8]="ON_CHANGED_SPACING",i}(ti||{});i("ViewManager",(b=ii("ViewManager"),m=ei({type:p}),w=ei({type:p,tooltip:"主轴方向的排列方式\n        Start: 从上到下、从左到右\n        End: 从下到上、从右到左"}),A=ei({type:c,tooltip:"当元素的尺寸、缩放改变时，受影响的其他元素应该如何计算新的位置\n        Auto: 以可视区域中心为起点，所有其他元素向两边延伸\n        Center: 以当前变化的元素为起点，所有其他元素向两边延伸\n        Header: 以当前变化的元素和它头部的所有元素向头部延伸\n        Footer: 以当前变化的元素和它尾部的所有元素向尾部延伸"}),V=ei({range:[0,1],slide:!0,step:.01,tooltip:"当元素移动到可视区域外偏移多少时才进行回收\n        比如元素的尺寸为100，当元素超出可视范围 100+100*0.3 时就会被回收\n        没有特殊需求时，默认值即可"}),H=ei({range:[0,1],slide:!0,step:.01,tooltip:"此值会影响填充元素的时机\n        没有特殊需求时，默认值即可"}),z=ei({tooltip:"主轴方向元素的间隙"}),S=ei({group:{id:"padding",name:"padding"}}),y=ei({group:{id:"padding",name:"padding"}}),F=ei({group:{id:"padding",name:"padding"}}),E=ei({group:{id:"padding",name:"padding"}}),I=ei({tooltip:"磁性停靠\n        开启后，会在增加数据时，根据设置进行自动滚动到顶部或底部"}),M=ei({type:_,visible:function(){return this.magnetic},tooltip:"停靠的方向"}),O=ei({visible:function(){return this.magnetic},tooltip:"停靠动画的时长"}),P=ei({visible:function(){return this.magnetic},tooltip:"默认情况下，仅当添加数据时才会触发停靠\n        当开启时，元素的尺寸改变时,也会否触发停靠"}),D=ei({tooltip:"头部循环"}),T=ei({tooltip:"尾部循环"}),b((($=function(i){function e(){for(var e,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return e=i.call.apply(i,[this].concat(a))||this,r(e,"_arrangeAxis",L,s(e)),r(e,"stretchDirection",C,s(e)),r(e,"overflowOffset",R,s(e)),r(e,"enterOffset",k,s(e)),r(e,"_spacing",B,s(e)),r(e,"left",U,s(e)),r(e,"right",W,s(e)),r(e,"top",Z,s(e)),r(e,"bottom",j,s(e)),r(e,"magnetic",q,s(e)),r(e,"magneticDirection",J,s(e)),r(e,"magneticDuration",K,s(e)),r(e,"magneticSizeChanges",Q,s(e)),r(e,"loopHeader",X,s(e)),r(e,"loopFooter",Y,s(e)),e._groupLength=0,e._cacheGroups=[],e._groups=[],e._disableViews=[],e._visibleViews=[],e._fixedViews=[],e._disableHolders=[],e._isFill=!1,e._headerIndex=-1,e._footerIndex=-1,e._virtualSize=0,e._overflowHeader=0,e._cacheHeadeDatas=[],e._cacheHeadePosition=void 0,e}t(e,i);var n=e.prototype;return n.onInit=function(){this.adapter.modelManager.on(v.Event.ON_CHANGE_BEFORE,this._onModelChangeBefore,this),this.adapter.modelManager.on(v.Event.ON_INSERT,this._updateGroups,this),this.adapter.modelManager.on(v.Event.ON_REMOVE,this._updateGroups,this),this.adapter.modelManager.on(v.Event.ON_MOVE,this._updateGroups,this),this.adapter.modelManager.on(v.Event.ON_CLEAR,this._onClearModel,this),this.adapter.scrollManager.on(x.Event.ON_SCROLL,this._onScroll,this),this.adapter.scrollManager.on(x.Event.ON_VIEW_SIZE_CHANGED,this._resetAllState,this),this.adapter.scrollManager.on(x.Event.ON_CHANGED_ORIENTATION,this._resetAllState,this)},n._clearAll=function(){for(var i,e=0,t=this._visibleViews.length;e<t;e++)this._recycleViewToDisableViews(this._visibleViews[e]);(i=this._cacheGroups).push.apply(i,this._groups),this._clearFixedViews(),this._visibleViews.length=0,this._groups.length=0,this.virtualSize=0,this.overflowHeader=0},n._onClearModel=function(){this._clearAll(),this.emit(ti.ON_CLEARVIEWS)},n._resetAllState=function(){this._clearAll(),this.internal_updateVisibleView(0),this.emit(ti.ON_RESET_ALL_STATE)},n._onModelChangeBefore=function(){if(this.header&&this.virtualSize>this.adapter.mainAxisSize){var i=this.getVisibleIndexByGroupIndex(0);if(-1!=i){var e=this._visibleViews[i];this._cacheHeadeDatas=e.group.models.map((function(i){return i.data})),this._cacheHeadePosition={x:e.group.position.x,y:e.group.position.y}}else this._cacheHeadeDatas=this.header.group.models.map((function(i){return i.data})),this._cacheHeadePosition={x:this.header.group.position.x,y:this.header.group.position.y}}},n._updateGroups=function(i){var e,t=this,r=this._getViewFromDisibleViews(null),s=this.getGroupIndexByModelIndex(i);-1==s&&(s=this._groupLength-1);var a=null,n=!1,o={modelIndex:i,fixedIndex:-1},l=this._groups[s-1];for(l&&(o.fixedIndex=l.fixedIndex);;){(a=this._groups[s])||((a=this._getGroupFromCache()).internal_setIndex(this._groups.length),this._groups.push(a),s=this._groups.length);var h=a.internal_insert(o,r,n);if(s++,n=!0,!h)break}var d=this._groups.splice(s,this._groups.length);(e=this._cacheGroups).push.apply(e,d),this._groupLength=this._groups.length;var u=-1,p=0;this._cacheHeadeDatas.length>0&&(u=this._groups.findIndex((function(i){return i.internal_includes(t._cacheHeadeDatas)})));var c=this._groups[u];c&&(p+=c.size[this.adapter.mainAxis]+this.spacing,c.internal_setPosition(this._cacheHeadePosition[this.adapter.mainAxis]));for(var g=u-1;g>=0;g--){var f=this._groups[g];this._calcMainAxisPosition(f,c,_.Header),p+=f.size[this.adapter.mainAxis]+this.spacing,c=f}c=this._groups[u];for(var v=u+1;v<this.groupLength;v++){f=this._groups[v];this._calcMainAxisPosition(f,c,_.Footer),p+=f.size[this.adapter.mainAxis]+this.spacing,c=f}p-=this.spacing,this._virtualSize=Math.max(0,p),this._resetOverflowHeader(this._groups[0]),r.internal_reset(),this._disableViews.push(r),this.updateVisibles(u),this._cacheHeadeDatas=[],this._cacheHeadePosition=null},n.updateVisibles=function(i){var e=[];i=Math.max(0,i);for(var t=function(i){var t=e.findIndex((function(e){return e.oldData==i.data}));return-1!=t?e.splice(t,1)[0]:null},r=0;r<this._visibleViews.length;r++){var s=this._visibleViews[r];e=e.concat(s.holderList),s.internal_reset()}for(var a=this.adapter.mainAxisSize,n=0,o=this.visibleLength,l=i,h=this._groups.length;l<h;l++){var d=this._groups[l];if(this.getVisibleMainAxisSize()>=a&&o<=0)break;(p=this._visibleViews[n++])||(p=this._getViewFromDisibleViews(d.index),this._visibleViews.push(p)),p.internal_preVisible(d,t),o--}for(var u=this._visibleViews.length-1;u>=0;u--){var p;if((p=this._visibleViews[u]).holderList.length>0)break;this._disableFromVisibleViews(u)}for(var c=0,_=e.length;c<_;c++){var g=e[c];g.internal_disable(),this._disableHolders.push(g)}for(var f=0;f<this.visibleLength;f++)this._visibleViews[f].internal_visible();this._forceFill(),this._calcMagnetic(),this.emit(ti.ON_UPDATE_VIEWS)},n._getGroupFromCache=function(){var i=this._cacheGroups.pop();return i||(i=new h(this.adapter)),i.internal_reset(),i},n._calcMagnetic=function(){if(this.magnetic&&this.header){var i=!1;0==this.adapter.scrollManager.velocity&&(this.magneticDirection==_.Footer?this.footer.index==this._groupLength-1&&(this.adapter.scrollManager.scrollToFooter(this.magneticDuration),i=!0):0==this.header.index&&(this.adapter.scrollManager.scrollToHeader(this.magneticDuration),i=!0)),this.emit(ti.ON_MAGNETIC,i)}},n._calcMainAxisPosition=function(i,e,t){if(i)if(e){var r,s,a=this.adapter.mainAxis,n=this.adapter.multiplier,o=t==_.Footer?1:-1;t==_.Footer?(r=1==n?e.anchorPoint[a]:1-e.anchorPoint[a],s=1==n?1-i.anchorPoint[a]:i.anchorPoint[a]):(r=1==n?1-e.anchorPoint[a]:e.anchorPoint[a],s=1==n?i.anchorPoint[a]:1-i.anchorPoint[a]);var l=e.position[a];l-=e.size[a]*r*o*n,l-=this.spacing*n*o,l-=i.size[a]*s*o*n,i.internal_setPosition(l)}else i.internal_setPosition(this._getMainAxisHeaderPosition(i))},n._getMainAxisHeaderPosition=function(i){var e=0,t=0;return this.adapter.isVertical?(e=this.adapter.isArrangeAxisStart?-this.top:this.bottom,t=this.adapter.isArrangeAxisStart?1-i.anchorPoint[this.adapter.mainAxis]:i.anchorPoint[this.adapter.mainAxis]):(e=this.adapter.isArrangeAxisStart?this.left:-this.right,t=this.adapter.isArrangeAxisStart?i.anchorPoint[this.adapter.mainAxis]:1-i.anchorPoint[this.adapter.mainAxis]),e-=t*i.size[this.adapter.mainAxis]*this.adapter.multiplier},n._getViewFromDisibleViews=function(i){var e=null;if(null!=i){var t=this._fixedViews.findIndex((function(e){return e.index==i}));if(-1!=t){var r=this._fixedViews.splice(t,1)[0];this._recycleViewToDisableViews(r)}}return e||(e=this._disableViews.pop()),e||(e=this.adapter.getView()),e},n._getHolderFromDisableHolders=function(i){var e=this._disableHolders.findIndex((function(e){return e.code==i.code}));if(-1!=e)return this._disableHolders.splice(e,1)[0]},n._disableFromVisibleViews=function(i){var e=-1;e=i instanceof u?this._visibleViews.findIndex((function(e){return e.index==i.index})):i,this._recycleViewToDisableViews(this._visibleViews[e]),this._visibleViews.splice(e,1)},n._recycleViewToDisableViews=function(i){var e=this;i&&(i.internal_recycleHolders((function(i){return e._disableHolders.push(i)})),i.internal_disable(),this._disableViews.push(i))},n._clearFixedViews=function(){for(var i=0,e=this._fixedViews.length;i<e;i++){var t=this._fixedViews[i];this._recycleViewToDisableViews(t)}this._fixedViews.length=0},n._checkHeaderInvisible=function(){this.header&&(this.loopFooter||this.footer.index!=this.groupLength-1)&&this._isOverflowHeader(this.header.group)&&(this._disableFromVisibleViews(0),this._checkHeaderInvisible())},n._checkFooterInvisible=function(){this.footer&&(this.loopHeader||0!=this.header.index)&&this._isOverflowFooter(this.footer.group)&&(this._disableFromVisibleViews(this._visibleViews.length-1),this._checkFooterInvisible())},n._isOverflowHeader=function(i,e){void 0===e&&(e=this.overflowOffset);var t=this.internal_getGroupFooterBoundary(i);return e*=i.size[this.adapter.mainAxis],1==this.adapter.multiplier?t>=e:t<=-e},n._isOverflowFooter=function(i,e){void 0===e&&(e=this.overflowOffset);var t=this.internal_getGroupHeaderBoundary(i);return e*=i.size[this.adapter.mainAxis],1==this.adapter.multiplier?t+this.adapter.mainAxisSize<=-e:t-this.adapter.mainAxisSize>=e},n._isEnterFooter=function(i){if(!i)return!1;var e=this.internal_getGroupFooterBoundary(i),t=this.enterOffset*i.size[this.adapter.mainAxis];return 1==this.adapter.multiplier?e+this.adapter.mainAxisSize+t>=0:e-this.adapter.mainAxisSize-t<=0},n._isEnterHeader=function(i){if(!i)return!1;var e=this.internal_getGroupHeaderBoundary(i),t=this.overflowOffset*i.size[this.adapter.mainAxis];return 1==this.adapter.multiplier?e-t<=0:e+t>=0},n._fillHeader=function(){var i=this._groups[this._headerIndex];if(this._isEnterHeader(i)){var e=this._accumTargetSizeTowardsHeader(i.index,this.internal_getInitHeaderSize(i)),t=e.index,r=e.size,s=this._groups[t];if(s&&-1==this.getVisibleIndexByGroupIndex(t)){var a=this.internal_convertSizeToHeaderPosition(r,s);s.internal_setPosition(a);var n=this._getViewFromDisibleViews(s.index);this._visibleViews.unshift(n),n.internal_preVisible(s).internal_visible(),0==n.index&&this._resetOverflowHeader(n.group),this._headerIndex=s.index,this._fillHeader()}}},n._fillFooter=function(){var i=this._groups[this._footerIndex];if(this._isEnterFooter(i)){var e=this._accumTargetSizeTowardsFooter(i.index,this.internal_getInitFooterSize(i)),t=e.index,r=e.size,s=this._groups[t];if(s&&-1==this.getVisibleIndexByGroupIndex(t)){var a=this.internal_convertSizeToFooterPosition(r,s);s.internal_setPosition(a);var n=this._getViewFromDisibleViews(s.index);this._visibleViews.push(n),n.internal_preVisible(s).internal_visible(),0==n.index&&this._resetOverflowHeader(n.group),this._footerIndex=s.index,this._fillFooter()}}},n._fillFixedView=function(){if(this.header&&(-1!=this.header.group.fixedIndex||this.header.group.isFixed))for(var i=this.header.index,e=this.adapter.mainAxis,t=this.internal_getInitHeaderSize(this.header.group),r=i-1;r>=0;r--){var s=this._groups[r];if(!s)return void console.error("_fillFixedView错误 找不到group",r);if(t+=s.size[e]+this.spacing,s.isFixed){var a=this.internal_convertSizeToHeaderPosition(t,s);if(-1!=this._fixedViews.findIndex((function(i){return i.index==s.index}))){f.approximately(a,s.position[e])||(s.internal_setPosition(a),this.adapter.layoutManager.layout(s));break}this._clearFixedViews();a=this.internal_convertSizeToHeaderPosition(t,s);s.internal_setPosition(a);var n=this._getViewFromDisibleViews(s.index);n.internal_preVisible(s).internal_visible(),this._fixedViews.push(n);break}}},n._accumTargetSizeTowardsHeader=function(i,e){for(var t=this._groups.length;;){if(0==i&&this.loopHeader&&(i=t),0==i)return{index:i,size:e};if(i--,!this._groups[i])return{index:i,size:e};if((e+=this.internal_accumulationSize(i))>=0)return{index:i,size:e}}},n._accumTargetSizeTowardsFooter=function(i,e){for(var t=this._groups.length;;){if(i==t-1&&this.loopFooter&&(i=-1),i==t-1)return{index:i,size:e};if(i++,!this._groups[i])return{index:i,size:e};if((e+=this.internal_accumulationSize(i))>=0)return{index:i,size:e}}},n._fillFooterHandle=function(){this._checkHeaderInvisible(),this._fillFooter()},n._fillHeaderHandle=function(){this._checkFooterInvisible(),this._fillHeader()},n._forceFill=function(){this._updateHeaderFooterIndex(),this._fillHeaderHandle(),this._fillFooterHandle()},n._updateHeaderFooterIndex=function(){this._headerIndex=this.header?this.header.index:0,this._footerIndex=this.footer?this.footer.index:0},n._onScroll=function(i){if(0!=this._groups.length){switch(this._updateHeaderFooterIndex(),i){case g.Up:case g.Left:this.adapter.isArrangeAxisStart?this._fillFooterHandle():this._fillHeaderHandle();break;case g.Down:case g.Right:this.adapter.isArrangeAxisStart?this._fillHeaderHandle():this._fillFooterHandle()}this._fillFixedView(),this.emit(ti.ON_SCROLL)}},n._stretchToHeader=function(i,e){for(var t=this._visibleViews[i],r=e;r>=0;r--){var s=this._visibleViews[r];t?(this._calcMainAxisPosition(s.group,t.group,_.Header),this.adapter.layoutManager.layout(s.group)):this.getVisibleMainAxisSize()<this.adapter.mainAxisSize&&this._calcMainAxisPosition(s.group,null,_.Header),t=s}},n._stretchToFooter=function(i,e){for(var t=this._visibleViews[i],r=e;r<this._visibleViews.length;r++){var s=this._visibleViews[r];t?(this._calcMainAxisPosition(s.group,t.group,_.Footer),this.adapter.layoutManager.layout(s.group)):this.getVisibleMainAxisSize()<this.adapter.mainAxisSize&&this._calcMainAxisPosition(s.group,null,_.Footer),t=s}},n._resetOverflowHeader=function(i){if(!i)return this.overflowHeader=0;var e=this.adapter.mainAxis,t=i.anchorPoint[e];t=1==this.adapter.multiplier?1-t:t;var r=i.position[e];r+=i.size[e]*t*this.adapter.multiplier,this.overflowHeader=r},n._calcOverflowHeader=function(i,e,t){var r=this.getVisibleIndexByGroupIndex(0);if(-1!=r){var s=this._visibleViews[r];return this._resetOverflowHeader(s.group)}var a=this.adapter.mainAxis,n=i.anchorPoint[a];n=1==this.adapter.multiplier?1-n:n;var o=i.oldSize[a],l=i.size[a],h=this.adapter.multiplier;switch(this.stretchDirection){case c.Header:var d=i.oldPosition[a]+o*n*h;(u=1==h?this.overflowHeader>=d:this.overflowHeader<=d)&&(this.overflowHeader+=(l-o)*h);break;case c.Footer:d=i.oldPosition[a]+o*n*h;(u=1==h?this.overflowHeader>=d:this.overflowHeader<=d)||(this.overflowHeader-=(l-o)*h);break;case c.Center:d=i.oldPosition[a]+o*n*h;(u=1==h?this.overflowHeader>=d:this.overflowHeader<=d)?this.overflowHeader+=.5*(l-o)*h:this.overflowHeader-=.5*(l-o)*h;break;case c.Auto:d=i.oldPosition[a]+o*n*h;var u=1==h?this.overflowHeader>=d:this.overflowHeader<=d;e<=t&&(d=i.oldPosition[a]+o*n*h,u=-1==h?this.overflowHeader>=d:this.overflowHeader<=d),u&&(e<=t?this.overflowHeader-=(l-o)*h:this.overflowHeader+=(l-o)*h)}},n.internal_lateUpdate=function(i){this._isFill&&(this._isFill=!1,this._forceFill()),this.emit(ti.ON_LATEUPDATE,i)},n.internal_viewChanged=function(i,e){var t=i.group.size[this.adapter.mainAxis]-e;this.virtualSize+=t;var r=this.getVisibleIndexByGroupIndex(i.index),s=-1;if(this.getVisibleMainAxisSize()<this.adapter.mainAxisSize||this.stretchDirection==c.Footer){var a=r-1;this._visibleViews[a]||this.adapter.layoutManager.layout(i.group),this._stretchToFooter(a,r)}else if(this.stretchDirection==c.Header){var n=r+1;this._visibleViews[n]||this.adapter.layoutManager.layout(i.group),this._stretchToHeader(n,r)}else if(this.stretchDirection==c.Center)this.adapter.layoutManager.layout(i.group),this._stretchToHeader(r,r-1),this._stretchToFooter(r,r+1);else{if(-1==(s=this.adapter.centerManager.getCenterVisibleIndex()))throw Error("找不到中心索引"+i.index);var o=this._visibleViews[s];this.adapter.layoutManager.layout(o.group),this._stretchToHeader(s,s-1),this._stretchToFooter(s,s+1)}this._calcOverflowHeader(i.group,s,r),this.magneticSizeChanges&&this._calcMagnetic(),this._isFill=!0,this.emit(ti.ON_CHANGED_VIRTUALSIZE)},n.internal_getHolder=function(i){var e=this._getHolderFromDisableHolders(i);if(!e){var t=this.adapter.getPrefab(i.data),r=l(t);e=this.adapter.getHolder(r,i.code)}return e.node.parent=this.adapter.scrollManager.getLayerNode(i.element.layer),e},n.internal_updateVisibleView=function(i){this._onModelChangeBefore(),this._updateGroups(i)},n.internal_getGroupFooterBoundary=function(i){if(!i)return 0;var e=i.anchorPoint[this.adapter.mainAxis];e=1==this.adapter.multiplier?e:1-e;var t=i.position[this.adapter.mainAxis];return t-=i.size[this.adapter.mainAxis]*e*this.adapter.multiplier,t+=this.adapter.scrollManager.contentPosition},n.internal_getGroupHeaderBoundary=function(i){if(!i)return 0;var e=i.anchorPoint[this.adapter.mainAxis];return e=1==this.adapter.multiplier?1-e:e,i.position[this.adapter.mainAxis]+this.adapter.scrollManager.contentPosition+e*i.size[this.adapter.mainAxis]*this.adapter.multiplier},n.internal_getInitHeaderSize=function(i){if(!i)return 0;var e=i.anchorPoint[this.adapter.mainAxis];e=1==this.adapter.multiplier?1-e:e;var t=-i.position[this.adapter.mainAxis]*this.adapter.multiplier;return t-=i.size[this.adapter.mainAxis]*e,t-=this.adapter.scrollManager.contentPosition*this.adapter.multiplier,t=this.adapter.mainAxisSize-t},n.internal_getInitFooterSize=function(i){if(!i)return 0;var e=i.anchorPoint[this.adapter.mainAxis];e=1==this.adapter.multiplier?e:1-e;var t=-i.position[this.adapter.mainAxis]*this.adapter.multiplier;return t+=i.size[this.adapter.mainAxis]*e,t-=this.adapter.scrollManager.contentPosition*this.adapter.multiplier},n.internal_accumulationSize=function(i){var e=this._groups[i];return e?e.size[this.adapter.mainAxis]+this.spacing:0},n.internal_convertSizeToFooterPosition=function(i,e){var t=e.anchorPoint[this.adapter.mainAxis];t=1==this.adapter.multiplier?t:1-t;var r=e.size[this.adapter.mainAxis]*t,s=-this.adapter.scrollManager.contentPosition;return s-=this.adapter.multiplier*i-this.adapter.multiplier*r},n.internal_convertSizeToHeaderPosition=function(i,e){var t=e.anchorPoint[this.adapter.mainAxis];t=1==this.adapter.multiplier?1-t:t;var r=e.size[this.adapter.mainAxis]*t,s=this.adapter.multiplier*i-this.adapter.multiplier*r;return s-=this.adapter.multiplier*this.adapter.mainAxisSize,s-=this.adapter.scrollManager.contentPosition},n.getGroup=function(i){return this._groups[i]},n.getVisibleView=function(i){return this._visibleViews[i]},n.getVisibleMainAxisSize=function(){if(0==this._visibleViews.length)return 0;for(var i=0,e=this.adapter.mainAxis,t=0,r=this._visibleViews.length;t<r;t++){var s=this._visibleViews[t];s.group&&(i+=s.group.size[e]+this.spacing)}return i-=this.spacing},n.getGroupIndexByModelIndex=function(i){for(var e=0,t=this._groups.length;e<t;e++){if(-1!=this._groups[e].findModelIndex(i))return e}return-1},n.getVisibleIndexByGroupIndex=function(i){return this._visibleViews.findIndex((function(e){return e.index==i}))},n.getNextFixedHolders=function(i){for(var e=[],t=this.getVisibleIndexByGroupIndex(i)+1,r=this._visibleViews.length;t<r;t++){var s=this._visibleViews[t];if(s.index!=i&&s.group.isFixed){e=s.getFixedHolders();break}}return e},n.getMagneticOffset=function(){if(!this.magnetic)return 0;var i=this.adapter.isHorizontal?-this.adapter.multiplier:this.adapter.multiplier;return this.magneticDirection==_.Footer?this.footer?Math.max(0,this.adapter.mainAxisSize-this.adapter.mainAxisPadding-this.getVisibleMainAxisSize())*i:this.adapter.mainAxisSize*i:0},a(e,[{key:"arrangeAxis",get:function(){return this._arrangeAxis},set:function(i){i!=this._arrangeAxis&&(this._arrangeAxis=i,this._resetAllState())}},{key:"spacing",get:function(){return this._spacing},set:function(i){i!=this._spacing&&(this._spacing=i,this._resetAllState())}},{key:"header",get:function(){return this._visibleViews[0]}},{key:"footer",get:function(){return this._visibleViews[this._visibleViews.length-1]}},{key:"overflowHeader",get:function(){return this._overflowHeader},set:function(i){i!=this._overflowHeader&&(this._overflowHeader=i,this.emit(ti.ON_CHANGED_OVERFLOWHEADER,i))}},{key:"virtualSize",get:function(){return this._virtualSize},set:function(i){i!=this._virtualSize&&(this._virtualSize=i,this.emit(ti.ON_CHANGED_VIRTUALSIZE))}},{key:"groupLength",get:function(){return this._groupLength}},{key:"visibleLength",get:function(){return this._visibleViews.length}},{key:"min",get:function(){return this.header?this.adapter.isArrangeAxisStart?this.internal_getGroupFooterBoundary(this.footer.group):this.internal_getGroupHeaderBoundary(this.header.group):0}},{key:"max",get:function(){return this.header?this.adapter.isArrangeAxisStart?this.internal_getGroupHeaderBoundary(this.header.group):this.internal_getGroupFooterBoundary(this.footer.group):0}}]),e}(d)).Event=ti,L=e((G=$).prototype,"_arrangeAxis",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.Start}}),e(G.prototype,"arrangeAxis",[w],Object.getOwnPropertyDescriptor(G.prototype,"arrangeAxis"),G.prototype),C=e(G.prototype,"stretchDirection",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return c.Auto}}),R=e(G.prototype,"overflowOffset",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),k=e(G.prototype,"enterOffset",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B=e(G.prototype,"_spacing",[ei],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(G.prototype,"spacing",[z],Object.getOwnPropertyDescriptor(G.prototype,"spacing"),G.prototype),U=e(G.prototype,"left",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),W=e(G.prototype,"right",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Z=e(G.prototype,"top",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=e(G.prototype,"bottom",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),q=e(G.prototype,"magnetic",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),J=e(G.prototype,"magneticDirection",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.Header}}),K=e(G.prototype,"magneticDuration",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),Q=e(G.prototype,"magneticSizeChanges",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),X=e(G.prototype,"loopHeader",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Y=e(G.prototype,"loopFooter",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),N=G))||N));n._RF.pop()}}}));

System.register("chunks:///_virtual/ViewModel.ts",["cc","./JsonOb.ts"],(function(t){var e,n,i;return{setters:[function(t){e=t.cclegacy,n=t.director},function(t){i=t.JsonOb}],execute:function(){e._RF.push({},"54f75k4X+RP0qaXOzrfZysL","ViewModel",void 0);var o="VC:";function r(t,e,n,i){void 0===i&&(i="");for(var o=e.split("."),r=0;r<o.length;r++){var a=o[r];if(a in t==!1){console.error("["+a+"] not find in "+i+"."+e);break}r==o.length-1?t[a]=n:t=t[a]}}function a(t,e,n,i){void 0===i&&(i="");for(var o=e.split("."),r=0;r<o.length;r++){var a=o[r];if(a in t==!1)return console.error("["+a+"] not find in "+i+"."+e),n;t=t[a]}return null==t&&(t=n),t}var s=function(){function t(t,e){this.$data=void 0,this._tag=null,this.active=!0,this.emitToRootPath=!1,new i(t,this._callback.bind(this)),this.$data=t,this._tag=e}var e=t.prototype;return e._callback=function(t,e,i){if(1==this.active){var r=o+this._tag+"."+i.join(".");if(n.emit(r,t,e,[this._tag].concat(i)),this.emitToRootPath&&n.emit(o+this._tag,t,e,i),i.length>=2)for(var a=0;a<i.length-1;a++)i[a]}},e.setValue=function(t,e){r(this.$data,t,e,this._tag)},e.getValue=function(t,e){return a(this.$data,t,e,this._tag)},t}();t("VM",new(function(){function t(){this._mvs=new Map,this.setObjValue=r,this.getObjValue=a}var e=t.prototype;return e.add=function(t,e,n){void 0===e&&(e="global"),void 0===n&&(n=!1);var i=new s(t,e),o=this._mvs.get(e);e.includes(".")?console.error("cant write . in tag:",e):o?console.error("already set VM tag:"+e):(i.emitToRootPath=n,this._mvs.set(e,i))},e.remove=function(t){this._mvs.delete(t)},e.get=function(t){return this._mvs.get(t)},e.addValue=function(t,e){var n=(t=t.trim()).split(".");n.length<2&&console.error("Cant find path:"+t);var i=this.get(n[0]);if(i){var o=n.slice(1).join(".");i.setValue(o,i.getValue(o)+e)}else console.error("Cant Set VM:"+n[0])},e.getValue=function(t,e){var n=(t=t.trim()).split(".");if(n.length<2)console.error("Get Value Cant find path:"+t);else{var i=this.get(n[0]);if(i)return i.getValue(n.slice(1).join("."),e);console.error("Cant Get VM:"+n[0])}},e.setValue=function(t,e){var n=(t=t.trim()).split(".");if(n.length<2)console.error("Set Value Cant find path:"+t);else{var i=this.get(n[0]);i?i.setValue(n.slice(1).join("."),e):console.error("Cant Set VM:"+n[0])}},e.bindPath=function(t,e,i,r){""!=(t=t.trim())?"*"!==t.split(".")[0]?n.on(o+t,e,i,r):console.error(t,"路径不合法,可能错误覆盖了 VMParent 的onLoad 方法, 或者父节点并未挂载 VMParent 相关的组件脚本"):console.error(i.node.name,"节点绑定的路径为空")},e.unbindPath=function(t,e,i){"*"!==(t=t.trim()).split(".")[0]?n.off(o+t,e,i):console.error(t,"路径不合法,可能错误覆盖了 VMParent 的onLoad 方法, 或者父节点并未挂载 VMParent 相关的组件脚本")},e.inactive=function(){this._mvs.forEach((function(t){t.active=!1}))},e.active=function(){this._mvs.forEach((function(t){t.active=!1}))},t}()));e._RF.pop()}}}));

System.register("chunks:///_virtual/ViewUtil.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts"],(function(e){var n,t,o,r,a,i,c,f,u,s,l;return{setters:[function(e){n=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){o=e.cclegacy,r=e.UITransform,a=e.v3,i=e.Size,c=e.Prefab,f=e.instantiate,u=e.Animation,s=e.AnimationClip},function(e){l=e.oops}],execute:function(){o._RF.push({},"f607cCjAEZHVKVZ/FyRs5bA","ViewUtil",void 0);e("ViewUtil",function(){function e(){}return e.nodeTreeInfoLite=function(n,t){for(var o=t||new Map,r=n.children,a=0;a<r.length;a++){var i=r[a];i.name.indexOf(" ")<0&&o.set(i.name,i),e.nodeTreeInfoLite(i,o)}return o},e.findNodes=function(n,t,o){for(var r=o||[],a=t.children,i=0;i<a.length;i++){var c=a[i].name;n.test(c)&&r.push(a[i]),e.findNodes(n,a[i],r)}return r},e.calculateASpaceToBSpacePos=function(e,n,t){var o=e.getComponent(r).convertToWorldSpaceAR(t);return n.getComponent(r).convertToNodeSpaceAR(o)},e.calculateScreenPosToSpacePos=function(e,n){var t=e.getUILocation(),o=a(t.x,t.y);return n.getComponent(r).convertToNodeSpaceAR(o)},e.uniformScale=function(e,n,t,o){var r,a=t/e,c=o/n;return r=a<c?a:c,new i(Math.floor(e*r),Math.floor(n*r))},e.createPrefabNode=function(e){var n=l.res.get(e,c);return f(n)},e.createPrefabNodeAsync=function(e){var o=this;return new Promise(n(t().mark((function n(r,a){return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:l.res.load(e,c,(function(n,t){if(n)console.error("名为【"+e+"】的资源加载失败");else{var a=o.createPrefabNode(e);r(a)}}));case 1:case"end":return n.stop()}}),n)}))))},e.loadPrefabNode=function(e,n){var t=this;l.res.load(e,c,(function(o,r){if(o)console.error("名为【"+e+"】的资源加载失败");else{var a=t.createPrefabNode(e);n(a)}}))},e.addNodeAnimation=function(e,n,t,o){if(void 0===t&&(t=!0),void 0===o&&(o=!1),n&&n.isValid){var r=n.getComponent(u);null==r&&(r=n.addComponent(u));var a=l.res.get(e,s);if(a&&!(t&&r.getState(a.name)&&r.getState(a.name).isPlaying)){if(o)return r.defaultClip=a,void r.play();r.once(u.EventType.FINISHED,(function(){r.defaultClip&&r.play()}),this),r.getState(a.name)||r.createState(a,a.name),r.play(a.name)}}},e}());o._RF.pop()}}}));

System.register("chunks:///_virtual/VirtualListScrollView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ListItemRenerer.ts"],(function(t){var i,e,s,o,n,h,a,r,l,c,d,u,m;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,s=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,h=t._decorator,a=t.Prefab,r=t.Layout,l=t.UITransform,c=t.Vec2,d=t.instantiate,u=t.ScrollView},function(t){m=t.default}],execute:function(){var f,L,p,g;n._RF.push({},"6683bMW1PVLi7bDsvkfG8gD","VirtualListScrollView",void 0);var v=h.ccclass,y=h.property;t("default",(f=y({type:a,serializable:!0,displayName:"渲染预制体"}),v((g=i((p=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),h=0;h<e;h++)n[h]=arguments[h];return i=t.call.apply(t,[this].concat(n))||this,s(i,"itemRenderer",g,o(i)),i.callback=void 0,i.cbThis=void 0,i.verticalCount=void 0,i.horizontalCount=void 0,i.itemW=void 0,i.itemH=void 0,i.interval=void 0,i.itemPool=void 0,i.itemList=void 0,i.itemRendererList=void 0,i.dataList=void 0,i.startPos=void 0,i.contentLayout=void 0,i.forcedRefresh=void 0,i.refresh=void 0,i._uiTransform=void 0,i}e(i,t);var n=i.prototype;return n.onLoad=function(){this.itemList=[],this.itemPool=[],this.itemRendererList=[],this.contentLayout=this.content.getComponent(r),this.contentLayout.enabled=!1,this._uiTransform=this.node.getComponent(l);var t=this.itemRenderer.data.getComponent(l);this.startPos=new c(t.width*t.anchorX+this.contentLayout.paddingLeft,-(t.height*t.anchorY+this.contentLayout.paddingTop)),this.itemW=t.width+this.contentLayout.spacingX,this.itemH=t.height+this.contentLayout.spacingY,this.horizontalCount=Math.ceil(this._uiTransform.width/this.itemW)+1,this.verticalCount=Math.ceil(this._uiTransform.height/this.itemH)+1,this.contentLayout.type==r.Type.GRID&&(this.contentLayout.startAxis==r.AxisDirection.HORIZONTAL?this.horizontalCount=Math.floor(this._uiTransform.width/this.itemW):this.verticalCount=Math.floor(this._uiTransform.height/this.itemH))},n.onDestroy=function(){this.dataList=null,this.itemList=null,this.itemRendererList=null,clearInterval(this.interval)},n._setContentPosition=function(i){t.prototype._setContentPosition.call(this,i),this.refresh=!0},n.setTouchItemCallback=function(t,i){this.callback=t,this.cbThis=i},n.onItemTap=function(t){this.callback&&this.callback.call(this.cbThis,t)},n.refreshData=function(t){Array.isArray(t)?this.dataList=t:this.dataList=[t],this.interval&&clearInterval(this.interval),this.addItem(),this.refreshContentSize(),this.forcedRefresh=!0,this.refresh=!0,this.interval=setInterval(this.refreshItem.bind(this),100)},n.addItem=function(){var t=0;switch(this.contentLayout.type){case r.Type.HORIZONTAL:t=this.horizontalCount;break;case r.Type.VERTICAL:t=this.verticalCount;break;case r.Type.GRID:t=this.horizontalCount*this.verticalCount}t=Math.min(t,this.dataList.length);var i=this.itemList.length;if(i<t)for(var e=null,s=i;s<t;s++){var o=this.itemPool.length>0?this.itemPool.shift():d(this.itemRenderer);this.content.addChild(o),this.itemList.push(o),e=o.getComponent(m),this.itemRendererList.push(e),e.isClick&&e.setTouchCallback(this.onItemTap,this)}else for(var n,h=this.content.children.length;h>t;)n=this.itemList[h-1],this.content.removeChild(n),this.itemList.splice(h-1,1),this.itemRendererList.splice(h-1,1),this.itemPool.push(n),h=this.content.children.length},n.refreshContentSize=function(){var t=this.contentLayout,i=this.dataList.length;switch(this.contentLayout.type){case r.Type.VERTICAL:this.content.getComponent(l).height=t.paddingTop+i*this.itemH+t.paddingBottom;break;case r.Type.HORIZONTAL:this.content.getComponent(l).width=t.paddingLeft+i*this.itemW+t.paddingRight;break;case r.Type.GRID:this.contentLayout.startAxis==r.AxisDirection.HORIZONTAL?this.content.getComponent(l).height=t.paddingTop+Math.ceil(i/this.horizontalCount)*this.itemH+t.paddingBottom:this.contentLayout.startAxis==r.AxisDirection.VERTICAL&&(this.content.getComponent(l).width=t.paddingLeft+Math.ceil(i/this.verticalCount)*this.itemW+t.paddingRight)}},n.refreshItem=function(){if(this.refresh){switch(this.contentLayout.type){case r.Type.HORIZONTAL:this.refreshHorizontal();break;case r.Type.VERTICAL:this.refreshVertical();break;case r.Type.GRID:this.refreshGrid()}this.refresh=!1,this.forcedRefresh=!1}},n.refreshHorizontal=function(){var t=Math.floor(Math.abs(this.getContentPosition().x)/this.itemW);(t<0||this.getContentPosition().x>0)&&(t=0);var i=t+this.horizontalCount;i>this.dataList.length&&(i=this.dataList.length,t=Math.max(i-this.horizontalCount,0));for(var e,s,o,n=0,h=this.itemList.length,a=0;a<h;a++)o=(t+a)%h,s=(e=this.itemList[o]).getPosition(),n=this.startPos.x+(t+a)*this.itemW,(s.x!=n||this.forcedRefresh)&&(console.log("修改的数据="+(t+a)),s.x=n,e.position=s,this.itemRendererList[o].data=this.dataList[t+a])},n.refreshVertical=function(){var t=Math.floor(Math.abs(this.getContentPosition().y)/this.itemH);(t<0||this.getContentPosition().y<0)&&(t=0);var i=t+this.verticalCount;i>this.dataList.length&&(i=this.dataList.length,t=Math.max(i-this.verticalCount,0));for(var e,s,o,n=0,h=this.itemList.length,a=0;a<h;a++)o=(t+a)%h,s=(e=this.itemList[o]).getPosition(),n=this.startPos.y+-(t+a)*this.itemH,(s.y!=n||this.forcedRefresh)&&(console.log("修改的数据="+(t+a)),s.y=n,e.position=s,this.itemRendererList[o].data=this.dataList[t+a])},n.refreshGrid=function(){var t=this.contentLayout.startAxis==r.AxisDirection.VERTICAL,i=Math.floor(Math.abs(this.getContentPosition().y)/this.itemH)*this.horizontalCount;t?(i=Math.floor(Math.abs(this.getContentPosition().x)/this.itemW)*this.verticalCount,this.getContentPosition().x>0&&(i=0)):this.getContentPosition().y<0&&(i=0),i<0&&(i=0);var e=i+this.horizontalCount*this.verticalCount;e>this.dataList.length&&(e=this.dataList.length,i=Math.max(e-this.horizontalCount*this.verticalCount,0));for(var s,o,n,h=0,a=0,l=this.itemList.length,c=0;c<l;c++)n=(i+c)%l,o=(s=this.itemList[n]).getPosition(),t?(h=this.startPos.x+Math.floor((i+c)/this.verticalCount)*this.itemW,a=this.startPos.y+-(i+c)%this.verticalCount*this.itemH):(h=this.startPos.x+(i+c)%this.horizontalCount*this.itemW,a=this.startPos.y+-Math.floor((i+c)/this.horizontalCount)*this.itemH),(o.y!=a||o.x!=h||this.forcedRefresh)&&(console.log("修改的数据="+(i+c)),o.x=h,o.y=a,s.position=o,this.itemRendererList[n].data=this.dataList[i+c])},i}(u)).prototype,"itemRenderer",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=p))||L));n._RF.pop()}}}));

System.register("chunks:///_virtual/VMBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ViewModel.ts","./VMEnv.ts"],(function(t){var n,e,a,h,i,o,r;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,a=t._decorator,h=t.log,i=t.Component},function(t){o=t.VM},function(t){r=t.VMEnv}],execute:function(){var s;e._RF.push({},"2f6f36IvUdPO7xynnVTPgzb","VMBase",void 0);var c=a.ccclass,l=a.help;t("VMBase",c(s=l("https://gitee.com/dgflash/oops-framework/blob/master/doc/mvvm/VMBase.md")(s=function(t){function e(){for(var n,e=arguments.length,a=new Array(e),h=0;h<e;h++)a[h]=arguments[h];return(n=t.call.apply(t,[this].concat(a))||this).VM=o,n.watchPath="",n.templateMode=!1,n.watchPathArr=[],n.templateValueArr=[],n}n(e,t);var a=e.prototype;return a.onLoad=function(){var t=this;if(!r.editor){for(var n=this.watchPath.split("."),e=1;e<n.length;e++){if("*"==n[e]){var a=this.node.parent.children.findIndex((function(n){return n===t.node}));a<=0&&(a=0),n[e]=a.toString();break}}this.watchPath=n.join(".");var i=this.watchPathArr;if(i.length>=1)for(var o=0;o<i.length;o++){for(var s=i[o].split("."),c=1;c<s.length;c++){if("*"==s[c]){var l=this.node.parent.children.findIndex((function(n){return n===t.node}));l<=0&&(l=0),s[c]=l.toString();break}}this.watchPathArr[o]=s.join(".")}""==this.watchPath&&""==this.watchPathArr.join("")&&h("可能未设置路径的节点:",this.node.parent.name+"."+this.node.name)}},a.onEnable=function(){r.editor||(this.templateMode?this.setMultPathEvent(!0):""!=this.watchPath&&this.VM.bindPath(this.watchPath,this.onValueChanged,this),this.onValueInit())},a.onDisable=function(){r.editor||(this.templateMode?this.setMultPathEvent(!1):""!=this.watchPath&&this.VM.unbindPath(this.watchPath,this.onValueChanged,this))},a.setMultPathEvent=function(t){if(void 0===t&&(t=!0),!r.editor)for(var n=this.watchPathArr,e=0;e<n.length;e++){var a=n[e];t?this.VM.bindPath(a,this.onValueChanged,this):this.VM.unbindPath(a,this.onValueChanged,this)}},a.onValueInit=function(){},a.onValueChanged=function(t,n,e){},e}(i))||s)||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/VMCompsEdit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VMEnv.ts"],(function(e){var t,r,o,i,n,a,c,l,p,s,u,h,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,n=e.createClass},function(e){a=e.cclegacy,c=e._decorator,l=e.CCString,p=e.Enum,s=e.Node,u=e.log,h=e.Component},function(e){f=e.VMEnv}],execute:function(){var _,g,d,E,y,b,T,P,C,N,O,m,v,A,w,M,L,H,k,D,R,V,j;a._RF.push({},"2359eFXKF5HFYS74K7Y17/U","VMCompsEdit",void 0);var z=c.ccclass,S=c.property,B=c.executeInEditMode,F=c.menu,W=c.help,x=function(e){return e[e.SEARCH_COMPONENT=0]="SEARCH_COMPONENT",e[e.ENABLE_COMPONENT=1]="ENABLE_COMPONENT",e[e.REPLACE_WATCH_PATH=2]="REPLACE_WATCH_PATH",e[e.DELETE_COMPONENT=3]="DELETE_COMPONENT",e}(x||{});e("default",(_=F("ModelViewer/Edit-Comps (快速组件操作)"),g=W("https://gitee.com/dgflash/oops-framework/blob/master/doc/mvvm/VMCompsEdit.md"),d=S({type:[l]}),E=S({type:p(x)}),y=S({tooltip:"勾选后,会自动查找 find list 中填写的组件",visible:function(){return this.actionType===x.SEARCH_COMPONENT}}),b=S({tooltip:"勾选后,会批量激活 find list 中填写的组件",visible:function(){return this.actionType===x.ENABLE_COMPONENT}}),T=S({tooltip:"勾选后,会批量关闭 find list 中填写的组件",visible:function(){return this.actionType===x.ENABLE_COMPONENT}}),P=S({tooltip:"允许删除节点的组件,确定需要移除请勾选,防止误操作",visible:function(){return this.actionType===x.DELETE_COMPONENT}}),C=S({tooltip:"勾选后,会批量删除 find list 中填写的组件",displayName:"[ X DELETE X ]",visible:function(){return this.allowDelete&&this.actionType===x.DELETE_COMPONENT}}),N=S({tooltip:"勾选后,会批量替换掉指定的路径",visible:function(){return this.actionType===x.REPLACE_WATCH_PATH}}),O=S({tooltip:"匹配的路径,匹配规则: 搜索开头为 game的路径",visible:function(){return this.actionType===x.REPLACE_WATCH_PATH}}),m=S({tooltip:"替换的路径,将匹配到的路径替换",visible:function(){return this.actionType===x.REPLACE_WATCH_PATH}}),v=S({tooltip:"是否搜集绑定VM组件的节点?",visible:function(){return this.actionType===x.SEARCH_COMPONENT}}),A=S({type:[s],readonly:!0,tooltip:"收集到绑定了VM组件相关的节点，可以自己跳转过去",visible:function(){return this.canCollectNodes&&this.actionType===x.SEARCH_COMPONENT}}),z(w=B(w=_(w=g((L=t((M=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,o(t,"findList",L,i(t)),o(t,"actionType",H,i(t)),o(t,"allowDelete",k,i(t)),o(t,"targetPath",D,i(t)),o(t,"replacePath",R,i(t)),o(t,"canCollectNodes",V,i(t)),o(t,"collectNodes",j,i(t)),t}r(t,e);var a=t.prototype;return a.onLoad=function(){if(!f.editor){var e=this.getNodePath(this.node);console.error("you forget delete MVEditFinder,[path]",e)}},a.setComponents=function(e){var t=this,r=this.findList,o="搜索到当前节点下面的组件";switch(e){case 0:o="搜索到当前节点下面的组件";break;case 1:o="激活以下节点的组件";break;case 2:o="关闭以下节点的组件";break;case 3:o="删除以下节点的组件";break;case 4:o="替换以下节点的路径"}u(o),u("______________________"),r.forEach((function(r){t.searchComponent(r,e)})),u("______________________")},a.searchComponent=function(e,t){var r=this;void 0===t&&(t=0),this.collectNodes=[];var o=this.node.getComponentsInChildren(e);null==o||o.length<1||(u("["+e+"]:"),o.forEach((function(e){var o="";switch(t<=3&&(o=!0===e.templateMode?e.watchPathArr?":[Path:"+e.watchPathArr.join("|")+"]":"":e.watchPath?":[Path:"+e.watchPath+"]":""),u(r.getNodePath(e.node)+o),t){case 0:r.canCollectNodes&&-1===r.collectNodes.indexOf(e.node)&&r.collectNodes.push(e.node);break;case 1:e.enabled=!0;break;case 2:e.enabled=!1;break;case 3:e.node.removeComponent(e);break;case 4:var i=r.targetPath,n=r.replacePath;if(!0===e.templateMode)for(var a=0;a<e.watchPathArr.length;a++){var c=e.watchPathArr[a];e.watchPathArr[a]=r.replaceNodePath(c,i,n)}else e.watchPath=r.replaceNodePath(e.watchPath,i,n)}})))},a.replaceNodePath=function(e,t,r){for(var o=e.split("."),i=t.split("."),n=r.split("."),a=!0,c=0;c<i.length;c++)if(o[c]!==i[c]){a=!1;break}if(!0===a){for(var l=0;l<n.length;l++)o[l]=n[l];u(" 路径更新:",e,">>>",o.join("."))}return o.join(".")},a.getNodePath=function(e){for(var t=e,r=[];t;){var o=t.getParent();if(!o)break;r.push(t.name),t=o}return r.reverse().join("/")},n(t,[{key:"findTrigger",get:function(){return!1},set:function(e){this.setComponents(0)}},{key:"enableTrigger",get:function(){return!1},set:function(e){this.setComponents(1)}},{key:"disableTrigger",get:function(){return!1},set:function(e){this.setComponents(2)}},{key:"deleteTrigger",get:function(){return!1},set:function(e){this.setComponents(3)}},{key:"replaceTrigger",get:function(){return!1},set:function(e){this.setComponents(4)}}]),t}(h)).prototype,"findList",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["VMBase","VMParent"]}}),H=t(M.prototype,"actionType",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.SEARCH_COMPONENT}}),t(M.prototype,"findTrigger",[y],Object.getOwnPropertyDescriptor(M.prototype,"findTrigger"),M.prototype),t(M.prototype,"enableTrigger",[b],Object.getOwnPropertyDescriptor(M.prototype,"enableTrigger"),M.prototype),t(M.prototype,"disableTrigger",[T],Object.getOwnPropertyDescriptor(M.prototype,"disableTrigger"),M.prototype),k=t(M.prototype,"allowDelete",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(M.prototype,"deleteTrigger",[C],Object.getOwnPropertyDescriptor(M.prototype,"deleteTrigger"),M.prototype),t(M.prototype,"replaceTrigger",[N],Object.getOwnPropertyDescriptor(M.prototype,"replaceTrigger"),M.prototype),D=t(M.prototype,"targetPath",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"game"}}),R=t(M.prototype,"replacePath",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"*"}}),V=t(M.prototype,"canCollectNodes",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=t(M.prototype,"collectNodes",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=M))||w)||w)||w)||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/VMCustom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VMBase.ts","./VMEnv.ts"],(function(t){var e,o,n,r,i,c,a,l,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){i=t.cclegacy,c=t._decorator,a=t.Toggle},function(t){l=t.VMBase},function(t){s=t.VMEnv}],execute:function(){var h,p,u,m,f,d,g,C,V,b,_,y,w,v;i._RF.push({},"ce662fwsSVPLKpmHx+KocFu","VMCustom",void 0);var P=c.ccclass,M=c.property,k=c.executeInEditMode,x=c.menu,B=c.help,R=[["BhvFrameIndex","index",!1],["BhvGroupToggle","index",!1],["BhvRollNumber","targetValue",!1],["cc.Label","string",!1],["cc.RichText","string",!1],["cc.EditBox","string",!0],["cc.Slider","progress",!0],["cc.ProgressBar","progress",!1],["cc.Toggle","isChecked",!0]];t("VMCustom",(h=x("ModelViewer/VM-Custom (自定义VM)"),p=B("https://gitee.com/dgflash/oops-framework/blob/master/doc/mvvm/VMCustom.md"),u=M({tooltip:"激活controller,以开启双向绑定，否则只能接收消息"}),m=M({tooltip:"监视对象路径"}),f=M({tooltip:"绑定组件的名字"}),d=M({tooltip:"组件上需要监听的属性"}),g=M({tooltip:"刷新间隔频率(只影响脏检查的频率)",step:.01,range:[0,1],visible:function(){return!0===this.controller}}),P(C=k(C=h(C=p((b=e((V=function(t){function e(){for(var e,o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i))||this,n(e,"controller",b,r(e)),n(e,"watchPath",_,r(e)),n(e,"componentName",y,r(e)),n(e,"componentProperty",w,r(e)),n(e,"refreshRate",v,r(e)),e._timer=0,e._watchComponent=null,e._canWatchComponent=!1,e._oldValue=null,e}o(e,t);var i=e.prototype;return i.onLoad=function(){t.prototype.onLoad.call(this),this.checkEditorComponent(),s.editor||(this._watchComponent=this.node.getComponent(this.componentName),this.checkComponentState())},i.onRestore=function(){this.checkEditorComponent()},i.start=function(){this.onValueInit()},i.checkEditorComponent=function(){if(!s.editor)for(var t=R,e=0;e<t.length;e++){var o=t[e];if(this.node.getComponent(o[0])){""==this.componentName&&(this.componentName=o[0]),""==this.componentProperty&&(this.componentProperty=o[1]),null!==o[2]&&(this.controller=o[2]);break}}},i.checkComponentState=function(){this._canWatchComponent=!1,this._watchComponent?this.componentProperty?this.componentProperty in this._watchComponent!=!1?this._canWatchComponent=!0:console.error("需要监听的组件的属性不存在"):console.error("未设置需要监听的组件 的属性"):console.error("未设置需要监听的组件")},i.getComponentValue=function(){return this._watchComponent[this.componentProperty]},i.setComponentValue=function(t){"cc.Toggle"==this.componentName?this.node.getComponent(a).isChecked=t:this._watchComponent[this.componentProperty]=t},i.onValueInit=function(){s.editor||this.setComponentValue(this.VM.getValue(this.watchPath))},i.onValueController=function(t,e){this.VM.setValue(this.watchPath,t)},i.onValueChanged=function(t,e,o){this.setComponentValue(t)},i.update=function(t){if(!s.editor&&this.controller&&this._canWatchComponent&&!1!==this._watchComponent.enabled&&(this._timer+=t,!(this._timer<this.refreshRate))){this._timer=0;var e=this._oldValue,o=this.getComponentValue();this._oldValue!==o&&(this._oldValue=this.getComponentValue(),this.onValueController(o,e))}},e}(l)).prototype,"controller",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=e(V.prototype,"watchPath",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=e(V.prototype,"componentName",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=e(V.prototype,"componentProperty",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=e(V.prototype,"refreshRate",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),C=V))||C)||C)||C)||C));i._RF.pop()}}}));

System.register("chunks:///_virtual/VMEnv.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env"],(function(n){var e,t,u;return{setters:[function(n){e=n.createClass},function(n){t=n.cclegacy},function(n){u=n.EDITOR}],execute:function(){t._RF.push({},"fdf72Q91PdCXpPQ+62s1ufi","VMEnv",void 0);n("VMEnv",function(){function n(){}return e(n,null,[{key:"editor",get:function(){return u}}]),n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/VMEvent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VMBase.ts"],(function(e){var t,r,n,i,a,o,c,l,u,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,c=e.CCString,l=e.Enum,u=e.EventHandler},function(e){s=e.VMBase}],execute:function(){var f,p,h,b,d,g,m,v,y,M,w,E,V,k,z,P,A,C;a._RF.push({},"a9ce7kf8XZJeLPlT2iWn2zD","VMEvent",void 0);var D=o.ccclass,_=o.property,B=o.executeInEditMode,I=o.menu,L=o.help,O=function(e){return e[e.none=0]="none",e[e["=="]=1]="==",e[e["!="]=2]="!=",e[e[">"]=3]=">",e[e[">="]=4]=">=",e[e["<"]=5]="<",e[e["<="]=6]="<=",e}(O||{});e("default",(f=I("ModelViewer/VM-EventCall(调用函数)"),p=L("https://gitee.com/dgflash/oops-framework/blob/master/doc/mvvm/VMEvent.md"),h=_({tooltip:"使用模板模式，可以使用多路径监听"}),b=_({tooltip:"监听获取值的路径",visible:function(){return!1===this.templateMode}}),d=_({tooltip:"触发一次后会自动关闭该事件"}),g=_({tooltip:"监听获取值的多条路径,这些值的改变都会通过这个函数回调,请使用 pathArr 区分获取的值 ",type:[c],visible:function(){return!0===this.templateMode}}),m=_({tooltip:"过滤模式，会根据条件过滤掉时间的触发",type:l(O)}),v=_({visible:function(){return this.filterMode!==O.none}}),y=_([u]),D(M=B(M=f(M=p((E=t((w=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"templateMode",E,i(t)),n(t,"watchPath",V,i(t)),n(t,"triggerOnce",k,i(t)),n(t,"watchPathArr",z,i(t)),n(t,"filterMode",P,i(t)),n(t,"compareValue",A,i(t)),n(t,"changeEvents",C,i(t)),t}r(t,e);var a=t.prototype;return a.onValueInit=function(){},a.onValueChanged=function(e,t,r){this.conditionCheck(e,this.compareValue)&&(Array.isArray(this.changeEvents)&&this.changeEvents.forEach((function(n){n.emit([e,t,r])})),!0===this.triggerOnce&&(this.enabled=!1))},a.conditionCheck=function(e,t){var r=O;switch(this.filterMode){case r.none:return!0;case r["=="]:if(e==t)return!0;break;case r["!="]:if(e!=t)return!0;break;case r["<"]:if(e<t)return!0;break;case r[">"]:if(e>t)return!0;break;case r[">="]:if(e>=t)return!0;break;case r["<"]:if(e<t)return!0;break;case r["<="]:if(e<=t)return!0}return!1},t}(s)).prototype,"templateMode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),V=t(w.prototype,"watchPath",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),k=t(w.prototype,"triggerOnce",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=t(w.prototype,"watchPathArr",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=t(w.prototype,"filterMode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.none}}),A=t(w.prototype,"compareValue",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),C=t(w.prototype,"changeEvents",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=w))||M)||M)||M)||M));a._RF.pop()}}}));

System.register("chunks:///_virtual/VMLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StringFormat.ts","./VMBase.ts","./VMEnv.ts"],(function(t){var e,r,i,a,n,l,o,s,c,u,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){n=t.cclegacy,l=t._decorator,o=t.CCString,s=t.error},function(t){c=t.StringFormatFunction},function(t){u=t.VMBase},function(t){h=t.VMEnv}],execute:function(){var p,f,m,g,b,d,V,v,M,y,L,T;n._RF.push({},"545c05XsG9GDJispEGWKvYv","VMLabel",void 0);var w=l.ccclass,x=l.property,A=l.menu,F=l.executeInEditMode,P=l.help,R="cc.Label";t("default",(p=A("ModelViewer/VM-Label(文本VM)"),f=P("https://gitee.com/dgflash/oops-framework/blob/master/doc/mvvm/VMLabel.md"),m=x({tooltip:"是否启用模板代码,只能在运行时之前设置,\n将会动态解析模板语法 {{0}},并且自动设置监听的路径"}),g=x({visible:function(){return!1===this.templateMode}}),b=x({readonly:!0}),d=x({type:[o],visible:function(){return!0===this.templateMode}}),w(V=F(V=p(V=f((M=e((v=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return e=t.call.apply(t,[this].concat(n))||this,i(e,"templateMode",M,a(e)),i(e,"watchPath",y,a(e)),i(e,"labelType",L,a(e)),i(e,"watchPathArr",T,a(e)),e.templateValueArr=[],e.templateFormatArr=[],e.originText=null,e}r(e,t);var n=e.prototype;return n.onRestore=function(){this.checkLabel()},n.onLoad=function(){t.prototype.onLoad.call(this),this.checkLabel(),h.editor||this.templateMode&&(this.originText=this.getLabelValue(),this.parseTemplate())},n.start=function(){h.editor||this.onValueInit()},n.parseTemplate=function(){var t=/\{\{(.+?)\}\}/,e=this.originText.match(/\{\{(.+?)\}\}/g);if(null!=e)for(var r=0;r<e.length;r++){var i=e[r].match(t)[1].split(":")[1]||"";this.templateFormatArr[r]=i}},n.getReplaceText=function(){if(!this.originText)return"";var t=/\{\{(.+?)\}\}/,e=this.originText.match(/\{\{(.+?)\}\}/g);if(null==e)return"";for(var r=this.originText,i=0;i<e.length;i++){var a,n=e[i],l=n.match(t),o=parseInt(l[1]||"0")||0,s=this.templateFormatArr[i];a=this.templateValueArr[o],r=r.replace(n,this.getValueFromFormat(a,s))}return r},n.getValueFromFormat=function(t,e){return c.deal(t,e)},n.onValueInit=function(){if(!1===this.templateMode)this.setLabelValue(this.VM.getValue(this.watchPath));else{for(var t=this.watchPathArr.length,e=0;e<t;e++)this.templateValueArr[e]=this.VM.getValue(this.watchPathArr[e],"?");this.setLabelValue(this.getReplaceText())}},n.onValueChanged=function(t,e,r){if(!1===this.templateMode)this.setLabelValue(t);else{var i=r.join("."),a=this.watchPathArr.findIndex((function(t){return t===i}));a>=0&&(this.templateValueArr[a]=t,this.setLabelValue(this.getReplaceText()))}},n.setLabelValue=function(t){this.getComponent(this.labelType).string=t+""},n.getLabelValue=function(){return this.getComponent(this.labelType).string},n.checkLabel=function(){for(var t=["cc.Label","cc.RichText","cc.EditBox"],e=0;e<t.length;e++){var r=t[e];if(this.node.getComponent(r))return this.labelType=r,!0}return s("没有挂载任何label组件"),!1},e}(u)).prototype,"templateMode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=e(v.prototype,"watchPath",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),L=e(v.prototype,"labelType",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R}}),T=e(v.prototype,"watchPathArr",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=v))||V)||V)||V)||V));n._RF.pop()}}}));

System.register("chunks:///_virtual/VMModify.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VMBase.ts"],(function(t){var e,a,i,n,u,r,l,o;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){u=t.cclegacy,r=t._decorator,l=t.Enum},function(t){o=t.VMBase}],execute:function(){var s,h,c,v,M,p,f,d,m,V,b,w,y,g;u._RF.push({},"7d2a4voaOJJGJZRWFPG6Bk7","VMModify",void 0);var P=r.ccclass,I=r.property,A=r.menu,C=r.help,N=function(t){return t[t.MIN=0]="MIN",t[t.MAX=1]="MAX",t[t.MIN_MAX=2]="MIN_MAX",t}(N||{});t("default",(s=A("ModelViewer/VM-Modify(修改Model)"),h=C("https://gitee.com/dgflash/oops-framework/blob/master/doc/mvvm/VMModify.md"),c=I({tooltip:"监视对象路径"}),v=I({tooltip:"是不启用取值范围限制"}),M=I({type:l(N),visible:function(){return!0===this.valueClamp}}),p=I({visible:function(){return!0===this.valueClamp&&this.valueClampMode!==N.MAX}}),f=I({visible:function(){return!0===this.valueClamp&&this.valueClampMode!==N.MIN}}),P(d=s(d=h((V=e((m=function(t){function e(){for(var e,a=arguments.length,u=new Array(a),r=0;r<a;r++)u[r]=arguments[r];return e=t.call.apply(t,[this].concat(u))||this,i(e,"watchPath",V,n(e)),i(e,"valueClamp",b,n(e)),i(e,"valueClampMode",w,n(e)),i(e,"valueMin",y,n(e)),i(e,"valueMax",g,n(e)),e}a(e,t);var u=e.prototype;return u.clampValue=function(t){var e=this.valueMin,a=this.valueMax;if(0==this.valueClamp)return t;switch(this.valueClampMode){case N.MIN_MAX:t>a&&(t=a),t<e&&(t=e);break;case N.MIN:t<e&&(t=e);break;case N.MAX:t>a&&(t=a)}return t},u.vAddInt=function(t,e){this.vAdd(t,e,!0)},u.vSubInt=function(t,e){this.vSub(t,e,!0)},u.vMulInt=function(t,e){this.vMul(t,e,!0)},u.vDivInt=function(t,e){this.vDiv(t,e,!0)},u.vAdd=function(t,e,a){void 0===a&&(a=!1);var i=parseFloat(e),n=this.VM.getValue(this.watchPath,0)+i;a&&(n=Math.round(n)),this.VM.setValue(this.watchPath,this.clampValue(n))},u.vSub=function(t,e,a){void 0===a&&(a=!1);var i=parseFloat(e),n=this.VM.getValue(this.watchPath,0)-i;a&&(n=Math.round(n)),this.VM.setValue(this.watchPath,this.clampValue(n))},u.vMul=function(t,e,a){void 0===a&&(a=!1);var i=parseFloat(e),n=this.VM.getValue(this.watchPath,0)*i;a&&(n=Math.round(n)),this.VM.setValue(this.watchPath,this.clampValue(n))},u.vDiv=function(t,e,a){void 0===a&&(a=!1);var i=parseFloat(e),n=this.VM.getValue(this.watchPath,0)/i;a&&(n=Math.round(n)),this.VM.setValue(this.watchPath,this.clampValue(n))},u.vString=function(t,e){var a=e;this.VM.setValue(this.watchPath,a)},u.vNumberInt=function(t,e){this.vNumber(t,e,!0)},u.vNumber=function(t,e,a){void 0===a&&(a=!1);var i=parseFloat(e);a&&(i=Math.round(i)),this.VM.setValue(this.watchPath,this.clampValue(i))},e}(o)).prototype,"watchPath",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=e(m.prototype,"valueClamp",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=e(m.prototype,"valueClampMode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return N.MIN_MAX}}),y=e(m.prototype,"valueMin",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=e(m.prototype,"valueMax",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),d=m))||d)||d)||d));u._RF.pop()}}}));

System.register("chunks:///_virtual/VMParent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameComponent.ts","./ViewModel.ts"],(function(t){var n,e,o,a,r;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator},function(t){a=t.GameComponent},function(t){r=t.VM}],execute:function(){var i;e._RF.push({},"15ccciO+ZRH476sPKD/LvB7","VMParent",void 0);var c=o.ccclass,s=o.help,h=o.executionOrder;t("default",c(i=h(-1)(i=s("https://gitee.com/dgflash/oops-framework/blob/master/doc/mvvm/VMParent.md")(i=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return(n=t.call.apply(t,[this].concat(o))||this).tag="_temp",n.data={},n.VM=r,n}n(e,t);var o=e.prototype;return o.onLoad=function(){if(null!=this.data){this.tag="_temp<"+this.node.uuid.replace(".","")+">",r.add(this.data,this.tag);for(var n=this.getVMComponents(),e=0;e<n.length;e++){var o=n[e];this.replaceVMPath(o,this.tag)}this.onBind(),t.prototype.onLoad.call(this)}},o.onBind=function(){},o.onUnBind=function(){},o.replaceVMPath=function(t,n){var e=t.watchPath;if(1==t.templateMode){var o=t.watchPathArr;if(o)for(var a=0;a<o.length;a++){var r=o[a];o[a]=r.replace("*",n)}}else"*"===e.split(".")[0]&&(t.watchPath=e.replace("*",n))},o.getVMComponents=function(){var t=this,n=this.node.getComponentsInChildren("VMBase"),e=this.node.getComponentsInChildren("VMParent").filter((function(n){return n.uuid!==t.uuid})),o=[];return e.forEach((function(t){o=o.concat(t.getComponentsInChildren("VMBase"))})),n=n.filter((function(t){return o.indexOf(t)<0}))},o.onDestroy=function(){this.onUnBind(),r.remove(this.tag),this.data=null,t.prototype.onDestroy.call(this)},e}(a))||i)||i)||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/VMProgress.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StringFormat.ts","./VMCustom.ts","./VMEnv.ts"],(function(t){var e,r,a,i,n,o,s,l,u,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,o=t._decorator,s=t.CCString},function(t){l=t.StringFormatFunction},function(t){u=t.VMCustom},function(t){h=t.VMEnv}],execute:function(){var c,p,m,V,f,g,d,v,P,w;n._RF.push({},"2a50eqI7JZNV5Sh0y/Qd9C6","VMProgress",void 0);var M=o.ccclass,b=o.property,y=o.menu,A=o.help;t("default",(c=y("ModelViewer/VM-Progress (VM-进度条)"),p=A("https://gitee.com/dgflash/oops-framework/blob/master/doc/mvvm/VMProgress.md"),m=b({visible:!1,override:!0}),V=b({type:[s],tooltip:"第一个值是min 值，第二个值 是 max 值，会计算出两者的比例"}),f=b({visible:function(){return"string"===this.componentProperty},tooltip:"字符串格式化，和 VMLabel 的字段一样，需要填入对应的格式化字符串"}),M(g=c(g=p((v=e((d=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,a(e,"watchPath",v,i(e)),a(e,"watchPathArr",P,i(e)),e.templateMode=!0,a(e,"stringFormat",w,i(e)),e}r(e,t);var n=e.prototype;return n.onLoad=function(){(this.watchPathArr.length<2||"[min]"==this.watchPathArr[0]||"[max]"==this.watchPathArr[1])&&console.error("VMProgress must have two values!"),t.prototype.onLoad.call(this)},n.start=function(){h.editor||this.onValueInit()},n.onValueInit=function(){for(var t=this.watchPathArr.length,e=0;e<t;e++)this.templateValueArr[e]=this.VM.getValue(this.watchPathArr[e]);var r=this.templateValueArr[0]/this.templateValueArr[1];this.setComponentValue(r)},n.setComponentValue=function(e){if(""!==this.stringFormat){var r=l.deal(e,this.stringFormat);t.prototype.setComponentValue.call(this,r)}else t.prototype.setComponentValue.call(this,e)},n.onValueController=function(t,e){var r=Math.round(t*this.templateValueArr[1]);Number.isNaN(r)&&(r=0),this.VM.setValue(this.watchPathArr[0],r)},n.onValueChanged=function(t,e,r){if(!1!==this.templateMode){var a=r.join("."),i=this.watchPathArr.findIndex((function(t){return t===a}));i>=0&&(this.templateValueArr[i]=t);var n=this.templateValueArr[0]/this.templateValueArr[1];n>1&&(n=1),(n<0||Number.isNaN(n))&&(n=0),this.setComponentValue(n)}},e}(u)).prototype,"watchPath",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),P=e(d.prototype,"watchPathArr",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["[min]","[max]"]}}),w=e(d.prototype,"stringFormat",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=d))||g)||g)||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/VMState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VMBase.ts","./ViewModel.ts"],(function(e){var t,i,n,o,a,r,l,u,c,s,p,h,f,N,C,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,l=e.Enum,u=e.CCInteger,c=e.Node,s=e.Button,p=e.Sprite,h=e.UIRenderer,f=e.color,N=e.UIOpacity},function(e){C=e.VMBase},function(e){b=e.VM}],execute:function(){var d,v,O,m,E,y,A,T,_,g,V,M,D,w,I,S,P,k,L,R,z,B,U,Y,F,X,G,j,x,H,q;a._RF.push({},"47052uw/Y5O1LXaLObj4ARx","VMState",void 0);var J=r.ccclass,K=r.property,Q=r.menu,W=r.help,Z=function(e){return e[e["=="]=0]="==",e[e["!="]=1]="!=",e[e[">"]=2]=">",e[e[">="]=3]=">=",e[e["<"]=4]="<",e[e["<="]=5]="<=",e[e.range=6]="range",e}(Z||{}),$=function(e){return e[e.NODE_ACTIVE=0]="NODE_ACTIVE",e[e.NODE_VISIBLE=1]="NODE_VISIBLE",e[e.NODE_OPACITY=2]="NODE_OPACITY",e[e.NODE_COLOR=3]="NODE_COLOR",e[e.COMPONENT_CUSTOM=4]="COMPONENT_CUSTOM",e[e.SPRITE_GRAYSCALE=5]="SPRITE_GRAYSCALE",e[e.BUTTON_INTERACTABLE=6]="BUTTON_INTERACTABLE",e}($||{}),ee=function(e){return e[e.NODE_INDEX=0]="NODE_INDEX",e[e.NODE_NAME=1]="NODE_NAME",e}(ee||{});e("default",(d=Q("ModelViewer/VM-State (VM状态控制)"),v=W("https://github.com/wsssheep/cocos_creator_mvvm_tools/blob/master/docs/VMState.md"),O=K({tooltip:"遍历子节点,根据子节点的名字或名字转换为值，判断值满足条件 来激活"}),m=K({type:l(Z)}),E=K({type:l(ee),tooltip:"遍历子节点,根据子节点的名字转换为值，判断值满足条件 来激活",visible:function(){return!0===this.foreachChildMode}}),y=K({displayName:"Value: a",visible:function(){return!1===this.foreachChildMode}}),A=K({displayName:"Value: b",visible:function(){return!1===this.foreachChildMode&&this.condition===Z.range}}),T=K({type:l($),tooltip:"一旦满足条件就对节点执行操作"}),_=K({visible:function(){return this.valueAction===$.NODE_OPACITY},range:[0,255],type:u,displayName:"Action Opacity"}),g=K({visible:function(){return this.valueAction===$.NODE_COLOR},displayName:"Action Color"}),V=K({visible:function(){return this.valueAction===$.COMPONENT_CUSTOM},displayName:"Component Name"}),M=K({visible:function(){return this.valueAction===$.COMPONENT_CUSTOM},displayName:"Component Property"}),D=K({visible:function(){return this.valueAction===$.COMPONENT_CUSTOM},displayName:"Default Value"}),w=K({visible:function(){return this.valueAction===$.COMPONENT_CUSTOM},displayName:"Action Value"}),I=K({type:[c],tooltip:"需要执行条件的节点，如果不填写则默认会执行本节点以及本节点的所有子节点 的状态"}),J(S=d(S=v((k=t((P=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,n(t,"watchPath",k,o(t)),n(t,"foreachChildMode",L,o(t)),n(t,"condition",R,o(t)),n(t,"foreachChildType",z,o(t)),n(t,"valueA",B,o(t)),n(t,"valueB",U,o(t)),n(t,"valueAction",Y,o(t)),n(t,"valueActionOpacity",F,o(t)),n(t,"valueActionColor",X,o(t)),n(t,"valueComponentName",G,o(t)),n(t,"valueComponentProperty",j,o(t)),n(t,"valueComponentDefaultValue",x,o(t)),n(t,"valueComponentActionValue",H,o(t)),n(t,"watchNodes",q,o(t)),t}i(t,e);var a=t.prototype;return a.onLoad=function(){e.prototype.onLoad.call(this),0==this.watchNodes.length&&(this.valueAction!==$.NODE_ACTIVE&&!1===this.foreachChildMode&&this.watchNodes.push(this.node),this.watchNodes=this.watchNodes.concat(this.node.children))},a.start=function(){this.enabled&&this.onValueInit()},a.onValueInit=function(){var e=b.getValue(this.watchPath);this.checkNodeFromValue(e)},a.onValueChanged=function(e,t,i){this.checkNodeFromValue(e)},a.checkNodeFromValue=function(e){var t=this;if(this.foreachChildMode)this.watchNodes.forEach((function(i,n){var o=t.foreachChildType===ee.NODE_INDEX?n:i.name,a=t.conditionCheck(e,o);t.setNodeState(i,a)}));else{var i=this.conditionCheck(e,this.valueA,this.valueB);this.setNodesStates(i)}},a.setNodesStates=function(e){var t=this,i=this.watchNodes,n=e;i.forEach((function(e){t.setNodeState(e,n)}))},a.setNodeState=function(e,t){var i=t;switch(this.valueAction){case $.NODE_ACTIVE:e.active=!!i;break;case $.NODE_VISIBLE:var n=e.getComponent(N);null==n&&(n=e.addComponent(N)),n&&(n.opacity=i?255:0);break;case $.NODE_OPACITY:var o=e.getComponent(N);null==o&&(o=e.addComponent(N)),o&&(o.opacity=i?this.valueActionOpacity:255);break;case $.NODE_COLOR:var a=e.getComponent(h);a&&(a.color=i?this.valueActionColor:f(255,255,255));break;case $.COMPONENT_CUSTOM:var r=e.getComponent(this.valueComponentName);if(null==r)return;this.valueComponentProperty in r&&(r[this.valueComponentProperty]=i?this.valueComponentActionValue:this.valueComponentDefaultValue);break;case $.SPRITE_GRAYSCALE:var l=e.getComponent(p);l&&(l.grayscale=i);break;case $.BUTTON_INTERACTABLE:var u=e.getComponent(s);u&&(u.interactable=i)}},a.conditionCheck=function(e,t,i){var n=Z;switch(this.condition){case n["=="]:if(e==t)return!0;break;case n["!="]:if(e!=t)return!0;break;case n["<"]:if(e<t)return!0;break;case n[">"]:if(e>t)return!0;break;case n[">="]:if(e>=t)return!0;break;case n["<"]:if(e<t)return!0;break;case n["<="]:if(e<=t)return!0;break;case n.range:if(e>=t&&e<=i)return!0}return!1},t}(C)).prototype,"watchPath",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),L=t(P.prototype,"foreachChildMode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),R=t(P.prototype,"condition",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Z["=="]}}),z=t(P.prototype,"foreachChildType",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ee.NODE_INDEX}}),B=t(P.prototype,"valueA",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),U=t(P.prototype,"valueB",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Y=t(P.prototype,"valueAction",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.NODE_ACTIVE}}),F=t(P.prototype,"valueActionOpacity",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),X=t(P.prototype,"valueActionColor",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f(155,155,155)}}),G=t(P.prototype,"valueComponentName",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),j=t(P.prototype,"valueComponentProperty",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),x=t(P.prototype,"valueComponentDefaultValue",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),H=t(P.prototype,"valueComponentActionValue",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),q=t(P.prototype,"watchNodes",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=P))||S)||S)||S));a._RF.pop()}}}));

System.register("chunks:///_virtual/WebSock.ts",["cc","./Logger.ts"],(function(t){var e,n;return{setters:[function(t){e=t.cclegacy},function(t){n=t.Logger}],execute:function(){e._RF.push({},"70df2VbIU9B66Fr+op8FKJp","WebSock",void 0);t("WebSock",function(){function t(){this._ws=null,this.onConnected=null,this.onMessage=null,this.onError=null,this.onClosed=null}var e=t.prototype;return e.connect=function(t){var e=this;if(this._ws&&this._ws.readyState===WebSocket.CONNECTING)return n.logNet("websocket connecting, wait for a moment..."),!1;var s=null;if(t.url)s=t.url;else{var o=t.ip,r=t.port;s=t.protocol+"://"+o+":"+r}return this._ws=new WebSocket(s),this._ws.binaryType=t.binaryType?t.binaryType:"arraybuffer",this._ws.onmessage=function(t){(0,e.onMessage)(t.data)},this._ws.onopen=this.onConnected,this._ws.onerror=this.onError,this._ws.onclose=this.onClosed,!0},e.send=function(t){return this._ws&&this._ws.readyState==WebSocket.OPEN?(this._ws.send(t),1):-1},e.close=function(t,e){this._ws&&this._ws.close(t,e)},t}());e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});